{"version":3,"sources":["webpack:///osjsClient/webpack/universalModuleDefinition","webpack:///osjsClient/webpack/bootstrap","webpack:///osjsClient/node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/createClass.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/inherits.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///osjsClient/osjsEventEmitter/webpack/universalModuleDefinition","webpack:///osjsClient/osjsEventEmitter/webpack/bootstrap","webpack:///osjsClient/osjsEventEmitter/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///osjsClient/osjsEventEmitter/node_modules/@babel/runtime/helpers/createClass.js","webpack:///osjsClient/osjsEventEmitter/index.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/get.js","webpack:///osjsClient/node_modules/deepmerge/dist/cjs.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///osjsClient/src/library.ts","webpack:///osjsClient/node_modules/@babel/runtime/regenerator/index.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///osjsClient/node_modules/isobject/index.js","webpack:///osjsClient/node_modules/omit-deep/index.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/typeof.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///osjsClient/src/graph.ts","webpack:///osjsClient/src/mutex.ts","webpack:///osjsClient/node_modules/is-plain-object/index.js","webpack:///osjsClient/node_modules/unset-value/index.js","webpack:///osjsClient/node_modules/has-value/index.js","webpack:///osjsClient/node_modules/has-value/node_modules/isobject/index.js","webpack:///osjsClient/node_modules/isarray/index.js","webpack:///osjsClient/node_modules/has-values/index.js","webpack:///osjsClient/node_modules/get-value/index.js","webpack:///osjsClient/node_modules/regenerator-runtime/runtime.js","webpack:///osjsClient/src/core.js","webpack:///osjsClient/src/utils.js","webpack:///osjsClient/src/service-provider.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///osjsClient/node_modules/js-cookie/src/js.cookie.js","webpack:///osjsClient/node_modules/simplejsonconf/dist/main.js","webpack:///osjsClient/(webpack)/buildin/global.js","webpack:///osjsClient/node_modules/css-mediaquery/index.js","webpack:///osjsClient/node_modules/dateformat/lib/dateformat.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/construct.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack:///osjsClient/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///osjsClient/src/styles/logo-blue-32x32.png","webpack:///osjsClient/src/logger.js","webpack:///osjsClient/src/utils/windows.js","webpack:///osjsClient/src/websocket.js","webpack:///osjsClient/src/utils/dnd.js","webpack:///osjsClient/src/utils/dom.js","webpack:///osjsClient/src/window.js","webpack:///osjsClient/src/application.js","webpack:///osjsClient/src/utils/locale.js","webpack:///osjsClient/src/splash.js","webpack:///osjsClient/src/styles/wallpaper.png","webpack:///osjsClient/src/config.js","webpack:///osjsClient/src/utils/fetch.js","webpack:///osjsClient/src/utils/url.js","webpack:///osjsClient/src/utils/input.js","webpack:///osjsClient/node_modules/hyperapp/src/index.js","webpack:///osjsClient/src/utils/vfs.js","webpack:///osjsClient/src/utils/desktop.js","webpack:///osjsClient/src/adapters/ui/iconview.js","webpack:///osjsClient/src/utils/colors.js","webpack:///osjsClient/src/adapters/ui/search.js","webpack:///osjsClient/src/adapters/search/vfs.js","webpack:///osjsClient/src/search.js","webpack:///osjsClient/src/desktop.js","webpack:///osjsClient/src/notification.js","webpack:///osjsClient/src/notifications.js","webpack:///osjsClient/src/window-behavior.js","webpack:///osjsClient/src/adapters/ui/login.js","webpack:///osjsClient/src/login.js","webpack:///osjsClient/src/adapters/auth/localstorage.js","webpack:///osjsClient/src/auth.js","webpack:///osjsClient/src/adapters/auth/server.js","webpack:///osjsClient/src/session.js","webpack:///osjsClient/src/utils/preloader.js","webpack:///osjsClient/src/utils/packages.js","webpack:///osjsClient/src/packages.js","webpack:///osjsClient/src/tray.js","webpack:///osjsClient/src/clipboard.js","webpack:///osjsClient/src/middleware.js","webpack:///osjsClient/src/locale/en_EN.js","webpack:///osjsClient/src/locale/fr_FR.js","webpack:///osjsClient/src/locale/nb_NO.js","webpack:///osjsClient/src/locale/sl_SI.js","webpack:///osjsClient/src/locale/vi_VN.js","webpack:///osjsClient/src/locale/de_DE.js","webpack:///osjsClient/src/locale/zh_CN.js","webpack:///osjsClient/src/locale/fa_FA.js","webpack:///osjsClient/src/locale/pt_BR.js","webpack:///osjsClient/src/locale/ru_RU.js","webpack:///osjsClient/src/locale/tr_TR.js","webpack:///osjsClient/src/locale/sv_SE.js","webpack:///osjsClient/src/basic-application.js","webpack:///osjsClient/src/providers/core.js","webpack:///osjsClient/src/providers/desktop.js","webpack:///osjsClient/src/providers/notifications.js","webpack:///osjsClient/src/vfs.js","webpack:///osjsClient/src/adapters/vfs/null.js","webpack:///osjsClient/src/adapters/vfs/system.js","webpack:///osjsClient/src/adapters/vfs/apps.js","webpack:///osjsClient/src/filesystem.js","webpack:///osjsClient/src/providers/vfs.js","webpack:///osjsClient/src/providers/auth.js","webpack:///osjsClient/src/adapters/settings/localstorage.js","webpack:///osjsClient/src/settings.js","webpack:///osjsClient/src/adapters/settings/server.js","webpack:///osjsClient/src/providers/settings.js","webpack:///osjsPanels/webpack/universalModuleDefinition","webpack:///osjsPanels/webpack/bootstrap","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/createClass.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/inherits.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/get.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///osjsPanels/node_modules/@babel/runtime/regenerator/index.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///osjsPanels/node_modules/@osjs/event-emitter/dist/main.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///osjsPanels/node_modules/regenerator-runtime/runtime.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/typeof.js","webpack:///osjsPanels/(webpack)/buildin/global.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///osjsPanels/node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///osjsPanels/node_modules/hyperapp/src/index.js","webpack:///osjsPanels/src/panel-item.js","webpack:///osjsPanels/src/locales.js","webpack:///osjsPanels/src/panel.js","webpack:///osjsPanels/src/items/windows.js","webpack:///osjsPanels/src/items/tray.js","webpack:///osjsPanels/src/items/clock.js","webpack:///osjsPanels/src/logo-blue-32x32.png","webpack:///osjsPanels/src/items/menu.js","webpack:///osjsPanels/src/provider.js","webpack:///../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///../node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///../node_modules/hyperapp/src/index.js","webpack:///../src/components/Element.js","webpack:///../node_modules/@babel/runtime/helpers/typeof.js","webpack:///../src/components/BoxStyled.js","webpack:///../src/components/Icon.js","webpack:///../src/utils.js","webpack:///../node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///../src/components/Menu.js","webpack:///../node_modules/hyperapp-nestable/src/index.js","webpack:///../src/components/Panes.js","webpack:///../src/components/Tabs.js","webpack:///../src/components/ListView.js","webpack:///../src/components/IconView.js","webpack:///../node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///../src/components/Expander.js","webpack:///../src/components/Label.js","webpack:///../node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///../node_modules/@babel/runtime/helpers/createClass.js","webpack:///../node_modules/regenerator-runtime/runtime.js","webpack:///../src/contextmenu.js","webpack:///../src/provider.js","webpack:///osjsDialogs/webpack/universalModuleDefinition","webpack:///osjsDialogs/webpack/bootstrap","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/createClass.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/get.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/inherits.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/typeof.js","webpack:///osjsDialogs/node_modules/@babel/runtime/regenerator/index.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///osjsDialogs/node_modules/is-plain-object/index.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/toPrimitive.js","webpack:///osjsDialogs/node_modules/isobject/index.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///osjsDialogs/node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///osjsDialogs/node_modules/hyperapp/src/index.js","webpack:///osjsDialogs/node_modules/deepmerge/dist/es.js","webpack:///osjsDialogs/src/components/Element.js","webpack:///osjsDialogs/src/components/Box.js","webpack:///osjsDialogs/src/components/BoxContainer.js","webpack:///osjsDialogs/src/components/BoxStyled.js","webpack:///osjsDialogs/src/components/Icon.js","webpack:///osjsDialogs/src/utils.js","webpack:///osjsDialogs/src/element.js","webpack:///osjsDialogs/src/components/Button.js","webpack:///osjsDialogs/src/components/Progressbar.js","webpack:///osjsDialogs/src/components/Menu.js","webpack:///osjsDialogs/src/components/Toolbar.js","webpack:///osjsDialogs/node_modules/hyperapp-nestable/src/index.js","webpack:///osjsDialogs/src/components/ListView.js","webpack:///osjsDialogs/src/components/Panes.js","webpack:///osjsDialogs/src/components/Tabs.js","webpack:///osjsDialogs/src/components/IconView.js","webpack:///osjsDialogs/src/components/TextField.js","webpack:///osjsDialogs/src/components/TextareaField.js","webpack:///osjsDialogs/src/components/SelectField.js","webpack:///osjsDialogs/src/components/ToggleField.js","webpack:///osjsDialogs/src/components/RangeField.js","webpack:///osjsDialogs/src/components/Expander.js","webpack:///osjsDialogs/src/components/Label.js","webpack:///osjsDialogs/node_modules/regenerator-runtime/runtime.js","webpack:///osjsDialogs/src/contextmenu.js","webpack:///osjsDialogs/src/provider.js","webpack:///osjsDialogs/src/dialog.js","webpack:///osjsDialogs/src/dialogs/alert.js","webpack:///osjsDialogs/src/dialogs/confirm.js","webpack:///osjsDialogs/src/dialogs/prompt.js","webpack:///osjsDialogs/src/dialogs/progress.js","webpack:///osjsDialogs/src/dialogs/color.js","webpack:///osjsDialogs/src/dialogs/font.js","webpack:///osjsDialogs/src/dialogs/file.js","webpack:///osjsDialogs/src/dialogs/choice.js","webpack:///osjsDialogs/src/dialogs/default-application.js","webpack:///osjsDialogs/src/dialogs/custom.js"],"names":["window","module","exports","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","protoProps","staticProps","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","arr","subClass","superClass","constructor","_typeof","assertThisInitialized","self","default","getEventNames","Array","String","replace","split","EventEmitter","arguments","this","events","e","callback","options","forEach","push","on","once","force","filter","ev","persist","splice","args","apply","console","warn","superPropBase","_get","Reflect","receiver","base","desc","getOwnPropertyDescriptor","isMergeableObject","stringValue","toString","$$typeof","REACT_ELEMENT_TYPE","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","val","isArray","defaultArrayMerge","source","concat","map","element","getKeys","keys","getOwnPropertySymbols","symbol","propertyIsEnumerable","propertyIsOnObject","_","arrayMerge","sourceIsArray","destination","customMerge","all","array","Error","reduce","prev","next","deepmerge_1","ReferenceError","require","len","arr2","isObject","unset","omitDeep","j","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","err","_setPrototypeOf","iterator","arrayLikeToArray","iter","from","minLen","slice","test","hasNode","nodes","outgoingEdges","incomingEdges","includes","indexOf","getNode","dependenciesOf","signalDependenciesReady","dependentsOf","awaitData","hasData","clearData","reset","log","_name","_promise","mutex","_data","await","locked","ready","catch","_this","clearMutex","readyTest","waiting","isObjectObject","ctor","prot","has","prop","segs","last","pop","shift","hasValues","noZero","join","a","b","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isNaN","doneResult","displayName","isGeneratorFunction","genFun","mark","awrap","async","reverse","skipTempReset","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","CoreBase","defaultConfiguration","configuration","u","merger","merge","omitted","omit","logger","booted","started","destroyed","providers","core","instances","registry","createGraph","list","graph","Graph","provides","provider","addNode","Node","wants","dependsOptions","depends","dependsInstance","dindex","findIndex","some","addDependency","traverse","register","ref","init","before","singleton","make","found","find","destroy","promises","f","defaultValue","tree","assign","ServiceProvider","arrayWithHoles","iterableToArrayLimit","nonIterableRest","mergeObject","globalThis","factory","extend","attributes","decode","decodeURIComponent","converter","api","set","document","path","defaults","expires","Date","toUTCString","JSON","stringify","write","encodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","json","jar","cookies","parts","read","parse","getJSON","remove","withConverter","y","return","g","match","mediaQuery","parseQuery","query","inverse","typeMatch","expressionsMatch","expressions","every","expression","feature","modifier","expValue","toLowerCase","toPx","toDpi","toDecimal","parseInt","RE_MEDIA_QUERY","RE_MQ_EXPRESSION","RE_MQ_FEATURE","RE_LENGTH_UNIT","RE_RESOLUTION_UNIT","captures","trim","parsed","ratio","numbers","decimal","Number","resolution","parseFloat","global","token","timezone","timezoneClip","dateFormat","date","mask","utc","gmt","kindOf","maskSlice","masks","D","H","M","L","getTimezoneOffset","W","getWeek","N","getDayOfWeek","flags","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","Math","round","timeNames","tt","T","TT","Z","floor","abs","S","targetThursday","getFullYear","getMonth","getDate","setDate","getDay","firstThursday","ds","setHours","getHours","weekDiff","dow","isNativeReflectConstruct","_construct","Parent","Class","construct","objectWithoutPropertiesLoose","excluded","sourceSymbolKeys","_i","_s","_e","_arr","_n","_d","_regeneratorRuntime","sham","Proxy","Boolean","valueOf","sourceKeys","methods","middleware","input","current","assignMethods","thisArg","bindMethod","addMiddleware","clearMiddleware","createAttributes","attrs","classNames","modal","ontop","gravity","moveable","resizable","focusable","maximizable","minimizable","sessionable","closeable","header","controls","visibility","shadowDOM","clamp","droppable","mediaQueries","small","medium","big","minDimension","width","height","maxDimension","createState","title","id","icon","defaultIcon","media","moving","resizing","loading","focused","maximized","minimized","zIndex","styles","position","left","top","dimension","max","clampPosition","rect","maxLeft","maxTop","min","renderCallback","win","$content","attachShadow","getMediaQueryName","orientation","screen","matchMedia","$element","offsetWidth","offsetHeight","loadOptionsFromConfig","config","appName","windowId","matchStringOrRegex","str","matcher","RegExp","application","foundOptions","eventNames","Websocket","uri","debug","closed","connected","connecting","reconnecting","connectfailed","reconnect","interval","open","connection","_attachEvents","clearInterval","reconnected","emit","_destroyConnection","setInterval","WebSocket","send","close","retval","getDataTransfer","data","files","dataTransfer","transfer","getData","setDataTransfer","effect","setDragImage","hasDragImage","transferData","el","effectAllowed","setData","draggable","ondragstart","ondragend","setter","dragstart","setAttribute","dragend","removeAttribute","removeEventListener","classList","addEventListener","add","ondragenter","ondragover","ondragleave","ondrop","strict","dragenter","dragleave","dragover","preventDefault","contains","stopPropagation","dropEffect","drop","supported","supportsNativeNotification","style","root","src","createElement","onload","onerror","appendChild","script","opts","defer","onreadystatechange","readyState","createCssText","k","supportsPassive","playSound","volume","audio","Audio","play","supportsTransition","windows","windowCount","nextZindex","lastWindow","TEMPLATE","Window","parent","template","ondestroy","wid","children","rendered","inited","$header","$icon","$title","_preventDefaultPosition","_loadingDebounce","_template","_ondestroy","_lastCssText","_lastAttributes","w","foundIndex","_initTemplate","_initBehavior","tpl","innerHTML","querySelector","transform","attr","isInteger","getRect","behavior","setState","focus","_setClassNames","_updateButtons","_updateAttributes","_updateStyles","_updateTitle","_updateIconStyles","_updateHeaderStyles","_checkModal","gravitate","clampToViewport","setNextZindex","$contents","setTimeout","_toggleState","_focus","blur","activeElement","ae","_maximize","toggle","container","firstChild","innerBox","parentNode","getBoundingClientRect","outerBox","diffY","ceil","diffX","topHeight","setDimension","update","_checkNextZindex","setZindex","_setState","clearTimeout","hasVertical","hasHorizontal","setPosition","oldValue","eventName","windexes","buttonmap","action","display","querySelectorAll","escapedTitle","text","div","textContent","iconSource","backgroundImage","headerDisplay","applyAttrs","cssText","lang","applications","applicationCount","getSettingsKey","metadata","Application","defaultSettings","settings","pid","windowAutoFocus","workers","requestOptions","sockets","ws","worker","terminate","getSession","run","forcePreload","restore","url","resource","request","socket","filename","Worker","credentials","msg","translate","configWindows","applyOptions","minimize","maximize","defaultFilter","proc","filterFn","service","save","Splash","$loading","className","show","createTextNode","$root","prefixMap","nb","sprintfRegex","sprintfMatcher","getLocale","defaultLocale","userLocale","getFromList","ul","dl","fallbackList","localizedList","fmt","translatableFlat","translatable","clientLocale","nav","browserLanguage","userLanguage","language","toUpperCase","langs","languages","navigator","acceptedLocales","lenght","createUri","pathname","location","href","en_EN","nb_NO","vi_VN","fr_FR","de_DE","sl_SI","zh_CN","fa_FA","pt_BR","ru_RU","tr_TR","sv_SE","development","process","standalone","http","ping","public","connectInterval","disabled","packages","manifest","hidden","permissions","overrideMetadata","pinned","autostart","categories","label","science","games","graphics","network","multimedia","office","system","utilities","other","auth","ui","enabled","secure","login","username","password","defaultUserData","groups","lock","prefix","search","notifications","native","desktop","contextmenu","font","theme","sounds","icons","animations","panels","items","widgets","keybindings","background","defaultWallpaper","color","iconview","fontColorStyle","fontColor","locale","rtl","format","shortDate","mediumDate","longDate","fullDate","shortTime","longTime","lofi","mobile","moveKeybinding","vfs","watch","defaultPath","defaultAdapter","adapters","mountpoints","adapter","readOnly","globalBlacklist","globalWhitelist","encodeQueryData","entries","bodyTypes","ArrayBuffer","ArrayBufferView","Blob","File","URLSearchParams","FormData","createFetchOptions","fetchOptions","headers","body","hasBody","stringBody","fetchXhr","req","XMLHttpRequest","onError","onProgress","upload","lengthComputable","percentComplete","loaded","total","status","statusText","ok","getResponseHeader","responseText","arrayBuffer","response","v","setRequestHeader","responseType","fetch","createErrorRejection","op","xhr","contentType","urlResolver","endpoint","Core","splash","$resourceRoot","resourceRoot","user","protocol","host","destroyAll","groupEnd","start","group","defaultData","load","_createListeners","_createConnection","getApplications","pingTime","updateRootLocale","cb","wasConnected","params","message","launch","file","mime","app","compatible","getCompatiblePackages","_openApplicationDialog","useDefault","choices","forceDialog","btn","choice","checked","pkg","apps","modifierNames","matchKeyCombo","combo","checkKeys","keyName","getEvent","clientX","clientY","touch","touches","changedTouches","rest","node","nodeName","actions","view","skipRender","rootElement","oldNode","recycleElement","childNodes","nodeType","nodeValue","lifecycle","isRecycling","globalState","wiredActions","wireStateToActions","getPartialState","scheduleRender","setPartialState","resolveNode","render","patch","isSvg","newElement","createElementNS","oncreate","updateAttribute","insertBefore","removeElement","oldAttributes","onupdate","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","getKey","newKey","keyedNode","out","eventListener","event","currentTarget","setProperty","removeChild","removeChildren","onremove","parentDirectory","item","index","pathJoin","sortString","localeCompare","sortDate","sortDefault","sortFn","sortMap","size","mtime","ctime","atime","createSpecials","specials","isDirectory","isFile","stat","createFileReader","ab","FileReader","onloadend","humanFileSize","bytes","si","thresh","units","toFixed","transformReaddir","showHiddenFiles","sortBy","sortDir","filterHidden","substr","sorter","modify","humanSize","sortedSpecial","sort","sortedDirectories","sortedFiles","transformArrayBuffer","getFileIcon","re","createFileIter","parent_id","basename","parseMountpointPrefix","filterMountByGroups","userGroups","mountGroups","createWatchEvents","movement","imageDropMimes","validVfsDrop","isDroppingImage","createPanelSubtraction","panel","subtraction","right","bottom","isVisible","getState","resourceResolver","elem","canPlayType","mp3","mp4","oga","getThemeName","ogv","defaultTheme","getSoundThemeName","themeResource","soundResource","soundsEnabled","getMetadataFromName","extension","tapper","timer","timeout","tapped","onDropAction","shortcut","addEntry","uploadEntries","isRootElement","DesktopIconView","oldRoot","reload","_render","fileIcon","themeIcon","copy","readdir","readfile","writefile","unlink","mkdir","shortcuts","contents","supressError","results","computeLabel","getPackages","createLabelComputer","selected","setEntries","openDropContextMenu","droppedImage","createDropContextMenu","openContextMenu","createFileContextMenu","createRootContextMenu","openEntry","selectEntry","dest","removeEntry","fromUI","class","oncontextmenu","onclick","shiftKey","ontouchstart","ondblclick","applySettings","_createWatcher","menu","listener","off","hex","invert","custom","fs","resultView","scrollIntoView","visible","placeholder","onblur","oninput","setQuery","onkeydown","keyCode","setPreviousIndex","setNextIndex","resetIndex","hide","onkeypress","ee","hyperapp","setError","setResults","VFSSearchAdapter","pattern","mount","lists","Search","focusLastWindow","providedAdapters","useAdapters","A","createUI","flat","Desktop","$theme","$icons","contextmenuEntries","keyboardContext","subtract","_removeIcons","_removeTheme","initConnectionEvents","initUIEvents","initDragEvents","initKeyboardEvents","initGlobalKeyboardEvents","initMouseEvents","initBaseEvents","initLocales","initDeveloperTray","_updateCSS","_clampWindows","tray","onDeveloperMenu","onDropContextMenu","selectionStart","selectionEnd","tagName","isInput","isWithin","substring","onContextMenu","moved","onmousemove","onmouseup","resizeDebounce","history","pushState","URL","rtls","checkRTL","isRtl","isMobile","resize","getWindows","newSettings","lockSettings","userSettings","applyOverlays","removeAll","fontFamily","backgroundRepeat","backgroundPosition","backgroundSize","backgroundColor","applyTheme","applyIcons","applyIconView","_applyTheme","elements","errors","storageItems","clear","relaunch","extras","hasIconview","useDefaults","__","themes","defaultItems","_applySettingsByKey","provided","ctx","Notification","defaultLabel","sound","renderCustom","Notif","notification","permission","requestPermission","Notifications","setElementStyles","createElementStyles","defaultPosition","carry","isPassive","touchArg","passive","actionMap","WindowBehavior","lastAction","$lofi","mousedown","onmousedown","click","dblclick","onicondblclick","iconDblclick","oniconclick","iconClick","ontrasitionend","pos","startY","newX","CASCADE_DISTANCE","getAttribute","raise","actionCallback","attributeSet","checkMove","maxPosition","directions","going","dir","xDir","yDir","resizer","move","mousemove","transformedEvent","posX","posY","mouseup","createView","logo","createSide","side","formFields","fields","field","autocapitalize","autocomplete","createFields","stamp","onsubmit","submit","Login","$container","startHidden","setLoading","localStorageAuth","defaultAdapters","server","logout","localStorage","createUi","defaultUi","createAdapter","Auth","autologin","Cookies","sameSite","shutdown","Session","session","fresh","Preloader","cached","success","_load","successes","res","failed","createPackageAvailabilityCheck","getUser","checks","strictGroups","perm","blacklist","Packages","_running","preloader","_autostart","addPackages","_preloadBackgroundFiles","_launchTheme","_launchApplication","signaled","foundApp","_launch","preloads","_getPreloads","fileType","packageType","canLaunch","dialog","alert","stack","fail","meta","configured","override","append","filterAvailable","mimeType","mimes","backgroundFiles","filenames","Tray","handler","defaultTitle","Clipboard","clipboard","Middleware","ERR_REQUEST_STANDALONE","ERR_REQUEST_NOT_OK","ERR_VFS_MOUNT_NOT_FOUND","ERR_VFS_MOUNT_NOT_FOUND_FOR","ERR_VFS_MOUNT_NOT_MOUNTED","ERR_VFS_MOUNT_ALREADY_MOUNTED","ERR_VFS_PATH_FORMAT_INVALID","ERR_PACKAGE_PERMISSION_DENIED","ERR_PACKAGE_NOT_FOUND","ERR_PACKAGE_LOAD","ERR_PACKAGE_NO_RUNTIME","ERR_PACKAGE_NO_METADATA","ERR_PACKAGE_EXCEPTION","ERR_WINDOW_ID_EXISTS","ERR_INVALID_LOCALE","LBL_CONNECTION_LOST","LBL_CONNECTION_LOST_MESSAGE","LBL_CONNECTION_RESTORED","LBL_CONNECTION_RESTORED_MESSAGE","LBL_CONNECTION_FAILED","LBL_CONNECTION_FAILED_MESSAGE","LBL_APP_CAT_DEVELOPMENT","LBL_APP_CAT_SCIENCE","LBL_APP_CAT_GAMES","LBL_APP_CAT_GRAPHICS","LBL_APP_CAT_NETWORK","LBL_APP_CAT_MULTIMEDIA","LBL_APP_CAT_OFFICE","LBL_APP_CAT_SYSTEM","LBL_APP_CAT_UTILITIES","LBL_APP_CAT_OTHER","LBL_LAUNCH_SELECT","LBL_LAUNCH_SELECT_MESSAGE","LBL_DESKTOP_SELECT_WALLPAPER","LBL_DESKTOP_SELECT_THEME","LBL_SEARCH_TOOLTOP","LBL_SEARCH_PLACEHOLDER","LBL_SEARCH_WAIT","LBL_SEARCH_RESULT","LBL_DESKTOP_SET_AS_WALLPAPER","LBL_FS_B","LBL_FS_M","LBL_FS_G","LBL_FS_KIB","LBL_FS_MIB","LBL_FS_GIB","LBL_TOP","LBL_LEFT","LBL_RIGHT","LBL_BOTTOM","LBL_MENU","LBL_ERROR","LBL_INFO","LBL_MESSAGE","LBL_WARNINIG","LBL_SUCCESS","LBL_FAILURE","LBL_WINDOW","LBL_WINDOWS","LBL_NOTIFICATION","LBL_NOTIFICATIONS","LBL_TRAY","LBL_NAME","LBL_TYPE","LBL_SIZE","LBL_FILE","LBL_NEW","LBL_OPEN","LBL_OPEN_WITH","LBL_SAVE","LBL_SAVEAS","LBL_OK","LBL_ABORT","LBL_CANCEL","LBL_CLOSE","LBL_QUIT","LBL_YES","LBL_NO","LBL_GO","LBL_MKDIR","LBL_MKFILE","LBL_COPY","LBL_PASTE","LBL_CUT","LBL_MOVE","LBL_RENAME","LBL_DELETE","LBL_DOWNLOAD","LBL_REFRESH","LBL_RELOAD","LBL_HOME","LBL_VIEW","LBL_HELP","LBL_ABOUT","LBL_APPLICATION","LBL_APPLICATIONS","LBL_KILL","LBL_KILL_ALL","LBL_MINIMIZE","LBL_MAXIMIZE","LBL_RESTORE","LBL_RAISE","LBL_SHADE","LBL_UNSHADE","LBL_ONTOP","LBL_RESIZE","LBL_BACK","LBL_FORWARD","LBL_UPLOAD","LBL_IMAGE","LBL_CREATE_SHORTCUT","LBL_REMOVE_SHORTCUT","LBL_EDIT","BasicApplication","mimeTypes","loadMimeTypes","saveMimeTypes","defaultFilename","currentFile","_createTitle","setTitle","getDialogOptions","_setFile","updateWindowTitle","createDialog","CoreServiceProvider","pm","OSjs","createGlobalApi","registerContracts","_onDistChanged","_onPackageChanged","createWindowContract","createLocaleContract","createDnDContract","createDOMContract","createThemeContract","createSoundsContract","createSessionContract","createPackagesContract","createClipboardContract","createMiddlewareContract","createTrayContract","windowBehavior","freeze","blacklisted","notWhitelisted","strs","translations","locales","useFormat","dateformat","setLocale","dnd","absoluteSrc","running","DesktopServiceProvider","createDesktopContract","setKeyboardContext","addContextMenuEntries","addContextMenu","NotificationServiceProvider","capabilityCache","pathToObject","handleDirectoryList","capabilities","binary","to","rename","exists","download","createObjectURL","revokeObjectURL","searchable","nullAdapter","unmount","getters","passthrough","formData","pkgs","Filesystem","mounts","systemAdapter","appsAdapter","proxy","VFS","_request","stopOnError","_getConfiguredMountpoints","_mountpointAction","automount","createMountpoint","_mountAction","addMountpoint","mountpoint","coreEventName","_adapter","mounted","_requestAction","srcMount","getMountpointFromPath","destMount","sameAdapter","local","mg","ms","VFSServiceProvider","createVFSContract","createFilesystemContract","mountAll","iconMap","utils","getMounts","AuthServiceProvider","createAuthContract","localStorageSettings","removeItem","setItem","startsWith","getItem","kk","fromEntries","Settings","debounce","promise","simplejsonconf","sjc","SettingsServiceProvider","createSettingsContract","undefined","LBL_PANEL_ALL","LBL_PANEL_REMOVE","LBL_PANELITEM_ADD","LBL_PANELITEM_REMOVE","LBL_PANEL_POSITION","LBL_SAVE_AND_LOG_OUT","LBL_LOG_OUT","LBL_LAUNCHING","Panel","addItem","PanelItem","filterVisibility","change","addLauncher","launchers","removeLauncher","onlaunch","mapWindow","onlaunched","onchange","setTray","ClockPanelItem","increment","time","sortByLabel","configuredCategories","createItem","category","cat","createCategoryTree","onmenuopen","makeMenu","alt","clock","classRef","updateElement","unitValue","boxPropNames","grow","flexGrow","shrink","flexShrink","basis","flexBasis","align","alignItems","justify","justifyContent","padding","margin","Element","givenClassNames","defaultStyle","Icon","doubleTap","Menu","level","child","inner","onmouseover","onshow","ontouchend","nestable","tagname","_$r","wired","_$p","_$c","_$u","uninit","panes","spacers","fill","pane","previousSibling","maxWidth","maxHeight","setSize","sizes","flex","labels","selectedIndex","setSelectedIndex","active","ative","ontoggle","box","makeInvokeMethod","ContextMenu","clampTimeout","isActive","newPosition","currentPosition","offY","offX","overflowRight","overflowBottom","clampMenu","offsetParent","clampSubMenu","Event","onclose","validContextMenuTarget","isValid","GUIServiceProvider","getElementById","contextmenuApi","_this2","toPropertyKey","toPrimitive","hint","prim","methodName","_x","_r","unwrapExports","createCommonjsModule","_toConsumableArray","I","E","x","Element$1","Box","BoxContainer","_defineProperty","filteredProps","createField","onenter","Button","Progressbar","Toolbar","ListView","columns","unshift","onactivate","onselect","hideColumns","zebra","rows","onscroll","scrollTop","listView","select","activate","created","scroll","setRows","setColumns","setScrollTop","panes$1","TextField","autocorrect","spellcheck","TextareaField","SelectField","parseValue","ToggleField","RangeField","_asyncToGenerator","_classCallCheck","_createClass","regenerator","_typeof2","view$3","dialogCount","Dialog","buttons","plain","calledBack","defs","positive","cancel","yes","no","emitCallback","getNegativeButton","focusButton","createButtons","states","getValue","snd","AlertDialog","_Dialog","_inherits","_super","_createSuper","readonly","ConfirmDialog","yesno","PromptDialog","setValue","getPositiveButton","ProgressDialog","progress","setProgress","setStatus","componentToHex","_ref","ColorDialog","rgb","canvas","gradient","getContext","createLinearGradient","addColorStop","fillStyle","fillRect","initialState","rangeContainer","setComponent","updateHex","setColor","_ref2","cx","cy","getImageData","_slicedToArray","FontDialog","minSize","maxSize","unit","fonts","fontSizes","fontNames","fontStyles","initialActions","setFont","setStyle","fontSize","fontWeight","fontStyle","overflow","whiteSpace","FileDialog","filetype","startingLocation","listview","_readdir","setButtonState","setMountpoint","setPath","_callee","_context","_x2","setFilename","_ref3","_ref4","isSave","buttonCancel","hasVfs","confirm","ChoiceDialog","setCurrent","DefaultApplicationDialog","setLocalState","oldState","newState","setChecked","CustomDialog","valueCallback","_this3","dialogWindow","_objectSpread","$el","DialogServiceProvider","prompt","defaultApplication","_init"],"mappings":"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","file":"vendors~osjs.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"osjsClient\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsClient\"] = factory();\n\telse\n\t\troot[\"osjsClient\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 26);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsEventEmitter\"] = factory();\n\telse\n\t\troot[\"osjsEventEmitter\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*\n * Gets an array of event names based in input,\n * be it array or a comma separated string.\n */\nconst getEventNames = name => (name instanceof Array)\n  ? name\n  : String(name).replace(/\\s+/g, '').split(',');\n\n/**\n * Event Emitter\n *\n * @desc A standards compatible event handler (observer) with some sugar.\n */\nexport class EventEmitter {\n\n  /**\n   * Create Event Handler\n   * @param {string} [name] A name for logging\n   */\n  constructor(name = 'undefined') {\n    /**\n     * The name of the handler\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * Registered events\n     * @type {object}\n     */\n    this.events = {};\n  }\n\n  /**\n   * Destroys all events\n   */\n  destroy() {\n    this.events = {};\n  }\n\n  /**\n   * Add an event handler\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {string|string[]} name Event name\n   * @param {Function} callback Callback function\n   * @param {object} [options] Options\n   * @param {boolean} [options.persist] This even handler cannot be removed unless forced\n   * @param {boolean} [options.once] Fire only once\n   * @return {EventEmitter} Returns current instance\n   */\n  on(name, callback, options = {}) {\n    options = options || {};\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Invalid callback');\n    }\n\n    getEventNames(name).forEach(n => {\n      if (!this.events[n]) {\n        this.events[n] = [];\n      }\n\n      this.events[n].push({callback, options});\n    });\n\n    return this;\n  }\n\n  /**\n   * Adds an event handler that only fires once\n   * @return {EventEmitter} Returns current instance\n   */\n  once(name, callback) {\n    return this.on(name, callback, {once: true});\n  }\n\n  /**\n   * Removes an event handler\n   *\n   * If no callback is provided, all events bound to given name will be removed.\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {string|string[]} name Event name\n   * @param {Function} [callback] Callback function\n   * @param {boolean} [force=false] Forces removal even if set to persis\n   * @return {EventEmitter} Returns current instance\n   */\n  off(name, callback = null, force = false) {\n    getEventNames(name)\n      .filter(n => !!this.events[n])\n      .forEach(n => {\n        if (callback) {\n          let i = this.events[n].length;\n          while (i--) {\n            const ev = this.events[n][i];\n            const removable = !ev.options.persist || force;\n            if (removable && ev.callback === callback) {\n              this.events[n].splice(i, 1);\n            }\n          }\n        } else {\n          this.events[n] = force\n            ? []\n            : this.events[n].filter(({options}) => options.persist === true);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Emits an event\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {string|string[]} name Event name\n   * @param {*} [args] Arguments\n   * @return {EventEmitter} Returns current instance\n   */\n  emit(name, ...args) {\n    getEventNames(name).forEach(n => {\n      if (this.events[n]) {\n        let i = this.events[n].length;\n        while (i--) {\n          const {options, callback} = this.events[n][i];\n\n          try {\n            callback(...args);\n          } catch (e) {\n            console.warn(e);\n          }\n\n          if (options && options.once) {\n            this.events[n].splice(i, 1);\n          }\n        }\n      }\n    });\n\n    return this;\n  }\n\n}\n","var superPropBase = require(\"./superPropBase.js\");\n\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get.bind(), module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _get.apply(this, arguments);\n}\n\nmodule.exports = _get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./graph\"));\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlicmFyeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9saWJyYXJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNkJBQXdCIn0=","module.exports = require(\"regenerator-runtime\");\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","'use strict';\n\nvar isObject = require('is-plain-object');\nvar unset = require('unset-value');\n\nmodule.exports = function omitDeep(value, keys) {\n  if (typeof value === 'undefined') {\n    return {};\n  }\n\n  if (Array.isArray(value)) {\n    for (var i = 0; i < value.length; i++) {\n      value[i] = omitDeep(value[i], keys);\n    }\n    return value;\n  }\n\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (typeof keys === 'string') {\n    keys = [keys];\n  }\n\n  if (!Array.isArray(keys)) {\n    return value;\n  }\n\n  for (var j = 0; j < keys.length; j++) {\n    unset(value, keys[j]);\n  }\n\n  for (var key in value) {\n    if (value.hasOwnProperty(key)) {\n      value[key] = omitDeep(value[key], keys);\n    }\n  }\n\n  return value;\n};\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mutex_1 = require(\"./mutex\");\r\n/**\r\n * Base dependency graph class.\r\n */\r\nvar Graph = /** @class */ (function () {\r\n    function Graph() {\r\n        this.nodes = {};\r\n        this.outgoingEdges = {};\r\n        this.incomingEdges = {};\r\n    }\r\n    /**\r\n     * Add a node to the graph.\r\n     * @param node Node object.\r\n     */\r\n    Graph.prototype.addNode = function (node) {\r\n        if (this.hasNode(node.name))\r\n            throw new Error(\"A node with the name of \\\"\" + node.name + \"\\\" already exists in the graph!\");\r\n        this.nodes[node.name] = node;\r\n        this.outgoingEdges[node.name] = [];\r\n        this.incomingEdges[node.name] = [];\r\n    };\r\n    /**\r\n     * Remove a node by name from the graph.\r\n     * @param name Node name.\r\n     */\r\n    Graph.prototype.removeNode = function (name) {\r\n        if (!this.hasNode(name))\r\n            throw new Error(\"A node with the name of \\\"\" + name + \"\\\" does not exist in the graph!\");\r\n        delete this.nodes[name];\r\n        delete this.outgoingEdges[name];\r\n        delete this.incomingEdges[name];\r\n        for (var dependent in this.incomingEdges) {\r\n            if (this.incomingEdges[dependent].includes(name))\r\n                this.incomingEdges[dependent].splice(dependent.indexOf(name), 1);\r\n        }\r\n        for (var dependency in this.outgoingEdges) {\r\n            if (this.outgoingEdges[dependency].includes(name))\r\n                this.outgoingEdges[dependency].splice(dependency.indexOf(name), 1);\r\n        }\r\n    };\r\n    /**\r\n     * Checks to see if the graph contains a Node by name.\r\n     * @param name Node name.\r\n     */\r\n    Graph.prototype.hasNode = function (name) {\r\n        return this.nodes.hasOwnProperty(name);\r\n    };\r\n    Object.defineProperty(Graph.prototype, \"size\", {\r\n        /**\r\n         * Returns the number of nodes in a graph.\r\n         */\r\n        get: function () {\r\n            return Object.keys(this.nodes).length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns the Node instance given a node name.\r\n     * @param name Node name.\r\n     */\r\n    Graph.prototype.getNode = function (name) {\r\n        if (this.hasNode(name))\r\n            return this.nodes[name];\r\n        throw new Error(\"Node \\\"\" + name + \"\\\" not found!\");\r\n    };\r\n    /**\r\n     *  Adds a node dependence. \"from\" is dependent on \"to\"\r\n     *  @param from Node name.\r\n     *  @param to  Node name.\r\n     */\r\n    Graph.prototype.addDependency = function (from, to) {\r\n        if (!this.hasNode(from))\r\n            throw new Error(\"Node does not exist: \" + from);\r\n        if (!this.hasNode(to))\r\n            throw new Error(\"Node does not exist: \" + to);\r\n        if (from === to)\r\n            throw new Error(\"Cannot add self dependency: \" + to);\r\n        if (!this.outgoingEdges[from].includes(to)) {\r\n            this.outgoingEdges[from].push(to);\r\n        }\r\n        if (!this.incomingEdges[to].includes(from)) {\r\n            this.incomingEdges[to].push(from);\r\n        }\r\n    };\r\n    /**\r\n     * Removes a node dependence. \"from\" is no longer dependent on \"to\".\r\n     * @param from Node name.\r\n     * @param to  Node name.\r\n     * @todo Test this function.\r\n     */\r\n    Graph.prototype.removeDependency = function (from, to) {\r\n        console.warn('removeDependency() has not been tested.');\r\n        if (!this.hasNode(from))\r\n            throw new Error(\"Node does not exist: \" + from);\r\n        if (!this.hasNode(to))\r\n            throw new Error(\"Node does not exist: \" + to);\r\n        if (from === to)\r\n            throw new Error(\"Cannot remove self dependency: \" + to);\r\n        if (!this.outgoingEdges[from].includes(to)) {\r\n            this.outgoingEdges[from].splice(this.outgoingEdges[from].indexOf(to), 1);\r\n        }\r\n        if (!this.incomingEdges[to].includes(from)) {\r\n            this.incomingEdges[to].splice(this.incomingEdges[to].indexOf(to), 1);\r\n        }\r\n    };\r\n    /**\r\n     * Get dependency node names for a Node by name. (Required nodes for this node to execute).\r\n     * @param name Node name.\r\n     */\r\n    Graph.prototype.dependenciesOf = function (name) {\r\n        return this.outgoingEdges[name];\r\n    };\r\n    /**\r\n     * Get dependents node names for a Node by name. (Nodes that require this node to complete).\r\n     * @param name Node name.\r\n     */\r\n    Graph.prototype.dependentsOf = function (name) {\r\n        return this.incomingEdges[name];\r\n    };\r\n    /**\r\n     * Breadth first search.\r\n     */\r\n    Graph.prototype.traverse = function () {\r\n        var _this = this;\r\n        // Clear all complete node mutexes.\r\n        Object.keys(this.nodes).map(function (name) { return _this.getNode(name).clearMutex(); });\r\n        // Visiting a node recursively calls visit on each node's dependents.\r\n        var visit = function (node) {\r\n            // First await all dependencies\r\n            return Promise.all(_this.dependenciesOf(node.name).map(function (dependencyName) { return _this.nodes[dependencyName].awaitData(); }))\r\n                .then(function () {\r\n                node.signalDependenciesReady();\r\n                if (_this.dependentsOf(node.name).length > 0) {\r\n                    // Then recursively visit all dependents\r\n                    return Promise.all(_this.dependentsOf(node.name).map(function (dependentName) { return visit(_this.getNode(dependentName)); }));\r\n                }\r\n                else {\r\n                    // node has no dependents so await data\r\n                    return node.awaitData();\r\n                }\r\n            });\r\n        };\r\n        // Find nodes with no dependencies\r\n        var rootNodeNames = Object.keys(this.nodes).filter(function (name) { return _this.dependenciesOf(name).length === 0; });\r\n        if (rootNodeNames.length === 0 && Object.keys(this.nodes).length > 0)\r\n            return Promise.reject(new Error('The graph is circular. Cannot traverse graph due to no root node.'));\r\n        // Start recursive traversal from root nodes.\r\n        return Promise.all(rootNodeNames.map(function (name) { return visit(_this.nodes[name]); }));\r\n    };\r\n    /**\r\n     * Clears the value of a node and the values of dependent nodes\r\n     * @param name Node name.\r\n     */\r\n    Graph.prototype.clearNodeAndDependents = function (name) {\r\n        var _this = this;\r\n        var node = this.getNode(name);\r\n        var visitAndClear = function (node) {\r\n            if (node.hasData()) {\r\n                node.clearData();\r\n                return Promise.all(_this.dependentsOf(node.name).map(function (dependentName) { return visitAndClear(_this.getNode(dependentName)); }));\r\n            }\r\n            else {\r\n                return Promise.resolve();\r\n            }\r\n        };\r\n        return visitAndClear(node);\r\n    };\r\n    /**\r\n     * Resets the graph by resetting each node in the graph.\r\n     */\r\n    Graph.prototype.reset = function () {\r\n        for (var name in this.nodes) {\r\n            this.nodes[name].reset();\r\n        }\r\n    };\r\n    /**\r\n     * Prints graph nodes and node dependents.\r\n     */\r\n    Graph.prototype.ls = function () {\r\n        for (var name in this.nodes) {\r\n            console.log(name);\r\n            console.log(this.dependentsOf(name));\r\n        }\r\n    };\r\n    return Graph;\r\n}());\r\nexports.Graph = Graph;\r\nvar Node = /** @class */ (function () {\r\n    function Node(name, promise) {\r\n        this.locked = false;\r\n        this._name = name;\r\n        this._promise = promise;\r\n    }\r\n    Object.defineProperty(Node.prototype, \"name\", {\r\n        get: function () {\r\n            return this._name;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Await data.\r\n     * @returns A `Promise<T | null>` that resolves when the node's data is ready.\r\n     */\r\n    Node.prototype.awaitData = function () {\r\n        var _this = this;\r\n        if (!this.mutex) {\r\n            this.mutex = new mutex_1.Mutex(function () { return _this._data !== undefined; });\r\n        }\r\n        return new Promise(function (resolve, reject) {\r\n            _this.mutex.await(function (error) {\r\n                if (error)\r\n                    return reject(error);\r\n                resolve(_this._data);\r\n            });\r\n        });\r\n    };\r\n    Node.prototype.signalDependenciesReady = function () {\r\n        var _this = this;\r\n        if (!this.mutex) {\r\n            this.mutex = new mutex_1.Mutex(function () { return _this._data !== undefined; });\r\n        }\r\n        if (this._data === undefined) {\r\n            // Only allow to _promise once\r\n            if (this.locked === true)\r\n                return;\r\n            this.locked = true;\r\n            var promise = this._promise();\r\n            if (promise === undefined)\r\n                throw new Error(\"Node \\\"\" + this._name + \"\\\" has undefined promise.\");\r\n            promise.then(function (data) {\r\n                _this._data = data;\r\n                _this.locked = false;\r\n                _this.mutex.ready();\r\n            }).catch(function (error) {\r\n                _this._data = null;\r\n                _this.locked = false;\r\n                _this.mutex.ready(error);\r\n            });\r\n        }\r\n        else {\r\n            // Allow _data to be set externally from promise\r\n            this.mutex.ready();\r\n        }\r\n    };\r\n    Node.prototype.setData = function (data) {\r\n        this._data = data;\r\n        this.signalDependenciesReady();\r\n    };\r\n    /**\r\n     * Resets node. Clears all node data and resets its mutex.\r\n     */\r\n    Node.prototype.reset = function () {\r\n        this.clearData();\r\n        this.clearMutex();\r\n    };\r\n    Node.prototype.clearMutex = function () {\r\n        if (this.hasData())\r\n            this.mutex = undefined;\r\n    };\r\n    Node.prototype.hasData = function () {\r\n        return this._data !== undefined;\r\n    };\r\n    Node.prototype.clearData = function () {\r\n        this._data = undefined;\r\n    };\r\n    return Node;\r\n}());\r\nexports.Node = Node;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZ3JhcGgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpQ0FBZ0M7QUFFaEM7O0dBRUc7QUFDSDtJQUFBO1FBQ1ksVUFBSyxHQUE2QixFQUFFLENBQUM7UUFDckMsa0JBQWEsR0FBaUMsRUFBRSxDQUFDO1FBQ2pELGtCQUFhLEdBQWlDLEVBQUUsQ0FBQztJQWlMN0QsQ0FBQztJQS9LRzs7O09BR0c7SUFDSSx1QkFBTyxHQUFkLFVBQWUsSUFBVTtRQUNyQixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQTRCLElBQUksQ0FBQyxJQUFJLG9DQUFnQyxDQUFDLENBQUM7UUFDcEgsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNuQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUVEOzs7T0FHRztJQUNJLDBCQUFVLEdBQWpCLFVBQWtCLElBQVk7UUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBNEIsSUFBSSxvQ0FBZ0MsQ0FBQyxDQUFDO1FBQzNHLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4QixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLEtBQUssSUFBTSxTQUFTLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUN4QyxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztnQkFDNUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUN4RTtRQUNELEtBQUssSUFBTSxVQUFVLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUN6QyxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztnQkFDN0MsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUMxRTtJQUNMLENBQUM7SUFFRDs7O09BR0c7SUFDSSx1QkFBTyxHQUFkLFVBQWUsSUFBWTtRQUN2QixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFLRCxzQkFBSSx1QkFBSTtRQUhSOztXQUVHO2FBQ0g7WUFDSSxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUMxQyxDQUFDOzs7T0FBQTtJQUVEOzs7T0FHRztJQUNJLHVCQUFPLEdBQWQsVUFBZSxJQUFZO1FBQ3ZCLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7WUFDbEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVCLE1BQU0sSUFBSSxLQUFLLENBQUMsWUFBUyxJQUFJLGtCQUFjLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLDZCQUFhLEdBQXBCLFVBQXFCLElBQVksRUFBRSxFQUFVO1FBQ3pDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQXdCLElBQU0sQ0FBQyxDQUFDO1FBQ3pFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQXdCLEVBQUksQ0FBQyxDQUFDO1FBQ3JFLElBQUksSUFBSSxLQUFLLEVBQUU7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLGlDQUErQixFQUFJLENBQUMsQ0FBQztRQUV0RSxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDeEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDckM7UUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDeEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDckM7SUFDTCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxnQ0FBZ0IsR0FBdkIsVUFBd0IsSUFBWSxFQUFFLEVBQVU7UUFDNUMsT0FBTyxDQUFDLElBQUksQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQXdCLElBQU0sQ0FBQyxDQUFDO1FBQ3pFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQXdCLEVBQUksQ0FBQyxDQUFDO1FBQ3JFLElBQUksSUFBSSxLQUFLLEVBQUU7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLG9DQUFrQyxFQUFJLENBQUMsQ0FBQztRQUV6RSxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDeEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDNUU7UUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDeEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDeEU7SUFDTCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksOEJBQWMsR0FBckIsVUFBc0IsSUFBWTtRQUM5QixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVEOzs7T0FHRztJQUNJLDRCQUFZLEdBQW5CLFVBQW9CLElBQVk7UUFDNUIsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFRDs7T0FFRztJQUNJLHdCQUFRLEdBQWY7UUFBQSxpQkF5QkM7UUF4QkcsbUNBQW1DO1FBQ25DLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFBLElBQUksSUFBSSxPQUFBLEtBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxFQUFFLEVBQS9CLENBQStCLENBQUMsQ0FBQztRQUNyRSxxRUFBcUU7UUFDckUsSUFBTSxLQUFLLEdBQUcsVUFBQyxJQUFVO1lBQ3JCLCtCQUErQjtZQUMvQixPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUMsY0FBYyxJQUFLLE9BQUEsS0FBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBdEMsQ0FBc0MsQ0FBQyxDQUFDO2lCQUM3RyxJQUFJLENBQUM7Z0JBQ0YsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7Z0JBQy9CLElBQUksS0FBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtvQkFDekMsd0NBQXdDO29CQUN4QyxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUMsYUFBYSxJQUFLLE9BQUEsS0FBSyxDQUFDLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsRUFBbEMsQ0FBa0MsQ0FBQyxDQUFDLENBQUM7aUJBQy9HO3FCQUFNO29CQUNILHVDQUF1QztvQkFDdkMsT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7aUJBQzNCO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDWCxDQUFDLENBQUM7UUFFRixrQ0FBa0M7UUFDbEMsSUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQUMsSUFBSSxJQUFLLE9BQUEsS0FBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUF0QyxDQUFzQyxDQUFDLENBQUM7UUFDdkcsSUFBSSxhQUFhLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQztZQUFFLE9BQU8sT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxtRUFBbUUsQ0FBQyxDQUFDLENBQUM7UUFFNUssNkNBQTZDO1FBQzdDLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLFVBQUMsSUFBSSxJQUFLLE9BQUEsS0FBSyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBdkIsQ0FBdUIsQ0FBQyxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVEOzs7T0FHRztJQUNJLHNDQUFzQixHQUE3QixVQUE4QixJQUFZO1FBQTFDLGlCQVlDO1FBWEcsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoQyxJQUFNLGFBQWEsR0FBRyxVQUFDLElBQVU7WUFDN0IsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUU7Z0JBQ2hCLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztnQkFDakIsT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFBLGFBQWEsSUFBSSxPQUFBLGFBQWEsQ0FBQyxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQTFDLENBQTBDLENBQUMsQ0FBQyxDQUFDO2FBQ3JIO2lCQUFNO2dCQUNILE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO2FBQzVCO1FBRUwsQ0FBQyxDQUFDO1FBQ0YsT0FBTyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVEOztPQUVHO0lBQ0kscUJBQUssR0FBWjtRQUNJLEtBQUssSUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUMzQixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQzVCO0lBQ0wsQ0FBQztJQUVEOztPQUVHO0lBQ0ksa0JBQUUsR0FBVDtRQUNJLEtBQUssSUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUMzQixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQ3hDO0lBQ0wsQ0FBQztJQUNMLFlBQUM7QUFBRCxDQUFDLEFBcExELElBb0xDO0FBcExZLHNCQUFLO0FBc0xsQjtJQU1JLGNBQVksSUFBWSxFQUFFLE9BQTJCO1FBRDdDLFdBQU0sR0FBRyxLQUFLLENBQUM7UUFFbkIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUM7SUFDNUIsQ0FBQztJQUVELHNCQUFJLHNCQUFJO2FBQVI7WUFDSSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDdEIsQ0FBQzs7O09BQUE7SUFDRDs7O09BR0c7SUFDSSx3QkFBUyxHQUFoQjtRQUFBLGlCQVVDO1FBVEcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDYixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksYUFBSyxDQUFDLGNBQU0sT0FBQSxLQUFJLENBQUMsS0FBSyxLQUFLLFNBQVMsRUFBeEIsQ0FBd0IsQ0FBQyxDQUFDO1NBQzFEO1FBQ0QsT0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxNQUFNO1lBQy9CLEtBQUksQ0FBQyxLQUFNLENBQUMsS0FBSyxDQUFDLFVBQUMsS0FBSztnQkFDcEIsSUFBSSxLQUFLO29CQUFFLE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNoQyxPQUFPLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3hCLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sc0NBQXVCLEdBQTlCO1FBQUEsaUJBdUJDO1FBdEJHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2IsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLGFBQUssQ0FBQyxjQUFNLE9BQUEsS0FBSSxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQXhCLENBQXdCLENBQUMsQ0FBQztTQUMxRDtRQUNELElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQUU7WUFDMUIsOEJBQThCO1lBQzlCLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJO2dCQUFFLE9BQU87WUFDakMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDbkIsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2hDLElBQUksT0FBTyxLQUFLLFNBQVM7Z0JBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxZQUFTLElBQUksQ0FBQyxLQUFLLDhCQUEwQixDQUFDLENBQUM7WUFDMUYsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFDLElBQUk7Z0JBQ2QsS0FBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7Z0JBQ2xCLEtBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO2dCQUNwQixLQUFJLENBQUMsS0FBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ3hCLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxVQUFDLEtBQUs7Z0JBQ1gsS0FBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7Z0JBQ2xCLEtBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO2dCQUNwQixLQUFJLENBQUMsS0FBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM3QixDQUFDLENBQUMsQ0FBQztTQUNOO2FBQU07WUFDSCxnREFBZ0Q7WUFDaEQsSUFBSSxDQUFDLEtBQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUN2QjtJQUNMLENBQUM7SUFFTSxzQkFBTyxHQUFkLFVBQWUsSUFBUztRQUNwQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztJQUNuQyxDQUFDO0lBRUQ7O09BRUc7SUFDSSxvQkFBSyxHQUFaO1FBQ0ksSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBRU0seUJBQVUsR0FBakI7UUFDSSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDZCxJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztJQUMvQixDQUFDO0lBRU0sc0JBQU8sR0FBZDtRQUNJLE9BQU8sSUFBSSxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUM7SUFDcEMsQ0FBQztJQUVNLHdCQUFTLEdBQWhCO1FBQ0ksSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7SUFDM0IsQ0FBQztJQUNMLFdBQUM7QUFBRCxDQUFDLEFBaEZELElBZ0ZDO0FBaEZZLG9CQUFJIn0=","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Mutex = /** @class */ (function () {\r\n    function Mutex(readyTest) {\r\n        this.readyTest = readyTest;\r\n    }\r\n    Mutex.prototype.await = function (callback) {\r\n        if (this.readyTest() === true) {\r\n            callback();\r\n        }\r\n        else {\r\n            this.waiting = this.waiting || [];\r\n            this.waiting.push(callback);\r\n        }\r\n    };\r\n    // called when we know what we are waiting for is ready\r\n    Mutex.prototype.ready = function (error) {\r\n        if (this.waiting)\r\n            this.waiting.forEach(function (callback) { return callback(error); });\r\n        delete this.waiting;\r\n    };\r\n    return Mutex;\r\n}());\r\nexports.Mutex = Mutex;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbXV0ZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtJQUtJLGVBQW1CLFNBQXdCO1FBQ3ZDLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQy9CLENBQUM7SUFFTSxxQkFBSyxHQUFaLFVBQWEsUUFBZ0M7UUFDekMsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzNCLFFBQVEsRUFBRSxDQUFDO1NBQ2Q7YUFBTTtZQUNILElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUM7WUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDL0I7SUFDTCxDQUFDO0lBRUQsdURBQXVEO0lBQ2hELHFCQUFLLEdBQVosVUFBYSxLQUFhO1FBQ3RCLElBQUksSUFBSSxDQUFDLE9BQU87WUFDWixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFDLFFBQVEsSUFBSyxPQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBZixDQUFlLENBQUMsQ0FBQztRQUN4RCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUNMLFlBQUM7QUFBRCxDQUFDLEFBeEJELElBd0JDO0FBeEJZLHNCQUFLIn0=","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","/*!\n * unset-value <https://github.com/jonschlinkert/unset-value>\n *\n * Copyright (c) 2015, 2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\nvar has = require('has-value');\n\nmodule.exports = function unset(obj, prop) {\n  if (!isObject(obj)) {\n    throw new TypeError('expected an object.');\n  }\n  if (obj.hasOwnProperty(prop)) {\n    delete obj[prop];\n    return true;\n  }\n\n  if (has(obj, prop)) {\n    var segs = prop.split('.');\n    var last = segs.pop();\n    while (segs.length && segs[segs.length - 1].slice(-1) === '\\\\') {\n      last = segs.pop().slice(0, -1) + '.' + last;\n    }\n    while (segs.length) obj = obj[prop = segs.shift()];\n    return (delete obj[last]);\n  }\n  return true;\n};\n","/*!\n * has-value <https://github.com/jonschlinkert/has-value>\n *\n * Copyright (c) 2014-2016, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\nvar hasValues = require('has-values');\nvar get = require('get-value');\n\nmodule.exports = function(obj, prop, noZero) {\n  if (isObject(obj)) {\n    return hasValues(get(obj, prop), noZero);\n  }\n  return hasValues(obj, prop);\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nvar isArray = require('isarray');\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && isArray(val) === false;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * has-values <https://github.com/jonschlinkert/has-values>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function hasValue(o, noZero) {\n  if (o === null || o === undefined) {\n    return false;\n  }\n\n  if (typeof o === 'boolean') {\n    return true;\n  }\n\n  if (typeof o === 'number') {\n    if (o === 0 && noZero === true) {\n      return false;\n    }\n    return true;\n  }\n\n  if (o.length !== undefined) {\n    return o.length !== 0;\n  }\n\n  for (var key in o) {\n    if (o.hasOwnProperty(key)) {\n      return true;\n    }\n  }\n  return false;\n};\n","/*!\n * get-value <https://github.com/jonschlinkert/get-value>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\nmodule.exports = function(obj, prop, a, b, c) {\n  if (!isObject(obj) || !prop) {\n    return obj;\n  }\n\n  prop = toString(prop);\n\n  // allowing for multiple properties to be passed as\n  // a string or array, but much faster (3-4x) than doing\n  // `[].slice.call(arguments)`\n  if (a) prop += '.' + toString(a);\n  if (b) prop += '.' + toString(b);\n  if (c) prop += '.' + toString(c);\n\n  if (prop in obj) {\n    return obj[prop];\n  }\n\n  var segs = prop.split('.');\n  var len = segs.length;\n  var i = -1;\n\n  while (obj && (++i < len)) {\n    var key = segs[i];\n    while (key[key.length - 1] === '\\\\') {\n      key = key.slice(0, -1) + '.' + segs[++i];\n    }\n    obj = obj[key];\n  }\n  return obj;\n};\n\nfunction isObject(val) {\n  return val !== null && (typeof val === 'object' || typeof val === 'function');\n}\n\nfunction toString(val) {\n  if (!val) return '';\n  if (Array.isArray(val)) {\n    return val.join('.');\n  }\n  return val;\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {resolveTreeByKey, providerHandler} from './utils.js';\nimport {EventEmitter} from '@osjs/event-emitter';\nimport merge from 'deepmerge';\nimport omitDeep from 'omit-deep';\n\n/**\n * Core\n *\n * @desc Main class for OS.js service providers and bootstrapping.\n */\nexport class CoreBase extends EventEmitter {\n\n  /**\n   * Create core instance\n   * @param {Object} defaultConfiguration Default configuration\n   * @param {Object} configuration Configuration given\n   * @param {Object} options Options\n   */\n  constructor(defaultConfiguration, configuration, options) {\n    super('Core');\n\n    // https://github.com/KyleAMathews/deepmerge#webpack-bug\n    const merger = merge.default ? merge.default : merge;\n    const omitted = omitDeep(defaultConfiguration, options.omit || []);\n\n    this.logger = console;\n    this.configuration = merger(omitted, configuration);\n    this.options = options;\n    this.booted = false;\n    this.started = false;\n    this.destroyed = false;\n    this.providers = providerHandler(this);\n  }\n\n  /**\n   * Destroy core instance\n   */\n  destroy() {\n    if (this.destroyed) {\n      return false;\n    }\n\n    this.booted = false;\n    this.destroyed = true;\n    this.started = false;\n\n    const promises = this.providers.destroy();\n\n    super.destroy();\n\n    return promises;\n  }\n\n  /**\n   * Boots up OS.js\n   */\n  boot() {\n    if (this.booted) {\n      return Promise.resolve(true);\n    }\n\n    this.started = false;\n    this.destroyed = false;\n    this.booted = true;\n\n    return this.providers.init(true)\n      .then(() => true);\n  }\n\n  /**\n   * Starts all core services\n   */\n  start() {\n    if (this.started) {\n      return Promise.resolve(true);\n    }\n\n    this.started = true;\n\n    return this.providers.init(false)\n      .then(() => true);\n  }\n\n  /**\n   * Gets a configuration entry by key\n   *\n   * @param {String} key The key to get the value from\n   * @param {*} [defaultValue] If result is undefined, return this instead\n   * @see {resolveTreeByKey}\n   * @return {*}\n   */\n  config(key, defaultValue) {\n    return key\n      ? resolveTreeByKey(this.configuration, key, defaultValue)\n      : Object.assign({}, this.configuration);\n  }\n\n  /**\n   * Register a service provider\n   *\n   * @param {Class} ref A class reference\n   * @param {Object} [options] Options for handling of provider\n   * @param {Boolean} [options.before] Load this provider early\n   * @param {Object} [options.args] Arguments to send to the constructor\n   */\n  register(ref, options = {}) {\n    this.providers.register(ref, options);\n  }\n\n  /**\n   * Register a instanciator provider\n   *\n   * @param {String} name Provider name\n   * @param {Function} callback Callback that returns an instance\n   */\n  instance(name, callback) {\n    this.providers.bind(name, false, callback);\n  }\n\n  /**\n   * Register a singleton provider\n   *\n   * @param {String} name Provider name\n   * @param {Function} callback Callback that returns an instance\n   */\n  singleton(name, callback) {\n    this.providers.bind(name, true, callback);\n  }\n\n  /**\n   * Create an instance of a provided service\n   *\n   * @param {String} name Service name\n   * @param {*} args Constructor arguments\n   * @return {*} An instance of a service\n   */\n  make(name, ...args) {\n    return this.providers.make(name, ...args);\n  }\n\n  /**\n   * Check if a service exists\n   * @param {String} name Provider name\n   * @return {Boolean}\n   */\n  has(name) {\n    return this.providers.has(name);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {Graph, Node} from 'async-dependency-graph';\n\nexport const resolveTreeByKey = (tree, key, defaultValue) => {\n  let result;\n\n  try {\n    result = key\n      .split(/\\./g)\n      .reduce((result, key) => result[key], Object.assign({}, tree));\n  } catch (e) { /* noop */ }\n\n  return typeof result === 'undefined' ? defaultValue : result;\n};\n\nconst each = (list, method) => Promise.all(list.map(p => {\n  try {\n    return p.provider[method]();\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}))\n  .catch(err => console.warn(err));\n\nexport const providerHandler = (core) => {\n  let instances = {};\n  let providers = [];\n  let registry = [];\n\n  const createGraph = (list, method) => {\n    const graph = new Graph();\n    const provides = list.map(p => typeof p.provider.provides === 'function' ? p.provider.provides() : []);\n    const dependsOnIndex = wants => provides.findIndex(arr => arr.some(a => wants.indexOf(a) !== -1));\n\n    list.forEach((p, i) => {\n      graph.addNode(new Node(String(i), () => {\n        try {\n          return Promise.resolve(p.provider[method]());\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }));\n    });\n\n    list.forEach((p, i) => {\n      const dependsOptions = p.options.depends instanceof Array\n        ? p.options.depends\n        : [];\n\n      const dependsInstance = typeof p.provider.depends === 'function'\n        ? p.provider.depends()\n        : [];\n\n      const depends = [...dependsOptions, ...dependsInstance];\n      if (depends.length > 0) {\n        const dindex = dependsOnIndex(depends);\n        if (dindex !== -1) {\n          graph.addDependency(String(i), String(dindex));\n        }\n      }\n    });\n\n    return graph.traverse()\n      .catch(e => console.warn(e));\n  };\n\n  const handle = list => createGraph(list, 'init')\n    .then(() => createGraph(list, 'start'));\n\n\n  const has = name => registry.findIndex(p => p.name === name) !== -1;\n\n  const destroy = () => {\n    const result = each(providers, 'destroy');\n\n    instances = {};\n    registry = [];\n\n    return result;\n  };\n\n  const init = (before) =>\n    handle(before\n      ? providers.filter(p => p.options.before)\n      : providers.filter(p => !p.options.before));\n\n  const register = (ref, options) => {\n    try {\n      providers.push({\n        provider: new ref(core, options.args),\n        options\n      });\n    } catch (e) {\n      console.error('Provider register error', e);\n    }\n  };\n\n  const bind = (name, singleton, callback) => {\n    core.logger.info('Provider binding', name);\n\n    registry.push({\n      singleton,\n      name,\n      make(...args) {\n        return callback(...args);\n      }\n    });\n  };\n\n  const make = (name, ...args) => {\n    const found = registry.find(p => p.name === name);\n    if (!found) {\n      throw new Error(`Provider '${name}' not found`);\n    }\n\n    if (!found.singleton) {\n      return found.make(...args);\n    }\n\n    if (!instances[name]) {\n      if (found) {\n        instances[name] = found.make(...args);\n      }\n    }\n\n    return instances[name];\n  };\n\n  return {register, init, bind, has, make, destroy};\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Service Provider Interface\n *\n * @desc Provides a basic Service Provider interface for OS.js\n *\n * @interface\n */\nexport class ServiceProvider {\n\n  /**\n   * Constructor\n   * @param {Core} core Core reference\n   */\n  constructor(core, options = {}) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n    this.options = options;\n  }\n\n  /**\n   * A list of services this provider can create\n   * @return {string[]}\n   */\n  provides() {\n    return [];\n  }\n\n  /**\n   * A list of services this provider depends on\n   * @return {string[]}\n   */\n  depends() {\n    return [];\n  }\n\n  /**\n   * Initializes provider\n   */\n  async init() {\n  }\n\n  /**\n   * Starts provider\n   */\n  start() {\n  }\n\n  /**\n   * Destroys provider\n   */\n  destroy() {\n  }\n\n}\n","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","!function(n,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.simplejsonconf=t():n.simplejsonconf=t()}(window,function(){return function(n){var t={};function r(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},r.r=function(n){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&\"object\"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,\"default\",{enumerable:!0,value:n}),2&t&&\"string\"!=typeof n)for(var o in n)r.d(e,o,function(t){return n[t]}.bind(null,o));return e},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,\"a\",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p=\"\",r(r.s=3)}([function(n,t){function r(n){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&\"function\"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?\"symbol\":typeof n})(n)}function e(t){return\"function\"==typeof Symbol&&\"symbol\"===r(Symbol.iterator)?n.exports=e=function(n){return r(n)}:n.exports=e=function(n){return n&&\"function\"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?\"symbol\":r(n)},e(t)}n.exports=e},function(n,t,r){var e=r(5),o=r(6),u=r(7);n.exports=function(n,t){return e(n)||o(n,t)||u()}},function(n,t){n.exports=function(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}},function(n,t,r){n.exports=r(4)},function(n,t,r){\"use strict\";r.r(t);var e=r(1),o=r.n(e),u=r(2),i=r.n(u),f=r(0),c=r.n(f),a=function(n){return void 0===n?n:JSON.parse(JSON.stringify(n))},l=function(n){return n.split(/\\./g)},s=function(n){return void 0===n||null===n},p=function(n){return!!n&&\"object\"===c()(n)&&!Array.isArray(n)},y=function n(t,r){if(p(t)&&p(r)){for(var e in r)p(r[e])?(t[e]&&c()(t[e])===c()(r[e])||Object.assign(t,i()({},e,{})),n(t[e],r[e])):Object.assign(t,i()({},e,r[e]));return t}return r},b=function(n,t,r){if(s(t))return n;var e;try{e=l(t).reduce(function(n,t){return n[t]},Object.assign({},n))}catch(n){}return void 0===e?r:e},d=function(n,t,r){var e=l(t),o=e.length;if(r)for(var u=n,i=0;i<o;i++){var f=e[i];void 0===u[f]&&(u[f]={}),u=u[f]}var c=1===o?e[0]:e.pop();return[1===o?n:b(n,e.join(\".\")),c]};t.default=function(n){var t,r=function(n){return t=a(n)};return r(n),{get:function(n,r){return a(b(t,n,r))},set:function(n,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(function(n,t,r,e){if(!1!==e.parse)try{r=void 0===r?r:JSON.parse(r)}catch(n){}if(s(t)){var u=!1!==e.merge?y(n,r):r;return Object.assign(n,u)}var i=d(n,t,!0),f=o()(i,2),c=f[0],a=f[1];s(c[a])&&(c[a]={});var l=!1!==e.merge?y(c[a],r):r;return c[a]=l,l}(t,n,r,e))},push:function(n,r){return a(function(n,t,r){var e=b(n,t);if(!Array.isArray(e))throw new Error(\"The key '\".concat(t,\"' is not an array\"));return e.push(r),e}(t,n,r))},remove:function(n){return a(function(n,t){var r=d(n,t),e=o()(r,2),u=e[0],i=e[1];return void 0!==u[i]&&(u instanceof Array?u.splice(u.indexOf(u[i]),1):delete u[i]),u}(t,n))},reset:function(t){return a(r(t||n))},toString:function(){return JSON.stringify(t)}}}},function(n,t){n.exports=function(n){if(Array.isArray(n))return n}},function(n,t){n.exports=function(n,t){var r=[],e=!0,o=!1,u=void 0;try{for(var i,f=n[Symbol.iterator]();!(e=(i=f.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(n){o=!0,u=n}finally{try{e||null==f.return||f.return()}finally{if(o)throw u}}return r}},function(n,t){n.exports=function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}])});\n//# sourceMappingURL=main.js.map","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\n\n'use strict';\n\nexports.match = matchQuery;\nexports.parse = parseQuery;\n\n// -----------------------------------------------------------------------------\n\nvar RE_MEDIA_QUERY     = /(?:(only|not)?\\s*([^\\s\\(\\)]+)(?:\\s*and)?\\s*)?(.+)?/i,\n    RE_MQ_EXPRESSION   = /\\(\\s*([^\\s\\:\\)]+)\\s*(?:\\:\\s*([^\\s\\)]+))?\\s*\\)/,\n    RE_MQ_FEATURE      = /^(?:(min|max)-)?(.+)/,\n    RE_LENGTH_UNIT     = /(em|rem|px|cm|mm|in|pt|pc)?$/,\n    RE_RESOLUTION_UNIT = /(dpi|dpcm|dppx)?$/;\n\nfunction matchQuery(mediaQuery, values) {\n    return parseQuery(mediaQuery).some(function (query) {\n        var inverse = query.inverse;\n\n        // Either the parsed or specified `type` is \"all\", or the types must be\n        // equal for a match.\n        var typeMatch = query.type === 'all' || values.type === query.type;\n\n        // Quit early when `type` doesn't match, but take \"not\" into account.\n        if ((typeMatch && inverse) || !(typeMatch || inverse)) {\n            return false;\n        }\n\n        var expressionsMatch = query.expressions.every(function (expression) {\n            var feature  = expression.feature,\n                modifier = expression.modifier,\n                expValue = expression.value,\n                value    = values[feature];\n\n            // Missing or falsy values don't match.\n            if (!value) { return false; }\n\n            switch (feature) {\n                case 'orientation':\n                case 'scan':\n                    return value.toLowerCase() === expValue.toLowerCase();\n\n                case 'width':\n                case 'height':\n                case 'device-width':\n                case 'device-height':\n                    expValue = toPx(expValue);\n                    value    = toPx(value);\n                    break;\n\n                case 'resolution':\n                    expValue = toDpi(expValue);\n                    value    = toDpi(value);\n                    break;\n\n                case 'aspect-ratio':\n                case 'device-aspect-ratio':\n                case /* Deprecated */ 'device-pixel-ratio':\n                    expValue = toDecimal(expValue);\n                    value    = toDecimal(value);\n                    break;\n\n                case 'grid':\n                case 'color':\n                case 'color-index':\n                case 'monochrome':\n                    expValue = parseInt(expValue, 10) || 1;\n                    value    = parseInt(value, 10) || 0;\n                    break;\n            }\n\n            switch (modifier) {\n                case 'min': return value >= expValue;\n                case 'max': return value <= expValue;\n                default   : return value === expValue;\n            }\n        });\n\n        return (expressionsMatch && !inverse) || (!expressionsMatch && inverse);\n    });\n}\n\nfunction parseQuery(mediaQuery) {\n    return mediaQuery.split(',').map(function (query) {\n        query = query.trim();\n\n        var captures    = query.match(RE_MEDIA_QUERY),\n            modifier    = captures[1],\n            type        = captures[2],\n            expressions = captures[3] || '',\n            parsed      = {};\n\n        parsed.inverse = !!modifier && modifier.toLowerCase() === 'not';\n        parsed.type    = type ? type.toLowerCase() : 'all';\n\n        // Split expressions into a list.\n        expressions = expressions.match(/\\([^\\)]+\\)/g) || [];\n\n        parsed.expressions = expressions.map(function (expression) {\n            var captures = expression.match(RE_MQ_EXPRESSION),\n                feature  = captures[1].toLowerCase().match(RE_MQ_FEATURE);\n\n            return {\n                modifier: feature[1],\n                feature : feature[2],\n                value   : captures[2]\n            };\n        });\n\n        return parsed;\n    });\n}\n\n// -- Utilities ----------------------------------------------------------------\n\nfunction toDecimal(ratio) {\n    var decimal = Number(ratio),\n        numbers;\n\n    if (!decimal) {\n        numbers = ratio.match(/^(\\d+)\\s*\\/\\s*(\\d+)$/);\n        decimal = numbers[1] / numbers[2];\n    }\n\n    return decimal;\n}\n\nfunction toDpi(resolution) {\n    var value = parseFloat(resolution),\n        units = String(resolution).match(RE_RESOLUTION_UNIT)[1];\n\n    switch (units) {\n        case 'dpcm': return value / 2.54;\n        case 'dppx': return value * 96;\n        default    : return value;\n    }\n}\n\nfunction toPx(length) {\n    var value = parseFloat(length),\n        units = String(length).match(RE_LENGTH_UNIT)[1];\n\n    switch (units) {\n        case 'em' : return value * 16;\n        case 'rem': return value * 16;\n        case 'cm' : return value * 96 / 2.54;\n        case 'mm' : return value * 96 / 2.54 / 10;\n        case 'in' : return value * 96;\n        case 'pt' : return value * 72;\n        case 'pc' : return value * 72 / 12;\n        default   : return value;\n    }\n}\n","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n(function(global) {\n  'use strict';\n\n  var dateFormat = (function() {\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n      var timezoneClip = /[^-+\\dA-Z]/g;\n  \n      // Regexes and supporting functions are cached through closure\n      return function (date, mask, utc, gmt) {\n  \n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n          mask = date;\n          date = undefined;\n        }\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n  \n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n  \n        // Allow setting the utc/gmt argument via the mask\n        var maskSlice = mask.slice(0, 4);\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n          mask = mask.slice(4);\n          utc = true;\n          if (maskSlice === 'GMT:') {\n            gmt = true;\n          }\n        }\n  \n        var _ = utc ? 'getUTC' : 'get';\n        var d = date[_ + 'Date']();\n        var D = date[_ + 'Day']();\n        var m = date[_ + 'Month']();\n        var y = date[_ + 'FullYear']();\n        var H = date[_ + 'Hours']();\n        var M = date[_ + 'Minutes']();\n        var s = date[_ + 'Seconds']();\n        var L = date[_ + 'Milliseconds']();\n        var o = utc ? 0 : date.getTimezoneOffset();\n        var W = getWeek(date);\n        var N = getDayOfWeek(date);\n        var flags = {\n          d:    d,\n          dd:   pad(d),\n          ddd:  dateFormat.i18n.dayNames[D],\n          dddd: dateFormat.i18n.dayNames[D + 7],\n          m:    m + 1,\n          mm:   pad(m + 1),\n          mmm:  dateFormat.i18n.monthNames[m],\n          mmmm: dateFormat.i18n.monthNames[m + 12],\n          yy:   String(y).slice(2),\n          yyyy: y,\n          h:    H % 12 || 12,\n          hh:   pad(H % 12 || 12),\n          H:    H,\n          HH:   pad(H),\n          M:    M,\n          MM:   pad(M),\n          s:    s,\n          ss:   pad(s),\n          l:    pad(L, 3),\n          L:    pad(Math.round(L / 10)),\n          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n          W:    W,\n          N:    N\n        };\n  \n        return mask.replace(token, function (match) {\n          if (match in flags) {\n            return flags[match];\n          }\n          return match.slice(1, match.length - 1);\n        });\n      };\n    })();\n\n  dateFormat.masks = {\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\n    'shortDate':             'm/d/yy',\n    'mediumDate':            'mmm d, yyyy',\n    'longDate':              'mmmm d, yyyy',\n    'fullDate':              'dddd, mmmm d, yyyy',\n    'shortTime':             'h:MM TT',\n    'mediumTime':            'h:MM:ss TT',\n    'longTime':              'h:MM:ss TT Z',\n    'isoDate':               'yyyy-mm-dd',\n    'isoTime':               'HH:MM:ss',\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n  };\n\n  // Internationalization strings\n  dateFormat.i18n = {\n    dayNames: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    monthNames: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    timeNames: [\n      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n    ]\n  };\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\n/**\n * Get the ISO 8601 week number\n * Based on comments from\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n *\n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getWeek(date) {\n  // Remove time components of date\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  // Change date to Thursday same week\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n  targetThursday.setHours(targetThursday.getHours() - ds);\n\n  // Number of weeks between target Thursday and first Thursday\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n  return 1 + Math.floor(weekDiff);\n}\n\n/**\n * Get ISO-8601 numeric representation of the day of the week\n * 1 (for Monday) through 7 (for Sunday)\n * \n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getDayOfWeek(date) {\n  var dow = date.getDay();\n  if(dow === 0) {\n    dow = 7;\n  }\n  return dow;\n}\n\n/**\n * kind-of shortcut\n * @param  {*} val\n * @return {String}\n */\nfunction kindOf(val) {\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof val !== 'object') {\n    return typeof val;\n  }\n\n  if (Array.isArray(val)) {\n    return 'array';\n  }\n\n  return {}.toString.call(val)\n    .slice(8, -1).toLowerCase();\n};\n\n\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dateFormat;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = dateFormat;\n  } else {\n    global.dateFormat = dateFormat;\n  }\n})(this);\n","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct.bind(), module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","export default __webpack_public_path__ + \"881c86876af63b732063d7bdd51bb226.png\";","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nconst methods = ['debug', 'log', 'info', 'warn', 'error'];\nlet middleware = [];\n\nconst reduce = (name, input) => middleware\n  .reduce((current, m) => m(name, ...current), input);\n\nconst bind = (fn, thisArg) =>\n  typeof thisArg[fn].bind === 'function'\n    ? thisArg[fn].bind(thisArg)\n    : Function.prototype.bind.apply(thisArg[fn], thisArg);\n\nconst bindMethod = fn => {\n  const log = bind(fn, console);\n  if (middleware.length > 0) {\n    return (...args) => log(...reduce(fn, args));\n  }\n\n  return log;\n};\n\nconst assignMethods = (thisArg) => methods\n  .forEach(m => thisArg[m] = bindMethod(m));\n\nconst instance = {\n  addMiddleware: m => {\n    middleware.push(m);\n    assignMethods(instance);\n  },\n  clearMiddleware: () => {\n    middleware = [];\n    assignMethods(instance);\n  }\n};\n\nassignMethods(instance);\n\nexport default instance;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport * as mediaQuery from 'css-mediaquery';\nimport defaultIcon from '../styles/logo-blue-32x32.png';\nimport logger from '../logger';\n\nconst CASCADE_DISTANCE = 10;\nconst MINIMUM_WIDTH = 100;\nconst MINIMUM_HEIGHT = 100;\nconst ONTOP_ZINDEX = 8388635;\nconst BOTTOM_ZINDEX = 10;\n\n/*\n * Creates window attributes from an object\n */\nexport const createAttributes = attrs => ({\n  classNames: [],\n  modal: false,\n  ontop: false,\n  gravity: false,\n  moveable: true,\n  resizable: true,\n  focusable: true,\n  maximizable: true,\n  minimizable: true,\n  sessionable: true,\n  closeable: true,\n  header: true,\n  controls: true,\n  visibility: 'global',\n  shadowDOM: false,\n  clamp: true,\n  droppable: true,\n  mediaQueries: {\n    small: 'screen and (max-width: 640px)',\n    medium: 'screen and (min-width: 640px) and (max-width: 1024px)',\n    big: 'screen and (min-width: 1024px)'\n  },\n  minDimension: {\n    width: MINIMUM_WIDTH,\n    height: MINIMUM_HEIGHT\n  },\n  maxDimension: {\n    width: -1,\n    height: -1\n  },\n  ...attrs\n});\n\n/*\n * Creates window state from an object\n */\nexport const createState = (state, options, attrs) => ({\n  title: options.title || options.id,\n  icon: options.icon || defaultIcon,\n  media: null,\n  moving: false,\n  resizing: false,\n  loading: false,\n  focused: false,\n  maximized: false,\n  minimized: false,\n  zIndex: 1,\n  styles: {},\n  position: {\n    left: null,\n    top: null,\n    ...options.position\n  },\n  dimension: {\n    width: Math.max(attrs.minDimension.width, MINIMUM_WIDTH),\n    height: Math.max(attrs.minDimension.height, MINIMUM_HEIGHT),\n    ...options.dimension\n  },\n  ...state\n});\n\n/**\n * Creates data attributes for window DOM\n * @param {string} id\n * @param {WindowState} state\n * @param {WindowAttributes} attributes\n * @return {object}\n */\nexport const createDOMAttributes = (id, state, attributes) => ({\n  id: id,\n  media: state.media,\n  moving: state.moving,\n  resizing: state.resizing,\n  loading: state.loading,\n  focused: state.focused,\n  maximized: state.maximized,\n  minimized: state.minimized,\n  modal: attributes.modal,\n  ontop: attributes.ontop,\n  resizable: attributes.resizable,\n  moveable: attributes.moveable,\n  maximizable: attributes.maximizable,\n  minimizable: attributes.minimizable\n});\n\n/**\n * Creates styles for window DOM\n * @param {WindowState} state\n * @param {WindowAttributes} attributes\n * @return {object}\n */\nexport const createDOMStyles = (\n  {\n    zIndex,\n    styles,\n    position: {\n      top,\n      left\n    },\n    dimension: {\n      width,\n      height\n    }\n  },\n  {\n    ontop\n  }\n) => ({\n  top: String(top) + 'px',\n  left: String(left) + 'px',\n  height: String(height) + 'px',\n  width: String(width) + 'px',\n  zIndex: BOTTOM_ZINDEX + (ontop ? ONTOP_ZINDEX : 0) + zIndex,\n  ...styles\n});\n\n/*\n * Clamps position to viewport\n */\nexport const clampPosition = (rect, {dimension, position}) => {\n  const maxLeft = rect.width - dimension.width;\n  const maxTop = rect.height - dimension.height + rect.top;\n\n  // TODO: Make these an argument ?!\n  const minLeft = 0;\n  const minTop = 0;\n\n  return {\n    left: Math.max(minLeft, Math.min(maxLeft, position.left)),\n    top: Math.max(minTop, Math.max(rect.top, Math.min(maxTop, position.top)))\n  };\n};\n\n/*\n * Window rendering callback function\n */\nexport const renderCallback = (win, callback) => {\n  if (typeof callback === 'function') {\n    if (win.attributes.shadowDOM) {\n      try {\n        const mode = typeof win.attributes.shadowDOM === 'string'\n          ? win.attributes.shadowDOM\n          : 'open';\n\n        const shadow = win.$content.attachShadow({mode});\n\n        callback(shadow, win);\n\n        return;\n      } catch (e) {\n        logger.warn('Shadow DOM not supported?', e);\n      }\n    }\n\n    callback(win.$content, win);\n  }\n};\n\n/*\n * Gets new position based on \"gravity\"\n */\nexport const positionFromGravity = (win, rect, gravity) => {\n  let {left, top} = win.state.position;\n\n  if (gravity === 'center') {\n    left = (rect.width / 2) - (win.state.dimension.width / 2);\n    top = (rect.height / 2) - (win.state.dimension.height / 2);\n  } else if (gravity) {\n    let hasVertical =  gravity.match(/top|bottom/);\n    let hasHorizontal = gravity.match(/left|rigth/);\n\n    if (gravity.match(/top/)) {\n      top = rect.top;\n    } else if (gravity.match(/bottom/)) {\n      top = rect.height - (win.state.dimension.height) + rect.top;\n    }\n\n    if (gravity.match(/left/)) {\n      left = rect.left;\n    } else if (gravity.match(/right/)) {\n      left = rect.width - (win.state.dimension.width);\n    }\n\n    if (!hasVertical && gravity.match(/center/)) {\n      top = (rect.height / 2) - (win.state.dimension.height / 2);\n    } else if (!hasHorizontal && gravity.match(/center/)) {\n      left = (rect.width / 2) - (win.state.dimension.width / 2);\n    }\n  }\n\n  return {left, top};\n};\n\n/*\n * Gets new dimension based on container\n */\nexport const dimensionFromElement = (win, rect, container) => {\n  const innerBox = (container.parentNode.classList.contains('osjs-gui')\n    ? container.parentNode\n    : container).getBoundingClientRect();\n\n  const outerBox = win.$content.getBoundingClientRect();\n  const diffY = Math.ceil(outerBox.height - innerBox.height);\n  const diffX = Math.ceil(outerBox.width - innerBox.width);\n  const topHeight = win.$header.offsetHeight;\n\n  const {left, top} = win.state.position;\n  const min = win.attributes.minDimension;\n  const max = win.attributes.maxDimension;\n\n  let width = Math.max(container.offsetWidth + diffX, min.width);\n  let height = Math.max(container.offsetHeight + diffY + topHeight, min.height);\n\n  if (max.width > 0) {\n    width = Math.min(width, max.width);\n  }\n\n  if (max.height > 0) {\n    height = Math.min(height, max.height);\n  }\n\n  width = Math.max(width, container.offsetWidth);\n  height = Math.max(height, container.offsetHeight);\n\n  if (rect) {\n    width = Math.min(width, rect.width - left);\n    height = Math.min(height, rect.height - top);\n  }\n\n  return {width, height};\n};\n\n/*\n * Transforms vector values (ex float to integer)\n */\nexport const transformVectors = (rect, {width, height}, {top, left}) => {\n  const transform = (val, attr) => {\n    if (!isNaN(val)) {\n      return val > 1 && Number.isInteger(val)\n        ? val\n        : Math.round(rect[attr] * parseFloat(val));\n    }\n\n    return val;\n  };\n\n  return {\n    dimension: {\n      width: transform(width, 'width'),\n      height: transform(height, 'height')\n    },\n    position: {\n      top: transform(top, 'height'),\n      left: transform(left, 'width')\n    }\n  };\n};\n\n/*\n * Creates a clamper for resize/move\n */\nconst clamper = win => {\n  const {maxDimension, minDimension} = win.attributes;\n  const {position, dimension} = win.state;\n\n  const maxPosition = {\n    left: position.left + dimension.width - minDimension.width,\n    top: position.top + dimension.height - minDimension.height\n  };\n\n  const clamp = (min, max, current) => {\n    const value = min === -1 ? current : Math.max(min, current);\n    return max === -1 ? value : Math.min(max, value);\n  };\n\n  return (width, height, top, left) => ({\n    width: clamp(minDimension.width, maxDimension.width, width),\n    height: clamp(minDimension.height, maxDimension.height, height),\n    top: clamp(-1, maxPosition.top, top),\n    left: clamp(-1, maxPosition.left, left)\n  });\n};\n\n/*\n * Creates a resize handler\n */\nexport const resizer = (win, handle) => {\n  const clamp = clamper(win);\n  const {position, dimension} = win.state;\n  const directions = handle.getAttribute('data-direction').split('');\n  const going = dir => directions.indexOf(dir) !== -1;\n  const xDir = going('e') ? 1 : (going('w') ? -1 : 0);\n  const yDir = going('s') ? 1 : (going('n') ? -1 : 0);\n\n  return (diffX, diffY) => {\n    const width = dimension.width + (diffX * xDir);\n    const height = dimension.height + (diffY * yDir);\n    const top = yDir === -1 ? position.top + diffY : position.top;\n    const left = xDir === -1 ? position.left + diffX : position.left;\n\n    return clamp(width, height, top, left);\n  };\n};\n\n/*\n * Creates a movement handler\n */\nexport const mover = (win, rect) => {\n  const {position} = win.state;\n\n  return (diffX, diffY) => {\n    const top = Math.max(position.top + diffY, rect.top);\n    const left = position.left + diffX;\n\n    return {top, left};\n  };\n};\n\n/*\n * Calculates a new initial position for window\n */\nexport const getCascadePosition = (win, rect, pos) => {\n  const startX = CASCADE_DISTANCE + rect.left;\n  const startY = CASCADE_DISTANCE + rect.top;\n  const distance = CASCADE_DISTANCE;\n  const wrap = CASCADE_DISTANCE * 2;\n\n  const newX = startX + ((win.wid % wrap) * distance);\n  const newY = startY + ((win.wid % wrap) * distance);\n  const position = (key, value) => typeof pos[key] === 'number' && Number.isInteger(pos[key])\n    ? Math.max(rect[key], pos[key])\n    : value;\n\n  return {top: position('top', newY), left: position('left', newX)};\n};\n\nconst getScreenOrientation = screen => screen && screen.orientation\n  ? screen.orientation.type\n  : window.matchMedia('(orientation: portrait)') ? 'portrait' : 'landscape';\n\n/*\n * Gets a media query name from a map\n */\nexport const getMediaQueryName = (win) => Object.keys(win.attributes.mediaQueries)\n  .filter(name => mediaQuery.match(win.attributes.mediaQueries[name], {\n    type: 'screen',\n    orientation: getScreenOrientation(window.screen),\n    width: win.$element.offsetWidth || win.state.dimension.width,\n    height: win.$element.offsetHeight || win.state.dimension.height\n  }))\n  .pop();\n\n/**\n * Loads [certain] window options from configuration\n */\nexport const loadOptionsFromConfig = (config, appName, windowId) => {\n  const matchStringOrRegex = (str, matcher) => matcher instanceof RegExp\n    ? !!str.match(matcher)\n    : str === matcher;\n\n  const found = config.find(({application, window}) => {\n    if (!application && !window) {\n      return false;\n    } else if (application && !matchStringOrRegex(appName, application)) {\n      return false;\n    } else if (window && !matchStringOrRegex(windowId || '', window)) {\n      return false;\n    }\n\n    return true;\n  });\n\n  const foundOptions = found && found.options ? found.options : {};\n  const allowedProperties = ['position', 'dimension', 'attributes'];\n\n  return allowedProperties.reduce((obj, key) => (foundOptions[key]\n    ? {...obj, [key]: foundOptions[key]}\n    : obj),\n  {});\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {EventEmitter} from '@osjs/event-emitter';\nimport logger from './logger';\n\nconst eventNames = ['open', 'close', 'message', 'error'];\n\n/**\n * Websocket options\n * @typedef {Object} WebsocketOptions\n * @property {boolean} [reconnect=true] Enable reconnection\n * @property {number} [interval=1000] Reconnect interval\n * @property {boolean} [open=true] Immediately open socket after creation\n */\n\n/**\n * Application Socket\n *\n * This is just an abstraction above the standard browser provided `WebSocket` class.\n * Since this class implements the EventHandler, use the `.on('event')` pattern instead of `.onevent`.\n */\nexport default class Websocket extends EventEmitter {\n\n  /**\n   * Create a new Websocket\n   * @param {string} name Instance name\n   * @param {string} uri Connection URI\n   * @param {WebsocketOptions} [options={}] Websocket options\n   */\n  constructor(name, uri, options = {}) {\n    logger.debug('Websocket::constructor()', name, uri);\n\n    super('Websocket@' + name);\n\n    /**\n     * Socket URI\n     * @type {string}\n     * @readonly\n     */\n    this.uri = uri;\n\n    /**\n     * If socket is closed\n     * @type {boolean}\n     */\n    this.closed = false;\n\n    /**\n     * If socket is connected\n     * @type {boolean}\n     */\n    this.connected = false;\n\n    /**\n     * If socket is connecting\n     * @type {boolean}\n     */\n    this.connecting = false;\n\n    /**\n     * If socket is reconnecting\n     * @type {boolean}\n     */\n    this.reconnecting = false;\n\n    /**\n     * If socket failed to connect\n     * @type {boolean}\n     */\n    this.connectfailed = false;\n\n    /**\n     * Options\n     * @type {WebsocketOptions}\n     * @readonly\n     */\n    this.options = {\n      reconnect: true,\n      interval: 1000,\n      open: true,\n      ...options\n    };\n\n    /**\n     * The Websocket\n     * @type {WebSocket}\n     */\n    this.connection = null;\n\n    this._attachEvents();\n\n    if (this.options.open) {\n      this.open();\n    }\n  }\n\n  /**\n   * Destroys the current connection\n   * @return {void}\n   * @private\n   */\n  _destroyConnection() {\n    if (!this.connection) {\n      return;\n    }\n\n    eventNames.forEach(name => {\n      this.connection[`on${name}`] = () => {};\n    });\n\n    this.reconnecting = clearInterval(this.reconnecting);\n    this.connection = null;\n  }\n\n  /**\n   * Attaches internal events\n   * @private\n   */\n  _attachEvents() {\n    this.on('open', ev => {\n      const reconnected = !!this.reconnecting;\n\n      this.connected = true;\n      this.reconnecting = false;\n      this.connectfailed = false;\n      this.reconnecting = clearInterval(this.reconnecting);\n\n      this.emit('connected', ev, reconnected);\n    });\n\n    this.on('close', ev => {\n      if (!this.connected && !this.connectfailed) {\n        this.emit('failed', ev);\n\n        this.connectfailed = true;\n      }\n\n      clearInterval(this.reconnecting);\n\n      this._destroyConnection();\n\n      this.connected = false;\n\n      if (this.options.reconnect) {\n        this.reconnecting = setInterval(() => {\n          if (!this.closed) {\n            this.open();\n          }\n        }, this.options.interval);\n      }\n\n      this.emit('disconnected', ev, this.closed);\n    });\n  }\n\n  /**\n   * Opens the connection\n   * @param {boolean} [reconnect=false] Force reconnection\n   */\n  open(reconnect = false) {\n    if (this.connection && !reconnect) {\n      return;\n    }\n\n    this._destroyConnection();\n\n    this.reconnecting = clearInterval(this.reconnecting);\n    this.connection = new WebSocket(this.uri);\n    this.closed = false;\n\n    eventNames.forEach(name => {\n      this.connection[`on${name}`] = (...args) => this.emit(name, ...args);\n    });\n  }\n\n  /**\n   * Wrapper for sending data\n   */\n  send(...args) {\n    return this.connection.send(...args);\n  }\n\n  /**\n   * Wrapper for closing\n   */\n  close(...args) {\n    this.closed = true;\n\n    return this.connection.close(...args);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport logger from '../logger';\n\n/**\n * @callback DraggableEvent\n * @param {MouseEvent} ev\n */\n\n/**\n * @callback DroppableEvent\n * @param {MouseEvent} ev\n */\n\n/**\n * @callback DroppedEvent\n * @param {MouseEvent} ev\n * @param {Object} data\n * @param {File[]} [files=[]]\n */\n\n/**\n * @typedef {Object} DroppableOptions\n * @property {string} [type=application/json] Content Type\n * @property {string} [effect=move] DnD effect (cursor)\n * @property {DroppableEvent} [ondragenter] Callback to event (ev) => {}\n * @property {DroppableEvent} [ondragover] Callback to event (ev) => {}\n * @property {DroppableEvent} [ondragleave] Callback to event (ev) => {}\n * @property {DroppedEvent} [ondrop] Callback to event (ev, data, files) => {}\n * @property {boolean} [strict=false] Drop element must match exactly\n */\n\n/**\n * @typedef {Object} DroppableInstance\n * @property {Function} destroy\n */\n\n/**\n * @typedef {Object} DraggableOptions\n * @property {string} [type=application/json] Content Type\n * @property {string} [effect=move] DnD effect (cursor)\n * @property {DraggableEvent} [ondragstart] Callback to event (ev) => {}\n * @property {DraggableEvent} [ondragend] Callback to event (ev) => {}\n * @property {DraggableEvent} [setDragImage] Set custom drag image (browser dependent)\n */\n\n/**\n * @typedef {Object} DraggableInstance\n * @property {Function} destroy\n */\n\nconst retval = (fn, ...args) => {\n  try {\n    const result = fn(...args);\n    if (typeof result === 'boolean') {\n      return result;\n    }\n  } catch (e) {\n    logger.warn('droppable value parsing error', e);\n  }\n\n  return true;\n};\n\nconst getDataTransfer = (ev, type) => {\n  let files = [];\n  let data;\n\n  if (ev.dataTransfer) {\n    files = ev.dataTransfer.files\n      ? Array.from(ev.dataTransfer.files)\n      : [];\n\n    try {\n      const transfer = ev.dataTransfer.getData(type);\n\n      try {\n        if (type === 'application/json') {\n          data = typeof transfer === 'undefined' ? transfer : JSON.parse(transfer);\n        } else {\n          data = transfer;\n        }\n      } catch (e) {\n        data = transfer;\n        logger.warn('droppable dataTransfer parsing error', e);\n      }\n    } catch (e) {\n      logger.warn('droppable dataTransfer parsing error', e);\n    }\n  }\n\n  return {files, data};\n};\n\nconst setDataTransfer = (type, effect, data, setDragImage) => {\n  const hasDragImage = typeof setDragImage === 'function';\n  const transferData = type === 'application/json'\n    ? JSON.stringify(data)\n    : data;\n\n  return (ev, el, options) => {\n    if (ev.dataTransfer) {\n      if (ev.dataTransfer.setDragImage && hasDragImage) {\n        try {\n          setDragImage(ev, el, options);\n        } catch (e) {\n          logger.warn('draggable dragstart setDragImage error', e);\n        }\n      }\n\n      try {\n        ev.dataTransfer.effectAllowed = effect;\n        ev.dataTransfer.setData(type, transferData);\n      } catch (e) {\n        logger.warn('draggable dragstart dataTransfer error', e);\n      }\n    }\n  };\n};\n\n/**\n * Creates a \"draggable\" element\n * @param {Element} el The DOM element to apply to\n * @param {DraggableOptions} [options={}] Options\n * @return {DraggableInstance}\n */\nexport const draggable = (el, options = {}) => {\n  const {type, effect, data, ondragstart, ondragend, setDragImage} = {\n    type: 'application/json',\n    effect: 'move',\n    ondragstart: () => true,\n    ondragend: () => true,\n    setDragImage: null,\n    ...options\n  };\n\n  const setter = setDataTransfer(type, effect, data, setDragImage);\n\n  const dragstart = ev => {\n    el.setAttribute('aria-grabbed', 'true');\n    setter(ev, el, options);\n    return ondragstart(ev);\n  };\n\n  const dragend = ev => {\n    el.setAttribute('aria-grabbed', 'false');\n\n    return ondragend(ev);\n  };\n\n  const destroy = () => {\n    el.removeAttribute('draggable');\n    el.removeAttribute('aria-grabbed');\n    el.removeEventListener('dragstart', dragstart);\n    el.removeEventListener('dragend', dragend);\n    el.classList.remove('osjs__draggable');\n  };\n\n  el.setAttribute('draggable', 'true');\n  el.setAttribute('aria-grabbed', 'false');\n  el.addEventListener('dragstart', dragstart);\n  el.addEventListener('dragend', dragend);\n  el.classList.add('osjs__draggable');\n\n  return {destroy};\n};\n\n/**\n * Creates a \"droppable\" element\n * @param {Element} el The DOM element to apply to\n * @param {DroppableOptions} [options={}] Options\n * @return {DroppableInstance}\n */\nexport const droppable = (el, options = {}) => {\n  const {strict, type, effect, ondragenter, ondragover, ondragleave, ondrop} = {\n    type: 'application/json',\n    effect: 'move',\n    ondragenter: () => true,\n    ondragover: () => true,\n    ondragleave: () => true,\n    ondrop: () => true,\n    strict: false,\n    ...options\n  };\n\n  const dragenter = ev => ondragenter(ev);\n\n  const dragleave = ev => {\n    el.classList.remove('osjs__drop');\n\n    return retval(ondragleave, ev);\n  };\n\n  const dragover = ev => {\n    ev.preventDefault();\n\n    const inside = el.contains(ev.target);\n\n    if (!inside) {\n      el.classList.remove('osjs__drop');\n      return false;\n    }\n\n    ev.stopPropagation();\n    ev.dataTransfer.dropEffect = effect;\n    el.classList.add('osjs__drop');\n\n    return retval(ondragover, ev);\n  };\n\n  const drop = ev => {\n    if (strict && ev.target !== el) {\n      return false;\n    }\n\n    const {files, data} = getDataTransfer(ev, type);\n\n    ev.stopPropagation();\n    ev.preventDefault();\n    el.classList.remove('osjs__drop');\n\n    return retval(ondrop, ev, data, files);\n  };\n\n  const destroy = () => {\n    el.removeAttribute('aria-dropeffect', effect);\n    el.removeEventListener('dragenter', dragenter);\n    el.removeEventListener('dragover', dragover);\n    el.removeEventListener('dragleave', dragleave);\n    el.removeEventListener('drop', drop);\n    el.classList.remove('osjs__droppable');\n  };\n\n  el.setAttribute('aria-dropeffect', effect);\n  el.addEventListener('dragenter', dragenter);\n  el.addEventListener('dragover', dragover);\n  el.addEventListener('dragleave', dragleave);\n  el.addEventListener('drop', drop);\n  el.classList.add('osjs__droppable');\n\n  return {destroy};\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport logger from '../logger';\n\nconst supportsNativeNotification = 'Notification' in window;\n\n/**\n * Creates a new CSS DOM element\n * @param {Element} root Root node\n * @param {string} src Source\n * @return {Promise<ScriptElement>}\n */\nexport const style = (root, src) => new Promise((resolve, reject) => {\n  const el = document.createElement('link');\n  el.setAttribute('rel', 'stylesheet');\n  el.setAttribute('type', 'text/css');\n  el.onload = () => resolve(el);\n  el.onerror = (err) => reject(err);\n  el.setAttribute('href', src);\n\n  root.appendChild(el);\n\n  return el;\n});\n\n/**\n * Creates a new Script DOM element\n * @param {Element} root Root node\n * @param {string} src Source\n * @param {Object} [options={}] Options\n * @return {Promise<StyleElement>}\n */\nexport const script = (root, src, options = {}) => new Promise((resolve, reject) => {\n  const opts = {\n    async: false,\n    defer: false,\n    ...options,\n    src,\n    onerror: (err) => reject(err),\n    onload: () => resolve(el),\n  };\n\n  const el = document.createElement('script');\n  el.onreadystatechange = function() {\n    if ((this.readyState === 'complete' || this.readyState === 'loaded')) {\n      resolve(el);\n    }\n  };\n  Object.assign(el, opts);\n  root.appendChild(el);\n\n  return el;\n});\n\n\n/**\n * Escape text so it is \"safe\" for HTML usage\n * @param {string} text Input text\n * @return {string}\n */\nexport const escapeHtml = (text) => {\n  const div = document.createElement('div');\n  div.innerHTML = text;\n  return div.textContent;\n};\n\n/**\n * Serialize an object to CSS\n * @param {object} obj Object\n * @return {string} CSS text\n */\nexport const createCssText = (obj) => Object.keys(obj)\n  .map(k => [k, k.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()])\n  .map(k => `${k[1]}: ${obj[k[0]]}`)\n  .join(';');\n\n/**\n * Inserts a tab in the given event target\n * @param {Event} ev DOM Event\n */\nexport const handleTabOnTextarea = ev => {\n  const input = ev.target;\n  let {selectionStart, selectionEnd, value} = input;\n\n  input.value = value.substring(0, selectionStart)\n    + '\\t'\n    + value.substring(selectionEnd, value.length);\n\n  selectionStart++;\n\n  input.selectionStart = selectionStart;\n  input.selectionEnd = selectionStart;\n};\n\n/*\n * Get active element if belonging to root\n * @param {Element} root DOM Element\n * @return {Element|null}\n */\nexport const getActiveElement = (root) => {\n  if (root) {\n    const ae = document.activeElement;\n\n    return root.contains(ae) ? ae : null;\n  }\n\n  return null;\n};\n\n/**\n * Checks if passive events is supported\n * @link https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n * @return {boolean}\n */\nexport const supportsPassive = (function() {\n  let supportsPassive = false;\n  try {\n    const opts = Object.defineProperty({}, 'passive', {\n      get: () => (supportsPassive = true)\n    });\n\n    window.addEventListener('testPassive', null, opts);\n    window.removeEventListener('testPassive', null, opts);\n  } catch (e) {/* noop */}\n\n  return () => supportsPassive;\n})();\n\n/**\n * Plays a sound\n * @param {string} src Sound source\n * @param {object} [options] Options\n * @return {Promise<HTMLAudioElement>}\n */\nexport const playSound = (src, options = {}) => {\n  const opts = {\n    volume: 1.0,\n    ...options\n  };\n\n  const audio = new Audio();\n  audio.volume = opts.volume;\n  audio.src = src;\n\n  try {\n    const p = audio.play();\n    if (p instanceof Promise) {\n      return p.then(() => audio)\n        .catch(err => logger.warn('Failed to play sound', src, err));\n    }\n  } catch (e) {\n    logger.warn('Failed to play sound', src, e);\n  }\n\n  return Promise.resolve(audio);\n};\n\n/**\n * Gets supported media types\n * @return {object}\n */\nexport const supportedMedia = () => {\n  const videoFormats = {\n    mp4: 'video/mp4',\n    ogv: 'video/ogg'\n  };\n\n  const audioFormats = {\n    mp3: 'audio/mpeg',\n    mp4: 'audio/mp4',\n    oga: 'audio/ogg'\n  };\n\n  const reduce = (list, elem) => Object.keys(list)\n    .reduce((result, format) => {\n      return {\n        [format]: elem.canPlayType(list[format]) === 'probably',\n        ...result\n      };\n    }, {});\n\n  return {\n    audio: reduce(audioFormats, document.createElement('audio')),\n    video: reduce(videoFormats, document.createElement('video'))\n  };\n};\n\n/**\n * Gets if CSS transitions is supported\n * @return {boolean}\n */\nexport const supportsTransition = (function() {\n  const el = document.createElement('div');\n  const tests = ['WebkitTransition', 'MozTransition', 'OTransition', 'transition'];\n  const supported = tests.some(name => typeof el.style[name] !== 'undefined');\n\n  return () => supported;\n})();\n\n/**\n * Creates a native notification\n * @param {object} options Notification options\n * @param {Function} [onclick] Callback on click\n * @return {Promise<window.Notification>}\n */\nexport const createNativeNotification = (options, onclick) => {\n  const Notif = window.Notification;\n\n  const create = () => {\n    const notification = new Notif(\n      options.title,\n      {\n        body: options.message,\n        icon: options.icon\n      }\n    );\n\n    notification.onclick = onclick;\n\n    return notification;\n  };\n\n  if (supportsNativeNotification) {\n    if (Notif.permission === 'granted') {\n      return Promise.resolve(create());\n    } else if (Notif.permission !== 'denied') {\n      return new Promise((resolve, reject) => {\n        Notif.requestPermission(permission => {\n          return permission === 'granted' ? resolve(true) : reject(permission);\n        });\n      }).then(create);\n    }\n  }\n\n  return Promise.reject('Unsupported');\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {droppable} from './utils/dnd';\nimport {escapeHtml, createCssText, supportsTransition, getActiveElement} from './utils/dom';\nimport {\n  createAttributes,\n  createState,\n  createDOMAttributes,\n  createDOMStyles,\n  clampPosition,\n  renderCallback,\n  transformVectors,\n  positionFromGravity,\n  dimensionFromElement\n} from './utils/windows';\nimport logger from './logger';\n\n/**\n * Window dimension definition\n * @typedef {Object} WindowDimension\n * @property {number} width Width in pixels (or float for percentage in setters)\n * @property {number} height Height in pixels (or float for percentage in setters)\n */\n\n/**\n * Window position definition\n * @typedef {Object} WindowPosition\n * @property {number} left Left in pixels (or float for percentage in setters)\n * @property {number} top Top in pixels (or float for percentage in setters)\n */\n\n/**\n * Window session\n * @typedef {Object} WindowSession\n * @property {number} id\n * @property {boolean} maximized\n * @property {boolean} minimized\n * @property {WindowPosition} position\n * @property {WindowDimension} dimension\n */\n\n/**\n * Window attributes definition\n *\n * @typedef {Object} WindowAttributes\n * @property {string[]} [classNames=[]] A list of class names\n * @property {boolean} [ontop=false] If always on top\n * @property {string} [gravity] Gravity (center/top/left/right/bottom or any combination)\n * @property {boolean} [resizable=true] If resizable\n * @property {boolean} [focusable=true] If focusable\n * @property {boolean} [maximizable=true] If window if maximizable\n * @property {boolean} [minimizable=true] If minimizable\n * @property {boolean} [moveable=true] If moveable\n * @property {boolean} [closeable=true] If closeable\n * @property {boolean} [header=true] Show header\n * @property {boolean} [controls=true] Show controls\n * @property {string} [visibility=global] Global visibility, 'restricted' to hide from window lists etc.\n * @property {boolean} [clamp=true] Clamp the window position upon creation\n * @property {boolean} [droppable=true] If window should have the default drop action\n * @property {WindowDimension} [minDimension] Minimum dimension\n * @property {WindowDimension} [maxDimension] Maximum dimension\n * @property {{name: string}} [mediaQueries] A map of matchMedia to name\n */\n\n/**\n * Window state definition\n *\n * @typedef {Object} WindowState\n * @property {string} title Title\n * @property {string} icon Icon\n * @property {boolean} [moving=false] If moving\n * @property {boolean} [resizing=false] If resizing\n * @property {boolean} [loading=false] If loading\n * @property {boolean} [focused=false] If focused\n * @property {boolean} [maximized=false] If maximized\n * @property {boolean} [mimimized=false] If mimimized\n * @property {boolean} [modal=false] If modal to the parent\n * @property {number} [zIndex=10] The z-index (auto calculated)\n * @property {WindowPosition} [position] Position\n * @property {WindowDimension} [dimension] Dimension\n */\n\n/**\n * Window options definition\n *\n * @typedef {Object} WindowOptions\n * @property {string} id Window Id (not globaly unique)\n * @property {string} [title] Window Title\n * @property {string} [icon] Window Icon\n * @property {Window} [parent] The parent Window reference\n * @property {string|Function} [template] The Window HTML template (or function with signature (el, win) for programatic construction)\n * @property {Function} [ondestroy] A callback function when window destructs to interrupt the procedure\n * @property {WindowPosition|string} [position] Window position\n * @property {WindowDimension} [dimension] Window dimension\n * @property {WindowAttributes} [attributes] Apply Window attributes\n * @property {WindowState} [state] Apply Window state\n */\n\nlet windows = [];\nlet windowCount = 0;\nlet nextZindex = 1;\nlet lastWindow = null;\n\n/*\n * Default window template\n */\nconst TEMPLATE = `<div class=\"osjs-window-inner\">\n  <div class=\"osjs-window-header\">\n    <div class=\"osjs-window-icon\">\n      <div></div>\n    </div>\n    <div class=\"osjs-window-title\"></div>\n    <div class=\"osjs-window-button\" data-action=\"minimize\">\n      <div></div>\n    </div>\n    <div class=\"osjs-window-button\" data-action=\"maximize\">\n      <div></div>\n    </div>\n    <div class=\"osjs-window-button\" data-action=\"close\">\n      <div></div>\n    </div>\n  </div>\n  <div class=\"osjs-window-content\">\n  </div>\n  <div class=\"osjs-window-resize\" data-direction=\"n\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"nw\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"w\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"sw\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"s\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"se\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"e\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"ne\"></div>\n</div>`.replace(/\\n\\s+/g, '').trim();\n\n/**\n * Window Implementation\n */\nexport default class Window extends EventEmitter {\n\n  /**\n   * Create window\n   *\n   * @param {Core} core Core reference\n   * @param {WindowOptions} [options={}] Options\n   */\n  constructor(core, options = {}) {\n    options = {\n      id: null,\n      title: null,\n      parent: null,\n      template: null,\n      ondestroy: null,\n      attributes: {},\n      position: {},\n      dimension: {},\n      state: {},\n      ...options\n    };\n\n    logger.debug('Window::constructor()', options);\n\n    super('Window@' + options.id);\n\n    if (typeof options.position === 'string') {\n      options.attributes.gravity = options.position;\n      options.position = {};\n    }\n\n    /**\n     * The Window ID\n     * @type {string}\n     * @readonly\n     */\n    this.id = options.id;\n\n    /**\n     * The Window ID\n     * @type {Number}\n     * @readonly\n     */\n    this.wid = ++windowCount;\n\n    /**\n     * Parent Window reference\n     * @type {Window}\n     * @readonly\n     */\n    this.parent = options.parent;\n\n    /**\n     * Child windows (via 'parent')\n     * @type {Window[]}\n     */\n    this.children = [];\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * The window destruction state\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * The window rendered state\n     * @type {boolean}\n     */\n    this.rendered = false;\n\n    /**\n     * The window was inited\n     * @type {boolean}\n     */\n    this.inited = false;\n\n    /**\n     * The window attributes\n     * @type {WindowAttributes}\n     */\n    this.attributes = createAttributes(options.attributes);\n\n    /**\n     * The window state\n     * @type {WindowState}\n     */\n    this.state = createState(options.state, options, this.attributes);\n\n    /**\n     * The window container\n     * @type {Element}\n     * @readonly\n     */\n    this.$element = document.createElement('div');\n\n    /**\n     * The content container\n     * @type {Element}\n     */\n    this.$content = null;\n\n    /**\n     * The header container\n     * @type {Element}\n     */\n    this.$header = null;\n\n    /**\n     * The icon container\n     * @type {Element}\n     */\n    this.$icon = null;\n\n    /**\n     * The title container\n     * @type {Element}\n     */\n    this.$title = null;\n\n    /**\n     * Internal variable to signal not to use default position\n     * given by user (used for restore)\n     * @private\n     * @type {boolean}\n     */\n    this._preventDefaultPosition = false;\n\n    /**\n     * Internal timeout reference used for triggering the loading\n     * overlay.\n     * @private\n     * @type {boolean}\n     */\n    this._loadingDebounce = null;\n\n    /**\n     * The window template\n     * @private\n     * @type {string|Function}\n     */\n    this._template = options.template;\n\n    /**\n     * Custom destructor callback\n     * @private\n     * @type {Function}\n     * @readonly\n     */\n    this._ondestroy = options.ondestroy || (() => true);\n\n    /**\n     * Last DOM update CSS text\n     * @private\n     * @type {string}\n     */\n    this._lastCssText = '';\n\n    /**\n     * Last DOM update data attributes\n     * @private\n     * @type {WindowAttributes}\n     */\n    this._lastAttributes = {};\n\n    windows.push(this);\n  }\n\n  /**\n   * Destroy window\n   */\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n\n    if (typeof this._ondestroy === 'function' && this._ondestroy() === false) {\n      return;\n    }\n\n    this.destroyed = true;\n\n    logger.debug('Window::destroy()');\n\n    this.emit('destroy', this);\n    this.core.emit('osjs/window:destroy', this);\n\n    this.children.forEach(w => w.destroy());\n\n    if (this.$element) {\n      this.$element.remove();\n    }\n\n    if (lastWindow === this) {\n      lastWindow = null;\n    }\n\n    const foundIndex = windows.findIndex(w => w === this);\n    if (foundIndex !== -1) {\n      windows.splice(foundIndex, 1);\n    }\n\n    this.children = [];\n    this.parent = null;\n    this.$element = null;\n    this.$content = null;\n    this.$header = null;\n    this.$icon = null;\n    this.$title = null;\n\n    super.destroy();\n  }\n\n  /**\n   * Initialize window\n   */\n  init() {\n    if (this.inited) {\n      return this;\n    }\n\n    if (this.parent) {\n      // Assign the window if it is a child\n      this.on('destroy', () => {\n        const foundIndex = this.parent.children.findIndex(w => w === this);\n        if (foundIndex !== -1) {\n          this.parent.children.splice(foundIndex, 1);\n        }\n      });\n\n      this.parent.children.push(this);\n    }\n\n    this._initTemplate();\n    this._initBehavior();\n\n\n    this.inited = true;\n    this.emit('init', this);\n    this.core.emit('osjs/window:create', this);\n\n    return this;\n  }\n\n  /**\n   * Initializes window template\n   * @private\n   */\n  _initTemplate() {\n    const tpl = this.core.config('windows.template') || TEMPLATE;\n    if (this._template) {\n      this.$element.innerHTML = typeof this._template === 'function'\n        ? this._template(this, tpl)\n        : this._template;\n    } else {\n      this.$element.innerHTML = tpl;\n    }\n\n    this.$content = this.$element.querySelector('.osjs-window-content');\n    this.$header = this.$element.querySelector('.osjs-window-header');\n    this.$icon = this.$element.querySelector('.osjs-window-icon > div');\n    this.$title = this.$element.querySelector('.osjs-window-title');\n  }\n\n  /**\n   * Initializes window behavior\n   * @private\n   */\n  _initBehavior() {\n    // Transform percentages in dimension to pixels etc\n    if (this.core.has('osjs/desktop')) {\n      const rect = this.core.make('osjs/desktop').getRect();\n      const {dimension, position} = transformVectors(rect, this.state.dimension, this.state.position);\n      this.state.dimension = dimension;\n      this.state.position = position;\n    }\n\n    // Behavior\n    const behavior = this.core.make('osjs/window-behavior');\n    if (behavior) {\n      behavior.init(this);\n    }\n\n    // DnD functionality\n    if (this.attributes.droppable) {\n      const d = droppable(this.$element, {\n        ondragenter: (...args) => this.emit('dragenter', ...args, this),\n        ondragover: (...args) => this.emit('dragover', ...args, this),\n        ondragleave: (...args) => this.emit('dragleave', ...args, this),\n        ondrop: (...args) => this.emit('drop', ...args, this)\n      });\n\n      this.on('destroy', () => d.destroy());\n    }\n  }\n\n  /**\n   * Checks the modal state of the window upon render\n   * @private\n   */\n  _checkModal() {\n    // TODO: Global modal\n    if (this.parent) {\n      if (this.attributes.modal) {\n        this.on('render', () => this.parent.setState('loading', true));\n        this.on('destroy', () => this.parent.setState('loading', false));\n      }\n\n      this.on('destroy', () => this.parent.focus());\n    }\n  }\n\n  /**\n   * Sets the initial class names\n   * @private\n   */\n  _setClassNames() {\n    const classNames = ['osjs-window', ...this.attributes.classNames];\n    if (this.id) {\n      classNames.push(`Window_${this.id}`);\n    }\n\n    classNames.filter(val => !!val)\n      .forEach((val) => this.$element.classList.add(val));\n  }\n\n  /**\n   * Render window\n   * @param {Function} [callback] Callback when window DOM has been constructed\n   * @return {Window} this instance\n   */\n  render(callback = function() {}) {\n    if (this.rendered) {\n      return this;\n    } else if (!this.inited) {\n      this.init();\n    }\n\n    this._setClassNames();\n    this._updateButtons();\n    this._updateAttributes();\n    this._updateStyles();\n    this._updateTitle();\n    this._updateIconStyles();\n    this._updateHeaderStyles();\n    this._checkModal();\n\n    if (!this._preventDefaultPosition) {\n      this.gravitate(this.attributes.gravity);\n    }\n\n    // Clamp the initial window position to viewport\n    if (this.attributes.clamp) {\n      this.clampToViewport(false);\n    }\n\n    this.setNextZindex(true);\n\n    this.core.$contents.appendChild(this.$element);\n\n    renderCallback(this, callback);\n\n    this.rendered = true;\n\n    setTimeout(() => {\n      this.emit('render', this);\n      this.core.emit('osjs/window:render', this);\n    }, 1);\n\n    return this;\n  }\n\n  /**\n   * Close the window\n   * @return {boolean}\n   */\n  close() {\n    if (this.destroyed) {\n      return false;\n    }\n\n    this.emit('close', this);\n\n    this.destroy();\n\n    return true;\n  }\n\n  /**\n   * Focus the window\n   * @return {boolean}\n   */\n  focus() {\n    if (!this.state.minimized && this._toggleState('focused', true, 'focus')) {\n      this._focus();\n\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Internal for focus\n   * @private\n   */\n  _focus() {\n    if (lastWindow && lastWindow !== this) {\n      lastWindow.blur();\n    }\n\n    lastWindow = this;\n\n    this.setNextZindex();\n  }\n\n  /**\n   * Blur (un-focus) the window\n   * @return {boolean}\n   */\n  blur() {\n    // Forces blur-ing of browser input element belonging to this window\n    const activeElement = getActiveElement(this.$element);\n    if (activeElement) {\n      activeElement.blur();\n    }\n\n    return this._toggleState('focused', false, 'blur');\n  }\n\n  /**\n   * Minimize (hide) the window\n   * @return {boolean}\n   */\n  minimize() {\n    if (this.attributes.minimizable) {\n      if (this._toggleState('minimized', true, 'minimize')) {\n        this.blur();\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Raise (un-minimize) the window\n   * @return {boolean}\n   */\n  raise() {\n    return this._toggleState('minimized', false, 'raise');\n  }\n\n  /**\n   * Maximize the window\n   * @return {boolean}\n   */\n  maximize() {\n    if (this.attributes.maximizable) {\n      return this._maximize(true);\n    }\n\n    return false;\n  }\n\n  /**\n   * Restore (un-maximize) the window\n   * @return {boolean}\n   */\n  restore() {\n    return this._maximize(false);\n  }\n\n  /**\n   * Internal for Maximize or restore\n   * @private\n   * @param {boolean} toggle Maximize or restore\n   * @return {boolean}\n   */\n  _maximize(toggle) {\n    if (this._toggleState('maximized', toggle, toggle ? 'maximize' : 'restore')) {\n      const emit = () => this.emit('resized', {\n        width: this.$element ? this.$element.offsetWidth : -1,\n        height: this.$element ? this.$element.offsetHeight : -1\n      }, this);\n\n      if (supportsTransition()) {\n        this.once('transitionend', emit);\n      } else {\n        emit();\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Resize to fit to current container\n   * @param {Element} [container] The DOM element to use\n   */\n  resizeFit(container) {\n    container = container || this.$content.firstChild;\n\n    if (container) {\n      const rect = this.core.has('osjs/desktop')\n        ? this.core.make('osjs/desktop').getRect()\n        : null;\n\n      const {width, height} = dimensionFromElement(this, rect, container);\n      if (!isNaN(width) && !isNaN(height)) {\n        this.setDimension({width, height});\n      }\n    }\n  }\n\n  /**\n   * Clamps the position to viewport\n   * @param {boolean} [update=true] Update DOM\n   */\n  clampToViewport(update = true) {\n    if (!this.core.has('osjs/desktop')) {\n      return;\n    }\n\n    const rect = this.core.make('osjs/desktop').getRect();\n\n    this.state.position = {\n      ...this.state.position,\n      ...clampPosition(rect, this.state)\n    };\n\n    if (update) {\n      this._updateStyles();\n    }\n  }\n\n  /**\n   * Set the Window icon\n   * @param {string} uri Icon URI\n   */\n  setIcon(uri) {\n    this.state.icon = uri;\n\n    this._updateIconStyles();\n  }\n\n  /**\n   * Set the Window title\n   * @param {string} title Title\n   */\n  setTitle(title) {\n    this.state.title = title || '';\n\n    this._updateTitle();\n\n    this.core.emit('osjs/window:change', this, 'title', title);\n  }\n\n  /**\n   * Set the Window dimension\n   * @param {WindowDimension} dimension The dimension\n   */\n  setDimension(dimension) {\n    const {width, height} = {...this.state.dimension, ...dimension || {}};\n\n    this.state.dimension.width = width;\n    this.state.dimension.height = height;\n\n    this._updateStyles();\n  }\n\n  /**\n   * Set the Window position\n   * @param {WindowPosition} position The position\n   * @param {boolean} [preventDefault=false] Prevents any future position setting in init procedure\n   */\n  setPosition(position, preventDefault = false) {\n    const {left, top} = {...this.state.position, ...position || {}};\n\n    this.state.position.top = top;\n    this.state.position.left = left;\n\n    if (preventDefault) {\n      this._preventDefaultPosition = true;\n    }\n\n    this._updateStyles();\n  }\n\n  /**\n   * Set the Window z index\n   * @param {Number} zIndex the index\n   */\n  setZindex(zIndex) {\n    this.state.zIndex = zIndex;\n    logger.debug('Window::setZindex()', zIndex);\n\n    this._updateStyles();\n  }\n\n  /**\n   * Sets the Window to next z index\n   * @param {boolean} [force] Force next index\n   */\n  setNextZindex(force) {\n    const setNext = force || this._checkNextZindex();\n\n    if (setNext) {\n      this.setZindex(nextZindex);\n      nextZindex++;\n    }\n  }\n\n  /**\n   * Set a state by value\n   * @param {string} name State name\n   * @param {*} value State value\n   * @param {boolean} [update=true] Update the DOM\n   * @see {WindowState}\n   */\n  setState(name, value, update = true) {\n    const set = () => this._setState(name, value, update);\n\n    // Allows for some \"grace time\" so the overlay does not\n    // \"blink\"\n    if (name === 'loading' && update) {\n      clearTimeout(this._loadingDebounce);\n\n      if (value === true) {\n        this._loadingDebounce = setTimeout(() => set(), 250);\n        return;\n      }\n    }\n\n    set();\n  }\n\n  /**\n   * Gravitates window towards a certain area\n   * @param {string} gravity Gravity\n   */\n  gravitate(gravity) {\n    if (!this.core.has('osjs/desktop')) {\n      return;\n    }\n\n    const rect = this.core.make('osjs/desktop').getRect();\n    const position = positionFromGravity(this, rect, gravity);\n\n    this.setPosition(position);\n  }\n\n  /**\n   * Gets a astate\n   * @return {*}\n   */\n  getState(n) {\n    const value = this.state[n];\n\n    return ['position', 'dimension', 'styles'].indexOf(n) !== -1\n      ? {...value}\n      : value;\n  }\n\n  /**\n   * Get a snapshot of the Window session\n   * @return {WindowSession}\n   */\n  getSession() {\n    return this.attributes.sessionable === false ? null : {\n      id: this.id,\n      maximized: this.state.maximized,\n      minimized: this.state.minimized,\n      position: {...this.state.position},\n      dimension: {...this.state.dimension}\n    };\n  }\n\n  /**\n   * Get a list of all windows\n   *\n   * @return {Window[]}\n   */\n  static getWindows() {\n    return windows;\n  }\n\n  /**\n   * Gets the lastly focused Window\n   * @return {Window}\n   */\n  static lastWindow() {\n    return lastWindow;\n  }\n\n  /**\n   * Internal method for setting state\n   * @private\n   * @param {string} name State name\n   * @param {*} value State value\n   * @param {boolean} [update=true] Update the DOM\n   * @param {boolean} [updateAll=true] Update the entire DOM\n   */\n  _setState(name, value, update = true) {\n    const oldValue = this.state[name];\n    this.state[name] = value;\n\n    if (update) {\n      if (oldValue !== value) {\n        logger.debug('Window::_setState()', name, value);\n      }\n\n      this._updateAttributes();\n      this._updateStyles();\n    }\n  }\n\n  /**\n   * Internal method for toggling state\n   * @private\n   * @param {string} name State name\n   * @param {any} value State value\n   * @param {string} eventName Name of event to emit\n   * @param {boolean} [update=true] Update the DOM\n   */\n  _toggleState(name, value, eventName, update = true) {\n    if (this.state[name] === value) {\n      return false;\n    }\n\n    logger.debug('Window::_toggleState()', name, value, eventName, update);\n\n    this.state[name] = value;\n    this.emit(eventName, this);\n    this.core.emit('osjs/window:change', this, name, value);\n\n    if (update) {\n      this._updateAttributes();\n    }\n\n    return true;\n  }\n\n  /**\n   * Check if we have to set next zindex\n   * @private\n   * @return {boolean}\n   */\n  _checkNextZindex() {\n    const {ontop} = this.attributes;\n    const {zIndex} = this.state;\n\n    const windexes = windows\n      .filter(w => w.attributes.ontop === ontop)\n      .filter(w => w.wid !== this.wid)\n      .map(w => w.state.zIndex);\n\n    const max = windexes.length > 0\n      ? Math.max.apply(null, windexes)\n      : 0;\n\n    return zIndex < max;\n  }\n\n  /*\n   * Updates window styles and attributes\n   * FIXME: Backward compability with themes\n   * @deprecated\n   */\n  _updateDOM() {\n    this._updateAttributes();\n    this._updateStyles();\n  }\n\n  /**\n   * Updates the window buttons in DOM\n   * @private\n   */\n  _updateButtons() {\n    const hideButton = action =>\n      this.$header.querySelector(`.osjs-window-button[data-action=${action}]`)\n        .style.display = 'none';\n\n    const buttonmap = {\n      maximizable: 'maximize',\n      minimizable: 'minimize',\n      closeable: 'close'\n    };\n\n    if (this.attributes.controls) {\n      Object.keys(buttonmap)\n        .forEach(key => {\n          if (!this.attributes[key]) {\n            hideButton(buttonmap[key]);\n          }\n        });\n    } else {\n      Array.from(this.$header.querySelectorAll('.osjs-window-button'))\n        .forEach(el => el.style.display = 'none');\n    }\n  }\n\n  /**\n   * Updates window title in DOM\n   * @private\n   */\n  _updateTitle() {\n    if (this.$title) {\n      const escapedTitle = escapeHtml(this.state.title);\n      if (this.$title.innerHTML !== escapedTitle) {\n        this.$title.innerHTML = escapedTitle;\n      }\n    }\n  }\n\n  /**\n   * Updates window icon decoration in DOM\n   * @private\n   */\n  _updateIconStyles() {\n    if (this.$icon) {\n      const iconSource = `url(${this.state.icon})`;\n      if (this.$icon.style.backgroundImage !== iconSource) {\n        this.$icon.style.backgroundImage = iconSource;\n      }\n    }\n  }\n\n  /**\n   * Updates window header decoration in DOM\n   * @private\n   */\n  _updateHeaderStyles() {\n    if (this.$header) {\n      const headerDisplay = this.attributes.header ? undefined : 'none';\n      if (this.$header.style.display !== headerDisplay) {\n        this.$header.style.display = headerDisplay;\n      }\n    }\n  }\n\n  /**\n   * Updates window data in DOM\n   * @private\n   */\n  _updateAttributes() {\n    if (this.$element) {\n      const attrs = createDOMAttributes(this.id, this.state, this.attributes);\n      const applyAttrs = Object.keys(attrs).filter(k => attrs[k] !== this._lastAttributes[k]);\n\n      if (applyAttrs.length > 0) {\n        applyAttrs.forEach(a => this.$element.setAttribute(`data-${a}`, String(attrs[a])));\n        this._lastAttributes = attrs;\n      }\n    }\n  }\n\n  /**\n   * Updates window style in DOM\n   * @private\n   */\n  _updateStyles() {\n    if (this.$element) {\n      const cssText = createCssText(createDOMStyles(this.state, this.attributes));\n      if (cssText !== this._lastCssText) {\n        this.$element.style.cssText = cssText;\n        this._lastCssText = cssText;\n      }\n    }\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\nimport merge from 'deepmerge';\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {loadOptionsFromConfig} from './utils/windows';\nimport Websocket from './websocket';\nimport Window from './window';\nimport logger from './logger';\n\nconst applications = [];\nlet applicationCount = 0;\n\nconst getSettingsKey = metadata =>\n  'osjs/application/' + metadata.name;\n\n/**\n * Application Options\n *\n * @typedef {Object} ApplicationOptions\n * @property {object} [settings] Initial settings\n * @property {object} [restore] Restore data\n * @property {boolean} [windowAutoFocus=true] Auto-focus first created window\n * @property {boolean} [sessionable=true] Allow session storage\n */\n\n/**\n * Application Data\n *\n * @typedef {Object} ApplicationData\n * @property {{foo: *}} args Launch arguments\n * @property {ApplicationOptions} [options] Options\n * @property {PackageMetadata} [metadata] Package Metadata\n */\n\n/**\n * Application Session\n *\n * @typedef {Object} ApplicationSession\n * @property {{foo: string}} args\n * @property {string} name\n * @property {WindowSession[]} windows\n */\n\n/**\n * Base class for an Application\n */\nexport default class Application extends EventEmitter {\n\n  /**\n   * Create application\n   *\n   * @param {Core} core Core reference\n   * @param {ApplicationData} data Application data\n   */\n  constructor(core, data) {\n    data = {\n      args: {},\n      options: {},\n      metadata: {},\n      ...data\n    };\n\n    logger.debug('Application::constructor()', data);\n\n    const defaultSettings = data.options.settings\n      ? {...data.options.settings}\n      : {};\n\n    const name = data.metadata && data.metadata.name\n      ? 'Application@' + data.metadata.name\n      : 'Application' + String(applicationCount);\n\n    super(name);\n\n    /**\n     * The Application ID\n     * @type {Number}\n     * @readonly\n     */\n    this.pid = applicationCount;\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * Application arguments\n     * @type {{foo: *}}\n     */\n    this.args = data.args;\n\n    /**\n     * Application options\n     * @type {ApplicationOptions}\n     */\n    this.options = {\n      sessionable: true,\n      windowAutoFocus: true,\n      ...data.options\n    };\n\n    /**\n     * Application metadata\n     * @type {PackageMetadata}\n     * @readonly\n     */\n    this.metadata = data.metadata;\n\n    /**\n     * Window list\n     * @type {Window[]}\n     */\n    this.windows = [];\n\n    /**\n     * Worker instances\n     * @type {Worker[]}\n     */\n    this.workers = [];\n\n    /**\n     * Options for internal fetch/requests\n     * @type {object}\n     */\n    this.requestOptions = {};\n\n    /**\n     * The application destruction state\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Application settings\n     * @type {{foo: *}}\n     */\n    this.settings = core.make('osjs/settings')\n      .get(getSettingsKey(this.metadata), null, defaultSettings);\n\n    /**\n     * Application started time\n     * @type {Date}\n     * @readonly\n     */\n    this.started = new Date();\n\n    /**\n     * Application WebSockets\n     * @type {Websocket[]}\n     */\n    this.sockets = [];\n\n    applications.push(this);\n    applicationCount++;\n\n    this.core.emit('osjs/application:create', this);\n  }\n\n  /**\n   * Destroy application\n   */\n  destroy(remove = true) {\n    if (this.destroyed) {\n      return;\n    }\n    this.destroyed = true;\n\n    this.emit('destroy');\n    this.core.emit('osjs/application:destroy', this);\n\n    const destroy = (list, fn) => {\n      try {\n        list.forEach(fn);\n      } catch (e) {\n        logger.warn('Exception on application destruction', e);\n      }\n\n      return [];\n    };\n\n    this.windows = destroy(this.windows, window => window.destroy());\n    this.sockets = destroy(this.sockets, ws => ws.close());\n    this.workers = destroy(this.workers, worker => worker.terminate());\n\n    if (remove) {\n      const foundIndex = applications.findIndex(a => a === this);\n      if (foundIndex !== -1) {\n        applications.splice(foundIndex, 1);\n      }\n    }\n\n    super.destroy();\n  }\n\n  /**\n   * Re-launch this application\n   */\n  relaunch() {\n    const windows = this.windows.map(w => w.getSession());\n\n    this.destroy();\n\n    setTimeout(() => {\n      this.core.run(this.metadata.name, {...this.args}, {\n        ...this.options,\n        forcePreload: this.core.config('development'),\n        restore: {windows}\n      });\n    }, 1);\n  }\n\n  /**\n   * Gets a URI to a resource for this application\n   *\n   * If given path is an URI it will just return itself.\n   *\n   * @param {string} path The path\n   * @param {object} [options] Options for url() in core\n   * @return {string} A complete URI\n   */\n  resource(path = '/', options = {}) {\n    return this.core.url(path, options, this.metadata);\n  }\n\n  /**\n   * Performs a request to the OS.js server with the application\n   * as the endpoint.\n   * @param {string} [path=/] Append this to endpoint\n   * @param {Options} [options] fetch options\n   * @param {string} [type='json'] Request / Response type\n   * @return {Promise<*>} ArrayBuffer or JSON\n   */\n  request(path = '/', options = {}, type = 'json') {\n    const uri = this.resource(path);\n\n    return this.core.request(uri, options, type);\n  }\n\n  /**\n   * Creates a new Websocket\n   * @param {string} [path=/socket] Append this to endpoint\n   * @param {WebsocketOptions} [options={}] Connection options\n   * @return {Websocket}\n   */\n  socket(path = '/socket', options = {}) {\n    options = {\n      socket: {},\n      ...options\n    };\n\n    const uri = this.resource(path, {type: 'websocket'});\n    const ws = new Websocket(this.metadata.name, uri, options.socket);\n\n    this.sockets.push(ws);\n\n    return ws;\n  }\n\n  /**\n   * Sends a message over websocket via the core connection.\n   *\n   * This does not create a new connection, but rather uses the core connection.\n   * For subscribing to messages from the server use the 'ws:message' event\n   *\n   * @param {*} ...args Arguments to pass to message\n   */\n  send(...args) {\n    this.core.send('osjs/application:socket:message', {\n      pid: this.pid,\n      name: this.metadata.name,\n      args\n    });\n  }\n\n  /**\n   * Creates a new Worker\n   * @param {string} filename Worker filename\n   * @param {object} [options] Worker options\n   * @return {Worker}\n   */\n  worker(filename, options = {}) {\n    const uri = this.resource(filename);\n    const worker =  new Worker(uri, {\n      credentials: 'same-origin',\n      ...options\n    });\n\n    this.workers.push(worker);\n\n    return worker;\n  }\n\n  /**\n   * Create a new window belonging to this application\n   * @param {WindowOptions} [options={}] Window options\n   * @return {Window}\n   */\n  createWindow(options = {}) {\n    const found = this.windows.find(w => w.id === options.id);\n    if (found) {\n      const msg = this.core.make('osjs/locale')\n        .translate('ERR_WINDOW_ID_EXISTS', options.id);\n\n      throw new Error(msg);\n    }\n\n    const configWindows = this.core.config('application.windows', []);\n    const applyOptions = loadOptionsFromConfig(configWindows, this.metadata.name, options.id);\n    const instance = new Window(this.core, merge(options, applyOptions));\n\n    if (this.options.restore) {\n      const windows = this.options.restore.windows || [];\n      const found = windows.findIndex(r => r.id === instance.id);\n\n      if (found !== -1) {\n        const restore = windows[found];\n        instance.setPosition(restore.position, true);\n        instance.setDimension(restore.dimension);\n\n        if (restore.minimized) {\n          instance.minimize();\n        } else if (restore.maximized) {\n          instance.maximize();\n        }\n\n        this.options.restore.windows.splice(found, 1);\n      }\n    }\n\n    instance.init();\n\n    this.windows.push(instance);\n\n    this.emit('create-window', instance);\n    instance.on('destroy', () => {\n      if (!this.destroyed) {\n        const foundIndex = this.windows.findIndex(w => w === instance);\n        if (foundIndex !== -1) {\n          this.windows.splice(foundIndex, 1);\n        }\n      }\n\n      this.emit('destroy-window', instance);\n    });\n\n    if (this.options.windowAutoFocus) {\n      instance.focus();\n    }\n\n    return instance;\n  }\n\n  /**\n   * Removes window(s) based on given filter\n   * @param {Function} filter Filter function\n   */\n  removeWindow(filter) {\n    const found = this.windows.filter(filter);\n    found.forEach(win => win.destroy());\n  }\n\n  /**\n   * Gets a snapshot of the application session\n   * @return {ApplicationSession}\n   */\n  getSession() {\n    const session = {\n      args: {...this.args},\n      name: this.metadata.name,\n      windows: this.windows\n        .map(w => w.getSession())\n        .filter(s => s !== null)\n    };\n\n    return session;\n  }\n\n  /**\n   * Emits an event across all (or filtered) applications\n   *\n   * @deprecated\n   * @param {Function} [filter] A method to filter what applications to send to\n   * @return {Function} Function with 'emit()' signature\n   */\n  emitAll(filter) {\n    logger.warn('Application#emitAll is deprecated. Use Core#broadcast instead');\n\n    const defaultFilter = proc => proc.pid !== this.pid;\n    const filterFn = typeof filter === 'function'\n      ? filter\n      : typeof filter === 'string'\n        ? proc => defaultFilter(proc) && proc.metadata.name === filter\n        : defaultFilter;\n\n    return (name, ...args) => applications.filter(filterFn)\n      .map(proc => proc.emit(name, ...args));\n  }\n\n  /**\n   * Saves settings\n   * @return {Promise<boolean>}\n   */\n  saveSettings() {\n    const service = this.core.make('osjs/settings');\n    const name = getSettingsKey(this.metadata);\n\n    service.set(name, null, this.settings);\n\n    return service.save();\n  }\n\n  /**\n   * Get a list of all running applications\n   *\n   * @return {Application[]}\n   */\n  static getApplications() {\n    return applications;\n  }\n\n  /**\n   * Kills all running applications\n   */\n  static destroyAll() {\n    applications.forEach(proc => {\n      try {\n        proc.destroy(false);\n      } catch (e) {\n        logger.warn('Exception on destroyAll', e);\n      }\n    });\n\n    applications.splice(0, applications.length);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport dateformat from 'dateformat';\n\nconst FALLBACK_LOCALE = 'en_EN';\n\n// TODO\nconst prefixMap = {\n  nb: 'nb_NO'\n};\n\nconst sprintfRegex = /\\{(\\d+)\\}/g;\n\nconst sprintfMatcher = args => (m, n) =>\n  n in args ? args[n] : m;\n\nconst getDefaultLocale = (core, key) => core.config('locale.' + key);\n\nconst getUserLocale = (core, key, defaultLocale) => core.make('osjs/settings')\n  .get('osjs/locale', key, defaultLocale);\n\n/**\n * Gest the set localization\n * @param {Core} core OS.js Core IoC\n * @param {string} key Settings key (locales.*)\n * @return {object} An object with defaultLocale and userLocale\n */\nexport const getLocale = (core, key) => {\n  const defaultLocale = getDefaultLocale(core, key);\n  const userLocale = getUserLocale(core, key, defaultLocale);\n  return {defaultLocale, userLocale};\n};\n\n/**\n * Gets a raw string from a tree of translations based on key\n *\n * Note that this function will fall back to a pre-configured locale\n * if the given locale names were not found.\n *\n * @private\n * @param {object}  list      The tree of translations\n * @param {string}  ul        User locale name\n * @param {string}  dl        Default locale name\n * @param {string}  k         The key to translate from tree\n * @return {string}           The raw string\n */\nconst getFromList = (list, ul, dl, k) => {\n  const fallbackList = list[FALLBACK_LOCALE] || {};\n  const localizedList = list[ul] || list[dl] || {};\n\n  if (typeof localizedList[k] === 'undefined') {\n    return fallbackList[k] || k;\n  }\n\n  return localizedList[k];\n};\n\n/**\n * Translates a key + arguments from a tree of translations\n *\n * @example\n *  translate({en_EN: {foo: 'Hello {0}'}}, 'nb_NO', 'en_EN', 'foo', 'World') => 'Hello World'\n *\n * @private\n * @param {object}  list      The tree of translations\n * @param {string}  ul        User locale name\n * @param {string}  dl        Default locale name\n * @param {string}  k         The key to translate from tree\n * @param {...*}    args      A list of arguments that are defined in the translation string\n * @return {string}           The translated string\n */\nexport const translate = (list, ul, dl, k, ...args) => {\n  const fmt = getFromList(list, ul, dl, k);\n  return fmt.replace(sprintfRegex, sprintfMatcher(args));\n};\n\n/**\n * Translates a given flat tree of locales\n *\n * Will automatically detect the current locale from the user.\n *\n * Returns a function that takes a key and returns the correct string.\n *\n * @example\n *  translatableFlat({en_EN: 'Hello World'}); // => 'Hello World'\n *\n * @param {object} list The tree of translations\n * @param {string} defaultValue Default value if none found\n * @return {string} The translated string\n */\nexport const translatableFlat = core => (list, defaultValue) => {\n  const {defaultLocale, userLocale} = getLocale(core, 'language');\n\n  return list[userLocale] || list[defaultLocale] || list[FALLBACK_LOCALE] || defaultValue;\n};\n\n/**\n * Translates a given tree of locales.\n *\n * Will automatically detect the current locale from the user.\n *\n * Returns a `translate` function that takes a key and list of arguments.\n *\n * @see translate\n * @example\n *  translatable({en_EN: {foo: 'Hello {0}'}})\n *    ('foo', 'World'); // => 'Hello World'\n * @param {string} k List key\n * @param {...args} Format arguments\n * @return {Function} A translation function\n */\nexport const translatable = core => list => {\n  const {defaultLocale, userLocale} = getLocale(core, 'language');\n\n  return (k, ...args) => translate(\n    list,\n    userLocale,\n    defaultLocale,\n    k,\n    ...args\n  );\n};\n\n/**\n * Formats a given Date to a specified format\n *\n * Will automatically detect the current locale from the user.\n *\n * Formats are 'shortDate', 'mediumDate', 'longDate', 'fullDate',\n *       'shortTime' and 'longTime'\n *\n * @param {Date} date Date object\n * @param {string} fmt Format\n * @return {string}\n */\nexport const format = core => (date, fmt) => {\n  const {defaultLocale, userLocale} = getLocale(core, 'format.' + fmt);\n  const useFormat = userLocale || defaultLocale || fmt;\n\n  return dateformat(date, useFormat);\n};\n\n/**\n * Returns the navigator language\n * @param {object} [nav]\n * @return {string}\n */\nexport const browserLocale = (nav = {}) => {\n  const browserLanguage = nav.userLanguage || nav.language || '';\n  const get = l => prefixMap[l] ? prefixMap[l] : (l.match(/_/)\n    ? l\n    : (l ? `${l}_${l.toUpperCase()}` : ''));\n\n  const langs = (nav.languages || [browserLanguage])\n    .map(l => get(l.replace('-', '_')))\n    .filter(str => !!str);\n\n  return langs[langs.length - 1];\n};\n\n/**\n * Figures out what locale the browser is running as\n *\n * @param {string} [defaultLocale=en_EN] Default locale if none found\n * @return {string} The browser locale\n */\nexport const clientLocale = (() => {\n  const lang = browserLocale(navigator);\n\n  return (defaultLocale = FALLBACK_LOCALE, acceptedLocales = []) => {\n    const found = lang || defaultLocale;\n\n    if (acceptedLocales.lenght > 0 && acceptedLocales.indexOf(lang) === -1) {\n      return defaultLocale;\n    }\n\n    return found;\n  };\n})();\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * Splash Screen UI\n */\nexport default class Splash {\n  /**\n   * Create Splash\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * Splash root element\n     * @type {Element}\n     * @readonly\n     */\n    this.$loading = document.createElement('div');\n    this.$loading.className = 'osjs-boot-splash';\n\n    core.on('osjs/core:boot', () => this.show());\n    core.on('osjs/core:booted', () => this.destroy());\n    core.on('osjs/core:logged-in', () => this.show());\n    core.on('osjs/core:started', () => this.destroy());\n  }\n\n  /**\n   * Initializes splash\n   */\n  init() {\n    this.$loading.appendChild(document.createTextNode('Loading...'));\n  }\n\n  /**\n   * Shows splash\n   */\n  show() {\n    if (!this.$loading.parentNode) {\n      this.core.$root.appendChild(this.$loading);\n    }\n  }\n\n  /**\n   * Destroys splash\n   */\n  destroy() {\n    if (this.$loading.parentNode) {\n      this.$loading.remove();\n    }\n  }\n}\n","export default __webpack_public_path__ + \"f4cfc6708cf6bfc17d4b1e775f594ae2.png\";","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {clientLocale} from './utils/locale.js';\nimport defaultWallpaper from './styles/wallpaper.png';\nimport defaultIcon from './styles/logo-blue-32x32.png';\n\n/**\n * TODO: typedef\n * @typedef {Object} CoreConfig\n */\n\nconst createUri = str => str\n  .replace(/(index\\.(html?|php))$/, '')\n  .replace(/\\/?$/, '/');\n\nconst pathname = createUri(window.location.pathname);\n\nconst href = createUri(window.location.href);\n\nconst languages = {\n  en_EN: 'English',\n  nb_NO: 'Norwegian, Norsk (bokmål)',\n  vi_VN: 'Vietnamese, Vietnamese',\n  fr_FR: 'French',\n  de_DE: 'German',\n  sl_SI: 'Slovenian, Slovenščina',\n  zh_CN: 'Chinese (simplified)',\n  fa_FA: 'Persian',\n  pt_BR: 'Português (Brasil)',\n  ru_RU: 'Русский (Russian)',\n  tr_TR: 'Türkçe (Turkish)',\n  sv_SE: 'Svenska (Swedish)'\n};\n\nexport const defaultConfiguration = {\n  development: !(process.env.NODE_ENV || '').match(/^prod/i),\n  standalone: false,\n  languages,\n\n  http: {\n    ping: true,\n    public: pathname,\n    uri: href\n  },\n\n  ws: {\n    connectInterval: 5000,\n    uri: href.replace(/^http/, 'ws'),\n    disabled: false\n  },\n\n  packages: {\n    manifest: '/metadata.json',\n    metadata: [],\n    hidden: [],\n    permissions: {},\n    overrideMetadata: {}\n  },\n\n  // FIXME: Move into packages above ?!\n  application: {\n    pinned: [],\n    autostart: [],\n    categories: {\n      development: {\n        label: 'LBL_APP_CAT_DEVELOPMENT',\n        icon: 'applications-development'\n      },\n      science: {\n        label: 'LBL_APP_CAT_SCIENCE',\n        icon: 'applications-science'\n      },\n      games: {\n        label: 'LBL_APP_CAT_GAMES',\n        icon: 'applications-games'\n      },\n      graphics: {\n        label: 'LBL_APP_CAT_GRAPHICS',\n        icon: 'applications-graphics'\n      },\n      network: {\n        label: 'LBL_APP_CAT_NETWORK',\n        icon: 'applications-internet'\n      },\n      multimedia: {\n        label: 'LBL_APP_CAT_MULTIMEDIA',\n        icon: 'applications-multimedia'\n      },\n      office: {\n        label: 'LBL_APP_CAT_OFFICE',\n        icon: 'applications-office'\n      },\n      system: {\n        label: 'LBL_APP_CAT_SYSTEM',\n        icon: 'applications-system'\n      },\n      utilities: {\n        label: 'LBL_APP_CAT_UTILITIES',\n        icon: 'applications-utilities'\n      },\n      other: {\n        label: 'LBL_APP_CAT_OTHER',\n        icon: 'applications-other'\n      }\n    },\n    windows: [\n      /*\n      {\n        application: string | RegExp | undefined,\n        window: string | RegExp | undefined,\n        options: {\n          dimension: object | undefined,\n          position: object | undefined,\n          attributes: object | undefined\n        }\n      }\n      */\n    ]\n  },\n\n  auth: {\n    ui: {},\n\n    cookie: {\n      name: 'osjs.auth',\n      expires: 7,\n      enabled: false,\n      secure: false\n    },\n\n    login: {\n      username: null,\n      password: null\n    },\n\n    // NOTE: These are the fallback default values\n    defaultUserData: {\n      id: null,\n      username: 'osjs',\n      groups: []\n    }\n  },\n\n  settings: {\n    lock: [],\n    prefix: 'osjs__', // localStorage settings adapter key prefix\n\n    defaults: {\n      'osjs/default-application': {},\n      'osjs/session': [],\n      'osjs/desktop': {},\n      'osjs/locale': {}\n    }\n  },\n\n  search: {\n    enabled: true\n  },\n\n  notifications: {\n    native: false\n  },\n\n  desktop: {\n    lock: false,\n    contextmenu: {\n      enabled: true,\n      defaults: true\n    },\n\n    settings: {\n      font: 'Roboto',\n      theme: 'StandardTheme',\n      sounds: 'FreedesktopSounds',\n      icons: 'GnomeIcons',\n      animations: false,\n      panels: [{\n        position: 'top',\n        items: [\n          {name: 'menu'},\n          {name: 'windows'},\n          {name: 'tray'},\n          {name: 'clock'}\n        ]\n      }],\n      widgets: [],\n      keybindings: {\n        'open-application-menu': 'shift+alt+a',\n        'close-window': 'shift+alt+w'\n      },\n      notifications: {\n        position: 'top-right'\n      },\n      background: {\n        src: defaultWallpaper,\n        color: '#572a79',\n        style: 'cover'\n      },\n      iconview: {\n        enabled: true,\n        path: 'home:/.desktop',\n        fontColorStyle: 'system',\n        fontColor: '#ffffff'\n      }\n    }\n  },\n\n  locale: {\n    language: clientLocale('en_EN', Object.keys(languages)),\n    rtl: ['az', 'fa', 'he', 'uz', 'ar'],\n    format: {\n      shortDate: 'yyyy-mm-dd',\n      mediumDate: 'dS mmm yyyy',\n      longDate: 'dS mmmm yyyy',\n      fullDate: 'dddd dS mmmm yyyy',\n      shortTime: 'HH:MM',\n      longTime: 'HH:MM:ss'\n    }\n  },\n\n  windows: {\n    lofi: false,\n    mobile: false, // Trigger for setting mobile UI\n    template: null, // A string. See 'window.js' for example\n    clampToViewport: true, // Clamp windows to viewport on resize\n    moveKeybinding: 'ctrl'\n  },\n\n  vfs: {\n    watch: true,\n    defaultPath: 'home:/',\n    defaultAdapter: 'system',\n    adapters: {},\n    mountpoints: [{\n      name: 'apps',\n      label: 'Applications',\n      adapter: 'apps',\n      icon: defaultIcon,\n      attributes: {\n        visibility: 'restricted',\n        readOnly: true\n      }\n    }, {\n      name: 'osjs',\n      label: 'OS.js',\n      adapter: 'system',\n      icon: {name: 'folder-publicshare'}\n    }, {\n      name: 'home',\n      label: 'Home',\n      adapter: 'system',\n      icon: {name: 'user-home'}\n    }],\n    icons: {\n      '^application/zip': {name: 'package-x-generic'},\n      '^application/javascript': {name: 'text-x-script'},\n      '^application/json': {name: 'text-x-script'},\n      '^application/x-python': {name: 'text-x-script'},\n      '^application/php': {name: 'text-x-script'},\n      '^application/pdf': {name: 'x-office-document'},\n      '^application/rtf': {name: 'x-office-document'},\n      '^application/msword': {name: 'x-office-document'},\n      '^application/(xz|tar|gzip)': {name: 'package-x-generic'},\n      '^text/css': {name: 'text-x-script'},\n      '^text/html': {name: 'text-html'},\n      '^(application|text)/xml': {name: 'text-html'},\n      '^application': {name: 'application-x-executable'},\n      '^text': {name: 'text-x-generic'},\n      '^audio': {name: 'audio-x-generic'},\n      '^video': {name: 'video-x-generic'},\n      '^image': {name: 'image-x-generic'}\n    }\n  },\n\n  providers: {\n    globalBlacklist: [\n      'osjs/websocket',\n      'osjs/clipboard',\n      'osjs/gapi'\n    ],\n    globalWhitelist: []\n  }\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n\n/*\n * Creates URL request path\n */\nexport const encodeQueryData = (data) => {\n  const pairs = Object.entries(data)\n    .filter(([, val]) => val !== null && val !== undefined)\n    .map(([key, val]) => {\n      const value = typeof val === 'object' ? JSON.stringify(val) : val;\n      return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n    });\n\n  return pairs.join('&');\n};\n\nconst bodyTypes = [\n  window.ArrayBuffer,\n  window.ArrayBufferView,\n  window.Blob,\n  window.File,\n  window.URLSearchParams,\n  window.FormData\n].filter(t => !!t);\n\n/*\n * Creates fetch() options\n */\nconst createFetchOptions = (url, options, type) => {\n  const fetchOptions = {\n    credentials: 'same-origin',\n    method: 'get',\n    headers: {},\n    ...options\n  };\n\n  if (type === 'json') {\n    fetchOptions.headers = {\n      ...fetchOptions.headers,\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': 'application/json'\n    };\n  }\n\n  if (fetchOptions.body && fetchOptions.method.toLowerCase() === 'get') {\n    if(encodeQueryData(fetchOptions.body) !== '') {\n      url += '?' + encodeQueryData(fetchOptions.body);\n    }\n    delete fetchOptions.body;\n  }\n\n  const hasBody = typeof fetchOptions.body !== 'undefined';\n  const stringBody = typeof fetchOptions.body === 'string';\n\n  if (type === 'json' && (hasBody && !stringBody)) {\n    if (!(fetchOptions.body instanceof FormData)) {\n      const found = bodyTypes.find(t => (fetchOptions.body instanceof t));\n      if (!found) {\n        fetchOptions.body = JSON.stringify(fetchOptions.body);\n      }\n    }\n  }\n\n  return [url, fetchOptions];\n};\n\n/**\n * This is a fetch polyfill for XMLHttpRequest.\n * Mainly used to get upload progress indicator.\n */\nconst fetchXhr = (target, fetchOptions) => new Promise((resolve, reject) => {\n  const req = new XMLHttpRequest();\n\n  const onError = (msg) => (ev) => {\n    console.warn(msg, ev);\n    reject(new Error(msg));\n  };\n\n  const onLoad = () => {\n    resolve({\n      status: req.status,\n      statusText: req.statusText,\n      ok: req.status >= 200 && req.status <= 299,\n      headers: {\n        get: k => req.getResponseHeader(k)\n      },\n      text: () => Promise.resolve(JSON.responseText),\n      json: () => Promise.resolve(JSON.parse(req.responseText)),\n      arrayBuffer: () => Promise.resolve(req.response)\n    });\n  };\n\n  if (typeof fetchOptions.onProgress === 'function') {\n    const rel = fetchOptions.method.toUpperCase() === 'GET' ? req : req.upload;\n    rel.addEventListener('progress', (ev) => {\n      if (ev.lengthComputable) {\n        const percentComplete = Math.round(ev.loaded / ev.total * 100);\n        fetchOptions.onProgress(ev, percentComplete);\n      }\n    });\n  }\n\n  req.addEventListener('load', onLoad);\n  req.addEventListener('error', onError('An error occured while performing XHR request'));\n  req.addEventListener('abort', onError('XHR request was aborted'));\n  req.open(fetchOptions.method, target);\n  Object.entries(fetchOptions.headers).forEach(([k, v]) => req.setRequestHeader(k, v));\n  req.responseType = fetchOptions.responseType || '';\n  req.send(fetchOptions.body);\n});\n\n/**\n * Make a HTTP request\n *\n * @param {string} url The endpoint\n * @param {Options} [options] fetch options\n * @param {string} [type] Request / Response type\n * @return {Promise<*>}\n */\nexport const fetch = (url, options = {}, type = null) => {\n  const [target, fetchOptions] = createFetchOptions(url, options, type);\n\n  const createErrorRejection = (response, error) =>\n    Promise.reject(new Error(error\n      ? error\n      : `${response.status} (${response.statusText})`));\n\n  const op = options.xhr\n    ? fetchXhr(target, fetchOptions)\n    : window.fetch(target, fetchOptions);\n\n  return op\n    .then(response => {\n      if (!response.ok) {\n        const contentType = response.headers.get('content-type');\n        const method = contentType && contentType.indexOf('application/json') !== -1\n          ? 'json'\n          : 'text';\n\n        return response[method]()\n          .then(data => createErrorRejection(response, data.error));\n      }\n\n      return type === 'json'\n        ? response.json()\n        : response;\n    });\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * @typedef {Object} URLResolverOptions\n * @property {string} [type] URL type (ws/http)\n * @property {string} [boolean] Add prefix to URL\n */\n\n/**\n * Resolves an URL\n * @param {CoreConfig} configuration\n */\nexport const urlResolver = configuration => {\n  const {http, ws} = configuration;\n\n  /**\n   * @param {string} [endpoint='/']\n   * @param {URLResolverOptions} [options={}]\n   * @param {PackageMetadata} [metadata={}] Metadata for package resolving\n   */\n  return (endpoint = '/', options = {}, metadata = {}) => {\n    if (typeof endpoint !== 'string') {\n      return http.public;\n    } else if (endpoint.match(/^(http|ws|ftp)s?:/i)) {\n      return endpoint;\n    }\n\n    const {type, prefix} = {\n      type: null,\n      prefix: options.type === 'websocket',\n      ...options\n    };\n\n    const str = type === 'websocket' ? ws.uri : http.uri;\n\n    let url = endpoint.replace(/^\\/+/, '');\n    if (metadata.type) {\n      const path = endpoint.replace(/^\\/?/, '/');\n      const type = metadata.type === 'theme' ? 'themes' : (\n        metadata.type === 'icons' ? 'icons' : 'apps'\n      );\n\n      url = `${type}/${metadata.name}${path}`;\n    }\n\n    return prefix\n      ? str.replace(/\\/$/, '') + url.replace(/^\\/?/, '/')\n      : http.public.replace(/^\\/?/, '/') + url;\n  };\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nconst modifierNames =  ['ctrl', 'shift', 'alt', 'meta'];\n\n/**\n * @typedef {Object} NormalizedEventPosition\n * @property {number} clientX\n * @property {number} clientY\n * @property {boolean} touch\n * @property {Element} target\n */\n\n/**\n * Checks if keycombo matches\n * @param {string} combo Key combo\n * @param {Event} ev Event\n * @return {boolean}\n */\nexport const matchKeyCombo = (combo, ev) => {\n  const checkKeys = String(combo).toLowerCase().split('+');\n  const keyName = String(ev.key).toLowerCase();\n  const validKeypress = checkKeys.every(k => modifierNames.indexOf(k) !== -1\n    ? ev[k + 'Key']\n    : keyName === k);\n\n  return validKeypress;\n};\n\n/**\n * Normalizes event input (position)\n * @param {Event} ev Event\n * @return {NormalizedEventPosition}\n */\nexport const getEvent = (ev) => {\n  let {clientX, clientY, target} = ev;\n  const touch = ev.touches || ev.changedTouches || [];\n\n  if (touch.length) {\n    clientX = touch[0].clientX;\n    clientY = touch[0].clientY;\n  }\n\n  return {clientX, clientY, touch: touch.length > 0, target};\n};\n\n/**\n * Creates a double-tap event handler\n * @param {number} [timeout=250] Timeout\n * @return {Function} Handler with => (ev, cb)\n */\nexport const doubleTap = (timeout = 250) => {\n  let tapped = false;\n  let timer;\n\n  return (ev, cb) => {\n    timer = clearTimeout(timer);\n    timer = setTimeout(() => (tapped = false), timeout);\n\n    if (tapped) {\n      ev.preventDefault();\n      return cb(ev);\n    }\n\n    tapped = true;\n\n    return false;\n  };\n};\n","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * Get parent directory\n * @param {string} path Directory\n * @return {string} Parent directory\n */\nexport const parentDirectory = path => path\n  .replace(/\\/$/, '')\n  .split('/')\n  .filter((item, index, arr) => index < (arr.length - 1))\n  .join('/')\n  .replace(/(\\/+)?$/, '/');\n\n/**\n * Joins paths\n * @param {string[]} args paths\n * @return {string}\n */\nexport const pathJoin = (...args) => args\n  .map((str, index) => {\n    if (index > 0) {\n      str = str.replace(/^\\/?/, '');\n    }\n    return str.replace(/\\/?$/, '');\n  })\n  .join('/');\n\n/*\n * Sort by locale string\n */\nconst sortString = (k, d) => (a, b) => d === 'asc'\n  ? String(a[k]).localeCompare(b[k])\n  : String(b[k]).localeCompare(a[k]);\n\n/*\n * Sort by date\n */\nconst sortDate = (k, d) => (a, b) => d === 'asc'\n  ? (new Date(a[k])) > (new Date(b[k]))\n  : (new Date(b[k])) > (new Date(a[k]));\n\n/*\n * Sort by educated guess\n */\nconst sortDefault = (k, d) => (a, b) =>\n  (a[k] < b[k])\n    ? -1\n    : ((a[k] > b[k])\n      ? (d === 'asc' ? 1 : 0)\n      : (d === 'asc' ? 0 : 1));\n\n/*\n * Sorts an array of files\n */\nconst sortFn = t => {\n  if (t === 'string') {\n    return sortString;\n  } else if (t === 'date') {\n    return sortDate;\n  }\n\n  return sortDefault;\n};\n\n/*\n * Map of sorters from readdir attributes\n */\nconst sortMap = {\n  size: sortFn('number'),\n  mtime: sortFn('date'),\n  ctime: sortFn('date'),\n  atime: sortFn('date')\n};\n\n/**\n * Creates \"special\" directory entries\n * @param {string} path The path to the readdir root\n * @return {Object[]}\n */\nconst createSpecials = path => {\n  const specials = [];\n\n  const stripped = path.replace(/\\/+/g, '/')\n    .replace(/^(\\w+):/, '') || '/';\n\n  if (stripped !== '/') {\n    specials.push({\n      isDirectory: true,\n      isFile: false,\n      mime: null,\n      size: 0,\n      stat: {},\n      filename: '..',\n      path: parentDirectory(path) || '/'\n    });\n  }\n\n  return specials;\n};\n\n/**\n * Creates a FileReader (promisified)\n * @param {string} method The method to call\n * @param {ArrayBuffer} ab The ArrayBuffer\n * @param {string} mime The MIME type\n * @return {Promise}\n */\nconst createFileReader = (method, ab, mime) => new Promise((resolve, reject) => {\n  const b = new Blob([ab], {type: mime});\n  const r = new FileReader();\n  r.onerror = e => reject(e);\n  r.onloadend = () => resolve(r.result);\n  r[method](b);\n});\n\n/**\n * Converts a number (bytez) into human-readable string\n * @param {Number} bytes Input\n * @param {Boolean} [si=false] Use SI units\n * @return {string}\n */\nexport const humanFileSize = (bytes, si = false) => {\n  if (isNaN(bytes) || typeof bytes !== 'number') {\n    bytes = 0;\n  }\n\n  const thresh = si ? 1000 : 1024;\n  const units = si\n    ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n    : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\n\n  if (bytes < thresh) {\n    return bytes + ' B';\n  }\n\n  let u = -1;\n  do {\n    bytes /= thresh;\n    ++u;\n  } while (bytes >= thresh);\n\n  return `${bytes.toFixed(1)} ${units[u]}`;\n};\n\n/**\n * Transforms a readdir result\n * @param {object} root The path to the readdir root\n * @param Object[] files An array of readdir results\n * @param {object} options Options\n * @param {Boolean} [options.showHiddenFiles=false] Show hidden files\n * @param {Function} [options.filter] A filter\n * @param {string} [options.sortBy='filename'] Sort by this attribute\n * @param {string} [options.sortDir='asc'] Sort in this direction\n * @return {Object[]}\n */\nexport const transformReaddir = ({path}, files, options = {}) => {\n  options = {\n    showHiddenFiles: false,\n    sortBy: 'filename',\n    sortDir: 'asc',\n    ...options\n  };\n\n  let {sortDir, sortBy, filter} = options;\n  if (typeof filter !== 'function') {\n    filter = () => true;\n  }\n\n  if (['asc', 'desc'].indexOf(sortDir) === -1) {\n    sortDir = 'asc';\n  }\n\n  const filterHidden = options.showHiddenFiles\n    ? () => true\n    : file => file.filename.substr(0, 1) !== '.';\n\n  const sorter = sortMap[sortBy]\n    ? sortMap[sortBy]\n    : sortFn('string');\n\n  const modify = (file) => ({\n    ...file,\n    humanSize: humanFileSize(file.size)\n  });\n\n  // FIXME: Optimize this to one chain!\n\n  const sortedSpecial = createSpecials(path)\n    .sort(sorter(sortBy, sortDir))\n    .map(modify);\n\n  const sortedDirectories = files.filter(file => file.isDirectory)\n    .sort(sorter(sortBy, sortDir))\n    .filter(filterHidden)\n    .filter(filter)\n    .map(modify);\n\n  const sortedFiles = files.filter(file => !file.isDirectory)\n    .sort(sorter(sortBy, sortDir))\n    .filter(filterHidden)\n    .filter(filter)\n    .map(modify);\n\n  return [\n    ...sortedSpecial,\n    ...sortedDirectories,\n    ...sortedFiles\n  ];\n};\n\n/**\n * Transform an ArrayBuffer\n * @param {ArrayBuffer} ab The ArrayBuffer\n * @param {string} mime The MIME type\n * @param {string} type Transform to this type\n * @return {DOMString|string|Blob|ArrayBuffer}\n */\nexport const transformArrayBuffer = (ab, mime, type) => {\n  if (type === 'string') {\n    return createFileReader('readAsText', ab, mime);\n  } else if (type === 'uri') {\n    return createFileReader('readAsDataURL', ab, mime);\n  } else if (type === 'blob') {\n    return Promise.resolve(new Blob([ab], {type: mime}));\n  }\n\n  return Promise.resolve(ab);\n};\n\n/**\n * Gets an icon from file stat\n * @param {object} file The file stat object\n * @return {string|object}\n */\nexport const getFileIcon = map => {\n  const find = file => {\n    const found = Object.keys(map).find(re => {\n      const regexp = new RegExp(re);\n      return regexp.test(file.mime);\n    });\n\n    return found\n      ? map[found]\n      : {name: 'application-x-executable'};\n  };\n\n  return file => file.isDirectory\n    ? {name: 'folder'}\n    : find(file);\n};\n\n/**\n * Creates a file iter for scandir\n * @param {object} stat file stat\n * @return {object}\n */\nexport const createFileIter = stat => ({\n  isDirectory: false,\n  isFile: true,\n  mime: 'application/octet-stream',\n  icon: null,\n  size: -1,\n  path: null,\n  filename: null,\n  label: null,\n  stat: {},\n  id: null,\n  parent_id: null,\n  ...stat\n});\n\n/**\n * Get basename of a file\n * @param {string} path The path\n * @return {string}\n */\nexport const basename = path => path.split('/').reverse()[0];\n\n/*\n * Get path of a file\n * @param {string} path The path\n * @return {string}\n */\nexport const pathname = path => {\n  const split = path.split('/');\n  if (split.length === 2) {\n    split[1] = '';\n  } else {\n    split.splice(split.length - 1, 1);\n  }\n\n  return split.join('/');\n};\n\n/**\n * Gets prefix from vfs path\n * @param {string} str Input\n * @return {string}\n */\nexport const parseMountpointPrefix = str => {\n  const re = /^([\\w-_]+):+(.*)/;\n\n  const match = String(str)\n    .replace(/\\+/g, '/')\n    .match(re);\n\n  const [prefix] = Array.from(match || [])\n    .slice(1);\n\n  return prefix;\n};\n\n/**\n * Filters a mountpoint by user groups\n * @return {boolean}\n */\nexport const filterMountByGroups = userGroups => (mountGroups, strict = true) =>\n  mountGroups instanceof Array\n    ? mountGroups[strict ? 'every' : 'some'](g => userGroups.indexOf(g) !== -1)\n    : true;\n\n\n/**\n * Creates a list of VFS events to simulate server-side\n * file watching\n * @return {object[]}\n */\nexport const createWatchEvents = (method, args) => {\n  const events = [];\n  const options = args[args.length - 1] || {};\n\n  const movement = ['move', 'rename', 'copy'].indexOf(method) !== -1;\n  const invalid = ['readdir', 'download', 'url', 'exists', 'readfile', 'search', 'stat'].indexOf(method) !== -1;\n  const path = i => typeof i === 'string' ? i : i.path;\n\n  if (!invalid) {\n    const obj = {\n      method,\n      source: path(args[0]),\n      pid: options.pid\n    };\n\n    events.push(['osjs/vfs:directoryChanged', {\n      ...obj,\n      path: pathname(path(args[0])),\n    }]);\n\n    if (movement) {\n      events.push(['osjs/vfs:directoryChanged', {\n        ...obj,\n        path: pathname(path(args[1]))\n      }]);\n    }\n  }\n\n  return events;\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport logger from '../logger';\nimport {supportedMedia} from './dom';\n\nconst imageDropMimes = [\n  'image/png',\n  'image/jpe?g',\n  'image/webp',\n  'image/gif',\n  'image/svg(\\\\+xml)?'\n];\n\n/**\n * Check if droppable data is a VFS type\n * @return {boolean}\n */\nexport const validVfsDrop = data => data && data.path;\n\n/**\n * Check if droppable data contains image\n * @return {boolean}\n */\nexport const isDroppingImage = data => validVfsDrop(data) &&\n  imageDropMimes.some(re => !!data.mime.match(re));\n\n/**\n * Creates a set of styles based on background settings\n */\nexport const applyBackgroundStyles = (core, background) => {\n  const {$root} = core;\n\n  const styles = {\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: '50% 50%',\n    backgroundSize: 'auto',\n    backgroundColor: background.color,\n    backgroundImage: 'none'\n  };\n\n  if (background.style === 'cover' || background.style === 'contain') {\n    styles.backgroundSize = background.style;\n  } else if (background.style === 'repeat') {\n    styles.backgroundRepeat = 'repeat';\n  }\n\n  if (background.style !== 'color') {\n    if (background.src === undefined) {\n      styles.backgroundImage = undefined;\n    } else if (typeof background.src === 'string') {\n      styles.backgroundImage = `url(${background.src})`;\n    } else if (background.src) {\n      core.make('osjs/vfs')\n        .url(background.src)\n        .then(src => {\n          setTimeout(() => ($root.style.backgroundImage = `url(${src})`), 1);\n        })\n        .catch(error => logger.warn('Error while setting wallpaper from VFS', error));\n    }\n  }\n\n  Object.keys(styles).forEach(k => ($root.style[k] = styles[k]));\n};\n\n/**\n * Creates a rectangle with the realestate panels takes up\n */\nexport const createPanelSubtraction = (panel, panels) => {\n  const subtraction = {top: 0, left: 0, right: 0, bottom: 0};\n  const set = p => (subtraction[p.options.position] = p.$element.offsetHeight);\n\n  if (panels.length > 0) {\n    panels.forEach(set);\n  } else {\n    // Backward compability\n    set(panel);\n  }\n\n  return subtraction;\n};\n\nexport const isVisible = w => w &&\n  !w.getState('minimized') &&\n  w.getState('focused');\n\n/*\n * Resolves various resources\n * TODO: Move all of this (and related) stuff to a Theme class\n */\nexport const resourceResolver = (core) => {\n  const media = supportedMedia();\n\n  const getThemeName = (type) => {\n    const defaultTheme = core.config('desktop.settings.' + type);\n    return core.make('osjs/settings').get('osjs/desktop', type, defaultTheme);\n  };\n\n  const themeResource = path => {\n    const theme = getThemeName('theme');\n\n    return core.url(`themes/${theme}/${path}`); // FIXME: Use metadata ?\n  };\n\n  const getSoundThemeName = () => getThemeName('sounds');\n\n  const soundResource = path => {\n    if (!path.match(/\\.([a-z]+)$/)) {\n      const defaultExtension = 'mp3';\n      const checkExtensions = ['oga', 'mp3'];\n      const found = checkExtensions.find(str => media.audio[str] === true);\n      const use = found || defaultExtension;\n\n      path += '.' + use;\n    }\n\n    const theme = getSoundThemeName();\n\n    return theme ? core.url(`sounds/${theme}/${path}`) : null; // FIXME: Use metadata ?\n  };\n\n  const soundsEnabled = () => !!getSoundThemeName();\n\n  const icon = (name) => {\n    name = name.replace(/\\.(png|svg|gif)$/, '');\n    const {getMetadataFromName} = core.make('osjs/packages');\n    const theme = getThemeName('icons');\n    const metadata = getMetadataFromName(theme) || {};\n    const iconDefinitions = metadata.icons || {};\n    const extension = iconDefinitions[name] || 'png';\n\n    return core.url(`icons/${theme}/icons/${name}.${extension}`);\n  };\n\n  return {themeResource, soundResource, soundsEnabled, icon};\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {h, app} from 'hyperapp';\nimport {doubleTap} from '../../utils/input';\nimport {pathJoin} from '../../utils/vfs';\nimport {invertHex} from '../../utils/colors';\nimport {isDroppingImage, validVfsDrop} from '../../utils/desktop';\n\nconst tapper = doubleTap();\n\nconst onDropAction = actions => (ev, data, files, shortcut = true) => {\n  if (validVfsDrop(data)) {\n    actions.addEntry({entry: data, shortcut});\n  } else if (files.length > 0) {\n    actions.uploadEntries(files);\n  }\n};\n\nconst createLabelComputer = (core) => {\n  const packages = f => core.make('osjs/packages').getPackages(f)[0];\n  const translate = n => core.make('osjs/locale').translatableFlat(n);\n\n  return ({filename, mime, label}) => {\n    const metadata = (mime === 'osjs/application' ? packages(pkg => (pkg.name === filename)) : null);\n    return label || (metadata ? translate(metadata.title) : filename);\n  };\n};\n\nconst isRootElement = ev =>\n  ev.target && ev.target.classList.contains('osjs-desktop-iconview__wrapper');\n\nconst view = (computeLabel, fileIcon, themeIcon, droppable) => (state, actions) =>\n  h('div', {\n    class: 'osjs-desktop-iconview__wrapper',\n    oncontextmenu: ev => {\n      if (isRootElement(ev)) {\n        actions.openContextMenu({ev});\n      }\n    },\n    onclick: ev => {\n      if (isRootElement(ev)) {\n        actions.selectEntry({index: -1});\n      }\n    },\n    oncreate: el => {\n      droppable(el, {\n        ondrop: (ev, data, files) => {\n          const droppedImage = isDroppingImage(data);\n\n          if (droppedImage || (ev.shiftKey && validVfsDrop(data))) {\n            actions.openDropContextMenu({ev, data, files});\n          } else {\n            onDropAction(actions)(ev, data, files);\n          }\n        }\n      });\n    }\n  }, state.entries.map((entry, index) => {\n    return h('div', {\n      class: 'osjs-desktop-iconview__entry' + (\n        state.selected === index\n          ? ' osjs-desktop-iconview__entry--selected'\n          : ''\n      ),\n      oncontextmenu: ev => actions.openContextMenu({ev, entry, index}),\n      ontouchstart: ev => tapper(ev, () => actions.openEntry({ev, entry, index})),\n      ondblclick: ev => actions.openEntry({ev, entry, index}),\n      onclick: ev => actions.selectEntry({ev, entry, index})\n    }, [\n      h('div', {\n        class: 'osjs-desktop-iconview__entry__inner'\n      }, [\n        h('div', {\n          class: 'osjs-desktop-iconview__entry__icon'\n        }, [\n          h('img', {\n            src: entry.icon ? entry.icon : themeIcon(fileIcon(entry).name),\n            class: 'osjs-desktop-iconview__entry__icon__icon'\n          }),\n          entry.shortcut !== false\n            ? h('img', {\n              src: themeIcon('emblem-symbolic-link'),\n              class: 'osjs-desktop-iconview__entry__icon__shortcut'\n            })\n            : null\n        ]),\n        h('div', {\n          class: 'osjs-desktop-iconview__entry__label'\n        }, computeLabel(entry))\n      ])\n    ]);\n  }));\n\nconst createShortcuts = (root, readfile, writefile) => {\n  const read = () => {\n    const filename = pathJoin(root, '.shortcuts.json');\n\n    return readfile(filename)\n      .then(contents => JSON.parse(contents))\n      .catch(error => ([]));\n  };\n\n  const write = shortcuts => {\n    const filename = pathJoin(root, '.shortcuts.json');\n    const contents = JSON.stringify(shortcuts || []);\n\n    return writefile(filename, contents)\n      .catch(() => 0);\n  };\n\n  const add = entry => read(root)\n    .then(shortcuts => ([...shortcuts, entry]))\n    .then(write);\n\n  const remove = index => read(root)\n    .then(shortcuts => {\n      shortcuts.splice(index, 1);\n      return shortcuts;\n    })\n    .then(write);\n\n  return {read, add, remove};\n};\n\nconst readDesktopFolder = (root, readdir, shortcuts) => {\n  const supressError = () => [];\n\n  const read = () => readdir(root, {\n    showHiddenFiles: false\n  })\n    .then(files => files.map(s => ({shortcut: false, ...s})))\n    .catch(supressError);\n\n  const readShortcuts = () => shortcuts.read()\n    .then(shortcuts => shortcuts.map((s, index) => ({shortcut: index, ...s})))\n    .catch(supressError);\n\n  return () => {\n    return Promise.all([readShortcuts(), read()])\n      .then(results => [].concat(...results));\n  };\n};\n\n/**\n * Desktop Icon View\n */\nexport class DesktopIconView extends EventEmitter {\n\n  /**\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    super('DesktopIconView');\n\n    this.core = core;\n    this.$root = null;\n    this.iconview = null;\n    this.root = 'home:/.desktop'; // Default path, changed later\n  }\n\n  destroy() {\n    if (this.$root && this.$root.parentNode) {\n      this.$root.remove();\n    }\n\n    this.iconview = null;\n    this.$root = null;\n\n    this.emit('destroy');\n\n    super.destroy();\n  }\n\n  _render(root) {\n    const oldRoot = this.root;\n    if (root) {\n      this.root = root;\n    }\n\n    if (this.$root) {\n      if (this.root !== oldRoot) {\n        this.iconview.reload();\n      }\n\n      return false;\n    }\n\n    return true;\n  }\n\n  render(root) {\n    if (!this._render(root)) {\n      return;\n    }\n\n    this.$root = document.createElement('div');\n    this.$root.className = 'osjs-desktop-iconview';\n    this.core.$contents.appendChild(this.$root);\n\n    const {droppable} = this.core.make('osjs/dnd');\n    const {icon: fileIcon} = this.core.make('osjs/fs');\n    const {icon: themeIcon} = this.core.make('osjs/theme');\n    const {copy, readdir, readfile, writefile, unlink, mkdir} = this.core.make('osjs/vfs');\n    const error = err => console.error(err);\n    const shortcuts = createShortcuts(root, readfile, writefile);\n    const read = readDesktopFolder(root, readdir, shortcuts);\n    const computeLabel = createLabelComputer(this.core);\n\n    this.iconview = app({\n      selected: -1,\n      entries: []\n    }, {\n      setEntries: entries => ({entries}),\n\n      openDropContextMenu: ({ev, data, files, droppedImage}) => {\n        this.createDropContextMenu(ev, data, files, droppedImage);\n      },\n\n      openContextMenu: ({ev, entry, index}) => {\n        if (entry) {\n          this.createFileContextMenu(ev, entry);\n\n          return {selected: index};\n        } else {\n          this.createRootContextMenu(ev);\n\n          return {selected: -1};\n        }\n      },\n\n      openEntry: ({entry, forceDialog}) => {\n        if (entry.isDirectory) {\n          this.core.run('FileManager', {\n            path: entry\n          });\n        } else if (entry.mime === 'osjs/application') {\n          this.core.run(entry.filename);\n        } else {\n          this.core.open(entry, {\n            useDefault: true,\n            forceDialog\n          });\n        }\n\n        return {selected: -1};\n      },\n\n      selectEntry: ({index}) => ({selected: index}),\n\n      uploadEntries: files => {\n        // TODO\n      },\n\n      addEntry: ({entry, shortcut}) => (state, actions) => {\n        const dest = `${root}/${entry.filename}`;\n\n        mkdir(root)\n          .catch(() => true)\n          .then(() => {\n            if (shortcut || entry.mime === 'osjs/application') {\n              return shortcuts.add(entry);\n            }\n\n            return copy(entry, dest)\n              .then(() => actions.reload(true))\n              .catch(error);\n          })\n          .then(() => actions.reload(true));\n\n        return {selected: -1};\n      },\n\n      removeEntry: entry => (state, actions) => {\n        if (entry.shortcut !== false) {\n          shortcuts.remove(entry.shortcut)\n            .then(() => actions.reload(true))\n            .catch(error);\n        } else {\n          unlink(entry)\n            .then(() => actions.reload(true))\n            .catch(error);\n        }\n\n        return {selected: -1};\n      },\n\n      reload: (fromUI) => (state, actions) => {\n        if (fromUI && this.core.config('vfs.watch')) {\n          return;\n        }\n\n        read()\n          .then(entries => entries.filter(e => e.filename !== '..'))\n          .then(entries => actions.setEntries(entries));\n      }\n\n    }, view(computeLabel, fileIcon, themeIcon, droppable), this.$root);\n\n    this.applySettings();\n    this.iconview.reload();\n    this._createWatcher();\n\n    this.core.on('osjs/settings:save', () => this.iconview.reload());\n  }\n\n  createFileContextMenu(ev, entry) {\n    const _ = this.core.make('osjs/locale').translate;\n\n    this.core.make('osjs/contextmenu', {\n      position: ev,\n      menu: [{\n        label: _('LBL_OPEN'),\n        onclick: () => this.iconview.openEntry({entry, forceDialog: false})\n      }, {\n        label: _('LBL_OPEN_WITH'),\n        onclick: () => this.iconview.openEntry({entry, forceDialog: true})\n      }, {\n        label: entry.shortcut !== false ? _('LBL_REMOVE_SHORTCUT') : _('LBL_DELETE'),\n        onclick: () => this.iconview.removeEntry(entry)\n      }]\n    });\n  }\n\n  createDropContextMenu(ev, data, files) {\n    const desktop = this.core.make('osjs/desktop');\n    const _ = this.core.make('osjs/locale').translate;\n\n    const action = shortcut => onDropAction(this.iconview)(ev, data, files, shortcut);\n\n    const menu = [{\n      label: _('LBL_COPY'),\n      onclick: () => action(false)\n    }, {\n      label: _('LBL_CREATE_SHORTCUT'),\n      onclick: () => action(true)\n    }, ...desktop.createDropContextMenu(data)];\n\n    this.core.make('osjs/contextmenu', {\n      position: ev,\n      menu\n    });\n  }\n\n  createRootContextMenu(ev) {\n    this.core.make('osjs/desktop')\n      .openContextMenu(ev);\n  }\n\n  _createWatcher() {\n    const listener = (args) => {\n      const currentPath = String(this.root).replace(/\\/$/, '');\n      const watchPath = String(args.path).replace(/\\/$/, '');\n      if (currentPath === watchPath) {\n        this.iconview.reload();\n      }\n    };\n\n    this.core.on('osjs/vfs:directoryChanged', listener);\n    this.on('destroy', () => this.core.off('osjs/vfs:directoryChanged', listener));\n  }\n\n  applySettings() {\n    if (!this.$root) {\n      return;\n    }\n\n    const settings = this.core\n      .make('osjs/settings');\n\n    const defaults = this.core\n      .config('desktop.settings');\n\n    const fontColorStyle = settings\n      .get('osjs/desktop', 'iconview.fontColorStyle', defaults.iconview.fontColorStyle);\n\n    const fontColor = settings\n      .get('osjs/desktop', 'iconview.fontColor', '#ffffff', defaults.iconview.fontColor);\n\n    const backgroundColor = settings\n      .get('osjs/desktop', 'background.color', defaults.background.color);\n\n    const styles = {\n      system: 'inherit',\n      invert: invertHex(backgroundColor),\n      custom: fontColor\n    };\n\n    this.$root.style.color = styles[fontColorStyle];\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * Inverts a HEX color\n * @link https://stackoverflow.com/a/51568508\n * @param {string} hex Color hex code\n * @return {string} Inverted hex code\n */\nexport const invertHex = hex => '#' + hex\n  .match(/[a-f0-9]{2}/ig)\n  .map(e => (255 - parseInt(e, 16) | 0)\n    .toString(16)\n    .replace(/^([a-f0-9])$/, '0$1')\n  )\n  .join('');\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {EventEmitter} from '@osjs/event-emitter';\n\nconst createView = (core, fs, icon, _) => {\n  const resultView = ({results, index}, actions) => results.map((r, i) => h('li', {\n    onclick: () => actions.open(i),\n    onupdate: el => {\n      if (i === index) {\n        el.scrollIntoView();\n      }\n    },\n    class: [\n      'osjs-search-result',\n      index === i ? 'osjs__active' : ''\n    ].join(' ')\n  }, [\n    h('img', {src: icon(fs.icon(r).name)}),\n    h('span', {}, `${r.path} (${r.mime})`)\n  ]));\n\n  return (state, actions) => h('div', {\n    class: 'osjs-search-container osjs-notification',\n    style: {\n      display: state.visible ? undefined : 'none'\n    }\n  }, [\n    h('input', {\n      type: 'text',\n      placeholder: _('LBL_SEARCH_PLACEHOLDER'),\n      class: 'osjs-search-input',\n      value: state.query,\n      onblur: () => {\n        if (!state.value) {\n          setTimeout(() => actions.toggle(false), 300);\n        }\n      },\n      oninput: ev => actions.setQuery(ev.target.value),\n      onkeydown: ev => {\n        if (ev.keyCode === 38) { // Up\n          actions.setPreviousIndex();\n        } else if (ev.keyCode === 40) { // Down\n          actions.setNextIndex();\n        } else if (ev.keyCode === 27) { // Escape\n          actions.resetIndex();\n\n          if (state.index === -1) {\n            actions.hide();\n          }\n        }\n      },\n      onkeypress: ev => {\n        if (ev.keyCode === 13) {\n          if (state.index >= 0) {\n            actions.open(state.index);\n          } else {\n            actions.search(state.query.replace(/\\*?$/, '*').replace(/^\\*?/, '*'));\n          }\n        }\n      }\n    }),\n    h('div', {\n      'data-error': !!state.error,\n      class: 'osjs-search-message',\n      style: {\n        display: (state.error || state.status) ? 'block' : 'none'\n      }\n    }, state.error || state.status),\n    h('ol', {\n      class: 'osjs-search-results',\n      style: {\n        display: state.results.length ? undefined : 'none'\n      }\n    }, resultView(state, actions))\n  ]);\n};\n\n/**\n * Search UI Adapter\n */\nconst create = (core, $element) => {\n  const _ = core.make('osjs/locale').translate;\n  const fs = core.make('osjs/fs');\n  const {icon} = core.make('osjs/theme');\n  const view = createView(core, fs, icon, _);\n  const ee = new EventEmitter('SearchUI');\n\n  const hyperapp = app({\n    query: '',\n    index: -1,\n    status: undefined,\n    error: null,\n    visible: false,\n    results: []\n  }, {\n    search: query => {\n      ee.emit('search', query);\n\n      return {status: _('LBL_SEARCH_WAIT')};\n    },\n    open: index => (state, actions) => {\n      const iter = state.results[index];\n      if (iter) {\n        ee.emit('open', iter);\n      }\n\n      actions.toggle(false);\n    },\n    resetIndex: () => () => ({\n      index: -1\n    }),\n    setNextIndex: () => state => ({\n      index: (state.index + 1) % state.results.length\n    }),\n    setPreviousIndex: () => state => ({\n      index: state.index <= 0 ? state.results.length - 1 : state.index - 1\n    }),\n    setError: error => () => ({\n      error,\n      status: undefined,\n      index: -1\n    }),\n    setResults: results => () => ({\n      results,\n      index: -1,\n      status: _('LBL_SEARCH_RESULT', results.length),\n    }),\n    setQuery: query => () => ({\n      query\n    }),\n    hide: () => {\n      ee.emit('hide');\n    },\n    toggle: visible => state => ({\n      query: '',\n      results: [],\n      index: -1,\n      status: undefined,\n      error: null,\n      visible: typeof visible === 'boolean' ? visible : !state.visible\n    })\n  }, view, $element);\n\n  ee.on('error', error => hyperapp.setError(error));\n  ee.on('success', results => hyperapp.setResults(results));\n  ee.on('toggle', toggle => hyperapp.toggle(toggle));\n  ee.on('focus', () => {\n    const el = $element.querySelector('.osjs-search-input');\n    if (el) {\n      el.focus();\n    }\n  });\n\n  return ee;\n};\n\nexport default create;\n","import logger from '../../logger';\n\nexport default class VFSSearchAdapter {\n  constructor(core) {\n    this.core = core;\n  }\n\n  destroy() {\n  }\n\n  async init() {\n  }\n\n  async search(pattern) {\n    const vfs = this.core.make('osjs/vfs');\n    const promises = this.core.make('osjs/fs')\n      .mountpoints()\n      .map(mount => `${mount.name}:/`)\n      .map(path => {\n        return vfs.search({path}, pattern)\n          .catch(error => {\n            logger.warn('Error while searching', error);\n            return [];\n          });\n      });\n    return Promise.all(promises)\n      .then(lists => [].concat(...lists));\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\nimport Window from './window';\nimport createUI from './adapters/ui/search';\nimport VFSSearchAdapter from './adapters/search/vfs';\n\n/**\n * Search Service\n */\nexport default class Search {\n  /**\n   * Create Search instance\n   * @param {Core} core Core reference\n   */\n  constructor(core, options) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * Wired actions\n     * @type {Object}\n     */\n    this.ui = null;\n\n    /**\n     * Last focused window\n     * @type {Window}\n     */\n    this.focusLastWindow = null;\n\n    /**\n     * Search root DOM element\n     * @type {Element}\n     * @readonly\n     */\n    this.$element = document.createElement('div');\n    const providedAdapters = options.adapters || [];\n    const useAdapters = [VFSSearchAdapter, ...providedAdapters];\n    this.adapters = useAdapters.map(A => new A(core));\n  }\n\n  /**\n   * Destroy Search instance\n   */\n  destroy() {\n    if (this.ui) {\n      this.ui.destroy();\n    }\n  }\n\n  /**\n   * Initializes Search Service\n   */\n  async init() {\n    const {icon} = this.core.make('osjs/theme');\n    const _ = this.core.make('osjs/locale').translate;\n\n    this.$element.className = 'osjs-search';\n    this.core.$root.appendChild(this.$element);\n\n    this.core.make('osjs/tray').create({\n      title: _('LBL_SEARCH_TOOLTOP', 'F3'),\n      icon: icon('system-search')\n    }, () => this.show());\n\n    this.ui = createUI(this.core, this.$element);\n    this.ui.on('hide', () => this.hide());\n    this.ui.on('open', iter => this.core.open(iter));\n    this.ui.on('search', query => {\n      this.search(query)\n        .then(results => this.ui.emit('success', results))\n        .catch(error => this.ui.emit('error', error));\n    });\n    await Promise.all(this.adapters.map(a => a.init()));\n  }\n\n  /**\n   * Performs a search across all mounts\n   * @param {string} pattern Search query\n   * @return {Promise<FileMetadata[]>}\n   */\n  async search(pattern) {\n    const results = await Promise.all(this.adapters.map(a => a.search(pattern)));\n    return results.flat(1);\n  }\n\n  /**\n   * Focuses UI\n   */\n  focus() {\n    if (this.ui) {\n      this.ui.emit('focus');\n    }\n  }\n\n  /**\n   * Hides UI\n   */\n  hide() {\n    if (this.ui) {\n      this.ui.emit('toggle', false);\n\n      const win = Window.lastWindow();\n      if (this.focusLastWindow && win) {\n        win.focus();\n      }\n    }\n  }\n\n  /**\n   * Shows UI\n   */\n  show() {\n    if (this.ui) {\n      const win = Window.lastWindow();\n\n      this.focusLastWindow = win && win.blur();\n\n      this.ui.emit('toggle', true);\n      setTimeout(() => this.focus(), 1);\n    }\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {EventEmitter} from '@osjs/event-emitter';\nimport Application from './application';\nimport {handleTabOnTextarea} from './utils/dom';\nimport {matchKeyCombo} from './utils/input';\nimport {DesktopIconView} from './adapters/ui/iconview';\nimport {\n  isDroppingImage,\n  applyBackgroundStyles,\n  createPanelSubtraction,\n  isVisible\n} from './utils/desktop';\nimport Window from './window';\nimport Search from './search';\nimport merge from 'deepmerge';\nimport logger from './logger';\n\n/**\n * TODO: typedef\n * @typedef {Object} DesktopContextMenuEntry\n */\n\n/**\n * @typedef {Object} DesktopIconViewSettings\n */\n\n/**\n * TODO: typedef\n * @typedef {Object} DesktopSettings\n * @property {DesktopIconViewSettings} [iconview]\n */\n\n/**\n * Desktop Options\n *\n * @typedef {Object} DeskopOptions\n * @property {object[]} [contextmenu={}] Default Context menu items\n */\n\n/**\n * Desktop Viewport Rectangle\n *\n * @typedef {Object} DesktopViewportRectangle\n * @property {number} left\n * @property {number} top\n * @property {number} right\n * @property {number} bottom\n */\n\n/**\n * Desktop Class\n */\nexport default class Desktop extends EventEmitter {\n\n  /**\n   * Create Desktop\n   *\n   * @param {Core} core Core reference\n   * @param {DesktopOptions} [options={}] Options\n   */\n  constructor(core, options = {}) {\n    super('Desktop');\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * Desktop Options\n     * @type {DeskopOptions}\n     * @readonly\n     */\n    this.options = {\n      contextmenu: [],\n      ...options\n    };\n\n    /**\n     * Theme DOM elements\n     * @type {Element[]}\n     */\n    this.$theme = [];\n\n    /**\n     * Icon DOM elements\n     * @type {Element[]}\n     */\n    this.$icons = [];\n\n    /**\n     * Default context menu entries\n     * @type {DesktopContextMenuEntry[]}\n     */\n    this.contextmenuEntries = [];\n\n    /**\n     * Search instance\n     * @type {Search|null}\n     * @readonly\n     */\n    this.search = core.config('search.enabled') ? new Search(core, options.search || {}) : null;\n\n    /**\n     * Icon View instance\n     * @type {DesktopIconView}\n     * @readonly\n     */\n    this.iconview = new DesktopIconView(this.core);\n\n    /**\n     * Keyboard context dom element\n     * @type {Element|null}\n     */\n    this.keyboardContext = null;\n\n    /**\n     * Desktop subtraction rectangle\n     * TODO: typedef\n     * @type {DesktopViewportRectangle}\n     */\n    this.subtract = {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0\n    };\n  }\n\n  /**\n   * Destroy Desktop\n   */\n  destroy() {\n    if (this.search) {\n      this.search = this.search.destroy();\n    }\n\n    if (this.iconview) {\n      this.iconview.destroy();\n    }\n\n    this._removeIcons();\n    this._removeTheme();\n\n    super.destroy();\n  }\n\n  /**\n   * Initializes Desktop\n   */\n  init() {\n    this.initConnectionEvents();\n    this.initUIEvents();\n    this.initDragEvents();\n    this.initKeyboardEvents();\n    this.initGlobalKeyboardEvents();\n    this.initMouseEvents();\n    this.initBaseEvents();\n    this.initLocales();\n    this.initDeveloperTray();\n  }\n\n  /**\n   * Initializes connection events\n   */\n  initConnectionEvents() {\n    this.core.on('osjs/core:disconnect', ev => {\n      logger.warn('Connection closed', ev);\n\n      const _ = this.core.make('osjs/locale').translate;\n      this.core.make('osjs/notification', {\n        title: _('LBL_CONNECTION_LOST'),\n        message: _('LBL_CONNECTION_LOST_MESSAGE')\n      });\n    });\n\n    this.core.on('osjs/core:connect', (ev, reconnected) => {\n      logger.debug('Connection opened');\n\n      if (reconnected) {\n        const _ = this.core.make('osjs/locale').translate;\n        this.core.make('osjs/notification', {\n          title: _('LBL_CONNECTION_RESTORED'),\n          message: _('LBL_CONNECTION_RESTORED_MESSAGE')\n        });\n      }\n    });\n\n    this.core.on('osjs/core:connection-failed', (ev) => {\n      logger.warn('Connection failed');\n\n      const _ = this.core.make('osjs/locale').translate;\n      this.core.make('osjs/notification', {\n        title: _('LBL_CONNECTION_FAILED'),\n        message: _('LBL_CONNECTION_FAILED_MESSAGE')\n      });\n    });\n  }\n\n  /**\n   * Initializes user interface events\n   */\n  initUIEvents() {\n    this.core.on(['osjs/panel:create', 'osjs/panel:destroy'], (panel, panels = []) => {\n      this.subtract = createPanelSubtraction(panel, panels);\n\n      try {\n        this._updateCSS();\n        this._clampWindows();\n      } catch (e) {\n        logger.warn('Panel event error', e);\n      }\n\n      this.core.emit('osjs/desktop:transform', this.getRect());\n    });\n\n    this.core.on('osjs/window:transitionend', (...args) => {\n      this.emit('theme:window:transitionend', ...args);\n    });\n\n    this.core.on('osjs/window:change', (...args) => {\n      this.emit('theme:window:change', ...args);\n    });\n  }\n\n  /**\n   * Initializes development tray icons\n   */\n  initDeveloperTray() {\n    if (!this.core.config('development')) {\n      return;\n    }\n\n    // Creates tray\n    const tray = this.core.make('osjs/tray').create({\n      title: 'OS.js developer tools'\n    }, (ev) => this.onDeveloperMenu(ev));\n\n    this.core.on('destroy', () => tray.destroy());\n  }\n\n  /**\n   * Initializes drag-and-drop events\n   */\n  initDragEvents() {\n    const {droppable} = this.core.make('osjs/dnd');\n\n    droppable(this.core.$contents, {\n      strict: true,\n      ondrop: (ev, data, files) => {\n        const droppedImage = isDroppingImage(data);\n        if (droppedImage) {\n          this.onDropContextMenu(ev, data);\n        }\n      }\n    });\n  }\n\n  /**\n   * Initializes keyboard events\n   */\n  initKeyboardEvents() {\n    const forwardKeyEvent = (n, e) => {\n      const w = Window.lastWindow();\n      if (isVisible(w)) {\n        w.emit(n, e, w);\n      }\n    };\n\n    const isWithinContext = (target) => this.keyboardContext &&\n      this.keyboardContext.contains(target);\n\n    const isWithinWindow = (w, target) => w &&\n      w.$element.contains(target);\n\n    const isWithin = (w, target) => isWithinWindow(w, target) ||\n      isWithinContext(target);\n\n    ['keydown', 'keyup', 'keypress'].forEach(n => {\n      this.core.$root.addEventListener(n, e => forwardKeyEvent(n, e));\n    });\n\n    this.core.$root.addEventListener('keydown', e => {\n      if (!e.target) {\n        return;\n      }\n\n      if (e.keyCode === 114) { // F3\n        e.preventDefault();\n\n        if (this.search) {\n          this.search.show();\n        }\n      } else if (e.keyCode === 9) { // Tab\n        const {tagName} = e.target;\n        const isInput = ['INPUT', 'TEXTAREA', 'SELECT', 'BUTTON'].indexOf(tagName) !== -1;\n        const w = Window.lastWindow();\n\n        if (isWithin(w, e.target)) {\n          if (isInput) {\n            if (tagName === 'TEXTAREA') {\n              handleTabOnTextarea(e);\n            }\n          } else {\n            e.preventDefault();\n          }\n        } else {\n          e.preventDefault();\n        }\n      }\n    });\n  }\n\n  /**\n   * Initializes global keyboard events\n   */\n  initGlobalKeyboardEvents() {\n    let keybindings = [];\n\n    const defaults = this.core.config('desktop.settings.keybindings', {});\n\n    const reload = () => {\n      keybindings = this.core.make('osjs/settings')\n        .get('osjs/desktop', 'keybindings', defaults);\n    };\n\n    window.addEventListener('keydown', ev => {\n      Object.keys(keybindings).some(eventName => {\n        const combo = keybindings[eventName];\n        const result = matchKeyCombo(combo, ev);\n        if (result) {\n          this.core.emit('osjs/desktop:keybinding:' + eventName, ev);\n        }\n      });\n    });\n\n    this.core.on('osjs/settings:load', reload);\n    this.core.on('osjs/settings:save', reload);\n    this.core.on('osjs/core:started', reload);\n\n    const closeBindingName = 'osjs/desktop:keybinding:close-window';\n    const closeBindingCallback = () => {\n      const w = Window.lastWindow();\n      if (isVisible(w)) {\n        w.close();\n      }\n    };\n    this.core.on(closeBindingName, closeBindingCallback);\n  }\n\n  /**\n   * Initializes mouse events\n   */\n  initMouseEvents() {\n    // Custom context menu\n    this.core.$contents.addEventListener('contextmenu', ev => {\n      if (ev.target === this.core.$contents) {\n        this.onContextMenu(ev);\n      }\n    });\n\n    // A hook to prevent iframe events when dragging mouse\n    window.addEventListener('mousedown', () => {\n      let moved = false;\n\n      const onmousemove = () => {\n        if (!moved) {\n          moved = true;\n\n          this.core.$root.setAttribute('data-mousemove', String(true));\n        }\n      };\n\n      const onmouseup = () => {\n        moved = false;\n\n        this.core.$root.setAttribute('data-mousemove', String(false));\n        window.removeEventListener('mousemove', onmousemove);\n        window.removeEventListener('mouseup', onmouseup);\n      };\n\n      window.addEventListener('mousemove', onmousemove);\n      window.addEventListener('mouseup', onmouseup);\n    });\n  }\n\n  /**\n   * Initializes base events\n   */\n  initBaseEvents() {\n    // Resize hook\n    let resizeDebounce;\n    window.addEventListener('resize', () => {\n      clearTimeout(resizeDebounce);\n      resizeDebounce = setTimeout(() => {\n        this._updateCSS();\n        this._clampWindows(true);\n      }, 200);\n    });\n\n    // Prevent navigation\n    history.pushState(null, null, document.URL);\n    window.addEventListener('popstate', () => {\n      history.pushState(null, null, document.URL);\n    });\n\n    // Prevents background scrolling on iOS\n    this.core.$root.addEventListener('touchmove', e => e.preventDefault());\n  }\n\n  /**\n   * Initializes locales\n   */\n  initLocales() {\n    // Right-to-left support triggers\n    const rtls = this.core.config('locale.rtl');\n    const checkRTL = () => {\n      const locale = this.core.make('osjs/locale')\n        .getLocale()\n        .split('_')[0]\n        .toLowerCase();\n\n      const isRtl = rtls.indexOf(locale) !== -1;\n      this.core.$root.setAttribute('data-dir', isRtl ? 'rtl' : 'ltr');\n    };\n    this.core.on('osjs/settings:load', checkRTL);\n    this.core.on('osjs/settings:save', checkRTL);\n    this.core.on('osjs/core:started', checkRTL);\n  }\n\n  /**\n   * Starts desktop services\n   */\n  start() {\n    if (this.search) {\n      this.search.init();\n    }\n\n    this._updateCSS();\n  }\n\n  /**\n   * Update CSS\n   * @private\n   */\n  _updateCSS() {\n    const mobile = this.core.config('windows.mobile');\n    const isMobile = !mobile ? false : this.core.$root.offsetWidth <= mobile;\n    this.core.$root.setAttribute('data-mobile', isMobile);\n\n    if (this.core.$contents) {\n      this.core.$contents.style.top = `${this.subtract.top}px`;\n      this.core.$contents.style.left = `${this.subtract.left}px`;\n      this.core.$contents.style.right = `${this.subtract.right}px`;\n      this.core.$contents.style.bottom = `${this.subtract.bottom}px`;\n    }\n  }\n\n  _clampWindows(resize) {\n    if (resize && !this.core.config('windows.clampToViewport')) {\n      return;\n    }\n\n    Window.getWindows().forEach(w => w.clampToViewport());\n  }\n\n  /**\n   * Adds something to the default contextmenu entries\n   * @param {DesktopContextMenuEntry[]} entries\n   */\n  addContextMenu(entries) {\n    this.contextmenuEntries = this.contextmenuEntries.concat(entries);\n  }\n\n  /**\n   * Applies settings and updates desktop\n   * @param {DesktopSettings} [settings] Use this set instead of loading from settings\n   * @return {DesktopSettings} New settings\n   */\n  applySettings(settings) {\n    const lockSettings = this.core.config('desktop.lock');\n    const defaultSettings = this.core.config('desktop.settings');\n    let newSettings;\n\n    if (lockSettings) {\n      newSettings = defaultSettings;\n    } else {\n      const userSettings = settings\n        ? settings\n        : this.core.make('osjs/settings').get('osjs/desktop');\n\n      newSettings = merge(defaultSettings, userSettings, {\n        arrayMerge: (dest, source) => source\n      });\n    }\n\n    const applyOverlays = (test, list) => {\n      if (this.core.has(test)) {\n        const instance = this.core.make(test);\n        instance.removeAll();\n        list.forEach(item => instance.create(item));\n      }\n    };\n\n    const applyCss = ({font, background}) => {\n      this.core.$root.style.fontFamily = `${font}, sans-serif`;\n\n      applyBackgroundStyles(this.core, background);\n\n    };\n\n    applyCss(newSettings);\n\n    // TODO: Multiple panels\n    applyOverlays('osjs/panels', (newSettings.panels || []).slice(-1));\n    applyOverlays('osjs/widgets', newSettings.widgets);\n\n    this.applyTheme(newSettings.theme);\n    this.applyIcons(newSettings.icons);\n\n    this.applyIconView(newSettings.iconview);\n\n    this.core.emit('osjs/desktop:applySettings');\n\n    return {...newSettings};\n  }\n\n  /**\n   * Removes current style theme from DOM\n   * @private\n   */\n  _removeTheme() {\n    this.emit('theme:destroy');\n\n    this.off([\n      'theme:init',\n      'theme:destroy',\n      'theme:window:change',\n      'theme:window:transitionend'\n    ]);\n\n    this.$theme.forEach(el => {\n      if (el && el.parentNode) {\n        el.remove();\n      }\n    });\n\n    this.$theme = [];\n  }\n\n  /**\n   * Removes current icon theme from DOM\n   * @private\n   */\n  _removeIcons() {\n    this.$icons.forEach(el => {\n      if (el && el.parentNode) {\n        el.remove();\n      }\n    });\n\n    this.$icons = [];\n  }\n\n  /**\n   * Adds or removes the icon view\n   * @param {DesktopIconViewSettings} settings\n   */\n  applyIconView(settings) {\n    if (!this.iconview) {\n      return;\n    }\n\n    if (settings.enabled) {\n      this.iconview.render(settings.path);\n    } else {\n      this.iconview.destroy();\n    }\n  }\n\n  /**\n   * Sets the current icon theme from settings\n   * @param {string} name Icon theme name\n   * @return {Promise<undefined>}\n   */\n  applyIcons(name) {\n    name = name || this.core.config('desktop.icons');\n\n    return this._applyTheme(name)\n      .then(({elements, errors, callback, metadata}) => {\n        this._removeIcons();\n\n        this.$icons = Object.values(elements);\n\n        this.emit('icons:init');\n      });\n  }\n\n  /**\n   * Sets the current style theme from settings\n   * @param {string} name Theme name\n   * @return {Promise<undefined>}\n   */\n  applyTheme(name) {\n    name = name || this.core.config('desktop.theme');\n\n    return this._applyTheme(name)\n      .then(({elements, errors, callback, metadata}) => {\n        this._removeTheme();\n\n        if (callback && metadata) {\n          try {\n            callback(this.core, this, {}, metadata);\n          } catch (e) {\n            logger.warn('Exception while calling theme callback', e);\n          }\n        }\n\n        this.$theme = Object.values(elements);\n\n        this.emit('theme:init');\n      });\n  }\n\n  /**\n   * Apply theme wrapper\n   * @private\n   * @param {string} name Theme name\n   * @return {Promise<undefined>}\n   */\n  _applyTheme(name) {\n    return this.core.make('osjs/packages')\n      .launch(name)\n      .then(result => {\n        if (result.errors.length) {\n          logger.error(result.errors);\n        }\n\n        return result;\n      });\n  }\n\n  /**\n   * Apply settings by key\n   * @private\n   * @param {string} k Key\n   * @param {*} v Value\n   * @return {Promise<boolean>}\n   */\n  _applySettingsByKey(k, v) {\n    return this.core.make('osjs/settings')\n      .set('osjs/desktop', k, v)\n      .save()\n      .then(() => this.applySettings());\n  }\n\n  /**\n   * Create drop context menu entries\n   * @param {Object} data Drop data\n   * @return {Object[]}\n   */\n  createDropContextMenu(data) {\n    const _ = this.core.make('osjs/locale').translate;\n    const settings = this.core.make('osjs/settings');\n    const desktop = this.core.make('osjs/desktop');\n    const droppedImage = isDroppingImage(data);\n    const menu = [];\n\n    const setWallpaper = () => settings\n      .set('osjs/desktop', 'background.src', data)\n      .save()\n      .then(() => desktop.applySettings());\n\n    if (droppedImage) {\n      menu.push({\n        label: _('LBL_DESKTOP_SET_AS_WALLPAPER'),\n        onclick: setWallpaper\n      });\n    }\n\n    return menu;\n  }\n\n  /**\n   * When developer menu is shown\n   * @param {Event} ev\n   */\n  onDeveloperMenu(ev) {\n    const _ = this.core.make('osjs/locale').translate;\n    const s = this.core.make('osjs/settings').get();\n\n    const storageItems = Object.keys(s)\n      .map(k => ({\n        label: k,\n        onclick: () => {\n          this.core.make('osjs/settings')\n            .clear(k)\n            .then(() => this.applySettings());\n        }\n      }));\n\n    this.core.make('osjs/contextmenu').show({\n      position: ev,\n      menu: [\n        {\n          label: _('LBL_KILL_ALL'),\n          onclick: () => Application.destroyAll()\n        },\n        {\n          label: _('LBL_APPLICATIONS'),\n          items: Application.getApplications().map(proc => ({\n            label: `${proc.metadata.name} (${proc.pid})`,\n            items: [\n              {\n                label: _('LBL_KILL'),\n                onclick: () => proc.destroy()\n              },\n              {\n                label: _('LBL_RELOAD'),\n                onclick: () => proc.relaunch()\n              }\n            ]\n          }))\n        },\n        {\n          label: 'Clear Storage',\n          items: storageItems\n        }\n      ]\n    });\n  }\n\n  /**\n   * When drop menu is shown\n   * @param {Event} ev\n   * @param {Object} data\n   */\n  onDropContextMenu(ev, data) {\n    const menu = this.createDropContextMenu(data);\n\n    this.core.make('osjs/contextmenu', {\n      position: ev,\n      menu\n    });\n  }\n\n  /**\n   * When context menu is shown\n   * @param {Event} ev\n   */\n  onContextMenu(ev) {\n    const lockSettings = this.core.config('desktop.lock');\n    const extras = [].concat(...this.contextmenuEntries.map(e => typeof e === 'function' ? e() : e));\n    const config = this.core.config('desktop.contextmenu');\n    const hasIconview = this.core.make('osjs/settings').get('osjs/desktop', 'iconview.enabled');\n\n    if (config === false || config.enabled === false) {\n      return;\n    }\n\n    const useDefaults = config === true || config.defaults; // NOTE: Backward compability\n\n    const _ = this.core.make('osjs/locale').translate;\n    const __ = this.core.make('osjs/locale').translatableFlat;\n\n    const themes = this.core.make('osjs/packages')\n      .getPackages(p => p.type === 'theme');\n\n    const defaultItems = lockSettings ? [] : [{\n      label: _('LBL_DESKTOP_SELECT_WALLPAPER'),\n      onclick: () => {\n        this.core.make('osjs/dialog', 'file', {\n          mime: ['^image']\n        }, (btn, file) => {\n          if (btn === 'ok') {\n            this._applySettingsByKey('background.src', file);\n          }\n        });\n      }\n    }, {\n      label: _('LBL_DESKTOP_SELECT_THEME'),\n      items: themes.map(t => ({\n        label: __(t.title, t.name),\n        onclick: () => {\n          this._applySettingsByKey('theme', t.name);\n        }\n      }))\n    }];\n\n    if (hasIconview && this.iconview) {\n      defaultItems.push({\n        label: _('LBL_REFRESH'),\n        onclick: () => this.iconview.iconview.reload()\n      });\n    }\n\n    const base = useDefaults === 'function'\n      ? config.defaults(this, defaultItems)\n      : (useDefaults ? defaultItems : []);\n\n    const provided = typeof this.options.contextmenu === 'function'\n      ? this.options.contextmenu(this, defaultItems)\n      : this.options.contextmenu || [];\n\n    const menu = [\n      ...base,\n      ...provided,\n      ...extras\n    ];\n\n    if (menu.length) {\n      this.core.make('osjs/contextmenu').show({\n        menu,\n        position: ev\n      });\n    }\n  }\n\n  /**\n   * Sets the keyboard context.\n   *\n   * Used for tabbing and other special events\n   *\n   * @param {Element} [ctx]\n   */\n  setKeyboardContext(ctx) {\n    this.keyboardContext = ctx;\n  }\n\n  /**\n   * Gets the rectangle of available space\n   *\n   * This is based on any panels etc taking up space\n   *\n   * @return {DesktopViewportRectangle}\n   */\n  getRect() {\n    const root = this.core.$root;\n    // FIXME: Is this now wrong because panels are not on the root anymore ?!\n    const {left, top, right, bottom} = this.subtract;\n    const width = root.offsetWidth - left - right;\n    const height = root.offsetHeight - top - bottom;\n\n    return {width, height, top, bottom, left, right};\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {createNativeNotification} from './utils/dom';\nimport logger from './logger';\n\n/**\n * Notification Options\n *\n * @typedef {Object} NotificationOptions\n * @property {string} title Title\n * @property {string} message Message\n * @property {string} [sound=message] Sound to play\n * @property {string} [icon] Icon source\n * @property {number} [timeout=5000] Timeout value (0=infinite)\n * @property {string} [className] Adds a DOM class name to notification\n */\n\n/**\n * Notification Implementation\n */\nexport default class Notification {\n\n  /**\n   * Create notification\n   *\n   * @param {Core} core Core reference\n   * @param {Element} root Root DOM element\n   * @param {NotificationOptions} options Options\n   */\n  constructor(core, root, options = {}) {\n    const defaultLabel = core.make('osjs/locale')\n      .translate('LBL_NOTIFICATION');\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * Root node reference\n     * @type {Element}\n     * @readonly\n     */\n    this.$root = root;\n\n    /**\n     * Notification DOM node\n     * @type {Element}\n     * @readonly\n     */\n    this.$element = document.createElement('div');\n\n    /**\n     * The notification destruction state\n     * @type {Boolean}\n     * @readonly\n     */\n    this.destroyed = false;\n\n    /**\n     * Options\n     * @type {NotificationOptions}\n     * @readonly\n     */\n    this.options = {\n      icon: null,\n      title: defaultLabel,\n      message: defaultLabel,\n      timeout: 5000,\n      native: core.config('notifications.native', false),\n      sound: 'message',\n      className: '',\n      ...options\n    };\n\n    this.core.emit('osjs/notification:create', this);\n  }\n\n  /**\n   * Destroy notification\n   */\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n\n    this.destroyed = true;\n    this.core.emit('osjs/notification:destroy', this);\n\n    this.$element.remove();\n    this.$element = null;\n    this.$root = null;\n  }\n\n  /**\n   * Render notification\n   * @return {Promise<boolean>}\n   */\n  render() {\n    const onclick = () => this.destroy();\n\n    const renderCustom = () => {\n      const view = state => h('div', {\n        class: 'osjs-notification-wrapper',\n        'data-has-icon': !!state.icon,\n        style: {\n          backgroundImage: state.icon ? `url(${state.icon})` : undefined\n        }\n      }, [\n        h('div', {class: 'osjs-notification-title'}, state.title),\n        h('div', {class: 'osjs-notification-message'}, state.message),\n      ]);\n\n      this.$element.classList.add('osjs-notification');\n      if (this.options.className) {\n        this.$element.classList.add(this.options.className);\n      }\n\n      if (this.options.timeout) {\n        setTimeout(() => this.destroy(), this.options.timeout);\n      }\n\n      this.$element.addEventListener('click', onclick);\n\n      this.$root.appendChild(this.$element);\n\n      app(this.options, {}, view, this.$element);\n\n      return Promise.resolve(true);\n    };\n\n    if (this.options.native) {\n      return createNativeNotification(this.options, onclick)\n        .catch(err => {\n          logger.warn('Error on native notification', err);\n          return renderCustom();\n        });\n    }\n\n    if (this.options.sound) {\n      this.core.make('osjs/sounds')\n        .play(this.options.sound);\n    }\n\n    return renderCustom();\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport Notification from './notification';\nimport {createCssText} from './utils/dom';\n\n/**\n * Notification Factory\n */\nexport default class Notifications {\n\n  /**\n   * @param {Core} core OS.js Core instance reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * @type {Element}\n     */\n    this.$element = null;\n  }\n\n  /**\n   * Destroy notification handler\n   */\n  destroy() {\n    this.$element.remove();\n    this.$element = null;\n  }\n\n  /**\n   * Initialize notification handler\n   */\n  init() {\n    this.$element = document.createElement('div');\n    this.$element.classList.add('osjs-notifications');\n    this.core.$root.appendChild(this.$element);\n\n    this.core.on('osjs/desktop:applySettings', () => {\n      this.setElementStyles();\n    });\n\n    this.setElementStyles();\n  }\n\n  /**\n   * Create a new notification\n   * @param {NotificationOptions} options See notification class for options\n   * @return {Notification}\n   */\n  create(options) {\n    if (!options) {\n      throw new Error('Notification options not given');\n    }\n\n    const notification = new Notification(this.core, this.$element, options);\n    notification.render();\n    return notification;\n  }\n\n  /**\n   * Sets the element styles\n   */\n  setElementStyles() {\n    const styles = createCssText(this.createElementStyles());\n    this.$element.style.cssText = styles;\n  }\n\n  /**\n   * Creates a new CSS style object\n   * @return {{property: string}}\n   */\n  createElementStyles() {\n    const defaultPosition = this.core\n      .config('desktop.settings.notifications.position', 'top-right');\n\n    const position = this.core.make('osjs/settings')\n      .get('osjs/desktop', 'notifications.position', defaultPosition);\n\n    if (position.split('-').length !== 2) {\n      return {};\n    }\n\n    return ['left', 'right', 'top', 'bottom']\n      .reduce((carry, key) => ({\n        [key]: position.indexOf(key) === -1 ? 'auto' : '0',\n        ...carry\n      }), {});\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {supportsPassive} from './utils/dom';\nimport {getEvent, matchKeyCombo} from './utils/input';\nimport {resizer, mover, getMediaQueryName, getCascadePosition} from './utils/windows';\n\nconst isPassive = supportsPassive();\nconst touchArg = isPassive ? {passive: true} : false;\n\n/*\n * Map of available \"actions\"\n */\nconst actionMap = {\n  maximize: (win) => win.maximize() ? null : win.restore(),\n  minimize: (win) => win.minimize(),\n  close: (win) => win.close()\n};\n\n/**\n * Default Window Behavior\n *\n * Controls certain events and their interaction with a window\n */\nexport default class WindowBehavior {\n  /**\n   * Create window behavior\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * Last action\n     * @type {string}\n     */\n    this.lastAction = null;\n\n    /**\n     * LoFi DOM Element\n     * @type {Element}\n     * @readonly\n     */\n    this.$lofi = document.createElement('div');\n    this.$lofi.className = 'osjs-window-behavior-lofi';\n  }\n\n  /**\n   * Initializes window behavior\n   * @param {Window} win Window reference\n   */\n  init(win) {\n    const ontouchstart = ev => this.mousedown(ev, win);\n    const onmousedown = ev => this.mousedown(ev, win);\n    const onclick = ev => this.click(ev, win);\n    const ondblclick = ev => this.dblclick(ev, win);\n\n    const onicondblclick = ev => {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this.iconDblclick(ev, win);\n    };\n\n    const oniconclick = ev => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      this.iconClick(ev, win);\n    };\n\n    const ontrasitionend = ev => {\n      if (win) {\n        win.emit('transitionend');\n      }\n\n      this.core.emit('osjs/window:transitionend', ev, win);\n    };\n\n    win.$element.addEventListener('touchstart', ontouchstart, touchArg);\n    win.$element.addEventListener('mousedown', onmousedown);\n    win.$element.addEventListener('click', onclick);\n    win.$element.addEventListener('dblclick', ondblclick);\n    win.$element.addEventListener('transitionend', ontrasitionend);\n\n    if (win.$icon) {\n      win.$icon.addEventListener('dblclick', onicondblclick);\n      win.$icon.addEventListener('click', oniconclick);\n    }\n\n    win.on('resized,rendered', () => {\n      win.setState('media', getMediaQueryName(win));\n    });\n\n    win.on('destroy', () => {\n      if (win.$element) {\n        win.$element.removeEventListener('touchstart', ontouchstart, touchArg);\n        win.$element.removeEventListener('mousedown', onmousedown);\n        win.$element.removeEventListener('click', onclick);\n        win.$element.removeEventListener('dblclick', ondblclick);\n        win.$element.removeEventListener('transitionend', ontrasitionend);\n      }\n\n      if (win.$icon) {\n        win.$icon.removeEventListener('dblclick', onicondblclick);\n        win.$icon.removeEventListener('click', oniconclick);\n      }\n    });\n\n    const rect = {top: 0, left: 0};\n    const {top, left} = getCascadePosition(win, rect, win.state.position);\n    win.state.position.top = top;\n    win.state.position.left = left;\n    win.state.media = getMediaQueryName(win);\n  }\n\n  /**\n   * Handles Mouse Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  click(ev, win) {\n    if (this.lastAction) {\n      return;\n    }\n\n    const target = ev.target;\n    const hitButton = target.classList.contains('osjs-window-button');\n\n    if (hitButton) {\n      const action =  ev.target.getAttribute('data-action');\n      actionMap[action](win);\n    }\n  }\n\n  /**\n   * Handles Mouse Double Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  dblclick(ev, win) {\n    if (this.lastAction) {\n      return;\n    }\n\n    const target = ev.target;\n    const hitTitle = target.classList.contains('osjs-window-header');\n\n    if (hitTitle) {\n      if (win.state.maximized) {\n        win.restore();\n      } else if (win.state.minimized) {\n        win.raise();\n      } else {\n        win.maximize();\n      }\n    }\n  }\n\n  /**\n   * Handles Mouse Down Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  mousedown(ev, win) {\n    let attributeSet = false;\n\n    const {moveable, resizable} = win.attributes;\n    const {maximized} = win.state;\n    const {lofi, moveKeybinding} = this.core.config('windows');\n    const {clientX, clientY, touch, target} = getEvent(ev);\n\n    const checkMove = matchKeyCombo(moveKeybinding, ev)\n      ? win.$element.contains(target)\n      : target.classList.contains('osjs-window-header');\n\n    const rect = this.core.has('osjs/desktop')\n      ? this.core.make('osjs/desktop').getRect()\n      : {top: 0, left: 0};\n\n    const resize = target.classList.contains('osjs-window-resize')\n      ? resizer(win, target)\n      : null;\n\n    const move = checkMove\n      ? mover(win, {top: 0, left: 0})\n      : null;\n\n    let actionCallback;\n\n    const mousemove = (ev) => {\n      if (!isPassive) {\n        ev.preventDefault();\n      }\n\n      if (maximized || (!moveable && move) || (!resizable && resize)) {\n        return;\n      }\n\n      const transformedEvent = getEvent(ev);\n      const posX = resize ? Math.max(rect.left, transformedEvent.clientX) : transformedEvent.clientX;\n      const posY = resize ? Math.max(rect.top, transformedEvent.clientY) : transformedEvent.clientY;\n      const diffX = posX - clientX;\n      const diffY = posY - clientY;\n\n      if (resize) {\n        const {width, height, top, left} = resize(diffX, diffY);\n\n        actionCallback = () => {\n          win._setState('dimension', {width, height}, false);\n          win._setState('position', {top, left}, false);\n        };\n\n        if (lofi) {\n          this.$lofi.style.top = `${top}px`;\n          this.$lofi.style.left = `${left}px`;\n          this.$lofi.style.width = `${width}px`;\n          this.$lofi.style.height = `${height}px`;\n        } else {\n          actionCallback();\n        }\n\n        this.lastAction = 'resize';\n      } else if (move) {\n        const position = move(diffX, diffY);\n\n        actionCallback = () => {\n          win._setState('position', position, false);\n        };\n\n        if (lofi) {\n          this.$lofi.style.top = `${position.top}px`;\n          this.$lofi.style.left = `${position.left}px`;\n        } else {\n          actionCallback();\n        }\n\n        this.lastAction = 'move';\n      }\n\n      if (this.lastAction) {\n        win._setState(this.lastAction === 'move' ? 'moving' : 'resizing', true);\n\n        if (!attributeSet) {\n          this.core.$root.setAttribute('data-window-action', String(true));\n          attributeSet = true;\n        }\n      }\n    };\n\n    const mouseup = () => {\n      if (touch) {\n        document.removeEventListener('touchmove', mousemove, touchArg);\n        document.removeEventListener('touchend', mouseup, touchArg);\n      } else {\n        document.removeEventListener('mousemove', mousemove);\n        document.removeEventListener('mouseup', mouseup);\n      }\n\n      if (lofi) {\n        this.$lofi.remove();\n\n        if (actionCallback) {\n          actionCallback();\n        }\n\n        actionCallback = undefined;\n      }\n\n      if (this.lastAction === 'move') {\n        win.emit('moved', {...win.state.position}, win);\n        win._setState('moving', false);\n      } else if (this.lastAction === 'resize') {\n        win.emit('resized', {...win.state.dimension}, win);\n        win._setState('resizing', false);\n      }\n\n      this.core.$root.setAttribute('data-window-action', String(false));\n    };\n\n\n    if (!win.focus()) {\n      win.setNextZindex();\n    }\n\n    if (move || resize) {\n      if (touch) {\n        document.addEventListener('touchmove', mousemove, touchArg);\n        document.addEventListener('touchend', mouseup, touchArg);\n      } else {\n        document.addEventListener('mousemove', mousemove);\n        document.addEventListener('mouseup', mouseup);\n      }\n    }\n\n    this.lastAction = null;\n\n    if (this.core.has('osjs/contextmenu')) {\n      this.core.make('osjs/contextmenu').hide();\n    }\n\n    if (lofi) {\n      this.$lofi.style.zIndex = win.state.zIndex + 1;\n      this.$lofi.style.top = `${win.state.position.top}px`;\n      this.$lofi.style.left = `${win.state.position.left}px`;\n      this.$lofi.style.width = `${win.state.dimension.width}px`;\n      this.$lofi.style.height = `${win.state.dimension.height}px`;\n\n      if (!this.$lofi.parentNode) {\n        document.body.appendChild(this.$lofi);\n      }\n    }\n  }\n\n  /**\n   * Handles Icon Double Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  iconDblclick(ev, win) {\n    win.close();\n  }\n\n  /**\n   * Handles Icon Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  iconClick(ev, win) {\n    const {minimized, maximized} = win.state;\n    const {minimizable, maximizable, closeable} = win.attributes;\n    const _ = this.core.make('osjs/locale').translate;\n\n    this.core.make('osjs/contextmenu', {\n      position: ev,\n      menu: [{\n        label: minimized ? _('LBL_RAISE') : _('LBL_MINIMIZE'),\n        disabled: !minimizable,\n        onclick: () => minimized ? win.raise() : win.minimize()\n      }, {\n        label: maximized ? _('LBL_RESTORE') : _('LBL_MAXIMIZE'),\n        disabled: !maximizable,\n        onclick: () => maximized ? win.restore() : win.maximize()\n      }, {\n        label: _('LBL_CLOSE'),\n        disabled: !closeable,\n        onclick: () => win.close()\n      }]\n    });\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {EventEmitter} from '@osjs/event-emitter';\n\nconst createAttributes = (props, field, disabled) => {\n  disabled = disabled ? 'disabled' : undefined;\n  if (field.tagName === 'input') {\n    if (field.attributes.type !== 'submit') {\n      return {\n        autocapitalize: 'off',\n        autocomplete: 'new-' + field.attributes.name,\n        disabled,\n        oncreate: el => (el.value = props[field.attributes.name] || field.value || ''),\n        ...field.attributes\n      };\n    }\n  }\n\n  return {disabled, ...field.attributes};\n};\n\nconst createFields = (props, fields, disabled) => {\n  const children = f => {\n    if (f.tagName === 'select' && f.choices) {\n      return f.choices.map(c => h('option', {\n        current: c.current ? 'current' : undefined,\n        value: c.value\n      }, c.label));\n    }\n\n    return f.children || [];\n  };\n\n  return fields.map(f => h('div', {\n    class: 'osjs-login-field osjs-login-field-' + f.tagName\n  }, h(f.tagName, createAttributes(props, f, disabled), children(f))));\n};\n\nconst createView = (options) => {\n  const {src, position} = options.logo;\n\n  const logo = () =>\n    h('div', {\n      class: 'osjs-login-logo',\n      'data-position': position,\n      style: {\n        backgroundImage: `url('${src}')`\n      }\n    });\n\n  const fields = state => {\n    const result = createFields(state, options.fields, state.loading);\n\n    if (src && position === 'bottom') {\n      result.push(logo());\n    }\n\n    if (options.stamp) {\n      result.push(h('div', {\n        class: 'osjs-login-stamp'\n      }, options.stamp));\n    }\n\n    return result;\n  };\n\n  return (state, actions) => {\n    const header = [];\n\n    if (options.title) {\n      header.push(h('div', {\n        class: 'osjs-login-header'\n      }, h('span', {}, options.title)));\n    }\n\n    if (src && ['top', 'middle'].indexOf(position) !== -1) {\n      const m = position === 'top'\n        ? 'unshift'\n        : 'push';\n\n      header[m](logo());\n    }\n\n    const createSide = side => position === side\n      ? h('div', {'data-position': position}, logo())\n      : null;\n\n    const left = () => createSide('left');\n    const right = () => createSide('right');\n    const middle = () => h('div', {class: 'osjs-login-content'}, children);\n\n    const formFields = fields(state);\n\n    const children = [\n      ...header,\n\n      h('div', {\n        class: 'osjs-login-error',\n        style: {display: state.error ? 'block' : 'none'}\n      }, h('span', {}, state.error)),\n      h('form', {\n        loading: false,\n        method: 'post',\n        action: '#',\n        autocomplete: 'off',\n        onsubmit: actions.submit\n      }, formFields)\n    ];\n\n    return h('div', {\n      class: 'osjs-login',\n      id: options.id,\n      style: {display: state.hidden ? 'none' : undefined}\n    }, [left(), middle(), right()].filter(el => !!el));\n  };\n};\n\n/**\n * Login UI Adapter\n */\nconst create = (options, login, startHidden, $container) => {\n  const ee = new EventEmitter('LoginUI');\n  const view = createView(options);\n  const a = app({\n    hidden: startHidden,\n    ...login\n  }, {\n    setLoading: loading => ({loading}),\n    setError: error => ({error, hidden: false}),\n    submit: ev => state => {\n      ev.preventDefault();\n\n      if (state.loading) {\n        return;\n      }\n\n      const values = Array.from(ev.target.elements)\n        .filter(el => el.type !== 'submit')\n        .reduce((o, el) => ({...o, [el.name] : el.value}), {});\n\n      ee.emit('login:post', values);\n    }\n  }, view, $container);\n\n  ee.on('login:start', () => a.setLoading(true));\n  ee.on('login:stop', () => a.setLoading(false));\n  ee.on('login:error', (msg) => a.setError(msg));\n\n  return ee;\n};\n\nexport default create;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport createUI from './adapters/ui/login';\n\n/**\n * Login Options\n *\n * @typedef {Object} LoginOptions\n * @property {string} [title] Title\n * @property {object[]} [fields] Fields\n */\n\n/**\n * OS.js Login UI\n */\nexport default class Login extends EventEmitter {\n\n  /**\n   * Create authentication handler\n   *\n   * @param {Core} core Core reference\n   * @param {LoginOptions} [options] Options\n   */\n  constructor(core, options) {\n    super('Login');\n\n    /**\n     * Login root DOM element\n     * @type {Element}\n     */\n    this.$container = null;\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * Login options\n     * TODO: typedef\n     * @type {Object}\n     * @readonly\n     */\n    this.options = {\n      id: 'osjs-login',\n      title: 'Welcome to OS.js',\n      stamp: core.config('version'),\n      logo: {\n        position: 'top',\n        src: null\n      },\n      fields: [{\n        tagName: 'input',\n        attributes: {\n          name: 'username',\n          type: 'text',\n          placeholder: 'Username'\n        }\n      }, {\n        tagName: 'input',\n        attributes: {\n          name: 'password',\n          type: 'password',\n          placeholder: 'Password'\n        }\n      }, {\n        tagName: 'input',\n        attributes: {\n          type: 'submit',\n          value: 'Login'\n        }\n      }],\n      ...options\n    };\n  }\n\n  /**\n   * Initializes the UI\n   */\n  init(startHidden) {\n    this.$container = document.createElement('div');\n    this.$container.id = this.options.id;\n    this.$container.className = 'osjs-login-base';\n    this.core.$root.classList.add('login');\n    this.core.$root.appendChild(this.$container);\n\n    this.render(startHidden);\n  }\n\n  /**\n   * Destroys the UI\n   */\n  destroy() {\n    this.core.$root.classList.remove('login');\n\n    if (this.$container) {\n      this.$container.remove();\n      this.$container = null;\n    }\n\n    super.destroy();\n  }\n\n  /**\n   * Renders the UI\n   */\n  render(startHidden) {\n    const login = this.core.config('auth.login', {});\n    const ui = createUI(this.options, login, startHidden, this.$container);\n\n    ui.on('register:post', values => this.emit('register:post', values));\n    ui.on('login:post', values => this.emit('login:post', values));\n    this.on('login:start', () => ui.emit('login:start'));\n    this.on('login:stop', () => ui.emit('login:stop'));\n    this.on('login:error', (msg, err) => ui.emit('login:error', msg, err));\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * LocalStorage Auth adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst localStorageAuth = (core, options) => ({\n  login: (values) => Promise.resolve(values)\n});\n\nexport default localStorageAuth;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\nimport Cookies from 'js-cookie';\nimport Login from './login';\nimport serverAuth  from './adapters/auth/server';\nimport localStorageAuth from './adapters/auth/localstorage';\nimport logger from './logger';\n\nconst defaultAdapters = {\n  server: serverAuth,\n  localStorage: localStorageAuth\n};\n\nconst createUi = (core, options) => {\n  const defaultUi = core.config('auth.ui', {});\n\n  return options.login\n    ? options.login(core, options.config || {})\n    : new Login(core, options.ui || defaultUi);\n};\n\nconst createAdapter = (core, options) => {\n  const adapter = core.config('standalone')\n    ? localStorageAuth\n    : typeof options.adapter === 'function'\n      ? options.adapter\n      : defaultAdapters[options.adapter || 'server'];\n\n  return {\n    login: () => Promise.reject(new Error('Not implemented')),\n    logout: () => Promise.reject(new Error('Not implemented')),\n    register: () => Promise.reject(new Error('Not implemented')),\n    init: () => Promise.resolve(true),\n    destroy: () => {},\n    ...adapter(core, options.config || {})\n  };\n};\n\n/**\n * TODO: typedef\n * @typedef {Object} AuthAdapter\n */\n\n/**\n * TODO: typedef\n * @typedef {Object} AuthAdapterConfig\n */\n\n/**\n * @typedef {Object} AuthForm\n * @property {string} [username]\n * @property {string} [password]\n */\n\n/**\n * @callback AuthAdapterCallback\n * @param {Core} core\n * @return {AuthAdapter}\n */\n\n/**\n * @callback LoginAdapterCallback\n * @param {Core} core\n * @return {Login}\n */\n\n/**\n * @callback AuthCallback\n * @param {AuthForm} data\n * @return {boolean}\n */\n\n/**\n * @typedef {Object} AuthSettings\n * @property {AuthAdapterCallback|AuthAdapter} [adapter] Adapter to use\n * @property {LoginAdapterCallback|Login} [login] Login Adapter to use\n * @property {AuthAdapterConfig} [config] Adapter configuration\n */\n\n/**\n * Handles Authentication\n */\nexport default class Auth {\n\n  /**\n   * @param {Core} core OS.js Core instance reference\n   * @param {AuthSettings} [options={}] Auth Options\n   */\n  constructor(core, options = {}) {\n    /**\n     * Authentication UI\n     * @type {Login}\n     * @readonly\n     */\n    this.ui = createUi(core, options);\n\n    /**\n     * Authentication adapter\n     * @type {AuthAdapter}\n     * @readonly\n     */\n    this.adapter = createAdapter(core, options);\n\n    /**\n     * Authentication callback function\n     * @type {AuthCallback}\n     * @readonly\n     */\n    this.callback = function() {};\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n  }\n\n  /**\n   * Initializes authentication handler\n   */\n  init() {\n    this.ui.on('login:post', values => this.login(values));\n    this.ui.on('register:post', values => this.register(values));\n\n    return this.adapter.init();\n  }\n\n  /**\n   * Destroy authentication handler\n   */\n  destroy() {\n    this.ui.destroy();\n  }\n\n  /**\n   * Run the shutdown procedure\n   * @param {boolean} [reload] Reload afterwards\n   */\n  shutdown(reload) {\n    try {\n      this.core.destroy();\n    } catch (e) {\n      logger.warn('Exception on destruction', e);\n    }\n\n    this.core.emit('osjs/core:logged-out');\n\n    if (reload) {\n      setTimeout(() => {\n        window.location.reload();\n        // FIXME Reload, not refresh\n        // this.core.boot();\n      }, 1);\n    }\n  }\n\n  /**\n   * Shows Login UI\n   * @param {AuthCallback} cb Authentication callback\n   * @return {Promise<boolean>}\n   */\n  show(cb) {\n    const login = this.core.config('auth.login', {});\n    const autologin = login.username && login.password;\n    const settings = this.core.config('auth.cookie');\n\n    this.callback = cb;\n    this.ui.init(autologin);\n\n    if (autologin) {\n      return this.login(login);\n    } else if (settings.enabled) {\n      const cookie = Cookies.get(settings.name);\n      console.warn(cookie);\n      if (cookie) {\n        return this.login(JSON.parse(cookie));\n      }\n    }\n\n    return Promise.resolve(true);\n  }\n\n  /**\n   * Performs a login\n   * @param {AuthForm} values Form values as JSON\n   * @return {Promise<boolean>}\n   */\n  login(values) {\n    this.ui.emit('login:start');\n\n    return this.adapter\n      .login(values)\n      .then(response => {\n        if (response) {\n          const settings = this.core.config('auth.cookie');\n          if (settings.enabled) {\n            Cookies.set(settings.name, JSON.stringify(values), {\n              expires: settings.expires,\n              sameSite: 'strict'\n            });\n          } else {\n            Cookies.remove(settings.name);\n          }\n\n          this.ui.destroy();\n          this.callback(response);\n\n          this.core.emit('osjs/core:logged-in');\n          this.ui.emit('login:stop', response);\n\n          return true;\n        }\n\n        return false;\n      })\n      .catch(e => {\n        if (this.core.config('development')) {\n          logger.warn('Exception on login', e);\n        }\n\n        this.ui.emit('login:error', 'Login failed', e);\n        this.ui.emit('login:stop');\n\n        return false;\n      });\n  }\n\n  /**\n   * Performs a logout\n   * @param {boolean} [reload=true] Reload client afterwards\n   * @return {Promise<boolean>}\n   */\n  logout(reload = true) {\n    return this.adapter.logout(reload)\n      .then(response => {\n        if (!response) {\n          return false;\n        }\n\n        const settings = this.core.config('auth.cookie');\n        Cookies.remove(settings.name);\n\n        this.shutdown(reload);\n\n        return true;\n      });\n  }\n\n  /**\n   * Performs a register call\n   * @param {AuthForm} values Form values as JSON\n   * @return {Promise<*>}\n   */\n  register(values) {\n    this.ui.emit('register:start');\n\n    return this.adapter\n      .register(values)\n      .then(response => {\n        if (response) {\n          this.ui.emit('register:stop', response);\n\n          return response;\n        }\n\n        return false;\n      })\n      .catch(e => {\n        if (this.core.config('development')) {\n          logger.warn('Exception on registration', e);\n        }\n\n        this.ui.emit('register:error', 'Registration failed');\n        this.ui.emit('register:stop');\n\n        return false;\n      });\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * Server Auth adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst serverAuth = (core, options) => {\n  const request = (endpoint, params = {}) => core.request(endpoint, {\n    method: 'POST',\n    body: JSON.stringify(params)\n  }, 'json');\n\n  return {\n    register: (values) => request('/register', values),\n    login: (values) => request('/login', values),\n    logout: () =>  request('/logout')\n  };\n};\n\nexport default serverAuth;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport Application from './application';\nimport logger from './logger';\n\n/**\n * Session Handler\n */\nexport default class Session {\n\n  /**\n   * Creates the Session Handler\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n  }\n\n  /**\n   * Destroys instance\n   */\n  destroy() {\n  }\n\n  /**\n   * Saves session\n   * @return {Promise<boolean>}\n   */\n  save() {\n    const apps = Application.getApplications()\n      .filter(a => a.options.sessionable !== false);\n\n    const session = apps.map(app => app.getSession());\n\n    return this.core.make('osjs/settings')\n      .set('osjs/session', null, session)\n      .save();\n  }\n\n  /**\n   * Loads session\n   * @param {boolean} [fresh=false] Kill all current applications first\n   * @return {Promise<boolean>}\n   */\n  load(fresh = false) {\n    if (fresh) {\n      Application.destroyAll();\n    }\n\n    let session = this.core.make('osjs/settings')\n      .get('osjs/session');\n\n    if (session && !(session instanceof Array)) {\n      session = Object.values(session);\n    }\n\n    if (session) {\n      console.group('Session::load()');\n\n      session.forEach(app => {\n        try {\n          this.core.run(app.name, app.args, {\n            restore: {\n              windows: app.windows\n            }\n          });\n        } catch (e) {\n          logger.warn('Error while loading session entry', e);\n        }\n      });\n\n      console.groupEnd();\n    }\n\n    return Promise.resolve(true);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {style, script} from './dom';\nimport logger from '../logger';\n\n/**\n * @typedef {HTMLScriptElement|HTMLLinkElement} PreloaderEntryElement\n */\n\n/**\n * @typedef {Object} PreloaderEntry\n * @property {boolean} success\n * @property {PreloaderEntryElement} [el]\n * @property {string} [entry]\n * @property {string} [error]\n */\n\n/**\n * @typedef {Object} PreloaderResult\n * @property {string[]} errors\n * @property {{string: PreloaderEntryElement}} elements\n */\n\n/**\n * The Preloader loads styles and scripts\n */\nexport default class Preloader {\n\n  constructor(root) {\n    /**\n     * A list of cached preloads\n     * @type {String[]}\n     */\n    this.loaded = [];\n\n    /**\n     * @type {Element}\n     */\n    this.$root = root;\n  }\n\n  destroy() {\n    this.loaded = [];\n  }\n\n  /**\n   * Loads all resources required for a package\n   * @param {string[]} list A list of resources\n   * @param {boolean} [force=false] Force loading even though previously cached\n   * @return {Promise<PreloaderResult>} A list of failed resources\n   */\n  load(list, force = false) {\n    const cached = entry => force\n      ? false\n      : this.loaded.find(src => src === entry);\n\n    const promises = list\n      .filter(entry => !cached(entry))\n      .map(entry => {\n        logger.debug('Packages::preload()', entry);\n\n        const p = entry.match(/\\.js$/)\n          ? script(this.$root, entry)\n          : style(this.$root, entry);\n\n        return p\n          .then(el => ({success: true, entry, el}))\n          .catch(error => ({success: false, entry, error}));\n      });\n\n    return Promise.all(promises)\n      .then(results => this._load(results, cached));\n  }\n\n  /**\n   * Checks the loaded list\n   * @private\n   * @param {Object[]} results Preload results\n   * @param {string[]} cached Already cached preloads\n   * @return {PreloaderResult}\n   */\n  _load(results, cached) {\n    const successes = results.filter(res => res.success);\n    successes.forEach(entry => {\n      if (!cached(entry)) {\n        this.loaded.push(entry);\n      }\n    });\n\n    const failed = results.filter(res => !res.success);\n    failed.forEach(failed => logger.warn('Failed loading', failed.entry, failed.error));\n\n    return {\n      errors: failed.map(failed => failed.entry),\n      elements: successes.reduce((result, iter) => {\n        return {...result, [iter.entry]: iter.el};\n      }, {})\n    };\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nexport const createPackageAvailabilityCheck = (core) => {\n  const user = core.getUser();\n  const permissions = core.config('packages.permissions', {});\n\n  const checkMetadataGroups = iter => {\n    const m = iter.strictGroups === false ? 'some' : 'every';\n\n    return iter.groups instanceof Array\n      ? iter.groups[m](g => user.groups.indexOf(g) !== -1)\n      : true;\n  };\n\n  const checkConfigGroups = iter => {\n    const perm = permissions[iter.name];\n    if (perm && perm.groups instanceof Array) {\n      const m = perm.strictGroups === false ? 'some' : 'every';\n      return perm.groups[m](g => user.groups.indexOf(g) !== -1);\n    }\n\n    return true;\n  };\n\n  const checkBlacklist = iter => user.blacklist instanceof Array\n    ? user.blacklist.indexOf(iter.name) === -1\n    : true;\n\n  const checks =  [\n    checkMetadataGroups,\n    checkConfigGroups,\n    checkBlacklist\n  ];\n\n  return metadata => checks.every(fn => fn(metadata));\n};\n\nexport const createManifestFromArray = list => list\n  .map(iter => ({\n    type: 'application',\n    ...iter,\n    files: (iter.files || [])\n      .map(file =>\n        typeof file === 'string'\n          ? {filename: file, type: 'preload'}\n          : {type: 'preload', ...file}\n      )\n  }));\n\nexport const filterMetadataFilesByType = (files, type) =>\n  (files || []).filter(file => file.type === type);\n\nexport const metadataFilesToFilenames = files =>\n  (files || []).map(file => file.filename);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport Application from './application';\nimport Preloader from './utils/preloader';\nimport logger from './logger';\nimport {\n  createPackageAvailabilityCheck,\n  createManifestFromArray,\n  filterMetadataFilesByType,\n  metadataFilesToFilenames\n} from './utils/packages';\n\n/**\n * A registered package reference\n *\n * @typedef {Object} PackageReference\n * @property {PackageMetadata} metadata Package metadata\n * @property {Function} callback Callback to instanciate\n */\n\n/**\n * A package metadata\n *\n * @typedef {Object} PackageMetadata\n * @property {string} name The package name\n * @property {string} [category] Package category\n * @property {string} [icon] Package icon\n * @property {boolean} [singleton] If only one instance allowed\n * @property {boolean} [autostart] Autostart on boot\n * @property {boolean} [hidden] Hide from launch menus etc.\n * @property {string} [server] Server script filename\n * @property {string[]} [groups] Only available for users in this group\n * @property {Object[]|string[]} [files] Files to preload\n * @property {{key: string}} title A map of locales and titles\n * @property {{key: string}} description A map of locales and titles\n */\n\n/**\n * Package Launch Options\n *\n * @typedef {Object} PackageLaunchOptions\n * @property {boolean} [forcePreload=false] Force preload reloading\n */\n\n/**\n * Package Manager\n *\n * Handles indexing, loading and launching of OS.js packages\n */\nexport default class Packages {\n\n  /**\n   * Create package manage\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * A list of registered packages\n     * @type {PackageReference[]}\n     */\n    this.packages = [];\n\n    /**\n     * The lost of loaded package metadata\n     * @type {PackageMetadata[]}\n     */\n    this.metadata = [];\n\n    /**\n     * A list of running application names\n     *\n     * Mainly used for singleton awareness\n     *\n     * @private\n     * @type {string[]}\n     */\n    this._running = [];\n\n    /**\n     * Preloader\n     * @type {Preloader}\n     * @readonly\n     */\n    this.preloader = new Preloader(core.$resourceRoot);\n\n    /**\n     * If inited\n     * @type {boolean}\n     */\n    this.inited = false;\n  }\n\n  /**\n   * Destroy package manager\n   */\n  destroy() {\n    this.packages = [];\n    this.metadata = [];\n\n    this.preloader.destroy();\n  }\n\n  /**\n   * Initializes package manager\n   * @return {Promise<boolean>}\n   */\n  init() {\n    logger.debug('Packages::init()');\n\n    if (!this.inited) {\n      this.core.on('osjs/core:started', () => this._autostart());\n    }\n\n    this.metadata = this.core.config('packages.metadata', [])\n      .map(iter => ({type: 'application', ...iter}));\n\n    this.inited = true;\n\n    const manifest = this.core.config('packages.manifest');\n\n    return manifest\n      ? this.core.request(manifest, {}, 'json', true)\n        .then(metadata => this.addPackages(metadata))\n        .then(metadata => this._preloadBackgroundFiles(metadata))\n        .then(() => true)\n        .catch(error => logger.error(error))\n      : Promise.resolve(true);\n  }\n\n  /**\n   * Launches a (application) package\n   *\n   * @param {string} name Package name\n   * @param {{foo: *}} [args={}] Launch arguments\n   * @param {PackageLaunchOptions} [options={}] Launch options\n   * @see PackageServiceProvider\n   * @throws {Error}\n   * @return {Promise<Application>}\n   */\n  launch(name, args = {}, options = {}) {\n    logger.debug('Packages::launch()', name, args, options);\n\n    const _ = this.core.make('osjs/locale').translate;\n    const metadata = this.metadata.find(pkg => pkg.name === name);\n    if (!metadata) {\n      throw new Error(_('ERR_PACKAGE_NOT_FOUND', name));\n    }\n\n    if (['theme', 'icons', 'sounds'].indexOf(metadata.type) !== -1) {\n      return this._launchTheme(name, metadata);\n    }\n\n    return this._launchApplication(name, metadata, args, options);\n  }\n\n  /**\n   * Launches an application package\n   *\n   * @private\n   * @param {string} name Application package name\n   * @param {Metadata} metadata Application metadata\n   * @param {{foo: *}} args Launch arguments\n   * @param {PackageLaunchOptions} options Launch options\n   * @return {Promise<Application>}\n   */\n  _launchApplication(name, metadata, args, options) {\n    let signaled = false;\n\n    if (metadata.singleton) {\n      const foundApp = Application.getApplications()\n        .find(app => app.metadata.name === metadata.name);\n\n      if (foundApp) {\n        foundApp.emit('attention', args, options);\n        signaled = true;\n\n        return Promise.resolve(foundApp);\n      }\n\n      const found = this._running.filter(n => n === name);\n\n      if (found.length > 0) {\n        return new Promise((resolve, reject) => {\n          this.core.once(`osjs/application:${name}:launched`, a => {\n            if (signaled) {\n              resolve(a);\n            } else {\n              a.emit('attention', args, options);\n              resolve(a);\n            }\n          });\n        });\n      }\n    }\n\n    this.core.emit('osjs/application:launch', name, args, options);\n\n    this._running.push(name);\n\n    return this._launch(name, metadata, args, options);\n  }\n\n  /**\n   * Launches a (theme) package\n   *\n   * @private\n   * @param {string} name Package name\n   * @param {Metadata} metadata Application metadata\n   * @throws {Error}\n   * @return {Promise<object>}\n   */\n  _launchTheme(name, metadata) {\n    const preloads = this._getPreloads(metadata, 'preload', 'theme');\n\n    return this.preloader.load(preloads)\n      .then(result => {\n        return {\n          elements: {},\n          ...result,\n          ...this.packages.find(pkg => pkg.metadata.name === name) || {}\n        };\n      });\n  }\n\n  /**\n   * Returns preloads\n   *\n   * @private\n   * @param {Metadata} metadata Application metadata\n   * @param {string} fileType Files type\n   * @param {string} packageType Package type\n   * @return {string[]}\n   */\n  _getPreloads(metadata, fileType, packageType) {\n    return metadataFilesToFilenames(\n      filterMetadataFilesByType(metadata.files, fileType)\n    ).map(f => this.core.url(f, {}, {type: packageType, ...metadata}));\n  }\n\n  /**\n   * Wrapper for launching a (application) package\n   *\n   * @private\n   * @param {string} name Package name\n   * @param {{foo: *}} args Launch arguments\n   * @param {PackageLaunchOptions} options Launch options\n   * @return {Promise<Application>}\n   */\n  _launch(name, metadata, args, options) {\n    const _ = this.core.make('osjs/locale').translate;\n    const canLaunch = createPackageAvailabilityCheck(this.core);\n\n    const dialog = e => {\n      if (this.core.has('osjs/dialog')) {\n        this.core.make('osjs/dialog', 'alert', {\n          type: 'error',\n          title: _('ERR_PACKAGE_EXCEPTION', name),\n          message: _('ERR_PACKAGE_EXCEPTION', name),\n          error: e\n        }, () => { /* noop */});\n      } else {\n        alert(`${_('ERR_PACKAGE_EXCEPTION', name)}: ${e.stack || e}`);\n      }\n    };\n\n    const fail = err => {\n      this.core.emit('osjs/application:launched', name, false);\n      this.core.emit(`osjs/application:${name}:launched`, false);\n\n      dialog(err);\n\n      throw new Error(err);\n    };\n\n    const preloads = this._getPreloads(metadata, 'preload', 'apps');\n\n    const create = found => {\n      let app;\n\n      try {\n        console.group('Packages::_launch()');\n        app = found.callback(this.core, args, options, found.metadata);\n\n        if (app instanceof Application) {\n          app.on('destroy', () => {\n            const foundIndex = this._running.findIndex(n => n === name);\n            if (foundIndex !== -1) {\n              this._running.splice(foundIndex, 1);\n            }\n          });\n        } else {\n          logger.warn('The application', name, 'did not return an Application instance from registration');\n        }\n      } catch (e) {\n        dialog(e);\n\n        logger.warn('Exception when launching', name, e);\n      } finally {\n        this.core.emit('osjs/application:launched', name, app);\n        this.core.emit(`osjs/application:${name}:launched`, app);\n        console.groupEnd();\n      }\n\n      return app;\n    };\n\n    if (!canLaunch(metadata)) {\n      fail(_('ERR_PACKAGE_PERMISSION_DENIED', name));\n    }\n\n    return this.preloader.load(preloads, options.forcePreload === true)\n      .then(({errors}) => {\n        if (errors.length) {\n          fail(_('ERR_PACKAGE_LOAD', name, errors.join(', ')));\n        }\n\n        const found = this.packages.find(pkg => pkg.metadata.name === name);\n        if (!found) {\n          fail(_('ERR_PACKAGE_NO_RUNTIME', name));\n        }\n\n        return create(found);\n      });\n  }\n\n  /**\n   * Autostarts tagged packages\n   * @private\n   */\n  _autostart() {\n    const meta = this.metadata\n      .filter(pkg => pkg.autostart === true);\n\n    const configured = this.core\n      .config('application.autostart', [])\n      .map(value => typeof value === 'string' ? {name: value} : value);\n\n    [...meta, ...configured].forEach(({name, args}) => this.launch(name, args || {}));\n  }\n\n  /**\n   * Registers a package\n   *\n   * @param {string} name Package name\n   * @param {Function} callback Callback function to construct application instance\n   * @throws {Error}\n   */\n  register(name, callback) {\n    logger.debug('Packages::register()', name);\n\n    const _ = this.core.make('osjs/locale').translate;\n    const metadata = this.metadata.find(pkg => pkg.name === name);\n    if (!metadata) {\n      throw new Error(_('ERR_PACKAGE_NO_METADATA', name));\n    }\n\n    const foundIndex = this.packages.findIndex(pkg => pkg.metadata.name === name);\n    if (foundIndex !== -1) {\n      this.packages.splice(foundIndex, 1);\n    }\n\n    this.packages.push({\n      metadata,\n      callback\n    });\n  }\n\n  /**\n   * Adds a set of packages\n   * @param {PackageMetadata[]} list Package list\n   * @return {PackageMetadata[]} Current list of packages\n   */\n  addPackages(list) {\n    if (list instanceof Array) {\n      const override = this.core.config('packages.overrideMetadata', {});\n      const append = createManifestFromArray(list)\n        .map(meta => override[meta.name] ? {...meta, ...override[meta.name]} : meta);\n\n      this.metadata = [...this.metadata, ...append];\n    }\n\n    return this.getPackages();\n  }\n\n  /**\n   * Gets a list of packages (metadata)\n   * @param {Function} [filter] A filter function\n   * @return {PackageMetadata[]}\n   */\n  getPackages(filter) {\n    filter = filter || (() => true);\n\n    const metadata = this.metadata.map(m => ({...m}));\n    const hidden = this.core.config('packages.hidden', []);\n    const filterAvailable = createPackageAvailabilityCheck(this.core);\n\n    const filterConfigHidden = iter => hidden instanceof Array\n      ? hidden.indexOf(iter.name) === -1\n      : true;\n\n    return metadata\n      .filter(filterAvailable)\n      .filter(filterConfigHidden)\n      .filter(filter);\n  }\n\n  /**\n   * Gets a list of packages compatible with the given mime type\n   * @param {string} mimeType MIME Type\n   * @see PackageManager#getPackages\n   * @return {PackageMetadata[]}\n   */\n  getCompatiblePackages(mimeType) {\n    return this.getPackages(meta => {\n      if (meta.mimes && !meta.hidden) {\n        return !!meta.mimes.find(mime => {\n          try {\n            const re = new RegExp(mime);\n            return re.test(mimeType);\n          } catch (e) {\n            logger.warn('Compability check failed', e);\n          }\n\n          return mime === mimeType;\n        });\n      }\n\n      return false;\n    });\n  }\n\n  /**\n   * Preloads background files of a set of packages\n   * @param {PackageMetadata[]} list Package list\n   */\n  _preloadBackgroundFiles(list) {\n    const backgroundFiles = list.reduce((filenames, iter) => [\n      ...filenames,\n      ...this._getPreloads(iter, 'background', 'apps')\n    ], []);\n\n    return this.preloader.load(backgroundFiles)\n      .then(({errors = []}) => {\n        errors.forEach(error => logger.error(error));\n      });\n  }\n\n  /**\n   * Gets a list of running packages\n   * @return {string[]}\n   */\n  running() {\n    return this._running;\n  }\n\n  /**\n   * Gets the package metadata for a given package name\n   * @param {string} name\n   * @returns {PackageMetadata}\n   */\n  getMetadataFromName(name) {\n    const found = this.metadata.find(pkg => pkg.name === name);\n    return found ? {...found} : null;\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport logger from './logger';\nimport defaultIcon from './styles/logo-blue-32x32.png';\n\n/**\n * Tray Icon Data\n * @typedef {Object} TrayEntryData\n * @property {string} [key] Used as internal index for tray entry\n * @property {string} [icon] Icon source\n * @property {string} [title] The title and tooltip\n * @property {Function} [onclick] The callback function for clicks\n * @property {Function} [oncontextmenu] The callback function for contextmenu\n */\n\n/**\n * Tray Icon Entry\n * @typedef {Object} TrayEntry\n * @property {TrayEntryData} entry The given entry data\n * @property {Function} update Updates entry with given data\n * @property {Function} destroy Destroy the entry\n */\n\n/**\n * Tray Handler\n */\nexport default class Tray {\n\n  /**\n   * Creates the Tray Handler\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * All Tray entries\n     * @type {TrayEntry[]}\n     */\n    this.entries = [];\n  }\n\n  /**\n   * Destroys instance\n   */\n  destroy() {\n    this.entries = [];\n  }\n\n  /**\n   * Creates a new Tray entry\n   * @param {TrayEntryData} options Options\n   * @param {Function} [handler] The callback function for all events\n   * @return {TrayEntry}\n   */\n  create(options, handler) {\n    const defaultTitle = this.core.make('osjs/locale')\n      .translate('LBL_TRAY');\n\n    handler = handler || (() => {});\n\n    const entry = {\n      key: null,\n      icon: defaultIcon,\n      title: defaultTitle,\n      onclick: handler,\n      oncontextmenu: handler,\n      handler,\n      ...options\n    };\n\n    logger.debug('Created new tray entry', entry);\n\n    this.entries.push(entry);\n\n    this.core.emit('osjs/tray:create', entry);\n    this.core.emit('osjs/tray:update', this.entries);\n\n    const obj = {\n      entry,\n      update: u => {\n        Object.keys(u).forEach(k => (entry[k] = u[k]));\n\n        this.core.emit('osjs/tray:update', this.entries);\n      },\n      destroy: () => this.remove(entry)\n    };\n\n    return obj;\n  }\n\n  /**\n   * Removes a Tray entry\n   * @param {TrayEntry} entry The tray entry\n   */\n  remove(entry) {\n    const foundIndex = this.entries.findIndex(e => e === entry);\n    if (foundIndex !== -1) {\n      this.entries.splice(foundIndex, 1);\n\n      this.core.emit('osjs/tray:remove', entry);\n      this.core.emit('osjs/tray:update', this.entries);\n    }\n  }\n\n  /**\n   * @return {TrayEntry[]}\n   */\n  list() {\n    return this.entries;\n  }\n\n  /**\n   * @return {Boolean}\n   */\n  has(key) {\n    return this.entries.findIndex(entry => entry.key === key) !== -1;\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * Clipboard Data\n *\n * @typedef {Object} ClipboardData\n * @property {string} [type] Optional data type\n * @property {*} data\n */\n\n/**\n * Clipboard Manager\n */\nexport default class Clipboard {\n\n  /**\n   * Create new clipboard\n   */\n  constructor() {\n    /**\n     * @type {ClipboardData}\n     */\n    this.clipboard = undefined;\n\n    this.clear();\n  }\n\n  /**\n   * Destroy clipboard\n   */\n  destroy() {\n    this.clear();\n  }\n\n  /**\n   * Clear clipboard\n   */\n  clear() {\n    this.clipboard = {data: undefined, type: undefined};\n  }\n\n  /**\n   * Set clipboard data\n   * @param {*} data Clipboard data. For async data, provide a function that returns a promise\n   * @param {string} [type] Optional type used by applications for identifying content\n   */\n  set(data, type) {\n    this.clipboard = {data, type};\n  }\n\n  /**\n   * Checks if current clipboard data has this type\n   * @param {string|RegExp} type Data type\n   * @return {boolean}\n   */\n  has(type) {\n    if (type instanceof RegExp) {\n      return typeof this.clipboard.type === 'string' &&\n        !!this.clipboard.type.match(type);\n    }\n    return this.clipboard.type === type;\n  }\n\n  /**\n   * Gets clipboard data\n   * @param {boolean} [clear=false] Clear clipboard\n   * @return {Promise<*>}\n   */\n  get(clear = false) {\n    const {data} = this.clipboard;\n    const result = typeof data === 'function'\n      ? data()\n      : data;\n\n    if (clear) {\n      this.clear();\n    }\n\n    return Promise.resolve(result);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * Middleware Data\n *\n * @typedef {Object} MiddlewareData\n * @property {string} [group] Middleware group\n */\n\n/**\n * Middleware Manager\n */\nexport default class Middleware {\n\n  /**\n   * Create new middleware\n   */\n  constructor() {\n    /**\n     * @type {MiddlewareData}\n     */\n    this.middleware = {};\n  }\n\n  /**\n   * Destroy middleware\n   */\n  destroy() {\n    this.clear();\n  }\n\n  /**\n   * Clear middleware\n   */\n  clear() {\n    this.middleware = {};\n  }\n\n  /**\n   * Add middleware function to a group\n   * @param {string} group Middleware group\n   * @param {Function} callback Middleware function to add\n   */\n  add(group, callback) {\n    if (!this.middleware[group]) {\n      this.middleware[group] = [];\n    }\n\n    this.middleware[group].push(callback);\n  }\n\n  /**\n   * Remove middleware function from a group\n   * @param {string} group Middleware group\n   * @param {Function} callback Middleware function to remove\n   */\n  remove(group, callback) {\n    if (this.middleware[group]) {\n      this.middleware[group] =\n        this.middleware[group].filter(cb => cb !== callback);\n    }\n  }\n\n  /**\n   * Gets middleware functions for a group\n   * @param {string} group Middleware group\n   * @return {Function[]}\n   */\n  get(group) {\n    return this.middleware[group] || [];\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nexport const en_EN = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Cannot make requests in standalone mode.',\n  ERR_REQUEST_NOT_OK: 'An error occured while performing a request: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filesystem \\'{0}\\' not found',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filesystem not found for \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filesystem \\'{0}\\' not mounted',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' already mounted',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Given path \\'{0}\\' does not match \\'name:/path\\'',\n  ERR_PACKAGE_PERMISSION_DENIED: 'You are not permitted to run \\'{0}\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Package Metadata \\'{0}\\' not found',\n  ERR_PACKAGE_LOAD: 'Package Loading \\'{0}\\' failed: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Package Runtime \\'{0}\\' not found',\n  ERR_PACKAGE_NO_METADATA: 'Metadata not found for \\'{0}\\'. Is it in the manifest?',\n  ERR_PACKAGE_EXCEPTION: 'An exception occured in \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Window with ID \\'{0}\\' already exists',\n  ERR_INVALID_LOCALE: 'Invalid locale \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Connection Lost',\n  LBL_CONNECTION_LOST_MESSAGE: 'The connection to the OS.js was lost. Reconnecting....',\n  LBL_CONNECTION_RESTORED: 'Connection Restored',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'The connection to the OS.js server was restored.',\n  LBL_CONNECTION_FAILED: 'Connection Failed',\n  LBL_CONNECTION_FAILED_MESSAGE: 'The connection to the OS.js could not be established. Some features might not work properly.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Development',\n  LBL_APP_CAT_SCIENCE: 'Science',\n  LBL_APP_CAT_GAMES: 'Games',\n  LBL_APP_CAT_GRAPHICS: 'Graphics',\n  LBL_APP_CAT_NETWORK: 'Network',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Office',\n  LBL_APP_CAT_SYSTEM: 'System',\n  LBL_APP_CAT_UTILITIES: 'Utilities',\n  LBL_APP_CAT_OTHER: 'Other',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Select application',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Select application for \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Select wallpaper',\n  LBL_DESKTOP_SELECT_THEME: 'Select theme',\n  LBL_SEARCH_TOOLTOP: 'Search Filesystem ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Search filesystems...',\n  LBL_SEARCH_WAIT: 'Searching...',\n  LBL_SEARCH_RESULT: 'Showing {0} results',\n  LBL_DESKTOP_SET_AS_WALLPAPER: 'Set as wallpaper',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Top',\n  LBL_LEFT: 'Left',\n  LBL_RIGHT: 'Right',\n  LBL_BOTTOM: 'Bottom',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Error',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Message',\n  LBL_WARNINIG: 'Warning',\n  LBL_SUCCESS: 'Success',\n  LBL_FAILURE: 'Failure',\n  LBL_WINDOW: 'Window',\n  LBL_WINDOWS: 'Windows',\n  LBL_NOTIFICATION: 'Notification',\n  LBL_NOTIFICATIONS: 'Notifications',\n  LBL_TRAY: 'Tray Entry',\n  LBL_NAME: 'Name',\n  LBL_TYPE: 'Type',\n  LBL_SIZE: 'Size',\n  LBL_FILE: 'File',\n  LBL_NEW: 'New',\n  LBL_OPEN: 'Open',\n  LBL_OPEN_WITH: 'Open with...',\n  LBL_SAVE: 'Save',\n  LBL_SAVEAS: 'Save As',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abort',\n  LBL_CANCEL: 'Cancel',\n  LBL_CLOSE: 'Close',\n  LBL_QUIT: 'Quit',\n  LBL_YES: 'Yes',\n  LBL_NO: 'No',\n  LBL_GO: 'Go',\n  LBL_MKDIR: 'Create new directory',\n  LBL_MKFILE: 'Create new file',\n  LBL_COPY: 'Copy',\n  LBL_PASTE: 'Paste',\n  LBL_CUT: 'Cut',\n  LBL_MOVE: 'Move',\n  LBL_RENAME: 'Rename',\n  LBL_DELETE: 'Delete',\n  LBL_DOWNLOAD: 'Download',\n  LBL_REFRESH: 'Refresh',\n  LBL_RELOAD: 'Reload',\n  LBL_HOME: 'Home',\n  LBL_VIEW: 'View',\n  LBL_HELP: 'Help',\n  LBL_ABOUT: 'About',\n  LBL_APPLICATION: 'Application',\n  LBL_APPLICATIONS: 'Applications',\n  LBL_KILL: 'Kill',\n  LBL_KILL_ALL: 'Kill all',\n  LBL_MINIMIZE: 'Minimize',\n  LBL_MAXIMIZE: 'Maximize',\n  LBL_RESTORE: 'Restore',\n  LBL_RAISE: 'Raise',\n  LBL_SHADE: 'Shade',\n  LBL_UNSHADE: 'Unshade',\n  LBL_ONTOP: 'On top',\n  LBL_RESIZE: 'Resize',\n  LBL_BACK: 'Back',\n  LBL_FORWARD: 'Forward',\n  LBL_UPLOAD: 'Upload',\n  LBL_IMAGE: 'Image',\n  LBL_CREATE_SHORTCUT: 'Create shortcut',\n  LBL_REMOVE_SHORTCUT: 'Remove shortcut',\n  LBL_EDIT: 'Edit'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Julien Gomes Dias <abld@abld.info>\n * @license Simplified BSD License\n */\n\nexport const fr_FR = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Impossible d\\'effectuer des requêtes en mode autonome.',\n  ERR_REQUEST_NOT_OK: 'Une erreur s\\'est produite en exécutant une requête : {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Système de fichier \\'{0}\\' absent',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Système de fichier pour \\'{0}\\' absent',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Le système de fichier \\'{0}\\' n\\'est pas encore monté',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Le système de fichier \\'{0}\\' est déjà monté',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Le dossier \\'{0}\\' ne correspond pas \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Les métadonnées du paquet \\'{0}\\' n\\'ont pas été touvées',\n  ERR_PACKAGE_LOAD: 'Le chargement du paquet \\'{0}\\' a échoué: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Durée d\\'exécution du paquet \\'{0}\\' absente',\n  ERR_PACKAGE_NO_METADATA: 'Métadonnées absentes pour \\'{0}\\'. Sont-elles dans le manifeste ?',\n  ERR_PACKAGE_EXCEPTION: 'Une exception s\\'est produite dans \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'La fénêtre avec l\\'identifiant \\'{0}\\' existe déjà',\n  ERR_INVALID_LOCALE: 'Paramètre de langue invalide \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Connexion perdue',\n  LBL_CONNECTION_LOST_MESSAGE: 'La connexion à OS.js a été perdue. Reconnexion...',\n  LBL_CONNECTION_RESTORED: 'Connexion restaurée',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'La connexion à OS.js a été restaurée.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Développement',\n  LBL_APP_CAT_SCIENCE: 'Science',\n  LBL_APP_CAT_GAMES: 'Jeux',\n  LBL_APP_CAT_GRAPHICS: 'Graphisme',\n  LBL_APP_CAT_NETWORK: 'Réseau',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimédia',\n  LBL_APP_CAT_OFFICE: 'Bureautique',\n  LBL_APP_CAT_SYSTEM: 'Système',\n  LBL_APP_CAT_UTILITIES: 'Utilitaires',\n  LBL_APP_CAT_OTHER: 'Autre',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Sélectionner l\\'application',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Sélectionner l\\'application pour \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Sélectionner le fond d\\'écran',\n  LBL_DESKTOP_SELECT_THEME: 'Sélectionner le thème',\n  LBL_SEARCH_TOOLTOP: 'Recherche d\\'un système de fichier ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Recherche des systèmes de fichiers...',\n  LBL_SEARCH_WAIT: 'Recherche...',\n  LBL_SEARCH_RESULT: 'Affichage des résultats {0}',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'En Haut',\n  LBL_LEFT: 'À Gauche',\n  LBL_RIGHT: 'À Droite',\n  LBL_BOTTOM: 'En Bas',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Erreur',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Message',\n  LBL_WARNINIG: 'Attention',\n  LBL_SUCCESS: 'Succès',\n  LBL_FAILURE: 'Échec',\n  LBL_WINDOW: 'Fenêtre',\n  LBL_WINDOWS: 'Fenêtres',\n  LBL_NOTIFICATION: 'Notification',\n  LBL_NOTIFICATIONS: 'Notifications',\n  LBL_TRAY: 'Accès au plateau',\n  LBL_NAME: 'Nom',\n  LBL_TYPE: 'Type',\n  LBL_SIZE: 'Taille',\n  LBL_FILE: 'Fichier',\n  LBL_NEW: 'Nouveau',\n  LBL_OPEN: 'Ouvrir',\n  LBL_SAVE: 'Sauvegarder',\n  LBL_SAVEAS: 'Sauvegarder comme',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abandonner',\n  LBL_CANCEL: 'Annuler',\n  LBL_CLOSE: 'Fermer',\n  LBL_QUIT: 'Quitter',\n  LBL_YES: 'Oui',\n  LBL_NO: 'Non',\n  LBL_GO: 'C\\'est parti !',\n  LBL_MKDIR: 'Créer nouveau dossier',\n  LBL_MKFILE: 'Créer nouveau fichier',\n  LBL_COPY: 'Copier',\n  LBL_PASTE: 'Coller',\n  LBL_CUT: 'Couper',\n  LBL_MOVE: 'Déplacer',\n  LBL_RENAME: 'Renommer',\n  LBL_DELETE: 'Supprimer',\n  LBL_DOWNLOAD: 'Télécharger',\n  LBL_REFRESH: 'Rafraîchir',\n  LBL_RELOAD: 'Recharger',\n  LBL_HOME: 'Accueil',\n  LBL_VIEW: 'Aperçu',\n  LBL_HELP: 'Aide',\n  LBL_ABOUT: 'À propos',\n  LBL_APPLICATION: 'Application',\n  LBL_APPLICATIONS: 'Applications',\n  LBL_KILL: 'Tuer',\n  LBL_KILL_ALL: 'Tuer tout'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nexport const nb_NO = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Kan ikke gjøre spørringer i standalone modus.',\n  ERR_REQUEST_NOT_OK: 'En feil oppstod under spørring: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filsystem \\'{0}\\' ikke funnet',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filsystem ikke funnet for \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filsystem \\'{0}\\' ikke montert',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' allerede montert',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Angitt sti \\'{0}\\' tilfredstiller ikke format \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Pakke Metadata \\'{0}\\' ikke funnet',\n  ERR_PACKAGE_LOAD: 'Pakke Lasting \\'{0}\\' feilet: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Pakke Runtime \\'{0}\\' ikke funnet',\n  ERR_PACKAGE_NO_METADATA: 'Metadata ikke funnet for \\'{0}\\'. Er den i manifestet?',\n  ERR_PACKAGE_EXCEPTION: 'En unntaksfeil oppstod i \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Vindu med ID \\'{0}\\' eksisterer allerede',\n  ERR_INVALID_LOCALE: 'Ugyldig lokalisering \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Tilkobling tapt',\n  LBL_CONNECTION_LOST_MESSAGE: 'Tilkobling til OS.js var tapt. Kobler til på nytt....',\n  LBL_CONNECTION_RESTORED: 'Tilkobling gjenopprettet',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Tilkobling til OS.js var gjenopprettet.',\n  LBL_CONNECTION_FAILED: 'Tilkobling feilet',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Tilkobling til OS.js var ikke vellykket. Noen egenskaper er utilgjenglig.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Utvikling',\n  LBL_APP_CAT_SCIENCE: 'Vitenskap',\n  LBL_APP_CAT_GAMES: 'Spill',\n  LBL_APP_CAT_GRAPHICS: 'Grafikk',\n  LBL_APP_CAT_NETWORK: 'Nettverk',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Kontor',\n  LBL_APP_CAT_SYSTEM: 'System',\n  LBL_APP_CAT_UTILITIES: 'Verktøy',\n  LBL_APP_CAT_OTHER: 'Andre',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Velg applikasjon',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Velg applikasjon for \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Velg bakgrunnsbilde',\n  LBL_DESKTOP_SELECT_THEME: 'Velg tema',\n  LBL_SEARCH_TOOLTOP: 'Søk i filsystemer ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Søker filsystemer...',\n  LBL_SEARCH_WAIT: 'Søker...',\n  LBL_SEARCH_RESULT: 'Viser {0} resultater',\n  LBL_DESKTOP_SET_AS_WALLPAPER: 'Sett som bakgrunnsbilde',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Topp',\n  LBL_LEFT: 'Venstre',\n  LBL_RIGHT: 'Høyre',\n  LBL_BOTTOM: 'Bunn',\n  LBL_MENU: 'Meny',\n  LBL_ERROR: 'Feil',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Melding',\n  LBL_WARNINIG: 'Advarsel',\n  LBL_SUCCESS: 'Velykket',\n  LBL_FAILURE: 'Svikt',\n  LBL_WINDOW: 'Vindu',\n  LBL_WINDOWS: 'Vinduer',\n  LBL_NOTIFICATION: 'Notifikasjon',\n  LBL_NOTIFICATIONS: 'Notifikasjoner',\n  LBL_TRAY: 'Tray Oppføring',\n  LBL_NAME: 'Navn',\n  LBL_TYPE: 'Type',\n  LBL_SIZE: 'Størrelse',\n  LBL_FILE: 'Fil',\n  LBL_NEW: 'Ny',\n  LBL_OPEN: 'Åpne',\n  LBL_OPEN_WITH: 'Åpne med...',\n  LBL_SAVE: 'Lagre',\n  LBL_SAVEAS: 'Lagre Som',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abort',\n  LBL_CANCEL: 'Avbryt',\n  LBL_CLOSE: 'Lukk',\n  LBL_QUIT: 'Slutt',\n  LBL_YES: 'Ja',\n  LBL_NO: 'Nei',\n  LBL_GO: 'Gå',\n  LBL_MKDIR: 'Lag ny mappe',\n  LBL_MKFILE: 'Lag ny fil',\n  LBL_COPY: 'Kopier',\n  LBL_PASTE: 'Lim inn',\n  LBL_CUT: 'Kutt',\n  LBL_MOVE: 'Flytt',\n  LBL_RENAME: 'Navngi',\n  LBL_DELETE: 'Slett',\n  LBL_DOWNLOAD: 'Last ned',\n  LBL_REFRESH: 'Gjenoppfrisk',\n  LBL_RELOAD: 'Last på nytt',\n  LBL_HOME: 'Hjem',\n  LBL_VIEW: 'Visning',\n  LBL_HELP: 'Hjelp',\n  LBL_ABOUT: 'Om',\n  LBL_APPLICATION: 'Applikasjon',\n  LBL_APPLICATIONS: 'Applikasjoner',\n  LBL_KILL: 'Drep',\n  LBL_KILL_ALL: 'Drep alle',\n  LBL_MINIMIZE: 'Minimisèr',\n  LBL_MAXIMIZE: 'Maksimisèr',\n  LBL_RESTORE: 'Gjenopprett',\n  LBL_RAISE: 'Løft',\n  LBL_SHADE: 'Rull opp',\n  LBL_UNSHADE: 'Rull ned',\n  LBL_ONTOP: 'Alltid øverst',\n  LBL_RESIZE: 'Endre størrelse',\n  LBL_BACK: 'Tilbake',\n  LBL_FORWARD: 'Frem',\n  LBL_UPLOAD: 'Last opp',\n  LBL_IMAGE: 'Bilde',\n  LBL_CREATE_SHORTCUT: 'Lag til snarvei',\n  LBL_REMOVE_SHORTCUT: 'Fjern snarvei',\n  LBL_EDIT: 'Rediger'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Filip Š <projects@filips.com>\n * @license Simplified BSD License\n */\n\nexport const sl_SI = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Zahteve v samostojnem načinu niso mogoče.',\n  ERR_REQUEST_NOT_OK: 'Pri zahtevi je prišlo do napake: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Datotečni sistem \\'{0}\\' ni najden',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Datotečni sistem ni najden \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Datotečni sistem \\'{0}\\' ni nameščen',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Datotečni sistem \\'{0}\\' že nameščen',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Podana pot \\'{0}\\' se ne ujema z \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Metapodatki paketa \\'{0}\\' niso najdeni',\n  ERR_PACKAGE_LOAD: 'Pri nalaganju pageta \\'{0}\\' je prišlo do napake: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Koda paketa \\'{0}\\' ni najdena',\n  ERR_PACKAGE_NO_METADATA: 'Metapodatki \\'{0}\\' niso najdeni. Ali so v datoteki manifest?',\n  ERR_PACKAGE_EXCEPTION: 'Sprožena je bila izjema v \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Okno z ID-jem \\'{0}\\' že obstaja',\n  ERR_INVALID_LOCALE: 'Neveljaven prevod \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Izguba povezave',\n  LBL_CONNECTION_LOST_MESSAGE: 'Povezava do strežnika je bila izgubljena. Ponovno povezovanje ...',\n  LBL_CONNECTION_RESTORED: 'Vzpostavitev povezave',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Povezava do strežnika je bila ponovno vzpostavljena.',\n  LBL_CONNECTION_FAILED: 'Povezava ni uspela',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Povezave z OS.js ni bilo mogoče vzpostaviti. Nekatere funkcije morda ne bodo delovale pravilno.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Razvoj',\n  LBL_APP_CAT_SCIENCE: 'Znanost',\n  LBL_APP_CAT_GAMES: 'Igre',\n  LBL_APP_CAT_GRAPHICS: 'Grafika',\n  LBL_APP_CAT_NETWORK: 'Omrežje',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedija',\n  LBL_APP_CAT_OFFICE: 'Pisarna',\n  LBL_APP_CAT_SYSTEM: 'Sistem',\n  LBL_APP_CAT_UTILITIES: 'Orodja',\n  LBL_APP_CAT_OTHER: 'Drugo',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Izberite aplikacijo',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Izberite aplikacijo za \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Izberite ozadje',\n  LBL_DESKTOP_SELECT_THEME: 'Izberite temo',\n  LBL_SEARCH_TOOLTOP: 'Išči datotečni sistem ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Iskanje po datotečnih sistemih ...',\n  LBL_SEARCH_WAIT: 'Iskanje ...',\n  LBL_SEARCH_RESULT: 'Prikaz {0} rezultatov',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Zgoraj',\n  LBL_LEFT: 'Levo',\n  LBL_RIGHT: 'Desno',\n  LBL_BOTTOM: 'Spodaj',\n  LBL_MENU: 'Meni',\n  LBL_ERROR: 'Napaka',\n  LBL_INFO: 'Informacije',\n  LBL_MESSAGE: 'Sporočilo',\n  LBL_WARNINIG: 'Opozorilo',\n  LBL_SUCCESS: 'Uspeh',\n  LBL_FAILURE: 'Neuspeh',\n  LBL_WINDOW: 'Okno',\n  LBL_WINDOWS: 'Okna',\n  LBL_NOTIFICATION: 'Obvestilo',\n  LBL_NOTIFICATIONS: 'Obvestila',\n  LBL_TRAY: 'Element vrstice',\n  LBL_NAME: 'Ime',\n  LBL_TYPE: 'Vrsta',\n  LBL_SIZE: 'Velikost',\n  LBL_FILE: 'Datoteka',\n  LBL_NEW: 'Novo',\n  LBL_OPEN: 'Odpri',\n  LBL_SAVE: 'Shrani',\n  LBL_SAVEAS: 'Shrani kot',\n  LBL_OK: 'V redu',\n  LBL_ABORT: 'Prekini',\n  LBL_CANCEL: 'Prekliči',\n  LBL_CLOSE: 'Zapri',\n  LBL_QUIT: 'Izklopi',\n  LBL_YES: 'Da',\n  LBL_NO: 'Ne',\n  LBL_GO: 'Pojdi',\n  LBL_MKDIR: 'Ustvari novo mapo',\n  LBL_MKFILE: 'Ustvari novo datoteko',\n  LBL_COPY: 'Kopiraj',\n  LBL_PASTE: 'Prilepi',\n  LBL_CUT: 'Izreži',\n  LBL_MOVE: 'Premakni',\n  LBL_RENAME: 'Preimenuj',\n  LBL_DELETE: 'Izbriši',\n  LBL_DOWNLOAD: 'Prenesi',\n  LBL_REFRESH: 'Osveži',\n  LBL_RELOAD: 'Osveži',\n  LBL_HOME: 'Domov',\n  LBL_VIEW: 'Pogled',\n  LBL_HELP: 'Pomoč',\n  LBL_ABOUT: 'O programu',\n  LBL_APPLICATION: 'Aplikacija',\n  LBL_APPLICATIONS: 'Aplikacije',\n  LBL_KILL: 'Končaj',\n  LBL_KILL_ALL: 'Končaj vse',\n  LBL_MINIMIZE: 'Pomanjšaj',\n  LBL_MAXIMIZE: 'Povečaj',\n  LBL_RESTORE: 'Obnovi',\n  LBL_RAISE: 'Dvigni',\n  LBL_SHADE: 'Zasenči',\n  LBL_UNSHADE: 'Odsenči',\n  LBL_ONTOP: 'Na vrhu',\n  LBL_RESIZE: 'Spremeni velikost',\n  LBL_BACK: 'Nazaj',\n  LBL_FORWARD: 'Naprej',\n  LBL_UPLOAD: 'Naloži',\n  LBL_IMAGE: 'Slika'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Nguyễn Anh Khoa <khoaakt@gmail.com>\n * @license Simplified BSD License\n */\n\nexport const vi_VN = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Không thể gửi yêu cầu ở chế độ độc lập.',\n  ERR_REQUEST_NOT_OK: 'Đã xảy ra lỗi khi thực hiện yêu cầu: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Không tìm thấy hệ thống tập tin \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Không tìm thấy hệ thống tập tin cho \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Hệ thống tập tin \\'{0}\\' không được gắn kết',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Hệ thống tập tin \\'{0}\\' đã được gắn kết',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Định dạng đường dẫn \\'{0}\\' không khớp với \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Không tìm thấy siêu dữ liệu của gói \\'{0}\\'',\n  ERR_PACKAGE_LOAD: 'Tải gói \\'{0}\\' thất bại: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Không tìm thấy Runtime của gói \\'{0}\\'',\n  ERR_PACKAGE_NO_METADATA: 'Không tìm thấy siêu dữ liệu cho \\'{0}\\'. Bạn có chắc nó đã được báo cáo trong manifest không?',\n  ERR_PACKAGE_EXCEPTION: 'Đã xảy ra lỗi trong \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Cửa sổ với ID \\'{0}\\' đã tồn tại',\n  ERR_INVALID_LOCALE: 'Ngôn ngữ không hợp lệ \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Mất kết nối',\n  LBL_CONNECTION_LOST_MESSAGE: 'Kết nối với OS.js đã bị mất. Đang kết nối lại....',\n  LBL_CONNECTION_RESTORED: 'Đã khôi phục kết nối',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Kết nối với máy chủ OS.js đã được khôi phục.',\n  LBL_CONNECTION_FAILED: 'Kết nối thất bại',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Không thể kết nối đến máy chủ OS.js. Một số tính năng có thể không hoạt động ổn định.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Phát triển',\n  LBL_APP_CAT_SCIENCE: 'Khoa học',\n  LBL_APP_CAT_GAMES: 'Trò chơi',\n  LBL_APP_CAT_GRAPHICS: 'Đồ họa',\n  LBL_APP_CAT_NETWORK: 'Mạng',\n  LBL_APP_CAT_MULTIMEDIA: 'Đa phương tiện',\n  LBL_APP_CAT_OFFICE: 'Văn phòng',\n  LBL_APP_CAT_SYSTEM: 'Hệ thống',\n  LBL_APP_CAT_UTILITIES: 'Tiện ích',\n  LBL_APP_CAT_OTHER: 'Ứng dụng khác',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Chọn ứng dụng',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Chọn ứng dụng để mở tập tin \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Thay đổi hình nền',\n  LBL_DESKTOP_SELECT_THEME: 'Thay đổi chủ đề',\n  LBL_SEARCH_TOOLTOP: 'Tìm kiếm dữ liệu ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Tìm kiếm...',\n  LBL_SEARCH_WAIT: 'Đang tìm kiếm...',\n  LBL_SEARCH_RESULT: 'Đang hiển thị {0} kết quả',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Phía trên',\n  LBL_LEFT: 'Trái',\n  LBL_RIGHT: 'Phải',\n  LBL_BOTTOM: 'Phía dưới',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Lỗi',\n  LBL_INFO: 'Thông tin',\n  LBL_MESSAGE: 'Thông báo',\n  LBL_WARNINIG: 'Cảnh báo',\n  LBL_SUCCESS: 'Thành công',\n  LBL_FAILURE: 'Thất bại',\n  LBL_WINDOW: 'Cửa sổ',\n  LBL_WINDOWS: 'Các cửa sổ',\n  LBL_NOTIFICATION: 'Thông báo',\n  LBL_NOTIFICATIONS: 'Các thông báo',\n  LBL_TRAY: 'Mục khay hệ thống',\n  LBL_NAME: 'Tên',\n  LBL_TYPE: 'Kiểu',\n  LBL_SIZE: 'Kích thước',\n  LBL_FILE: 'Tập tin',\n  LBL_NEW: 'Mới',\n  LBL_OPEN: 'Mở',\n  LBL_SAVE: 'Lưu',\n  LBL_SAVEAS: 'Lưu như',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Hủy thao tác',\n  LBL_CANCEL: 'Hủy bỏ',\n  LBL_CLOSE: 'Đóng',\n  LBL_QUIT: 'Thoát',\n  LBL_YES: 'Có',\n  LBL_NO: 'Không',\n  LBL_GO: 'Đi',\n  LBL_MKDIR: 'Tạo thư mục mới',\n  LBL_MKFILE: 'Tạo tệp mới',\n  LBL_COPY: 'Sao chép',\n  LBL_PASTE: 'Dán',\n  LBL_CUT: 'Cắt',\n  LBL_MOVE: 'Di chuyển',\n  LBL_RENAME: 'Đổi tên',\n  LBL_DELETE: 'Xóa',\n  LBL_DOWNLOAD: 'Tải về',\n  LBL_REFRESH: 'Làm mới',\n  LBL_RELOAD: 'Tải lại',\n  LBL_HOME: 'Trang chủ',\n  LBL_VIEW: 'Xem',\n  LBL_HELP: 'Hướng dẫn',\n  LBL_ABOUT: 'Thông tin',\n  LBL_APPLICATION: 'Ứng dụng',\n  LBL_APPLICATIONS: 'Các ứng dụng',\n  LBL_KILL: 'Đóng',\n  LBL_KILL_ALL: 'Đóng tất cả',\n  LBL_MINIMIZE: 'Thu nhỏ',\n  LBL_MAXIMIZE: 'Tối đa',\n  LBL_RESTORE: 'Phục hồi',\n  LBL_RAISE: 'Nâng lên',\n  LBL_SHADE: 'Làm mở',\n  LBL_UNSHADE: 'Bỏ làm mờ',\n  LBL_ONTOP: 'Ở trên cùng',\n  LBL_RESIZE: 'Thay đổi kích thước',\n  LBL_BACK: 'Lùi',\n  LBL_FORWARD: 'Tiến',\n  LBL_UPLOAD: 'Tải lên',\n  LBL_IMAGE: 'Ảnh'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Julien Gomes Dias <abld@abld.info\n * @license Simplified BSD License\n */\n\nexport const de_DE = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Im standalone modus können keine Anfragen gemacht werden.',\n  ERR_REQUEST_NOT_OK: 'Beim Ausführen einer Anfrage ist der folgende Fehler aufgetreten: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filesystem \\'{0}\\' nicht gefunden',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filesystem für \\'{0}\\' nicht gefunden',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filesystem \\'{0}\\' nicht gemountet',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' schon gemountet',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Der gegebene Pfad \\'{0}\\' stimmt nicht mit \\'name:/path\\' überein',\n  ERR_PACKAGE_NOT_FOUND: 'Paket-Metadaten  \\'{0}\\' nicht gefunden',\n  ERR_PACKAGE_LOAD: 'Paket Laden \\'{0}\\' ist fehlgeschlagen: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Paketlaufzeit \\'{0}\\' nicht gefunden',\n  ERR_PACKAGE_NO_METADATA: 'Metadaten für \\'{0}\\' nicht gefunden. Ist es in der Manifest?',\n  ERR_PACKAGE_EXCEPTION: 'Eine Ausnahme trat in \\'{0}\\' auf.',\n  ERR_WINDOW_ID_EXISTS: 'Fenster mit der ID \\'{0}\\' existiert schon',\n  ERR_INVALID_LOCALE: 'Invalide Sprache \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Verbindung unterbrochen',\n  LBL_CONNECTION_LOST_MESSAGE: 'Die Verbindung zu OS.js wurde unterbrochen. Wiederverbinden... ',\n  LBL_CONNECTION_RESTORED: 'Verbindung wiederhergestellt',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Die Verbindung zu dem OS.js wurde wieder hergestellt.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'IT-Entwicklung',\n  LBL_APP_CAT_SCIENCE: 'Wissenschaft',\n  LBL_APP_CAT_GAMES: 'Spiele',\n  LBL_APP_CAT_GRAPHICS: 'Grafiken',\n  LBL_APP_CAT_NETWORK: 'Netzwerk',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Office',\n  LBL_APP_CAT_SYSTEM: 'System',\n  LBL_APP_CAT_UTILITIES: 'Dienstprogramme',\n  LBL_APP_CAT_OTHER: 'Andere',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Applikation auswählen',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Applikation für \\'{0}\\' auswählen',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Hintergrundbild auswählen',\n  LBL_DESKTOP_SELECT_THEME: 'Theme auswählen',\n  LBL_SEARCH_TOOLTOP: 'Dateisysteme ({0}) finden',\n  LBL_SEARCH_PLACEHOLDER: 'Dateisysteme finden...',\n  LBL_SEARCH_WAIT: 'Suche...',\n  LBL_SEARCH_RESULT: 'Anzeige von {0} Ergebnissen',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Oben',\n  LBL_LEFT: 'Links',\n  LBL_RIGHT: 'Rechts',\n  LBL_BOTTOM: 'Unten',\n  LBL_MENU: 'Menü',\n  LBL_ERROR: 'Error',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Nachricht',\n  LBL_WARNINIG: 'Warnung',\n  LBL_SUCCESS: 'Success',\n  LBL_FAILURE: 'Fehler',\n  LBL_WINDOW: 'Fenster',\n  LBL_WINDOWS: 'Fenster',\n  LBL_NOTIFICATION: 'Benachrichtigung',\n  LBL_NOTIFICATIONS: 'Benachrichtigungen',\n  LBL_TRAY: 'Infobereich-Eintrag',\n  LBL_NAME: 'Name',\n  LBL_TYPE: 'Typ',\n  LBL_SIZE: 'Größe',\n  LBL_FILE: 'Datei',\n  LBL_NEW: 'Neue',\n  LBL_OPEN: 'Öffnen',\n  LBL_SAVE: 'Speichern',\n  LBL_SAVEAS: 'Speichern als',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abbrechen',\n  LBL_CANCEL: 'Beenden',\n  LBL_CLOSE: 'Schließen',\n  LBL_QUIT: 'Verlassen',\n  LBL_YES: 'Ja',\n  LBL_NO: 'Nein',\n  LBL_GO: 'Los',\n  LBL_MKDIR: 'Neues Verzeichnis erstellen',\n  LBL_MKFILE: 'Neue Datei erstellen',\n  LBL_COPY: 'Kopieren',\n  LBL_PASTE: 'Einfügen',\n  LBL_CUT: 'Ausschneiden',\n  LBL_MOVE: 'Verschieben',\n  LBL_RENAME: 'Umbenennen',\n  LBL_DELETE: 'Löschen',\n  LBL_DOWNLOAD: 'Herunterladen',\n  LBL_REFRESH: 'Aktualisieren',\n  LBL_RELOAD: 'Neu laden',\n  LBL_HOME: 'Startseite',\n  LBL_VIEW: 'Ansicht',\n  LBL_HELP: 'Hilfe',\n  LBL_ABOUT: 'Über',\n  LBL_APPLICATION: 'Anwendungsprogramme',\n  LBL_APPLICATIONS: 'Anwendungsprogrammen',\n  LBL_KILL: 'Beenden',\n  LBL_KILL_ALL: 'Alle benden'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  lijun <lijun_ay@126.com>\n * @license Simplified BSD License\n */\n\nexport const zh_CN = {\n  // Core\n  ERR_REQUEST_STANDALONE: '无法在独立模式下发出请求。',\n  ERR_REQUEST_NOT_OK: '执行请求时发生错误：{0}',\n  ERR_VFS_MOUNT_NOT_FOUND: '找不到文件系统 \\'{0}\\' ',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: '找不到\\'{0}\\'的文件系统',\n  ERR_VFS_MOUNT_NOT_MOUNTED: '文件系统 \\'{0}\\' 未挂载',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: '文件系统 \\'{0}\\' 已挂载',\n  ERR_VFS_PATH_FORMAT_INVALID: '给定路径\\'{0}\\'与\\'name:/path\\'不匹配',\n  ERR_PACKAGE_NOT_FOUND: '未找到包的元数据\\'{0}\\'',\n  ERR_PACKAGE_LOAD: '加载包 \\'{0}\\' 失败： {1}',\n  ERR_PACKAGE_NO_RUNTIME: '未找到运行包 \\'{0}\\' ',\n  ERR_PACKAGE_NO_METADATA: '找不到 \\'{0}\\' 的元数据。它在清单（manifest）中吗？',\n  ERR_PACKAGE_EXCEPTION: '\\'{0}\\'发生异常',\n  ERR_WINDOW_ID_EXISTS: 'ID为\\'{0}\\'的窗口已存在',\n  ERR_INVALID_LOCALE: '无效的区域设置 \\'{0}\\'',\n  LBL_CONNECTION_LOST: '连接丢失',\n  LBL_CONNECTION_LOST_MESSAGE: '与OS.js的连接丢失了。重新连接....',\n  LBL_CONNECTION_RESTORED: '连接已恢复',\n  LBL_CONNECTION_RESTORED_MESSAGE: '已恢复与OS.js服务器的连接。',\n  LBL_CONNECTION_FAILED: '连接失败',\n  LBL_CONNECTION_FAILED_MESSAGE: '无法建立与OS.js的连接。 某些功能可能无法正常工作。',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: '开发',\n  LBL_APP_CAT_SCIENCE: '科学',\n  LBL_APP_CAT_GAMES: '游戏',\n  LBL_APP_CAT_GRAPHICS: '图像',\n  LBL_APP_CAT_NETWORK: '网络',\n  LBL_APP_CAT_MULTIMEDIA: '媒体',\n  LBL_APP_CAT_OFFICE: '办公',\n  LBL_APP_CAT_SYSTEM: '系统',\n  LBL_APP_CAT_UTILITIES: '工具',\n  LBL_APP_CAT_OTHER: '其他',\n\n  // UI\n  LBL_LAUNCH_SELECT: '选择应用程序',\n  LBL_LAUNCH_SELECT_MESSAGE: '选择\\'{0}\\'的应用程序',\n  LBL_DESKTOP_SELECT_WALLPAPER: '选择壁纸',\n  LBL_DESKTOP_SELECT_THEME: '选择主题',\n  LBL_SEARCH_TOOLTOP: '搜索文件系统 ({0})',\n  LBL_SEARCH_PLACEHOLDER: '搜索文件系统...',\n  LBL_SEARCH_WAIT: '搜索...',\n  LBL_SEARCH_RESULT: '显示{0}个结果',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KB',\n  LBL_FS_MIB: 'MB',\n  LBL_FS_GIB: 'GB',\n\n  // Generic\n  LBL_TOP: '上',\n  LBL_LEFT: '左',\n  LBL_RIGHT: '右',\n  LBL_BOTTOM: '下',\n  LBL_MENU: '菜单',\n  LBL_ERROR: '错误',\n  LBL_INFO: '信息',\n  LBL_MESSAGE: '消息',\n  LBL_WARNINIG: '警告',\n  LBL_SUCCESS: '成功',\n  LBL_FAILURE: '失败',\n  LBL_WINDOW: '窗口',\n  LBL_WINDOWS: '窗口',\n  LBL_NOTIFICATION: '通知',\n  LBL_NOTIFICATIONS: '通知',\n  LBL_TRAY: '托盘',\n  LBL_NAME: '名称',\n  LBL_TYPE: '类型',\n  LBL_SIZE: '大小',\n  LBL_FILE: '文件',\n  LBL_NEW: '新建',\n  LBL_OPEN: '打开',\n  LBL_SAVE: '保存',\n  LBL_SAVEAS: '另存为',\n  LBL_OK: '确定',\n  LBL_ABORT: '中止',\n  LBL_CANCEL: '取消',\n  LBL_CLOSE: '关闭',\n  LBL_QUIT: '退出',\n  LBL_YES: '是',\n  LBL_NO: '否',\n  LBL_GO: '进行',\n  LBL_MKDIR: '创建新目录',\n  LBL_MKFILE: '创建新文件',\n  LBL_COPY: '复制',\n  LBL_PASTE: '粘贴',\n  LBL_CUT: '剪切',\n  LBL_MOVE: '移动',\n  LBL_RENAME: '重命名',\n  LBL_DELETE: '删除',\n  LBL_DOWNLOAD: '下载',\n  LBL_REFRESH: '刷新',\n  LBL_RELOAD: '刷新',\n  LBL_HOME: '主页',\n  LBL_VIEW: '视图',\n  LBL_HELP: '帮助',\n  LBL_ABOUT: '关于',\n  LBL_APPLICATION: '应用程序',\n  LBL_APPLICATIONS: '应用程序',\n  LBL_KILL: '杀死',\n  LBL_KILL_ALL: '全部杀死',\n  LBL_MINIMIZE: '最小化',\n  LBL_MAXIMIZE: '最大化',\n  LBL_RESTORE: '恢复',\n  LBL_RAISE: '上浮',\n  LBL_SHADE: '置后',\n  LBL_UNSHADE: '置前',\n  LBL_ONTOP: '顶端',\n  LBL_RESIZE: '调整',\n  LBL_BACK: '后退',\n  LBL_FORWARD: '前进',\n  LBL_UPLOAD: '上传',\n  LBL_IMAGE: '图像'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n *\n * @author  Morteza Javan <javan.it@gmail.com>\n * @license Simplified BSD License\n */\n\nexport const fa_FA = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'امکان اجرای درخواست در حالت واحد وجود ندارد.',\n  ERR_REQUEST_NOT_OK: 'خطایی در حال انجام این درخواست رخ داد: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'سیستم فایل \\'{0}\\' پیدا نشد',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'سیستم فایل برای \\'{0}\\' پیدا نشد',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'سیستم فایل \\'{0}\\' متصل نیست',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'سیستم فایل \\'{0}\\' از قبل متصل شده است',\n  ERR_VFS_PATH_FORMAT_INVALID: 'آدرس \\'{0}\\' با الگو مطابقت ندارد \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'فراداده بسته \\'{0}\\' پیدا نشد',\n  ERR_PACKAGE_LOAD: 'بارگزاری بسته \\'{0}\\' دچار خطا شد: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'فایل های اجرایی \\'{0}\\' پیدا نشد',\n  ERR_PACKAGE_NO_METADATA: 'فراداده برای \\'{0}\\' پیدا نشد. ممکن است در مانیفست باشد؟?',\n  ERR_PACKAGE_EXCEPTION: 'بروز شرایط استثنا \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'پنجره با شناسه \\'{0}\\' قبلا وجود دارد',\n  ERR_INVALID_LOCALE: 'زبان نامعتبر \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'از دست رفتن ارتباط',\n  LBL_CONNECTION_LOST_MESSAGE: 'ارتباط با سرور قطع شد. در حال تلاش ....',\n  LBL_CONNECTION_RESTORED: 'ارتباط بازیابی شد',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'ارتباط با سرور مجدد برقرار شد.',\n  LBL_CONNECTION_FAILED: 'ارتباط با خطا مواجه شد',\n  LBL_CONNECTION_FAILED_MESSAGE: 'ارتباط نمیتواند با سرور برقرار شود.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'توسعه',\n  LBL_APP_CAT_SCIENCE: 'علمی',\n  LBL_APP_CAT_GAMES: 'بازی',\n  LBL_APP_CAT_GRAPHICS: 'گرافیک',\n  LBL_APP_CAT_NETWORK: 'شبکه',\n  LBL_APP_CAT_MULTIMEDIA: 'چندرسانه ای',\n  LBL_APP_CAT_OFFICE: 'اداری',\n  LBL_APP_CAT_SYSTEM: 'سیستمی',\n  LBL_APP_CAT_UTILITIES: 'ابزارها',\n  LBL_APP_CAT_OTHER: 'سایر',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'انتخاب برنامه کاربردی',\n  LBL_LAUNCH_SELECT_MESSAGE: 'انتخاب برنامه کاربردی برای \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'انتخاب کاغذ دیواری',\n  LBL_DESKTOP_SELECT_THEME: 'انتخاب الگو',\n  LBL_SEARCH_TOOLTOP: 'جستجوی سیستم فایل ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'جستجوی سیستم فایل...',\n  LBL_SEARCH_WAIT: 'در جال جستجو...',\n  LBL_SEARCH_RESULT: 'نمایش {0} نتیجه',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'کیلوبایت',\n  LBL_FS_MIB: 'مگابایت',\n  LBL_FS_GIB: 'گیگابایت',\n\n  // Generic\n  LBL_TOP: 'بالا',\n  LBL_LEFT: 'چپ',\n  LBL_RIGHT: 'راست',\n  LBL_BOTTOM: 'پایین',\n  LBL_MENU: 'منوی اصلی',\n  LBL_ERROR: 'خطا',\n  LBL_INFO: 'نکته',\n  LBL_MESSAGE: 'پیام',\n  LBL_WARNINIG: 'هشدار',\n  LBL_SUCCESS: 'موفق',\n  LBL_FAILURE: 'شکست',\n  LBL_WINDOW: 'پنجره',\n  LBL_WINDOWS: 'پنجره ها',\n  LBL_NOTIFICATION: 'اطلاعیه',\n  LBL_NOTIFICATIONS: 'اطلاعیه ها',\n  LBL_TRAY: 'سینی ابزار',\n  LBL_NAME: 'نام',\n  LBL_TYPE: 'نوع',\n  LBL_SIZE: 'اندازه',\n  LBL_FILE: 'فایل',\n  LBL_NEW: 'جدید',\n  LBL_OPEN: 'بازکردن',\n  LBL_OPEN_WITH: 'باز کردن با...',\n  LBL_SAVE: 'ذخیره',\n  LBL_SAVEAS: 'ذخیره جدید',\n  LBL_OK: 'تایید',\n  LBL_ABORT: 'بیخیال',\n  LBL_CANCEL: 'رد',\n  LBL_CLOSE: 'بستن',\n  LBL_QUIT: 'خروج',\n  LBL_YES: 'بله',\n  LBL_NO: 'خیر',\n  LBL_GO: 'برو',\n  LBL_MKDIR: 'ایجاد پوشه جدید',\n  LBL_MKFILE: 'ایجاد فایل جدید',\n  LBL_COPY: 'کپی',\n  LBL_PASTE: 'الصاق',\n  LBL_CUT: 'برداشتن',\n  LBL_MOVE: 'انتقال',\n  LBL_RENAME: 'تغییرنام',\n  LBL_DELETE: 'حذف',\n  LBL_DOWNLOAD: 'دانلود',\n  LBL_REFRESH: 'نوسازی',\n  LBL_RELOAD: 'بارگزاری مجدد',\n  LBL_HOME: 'خانه',\n  LBL_VIEW: 'نمایش',\n  LBL_HELP: 'کمک',\n  LBL_ABOUT: 'درباره',\n  LBL_APPLICATION: 'برنامه کاربردی',\n  LBL_APPLICATIONS: 'برنامه های کاربردی',\n  LBL_KILL: 'از بین بردن',\n  LBL_KILL_ALL: 'از بین بردن همه',\n  LBL_MINIMIZE: 'کمینه',\n  LBL_MAXIMIZE: 'بیشینه',\n  LBL_RESTORE: 'عادی',\n  LBL_RAISE: 'شناور',\n  LBL_SHADE: 'بالا بردن',\n  LBL_UNSHADE: 'پایین آوردن',\n  LBL_ONTOP: 'در بالا',\n  LBL_RESIZE: 'تغییراندازه',\n  LBL_BACK: 'عقب',\n  LBL_FORWARD: 'جلو',\n  LBL_UPLOAD: 'آپلود',\n  LBL_IMAGE: 'تصویر',\n  LBL_CREATE_SHORTCUT: 'ایجاد میانبر',\n  LBL_REMOVE_SHORTCUT: 'حذف میانبر',\n  LBL_EDIT: 'ویرایش'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Matheus Felipe <matheusfelipeog@gmail.com>\n * @license Simplified BSD License\n */\n\nexport const pt_BR = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Não é possível fazer solicitações autônomas.',\n  ERR_REQUEST_NOT_OK: 'Ocorreu um erro ao executar a solicitação: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Sistema de arquivo \\'{0}\\' não encontrado',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Sistema de arquivo não encontrado para \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Sistema de arquivo \\'{0}\\' não montado',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Sistema de arquivo \\'{0}\\' já montado',\n  ERR_VFS_PATH_FORMAT_INVALID: 'O caminho especificado \\'{0}\\' não corresponde \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Metadados do pacote \\'{0}\\' não encontrados',\n  ERR_PACKAGE_LOAD: 'Carregamento do pacote \\'{0}\\' falhou: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Tempo de execução do pacote \\'{0}\\' não encontrado',\n  ERR_PACKAGE_NO_METADATA: 'Metadados não encontrado para \\'{0}\\'. Está no manifesto?',\n  ERR_PACKAGE_EXCEPTION: 'Ocorreu uma exceção em \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Janela com ID \\'{0}\\' Já existe',\n  ERR_INVALID_LOCALE: 'Código de idioma inválido \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Conexão perdida',\n  LBL_CONNECTION_LOST_MESSAGE: 'A conexão com OS.js foi perdida. Reconectando....',\n  LBL_CONNECTION_RESTORED: 'Conexão restaurada',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'A conexão com o servidor OS.js foi restaurada.',\n  LBL_CONNECTION_FAILED: 'Falha na conexão',\n  LBL_CONNECTION_FAILED_MESSAGE: 'A conexão com OS.js não pode ser estabelecida. Alguns recursos podem não funcionar corretamente.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Desenvolvimento',\n  LBL_APP_CAT_SCIENCE: 'Ciência',\n  LBL_APP_CAT_GAMES: 'Jogos',\n  LBL_APP_CAT_GRAPHICS: 'Grâfico',\n  LBL_APP_CAT_NETWORK: 'Rede',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Escritório',\n  LBL_APP_CAT_SYSTEM: 'Sistema',\n  LBL_APP_CAT_UTILITIES: 'Utilidades',\n  LBL_APP_CAT_OTHER: 'Outros',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Selecionar aplicativo',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Selecionar aplicativo para \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Selecionar papel de parede',\n  LBL_DESKTOP_SELECT_THEME: 'Selecionar tema',\n  LBL_SEARCH_TOOLTOP: 'Pesquisar no sistema de arquivos ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Pesquisar...',\n  LBL_SEARCH_WAIT: 'Buscando...',\n  LBL_SEARCH_RESULT: 'Mostrando {0} resultados',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Topo',\n  LBL_LEFT: 'Esquerda',\n  LBL_RIGHT: 'Direita',\n  LBL_BOTTOM: 'Inferior',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Erro',\n  LBL_INFO: 'Informação',\n  LBL_MESSAGE: 'Mensagem',\n  LBL_WARNINIG: 'Atenção',\n  LBL_SUCCESS: 'Sucesso',\n  LBL_FAILURE: 'Falha',\n  LBL_WINDOW: 'Janela',\n  LBL_WINDOWS: 'Janelas',\n  LBL_NOTIFICATION: 'Notificação',\n  LBL_NOTIFICATIONS: 'Notificações',\n  LBL_TRAY: 'Entrada',\n  LBL_NAME: 'Nome',\n  LBL_TYPE: 'Tipo',\n  LBL_SIZE: 'Tamanho',\n  LBL_FILE: 'Arquivo',\n  LBL_NEW: 'Novo',\n  LBL_OPEN: 'Abrir',\n  LBL_OPEN_WITH: 'Abrir com...',\n  LBL_SAVE: 'Salvar',\n  LBL_SAVEAS: 'Salvar como',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abortar',\n  LBL_CANCEL: 'Cancelar',\n  LBL_CLOSE: 'Fechar',\n  LBL_QUIT: 'Sair',\n  LBL_YES: 'Sim',\n  LBL_NO: 'Não',\n  LBL_GO: 'Ir',\n  LBL_MKDIR: 'Criar novo diretório',\n  LBL_MKFILE: 'Criar novo arquivo',\n  LBL_COPY: 'Copiar',\n  LBL_PASTE: 'Colar',\n  LBL_CUT: 'Recortar',\n  LBL_MOVE: 'Mover',\n  LBL_RENAME: 'Renomear',\n  LBL_DELETE: 'Deletar',\n  LBL_DOWNLOAD: 'Download',\n  LBL_REFRESH: 'Atualizar',\n  LBL_RELOAD: 'Recarregar',\n  LBL_HOME: 'Home',\n  LBL_VIEW: 'Visualização',\n  LBL_HELP: 'Ajuda',\n  LBL_ABOUT: 'Sobre',\n  LBL_APPLICATION: 'Aplicativo',\n  LBL_APPLICATIONS: 'Aplicativos',\n  LBL_KILL: 'Finalizar',\n  LBL_KILL_ALL: 'Finalizar tudo',\n  LBL_MINIMIZE: 'Minimizar',\n  LBL_MAXIMIZE: 'Maximizar',\n  LBL_RESTORE: 'Restaurar',\n  LBL_RAISE: 'Levantar',\n  LBL_SHADE: 'Sombra',\n  LBL_UNSHADE: 'Tirar sombra',\n  LBL_ONTOP: 'No topo',\n  LBL_RESIZE: 'Redimensionar',\n  LBL_BACK: 'Voltar',\n  LBL_FORWARD: 'Avançar',\n  LBL_UPLOAD: 'Enviar',\n  LBL_IMAGE: 'Imagem',\n  LBL_CREATE_SHORTCUT: 'Criar atalho',\n  LBL_REMOVE_SHORTCUT: 'Remover atalho',\n  LBL_EDIT: 'Editar'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nexport const ru_RU = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Невозможно делать запросы в автономном режиме.',\n  ERR_REQUEST_NOT_OK: 'Произошла ошибка при запросе: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Файловая система \\'{0}\\' не найдена',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Файловая система не найдена для \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Файловая система \\'{0}\\' не вмонтирована',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Файловая система \\'{0}\\' уже вмонтирована',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Заданный путь \\'{0}\\' не соответсвует формату \\'имя:/путь\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Метаданные пакета \\'{0}\\' не найдены',\n  ERR_PACKAGE_LOAD: 'Ошибка загрузки пакета \\'{0}\\': {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Рантайм пакета \\'{0}\\' не найден',\n  ERR_PACKAGE_NO_METADATA: 'Метаданные не найдены для \\'{0}\\'. Is it in the manifest?',\n  ERR_PACKAGE_EXCEPTION: 'Произошло исключение в \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Окно с ID \\'{0}\\' уже существует',\n  ERR_INVALID_LOCALE: 'Неправильная локаль \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Соединение Потеряно',\n  LBL_CONNECTION_LOST_MESSAGE: 'Соединение с OS.js было потеряно. Переподключаемся....',\n  LBL_CONNECTION_RESTORED: 'Соединение Восстановлено',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Соединение с сервером OS.js было восстановлено.',\n  LBL_CONNECTION_FAILED: 'Ошибка Соединения',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Соединение с OS.js не может быть установлено. Некоторые возможности могут не работать корректно.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Разработка',\n  LBL_APP_CAT_SCIENCE: 'Вычисления',\n  LBL_APP_CAT_GAMES: 'Игры',\n  LBL_APP_CAT_GRAPHICS: 'Графика',\n  LBL_APP_CAT_NETWORK: 'Сеть',\n  LBL_APP_CAT_MULTIMEDIA: 'Мультимедиа',\n  LBL_APP_CAT_OFFICE: 'Офис',\n  LBL_APP_CAT_SYSTEM: 'Система',\n  LBL_APP_CAT_UTILITIES: 'Утилиты',\n  LBL_APP_CAT_OTHER: 'Другие',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Выберите приложение',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Выберите приложение \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Выберите обои',\n  LBL_DESKTOP_SELECT_THEME: 'Выберите тему',\n  LBL_SEARCH_TOOLTOP: 'Поиск файловой системы ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Поиск файловой системы...',\n  LBL_SEARCH_WAIT: 'Поиск...',\n  LBL_SEARCH_RESULT: 'Показано {0} результатов',\n\n  // FS\n  LBL_FS_B: 'Б',\n  LBL_FS_M: 'М',\n  LBL_FS_G: 'Г',\n  LBL_FS_KIB: 'ГиБ',\n  LBL_FS_MIB: 'МиБ',\n  LBL_FS_GIB: 'ГиБ',\n\n  // Generic\n  LBL_TOP: 'Вверх',\n  LBL_LEFT: 'Лево',\n  LBL_RIGHT: 'Право',\n  LBL_BOTTOM: 'Вниз',\n  LBL_MENU: 'Меню',\n  LBL_ERROR: 'Ошибка',\n  LBL_INFO: 'Информация',\n  LBL_MESSAGE: 'Сообщение',\n  LBL_WARNINIG: 'Предупреждение',\n  LBL_SUCCESS: 'Успешно',\n  LBL_FAILURE: 'Ошибка',\n  LBL_WINDOW: 'Окно',\n  LBL_WINDOWS: 'Окна',\n  LBL_NOTIFICATION: 'Оповещение',\n  LBL_NOTIFICATIONS: 'Оповещения',\n  LBL_TRAY: 'Трэй',\n  LBL_NAME: 'Имя',\n  LBL_TYPE: 'Тип',\n  LBL_SIZE: 'Размер',\n  LBL_FILE: 'Файл',\n  LBL_NEW: 'Новый',\n  LBL_OPEN: 'Открыть',\n  LBL_OPEN_WITH: 'Открыть с...',\n  LBL_SAVE: 'Сохранить',\n  LBL_SAVEAS: 'Сохранить как',\n  LBL_OK: 'ОК',\n  LBL_ABORT: 'Прервать',\n  LBL_CANCEL: 'Отмена',\n  LBL_CLOSE: 'Закрыть',\n  LBL_QUIT: 'Выйти',\n  LBL_YES: 'Да',\n  LBL_NO: 'Нет',\n  LBL_GO: 'Вперед',\n  LBL_MKDIR: 'Новая папка',\n  LBL_MKFILE: 'Новый файл',\n  LBL_COPY: 'Скопировать',\n  LBL_PASTE: 'Вставить',\n  LBL_CUT: 'Вырезать',\n  LBL_MOVE: 'Переместить',\n  LBL_RENAME: 'Переименовать',\n  LBL_DELETE: 'Удалить',\n  LBL_DOWNLOAD: 'Скачать',\n  LBL_REFRESH: 'Обновить',\n  LBL_RELOAD: 'Перезагрузить',\n  LBL_HOME: 'Домой',\n  LBL_VIEW: 'Вид',\n  LBL_HELP: 'Помощь',\n  LBL_ABOUT: 'О программе',\n  LBL_APPLICATION: 'Приложение',\n  LBL_APPLICATIONS: 'Приложения',\n  LBL_KILL: 'Убить',\n  LBL_KILL_ALL: 'Убить все',\n  LBL_MINIMIZE: 'Свернуть',\n  LBL_MAXIMIZE: 'Развернуть',\n  LBL_RESTORE: 'Восстановить',\n  LBL_RAISE: 'Raise',\n  LBL_SHADE: 'Shade',\n  LBL_UNSHADE: 'Unshade',\n  LBL_ONTOP: 'Поверх окон',\n  LBL_RESIZE: 'Размер',\n  LBL_BACK: 'Назад',\n  LBL_FORWARD: 'Вперед',\n  LBL_UPLOAD: 'Загрузить',\n  LBL_IMAGE: 'Картинка',\n  LBL_CREATE_SHORTCUT: 'Создать ярлык',\n  LBL_REMOVE_SHORTCUT: 'Удалить ярлык'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nexport const tr_TR = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Bağımsız modda talepde bulunulamaz.',\n  ERR_REQUEST_NOT_OK: 'Talep gerçekleştirilirken bir hata oluştu: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: '\\'{0}\\' isimli dosya sistemi bulunamadı',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: '\\'{0}\\' için dosya sistemi bulunamadı',\n  ERR_VFS_MOUNT_NOT_MOUNTED: '\\'{0}\\' isimli dosya sistemi çıkarılmadı',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: '\\'{0}\\' isimli dosya sistemi zaten çıkarıldı',\n  ERR_VFS_PATH_FORMAT_INVALID: '\\'{0}\\' olarak verilen yol, \\'name:/path\\' ile eşleşmiyor',\n  ERR_PACKAGE_PERMISSION_DENIED: '\\'{0}\\' dosyasını çalıştırmaya iznin yok',\n  ERR_PACKAGE_NOT_FOUND: '\\'{0}\\' isimli paket meta verisi bulunamadı',\n  ERR_PACKAGE_LOAD: '\\'{0}\\' paketinin yüklenmesi başarısız: {1}',\n  ERR_PACKAGE_NO_RUNTIME: '\\'{0}\\' paketinin runtime verisi bulunamadı',\n  ERR_PACKAGE_NO_METADATA: '\\'{0}\\' için meta verisi bulunamadı. Manifest\\'de olabilir mi?',\n  ERR_PACKAGE_EXCEPTION: '\\'{0}\\' konumunda beklenmeyen bir durum gerçekleşti',\n  ERR_WINDOW_ID_EXISTS: '\\'{0}\\' ID\\'sine sahip olan bir pencere zaten var',\n  ERR_INVALID_LOCALE: 'Geçersiz yer \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Bağlantı Koptu',\n  LBL_CONNECTION_LOST_MESSAGE: 'OS.js\\'ye olan bağlantı koptu. Yeniden bağlanılıyor....',\n  LBL_CONNECTION_RESTORED: 'Bağlantı Yenilendi',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'OS.js\\'ye olan bağlantı yenilendi.',\n  LBL_CONNECTION_FAILED: 'Bağlantı Başarısız',\n  LBL_CONNECTION_FAILED_MESSAGE: 'OS.js\\'ye bağlanılamıyor. Çeşitli özellikler doğru çalışmayabilir.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Geliştirme',\n  LBL_APP_CAT_SCIENCE: 'Bilim',\n  LBL_APP_CAT_GAMES: 'Oyun',\n  LBL_APP_CAT_GRAPHICS: 'Grafik',\n  LBL_APP_CAT_NETWORK: 'Ağ',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedya',\n  LBL_APP_CAT_OFFICE: 'Ofis',\n  LBL_APP_CAT_SYSTEM: 'Sistem',\n  LBL_APP_CAT_UTILITIES: 'Araçlar',\n  LBL_APP_CAT_OTHER: 'Diğer',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Uygulama seç',\n  LBL_LAUNCH_SELECT_MESSAGE: '\\'{0}\\' için uygulama seç',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Arkaplan seç',\n  LBL_DESKTOP_SELECT_THEME: 'Tema seç',\n  LBL_SEARCH_TOOLTOP: 'Dosya sistemi ({0}) ara',\n  LBL_SEARCH_PLACEHOLDER: 'Dosya sistemlerini ara...',\n  LBL_SEARCH_WAIT: 'Aranıyor...',\n  LBL_SEARCH_RESULT: '{0} kadar sonuç gösteriliyor',\n  LBL_DESKTOP_SET_AS_WALLPAPER: 'Arkaplan olarak ayarla',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Üst',\n  LBL_LEFT: 'Sol',\n  LBL_RIGHT: 'Sağ',\n  LBL_BOTTOM: 'Alt',\n  LBL_MENU: 'Menü',\n  LBL_ERROR: 'Hata',\n  LBL_INFO: 'Bilgi',\n  LBL_MESSAGE: 'Mesaj',\n  LBL_WARNINIG: 'Uyarı',\n  LBL_SUCCESS: 'Başarı',\n  LBL_FAILURE: 'Kusur',\n  LBL_WINDOW: 'Pencere',\n  LBL_WINDOWS: 'Pencereler',\n  LBL_NOTIFICATION: 'Bildiri',\n  LBL_NOTIFICATIONS: 'Bildiriler',\n  LBL_TRAY: 'Tray Girişi',\n  LBL_NAME: 'İsim',\n  LBL_TYPE: 'Tür',\n  LBL_SIZE: 'Boyut',\n  LBL_FILE: 'Dosya',\n  LBL_NEW: 'Yeni',\n  LBL_OPEN: 'Aç',\n  LBL_OPEN_WITH: 'Şununla aç:',\n  LBL_SAVE: 'Kaydet',\n  LBL_SAVEAS: 'Farklı Kaydet',\n  LBL_OK: 'Tamam',\n  LBL_ABORT: 'Durdur',\n  LBL_CANCEL: 'İptal',\n  LBL_CLOSE: 'Kapat',\n  LBL_QUIT: 'Çık',\n  LBL_YES: 'Evet',\n  LBL_NO: 'Hayır',\n  LBL_GO: 'Git',\n  LBL_MKDIR: 'Yeni dizin oluştur',\n  LBL_MKFILE: 'Yeni dosya oluştur',\n  LBL_COPY: 'Kopyala',\n  LBL_PASTE: 'Yapıştır',\n  LBL_CUT: 'Kes',\n  LBL_MOVE: 'Taşı',\n  LBL_RENAME: 'Yeniden Adlandır',\n  LBL_DELETE: 'Sil',\n  LBL_DOWNLOAD: 'İndir',\n  LBL_REFRESH: 'Yenile',\n  LBL_RELOAD: 'Yeniden Yükle',\n  LBL_HOME: 'Ev',\n  LBL_VIEW: 'Göster',\n  LBL_HELP: 'Yardım',\n  LBL_ABOUT: 'Hakkında',\n  LBL_APPLICATION: 'Uygulama',\n  LBL_APPLICATIONS: 'Uygulamalar',\n  LBL_KILL: 'Öldür',\n  LBL_KILL_ALL: 'Hepsini öldür',\n  LBL_MINIMIZE: 'Küçült',\n  LBL_MAXIMIZE: 'Büyüt',\n  LBL_RESTORE: 'Onar',\n  LBL_RAISE: 'Yükselt',\n  LBL_SHADE: 'Ört',\n  LBL_UNSHADE: 'Örtme',\n  LBL_ONTOP: 'Tepe',\n  LBL_RESIZE: 'Yeniden boyutlandır',\n  LBL_BACK: 'Geri',\n  LBL_FORWARD: 'İleri',\n  LBL_UPLOAD: 'Yükle',\n  LBL_IMAGE: 'İmge',\n  LBL_CREATE_SHORTCUT: 'Kısayol oluştur',\n  LBL_REMOVE_SHORTCUT: 'Kısayolu sil',\n  LBL_EDIT: 'Düzenle'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nexport const sv_SE = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Det går inte att göra förfrågningar i fristående läge.',\n  ERR_REQUEST_NOT_OK: 'Ett fel uppstod när en begäran utfördes: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filsystemet \\'{0}\\' hittades inte',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filsystemet hittades inte för \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filsystemet \\'{0}\\' inte monterat',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filsystemet \\'{0}\\' redan monterat',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Angiven väg \\'{0}\\' matchar inte \\'name:/path\\'',\n  ERR_PACKAGE_PERMISSION_DENIED: 'Du har inte tillåtelse att starta \\'{0}\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Paketmetadata \\'{0}\\' hittades inte',\n  ERR_PACKAGE_LOAD: 'Paketladdning \\'{0}\\' misslyckades: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Paketets körtid \\'{0}\\' hittades inte',\n  ERR_PACKAGE_NO_METADATA: 'Metadata hittades inte för \\'{0}\\'. Är det i manifestet?',\n  ERR_PACKAGE_EXCEPTION: 'Ett undantag inträffade i \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Fönster med ID \\'{0}\\' existerar redan',\n  ERR_INVALID_LOCALE: 'Ogiltigt språk \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Anslutning förlorad',\n  LBL_CONNECTION_LOST_MESSAGE: 'Anslutningen till OS.js förlorades. Återansluter ....',\n  LBL_CONNECTION_RESTORED: 'Anslutning återställd',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Anslutningen till OS.js-servern återställdes.',\n  LBL_CONNECTION_FAILED: 'Anslutningen misslyckades',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Anslutningen till OS.js kunde inte upprättas. Vissa funktioner kanske inte fungerar ordentligt.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Utveckling',\n  LBL_APP_CAT_SCIENCE: 'Vetenskap',\n  LBL_APP_CAT_GAMES: 'Spel',\n  LBL_APP_CAT_GRAPHICS: 'Grafik',\n  LBL_APP_CAT_NETWORK: 'Nätverk',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Kontor',\n  LBL_APP_CAT_SYSTEM: 'Systemet',\n  LBL_APP_CAT_UTILITIES: 'Verktyg',\n  LBL_APP_CAT_OTHER: 'Övrigt',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Välj applikation',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Välj applikation för \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Välj bakgrund',\n  LBL_DESKTOP_SELECT_THEME: 'Välj tema',\n  LBL_SEARCH_TOOLTOP: 'Sök filsystem ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Sök filsystemen...',\n  LBL_SEARCH_WAIT: 'Söker...',\n  LBL_SEARCH_RESULT: 'Visar {0} resultat',\n  LBL_DESKTOP_SET_AS_WALLPAPER: 'Använd som bakgrund',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Topp',\n  LBL_LEFT: 'Vänster',\n  LBL_RIGHT: 'Höger',\n  LBL_BOTTOM: 'Botten',\n  LBL_MENU: 'Meny',\n  LBL_ERROR: 'Fel',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Meddelande',\n  LBL_WARNINIG: 'Varning',\n  LBL_SUCCESS: 'Framgång',\n  LBL_FAILURE: 'Fel',\n  LBL_WINDOW: 'Fönster',\n  LBL_WINDOWS: 'Fönster',\n  LBL_NOTIFICATION: 'Meddelande',\n  LBL_NOTIFICATIONS: 'Meddelanden',\n  LBL_TRAY: 'Fackinmatning',\n  LBL_NAME: 'Namn',\n  LBL_TYPE: 'Typ',\n  LBL_SIZE: 'Storlek',\n  LBL_FILE: 'Fil',\n  LBL_NEW: 'Ny',\n  LBL_OPEN: 'Öppna',\n  LBL_OPEN_WITH: 'Öppna med...',\n  LBL_SAVE: 'Spara',\n  LBL_SAVEAS: 'Spara som',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Avbryta',\n  LBL_CANCEL: 'Avbryt',\n  LBL_CLOSE: 'Stäng',\n  LBL_QUIT: 'Sluta',\n  LBL_YES: 'Ja',\n  LBL_NO: 'Nej',\n  LBL_GO: 'Gå',\n  LBL_MKDIR: 'Skapa ny katalog',\n  LBL_MKFILE: 'Skapa ny fil',\n  LBL_COPY: 'Kopiera',\n  LBL_PASTE: 'Klistra in',\n  LBL_CUT: 'Klipp ut',\n  LBL_MOVE: 'Flytta',\n  LBL_RENAME: 'Döp om',\n  LBL_DELETE: 'Radera',\n  LBL_DOWNLOAD: 'Ladda ner',\n  LBL_REFRESH: 'Uppdatera',\n  LBL_RELOAD: 'Ladda om',\n  LBL_HOME: 'Hem',\n  LBL_VIEW: 'Se',\n  LBL_HELP: 'Hjälp',\n  LBL_ABOUT: 'Om',\n  LBL_APPLICATION: 'Ansökan',\n  LBL_APPLICATIONS: 'Applikationer',\n  LBL_KILL: 'Döda',\n  LBL_KILL_ALL: 'Döda alla',\n  LBL_MINIMIZE: 'Minimera',\n  LBL_MAXIMIZE: 'Maximera',\n  LBL_RESTORE: 'Återställ',\n  LBL_RAISE: 'Höj',\n  LBL_SHADE: 'Skugga',\n  LBL_UNSHADE: 'Avskugga',\n  LBL_ONTOP: 'Överst',\n  LBL_RESIZE: 'Ändra storlek',\n  LBL_BACK: 'Back',\n  LBL_FORWARD: 'Forward',\n  LBL_UPLOAD: 'Ladda upp',\n  LBL_IMAGE: 'Bild',\n  LBL_CREATE_SHORTCUT: 'Skapa genväg',\n  LBL_REMOVE_SHORTCUT: 'ta bort genväg',\n  LBL_EDIT: 'Redigera'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {basename, pathname} from './utils/vfs';\n\n/**\n * Basic Application Options\n *\n * @typedef {Object} BasicApplicationOptions\n * @property {string[]} [mimeTypes] What MIME types to support (all/fallback)\n * @property {string[]} [loadMimeTypes] What MIME types to support on load\n * @property {string[]} [saveMimeTypes] What MIME types to support on save\n * @property {string} [defaultFilename] Default filename of a new file\n */\n\n/**\n * Basic Application Helper\n *\n * A class for helping creating basic applications with open/load/create functionality.\n * Also sets the internal proc args for sessions.\n */\nexport class BasicApplication extends EventEmitter {\n\n  /**\n   * Basic Application Constructor\n   * @param {Core} core OS.js Core API\n   * @param {Application} proc The application process\n   * @param {Window} win The main application window\n   * @param {BasicApplicationOptions} [options={}] Basic application options\n   */\n  constructor(core, proc, win, options = {}) {\n    super('BasicApplication<' + proc.name + '>');\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * Application instance reference\n     * @type {Application}\n     * @readonly\n     */\n    this.proc = proc;\n\n    /**\n     * Window instance reference\n     * @type {Window}\n     * @readonly\n     */\n    this.win = win;\n\n    /**\n     * Basic Application Options\n     * @type {BasicApplicationOptions}\n     * @readonly\n     */\n    this.options = {\n      mimeTypes: proc.metadata.mimes || [],\n      loadMimeTypes: [],\n      saveMimeTypes: [],\n      defaultFilename: 'New File',\n      ...options\n    };\n  }\n\n  /**\n   * Destroys all Basic Application internals\n   */\n  destroy() {\n    this.off();\n    super.destroy();\n  }\n\n  /**\n   * Initializes the application\n   * @return {Promise<boolean>}\n   */\n  init() {\n    if (this.proc.args.file) {\n      this.open(this.proc.args.file);\n    } else {\n      this.create();\n    }\n\n    return Promise.resolve(true);\n  }\n\n  /**\n   * Gets options for a dialog\n   * @param {string} type Dialog type\n   * @return {object}\n   */\n  getDialogOptions(type, options = {}) {\n    const {\n      file,\n      ...rest\n    } = options;\n\n    const {\n      defaultFilename,\n      mimeTypes,\n      loadMimeTypes,\n      saveMimeTypes\n    } = this.options;\n\n    const currentFile = file ? file : this.proc.args.file;\n    const defaultPath = this.core.config('vfs.defaultPath');\n    const path = currentFile ? currentFile.path : null;\n\n    let mime = type === 'open' ? loadMimeTypes : saveMimeTypes;\n    if (!mime.length) {\n      mime = mimeTypes;\n    }\n\n    return [{\n      type,\n      mime,\n      filename: path ? basename(path) : defaultFilename,\n      path: path ? pathname(path) : defaultPath,\n      ...rest\n    }, {\n      parent: this.win,\n      attributes: {\n        modal: true\n      }\n    }];\n  }\n\n  /**\n   * Updates the window title to match open file\n   */\n  updateWindowTitle() {\n    if (this.win) {\n      const {translatableFlat} = this.core.make('osjs/locale');\n      const prefix = translatableFlat(this.proc.metadata.title);\n      const title = this._createTitle(prefix);\n\n      this.win.setTitle(title);\n    }\n  }\n\n  /**\n   * Creates a new dialog of a type\n   * @param {string} type Dialog type\n   * @param {Function} cb Callback\n   * @param {object} [options] Override options\n   */\n  createDialog(type, cb, options = {}) {\n    const [args, opts] = this.getDialogOptions(type, options);\n\n    if (this.core.has('osjs/dialog')) {\n      this.core.make('osjs/dialog', 'file', args, opts, (btn, item) => {\n        if (btn === 'ok') {\n          cb(item);\n        }\n      });\n    }\n  }\n\n  /**\n   * Opens given file\n   *\n   * Does not do any actual VFS operation\n   *\n   * @param {VFSFile} file A file\n   */\n  open(item) {\n    this._setFile(item, 'open-file');\n  }\n\n  /**\n   * Saves given file\n   *\n   * Does not do any actual VFS operation\n   *\n   * @param {VFSFile} file A file\n   */\n  save(item) {\n    this._setFile(item, 'save-file');\n  }\n\n  /**\n   * Create new file\n   *\n   * Does not do any actual VFS operation\n   */\n  create() {\n    this.proc.args.file = null;\n\n    this.emit('new-file');\n\n    this.updateWindowTitle();\n  }\n\n  /**\n   * Create new file\n   * @see BasicApplication#create\n   */\n  createNew() {\n    this.create();\n  }\n\n  /**\n   * Creates a new save dialog\n   * @param {object} [options] Dialog options\n   */\n  createSaveDialog(options = {}) {\n    this.createDialog('save', item => this.save(item), options);\n  }\n\n  /**\n   * Creates a new load dialog\n   * @param {object} [options] Dialog options\n   */\n  createOpenDialog(options = {}) {\n    this.createDialog('open', item => this.open(item), options);\n  }\n\n  /**\n   * Sets file from open/save action\n   *\n   * @private\n   * @param {VFSFile} item File\n   * @param {string} eventName Event to fire\n   */\n  _setFile(item, eventName) {\n    this.proc.args.file = {...item};\n    this.emit(eventName, item);\n    this.updateWindowTitle();\n  }\n\n  /**\n   * Creates the window title\n   *\n   * @private\n   * @param {string} prefix Title prefix\n   * @return {string}\n   */\n  _createTitle(prefix) {\n    const title = this.proc.args.file\n      ? basename(this.proc.args.file.path)\n      : this.options.defaultFilename;\n\n    return title\n      ? `${prefix} - ${title}`\n      : prefix;\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport Application from '../application';\nimport Window from '../window';\nimport WindowBehavior from '../window-behavior';\nimport Session from '../session';\nimport Packages from '../packages';\nimport Tray from '../tray';\nimport Websocket from '../websocket';\nimport Clipboard from '../clipboard';\nimport Middleware from '../middleware';\nimport * as translations from '../locale';\nimport {format, translatable, translatableFlat, getLocale} from '../utils/locale';\nimport {style, script, playSound} from '../utils/dom';\nimport {resourceResolver} from '../utils/desktop';\nimport * as dnd from '../utils/dnd';\nimport {BasicApplication} from '../basic-application.js';\nimport {ServiceProvider} from '@osjs/common';\nimport {EventEmitter} from '@osjs/event-emitter';\nimport logger from '../logger';\nimport merge from 'deepmerge';\n\n/**\n * Core Provider Locale Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderLocaleContract\n * @property {Function} format\n * @property {Function} translate\n * @property {Function} translatable\n * @property {Function} translatableFlat\n * @property {Function} getLocale\n * @property {Function} setLocale\n */\n\n/**\n * Core Provider Window Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderWindowContract\n * @property {Function} create\n * @property {Function} list\n * @property {Function} last\n */\n\n/**\n * Core Provider DnD Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderDnDContract\n * @property {Function} draggable\n * @property {Function} droppable\n */\n\n/**\n * Core Provider Theme Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderDOMContract\n * @property {Function} script\n * @property {Function} style\n */\n\n/**\n * Core Provider Theme Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderThemeContract\n * @property {Function} resource\n * @property {Function} icon\n */\n\n/**\n * Core Provider Sound Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderSoundContract\n * @property {Function} resource\n * @property {Function} play\n */\n\n/**\n * Core Provider Session Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderSessionContract\n * @property {Function} save\n * @property {Function} load\n */\n\n/**\n * Core Provider Packages Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderPackagesContract\n * @property {Function} [launch]\n * @property {Function} [register]\n * @property {Function} [addPackages]\n * @property {Function} [getPackages]\n * @property {Function} [getCompatiblePackages]\n * @property {Function} [running]\n */\n\n/**\n * Core Provider Clipboard Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderClipboardContract\n * @property {Function} [clear]\n * @property {Function} [set]\n * @property {Function} [has]\n * @property {Function} [get]\n */\n\n/**\n * Core Provider Middleware Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderMiddlewareContract\n * @property {Function} [add]\n * @property {Function} [get]\n */\n\n/**\n * Core Provider Tray Contract\n * TODO: typedef\n * @typedef {Object} CoreProviderTrayContract\n * @property {Function} [create]\n * @property {Function} [remove]\n * @property {Function} [list]\n * @property {Function} [has]\n */\n\n/**\n * Core Provider Options\n * @typedef {Object} CoreProviderOptions\n * @property {Function} [windowBehavior] Custom Window Behavior\n * @property {Object} [locales] Override locales\n */\n\n/**\n * OS.js Core Service Provider\n */\nexport default class CoreServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Core} core OS.js Core\n   * @param {CoreProviderOptions} [options={}] Arguments\n   */\n  constructor(core, options = {}) {\n    super(core, options);\n\n    /**\n     * @type {Session}\n     * @readonly\n     */\n    this.session = new Session(core);\n\n    /**\n     * @type {Tray}\n     * @readonly\n     */\n    this.tray = new Tray(core);\n\n    /**\n     * @type {Packages}\n     * @readonly\n     */\n    this.pm = new Packages(core);\n\n    /**\n     * @type {Clipboard}\n     * @readonly\n     */\n    this.clipboard = new Clipboard();\n\n    /**\n     * @type {Middleware}\n     * @readonly\n     */\n    this.middleware = new Middleware();\n\n    window.OSjs = this.createGlobalApi();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   * @return {string}\n   */\n  provides() {\n    return [\n      'osjs/application',\n      'osjs/basic-application',\n      'osjs/window',\n      'osjs/windows',\n      'osjs/event-handler',\n      'osjs/window-behaviour',\n      'osjs/dnd',\n      'osjs/dom',\n      'osjs/clipboard',\n      'osjs/middleware',\n      'osjs/tray',\n      'osjs/locale',\n      'osjs/packages',\n      'osjs/websocket',\n      'osjs/session',\n      'osjs/theme',\n      'osjs/sounds'\n    ];\n  }\n\n  /**\n   * Destroys provider\n   */\n  destroy() {\n    this.tray.destroy();\n    this.pm.destroy();\n    this.clipboard.destroy();\n    this.middleware.destroy();\n    this.session.destroy();\n\n    super.destroy();\n  }\n\n  /**\n   * Initializes provider\n   * @return {Promise<undefined>}\n   */\n  init() {\n    this.registerContracts();\n\n    this.core.on('osjs/core:started', () => {\n      this.session.load();\n    });\n\n    return this.pm.init();\n  }\n\n  /**\n   * Starts provider\n   * @return {Promise<undefined>}\n   */\n  start() {\n    if (this.core.config('development')) {\n      this.core.on('osjs/dist:changed', filename => {\n        this._onDistChanged(filename);\n      });\n\n      this.core.on('osjs/packages:package:changed', name => {\n        this._onPackageChanged(name);\n      });\n    }\n\n    this.core.on('osjs/packages:metadata:changed', () => {\n      this.pm.init();\n    });\n  }\n\n  /**\n   * Registers contracts\n   */\n  registerContracts() {\n    this.core.instance('osjs/window', (options = {}) => new Window(this.core, options));\n    this.core.instance('osjs/application', (data = {}) => new Application(this.core, data));\n    this.core.instance('osjs/basic-application', (proc, win, options = {}) => new BasicApplication(this.core, proc, win, options));\n    this.core.instance('osjs/websocket', (name, uri, options = {}) => new Websocket(name, uri, options));\n    this.core.instance('osjs/event-emitter', name => new EventEmitter(name));\n\n    this.core.singleton('osjs/windows', () => this.createWindowContract());\n    this.core.singleton('osjs/locale', () => this.createLocaleContract());\n    this.core.singleton('osjs/dnd', () => this.createDnDContract());\n    this.core.singleton('osjs/dom', () => this.createDOMContract());\n    this.core.singleton('osjs/theme', () => this.createThemeContract());\n    this.core.singleton('osjs/sounds', () => this.createSoundsContract());\n    this.core.singleton('osjs/session', () => this.createSessionContract());\n    this.core.singleton('osjs/packages', () => this.createPackagesContract());\n    this.core.singleton('osjs/clipboard', () => this.createClipboardContract());\n    this.core.singleton('osjs/middleware', () => this.createMiddlewareContract());\n\n    this.core.instance('osjs/tray', (options, handler) => {\n      if (typeof options !== 'undefined') {\n        // FIXME: Use contract instead\n        logger.warn('osjs/tray usage without .create() is deprecated');\n        return this.tray.create(options, handler);\n      }\n\n      return this.createTrayContract();\n    });\n\n    // FIXME: Remove this from public usage\n    this.core.singleton('osjs/window-behavior', () => typeof this.options.windowBehavior === 'function'\n      ? this.options.windowBehavior(this.core)\n      : new WindowBehavior(this.core));\n\n    // FIXME: deprecated\n    this.core.instance('osjs/event-handler', (...args) => {\n      logger.warn('osjs/event-handler is deprecated, use osjs/event-emitter');\n      return new EventEmitter(...args);\n    });\n  }\n\n  /**\n   * Expose some internals to global\n   */\n  createGlobalApi() {\n    const globalBlacklist = this.core.config('providers.globalBlacklist', []);\n    const globalWhitelist = this.core.config('providers.globalWhitelist', []);\n\n    const make = (name, ...args) => {\n      if (this.core.has(name)) {\n        const blacklisted = globalBlacklist.length > 0 && globalBlacklist.indexOf(name) !== -1;\n        const notWhitelisted = globalWhitelist.length > 0 && globalWhitelist.indexOf(name) === -1;\n\n        if (blacklisted || notWhitelisted) {\n          throw new Error(`The provider '${name}' cannot be used via global scope`);\n        }\n      }\n\n      return this.core.make(name, ...args);\n    };\n\n    return Object.freeze({\n      make,\n      register: (name, callback) => this.pm.register(name, callback),\n      url: (endpoint, options, metadata) => this.core.url(endpoint, options, metadata),\n      run: (name, args = {}, options = {}) => this.core.run(name, args, options),\n      open: (file, options = {}) => this.core.open(file, options),\n      request: (url, options, type) => this.core.request(url, options, type),\n      middleware: (group, callback) => this.middleware.add(group, callback)\n    });\n  }\n\n  /**\n   * Event when dist changes from a build or deployment\n   * @private\n   * @param {string} filename The resource filename\n   */\n  _onDistChanged(filename) {\n    const url = this.core.url(filename).replace(/^\\//, '');\n    const found = this.core.$resourceRoot.querySelectorAll('link[rel=stylesheet]');\n    const map = Array.from(found).reduce((result, item) => {\n      const src = item.getAttribute('href').split('?')[0].replace(/^\\//, '');\n      return {\n        [src]: item,\n        ...result\n      };\n    }, {});\n\n    if (map[url]) {\n      logger.debug('Hot-reloading', url);\n\n      setTimeout(() => {\n        map[url].setAttribute('href', url);\n      }, 100);\n    }\n  }\n\n  /**\n   * Event when package dist changes from a build or deployment\n   * @private\n   * @param {string} name The package name\n   */\n  _onPackageChanged(name) {\n    // TODO: Reload themes as well\n    Application.getApplications()\n      .filter(proc => proc.metadata.name === name)\n      .forEach(proc => proc.relaunch());\n  }\n\n  /**\n   * Provides localization contract\n   * @return {CoreProviderLocaleContract}\n   */\n  createLocaleContract() {\n    const strs = merge(translations, this.options.locales || {});\n    const translate = translatable(this.core)(strs);\n\n    return {\n      format: format(this.core),\n      translate,\n      translatable: translatable(this.core),\n      translatableFlat: translatableFlat(this.core),\n      getLocale: (key = 'language') => {\n        const ref = getLocale(this.core, key);\n        return ref.userLocale || ref.defaultLocale;\n      },\n      setLocale: name => name in strs\n        ? this.core.make('osjs/settings')\n          .set('osjs/locale', 'language', name)\n          .save()\n          .then(() => this.core.emit('osjs/locale:change', name))\n        : Promise.reject(translate('ERR_INVALID_LOCALE', name))\n    };\n  }\n\n  /**\n   * Provides window contract\n   * @return {CoreProviderWindowContract}\n   */\n  createWindowContract() {\n    return {\n      create: (options = {}) => new Window(this.core, options),\n      list: () => Window.getWindows(),\n      last: () => Window.lastWindow()\n    };\n  }\n\n  /**\n   * Provides DnD contract\n   * @return {CoreProviderDnDContract}\n   */\n  createDnDContract() {\n    return dnd;\n  }\n\n  /**\n   * Provides DOM contract\n   * @return {CoreProviderDOMContract}\n   */\n  createDOMContract() {\n    return {\n      script,\n      style\n    };\n  }\n\n  /**\n   * Provides Theme contract\n   * @return {CoreProviderThemeContract}\n   */\n  createThemeContract() {\n    const {themeResource, icon} = resourceResolver(this.core);\n\n    return {\n      resource: themeResource,\n      icon\n    };\n  }\n\n  /**\n   * Provides Sounds contract\n   * @return {CoreProviderSoundContract}\n   */\n  createSoundsContract() {\n    const {soundResource, soundsEnabled} = resourceResolver(this.core);\n\n    return {\n      resource: soundResource,\n      play: (src, options = {}) => {\n        if (soundsEnabled()) {\n          const absoluteSrc = src.match(/^(\\/|https?:)/)\n            ? src\n            : soundResource(src);\n\n          if (absoluteSrc) {\n            return playSound(absoluteSrc, options);\n          }\n        }\n\n        return false;\n      }\n    };\n  }\n\n  /**\n   * Provides Session contract\n   * @return {CoreProviderSessionContract}\n   */\n  createSessionContract() {\n    return {\n      save: () => this.session.save(),\n      load: (fresh = false) => this.session.load(fresh)\n    };\n  }\n\n  /**\n   * Provides Packages contract\n   * @return {CoreProviderPackagesContract}\n   */\n  createPackagesContract() {\n    return {\n      launch: (name, args = {}, options = {}) => this.pm.launch(name, args, options),\n      register: (name, callback) => this.pm.register(name, callback),\n      addPackages: list => this.pm.addPackages(list),\n      getPackages: filter => this.pm.getPackages(filter),\n      getCompatiblePackages: mimeType => this.pm.getCompatiblePackages(mimeType),\n      running: () => this.pm.running(),\n      getMetadataFromName: name => this.pm.getMetadataFromName(name)\n    };\n  }\n\n  /**\n   * Provides Clipboard contract\n   * @return {CoreProviderClipboardContract}\n   */\n  createClipboardContract() {\n    return {\n      clear: () => this.clipboard.clear(),\n      set: (data, type) => this.clipboard.set(data, type),\n      has: type => this.clipboard.has(type),\n      get: (clear = false) => this.clipboard.get(clear)\n    };\n  }\n\n  /**\n   * Provides Middleware contract\n   * @return {CoreProviderMiddlewareContract}\n   */\n  createMiddlewareContract() {\n    return {\n      add: (group, callback) => this.middleware.add(group, callback),\n      get: group => this.middleware.get(group)\n    };\n  }\n\n  /**\n   * Provides Tray contract\n   * @return {CoreProviderTrayContract}\n   */\n  createTrayContract() {\n    return {\n      create: (options, handler) => this.tray.create(options, handler),\n      remove: entry => this.tray.remove(entry),\n      list: () => this.tray.list(),\n      has: key => this.tray.has(key)\n    };\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Desktop from '../desktop';\n\n/**\n * Desktop Service Contract\n * TODO: typedef\n * @typedef {Object} DeskopProviderContract\n * @property {Function} setKeyboardContext\n * @property {Function} openContextMenu\n * @property {Function} addContextMenuEntries\n * @property {Function} applySettings\n * @property {Function} createDropContextMenu\n * @property {Function} getRect\n */\n\n/**\n * OS.js Desktop Service Provider\n */\nexport default class DesktopServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Core} core OS.js Core\n   */\n  constructor(core, options = {}) {\n    super(core, options || {});\n\n    /**\n     * @type {Desktop}\n     * @readonly\n     */\n    this.desktop = new Desktop(this.core, this.options);\n  }\n\n  /**\n   * Destroys instance\n   */\n  destroy() {\n    this.desktop = this.desktop.destroy();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   * @return {string[]}\n   */\n  provides() {\n    return [\n      'osjs/desktop'\n    ];\n  }\n\n  /**\n   * Initializes desktop\n   * @return {Promise<undefined>}\n   */\n  init() {\n    this.desktop.init();\n\n    this.core.singleton('osjs/desktop', () => this.createDesktopContract());\n\n    this.core.on('osjs/core:started', () => {\n      this.desktop.applySettings();\n    });\n  }\n\n  /**\n   * Starts desktop\n   * @return {Promise<undefined>}\n   */\n  start() {\n    this.desktop.start();\n  }\n\n  /**\n   * @return {DeskopProviderContract}\n   */\n  createDesktopContract() {\n    return {\n      setKeyboardContext: ctx => this.desktop.setKeyboardContext(ctx),\n      openContextMenu: ev => this.desktop.onContextMenu(ev),\n      addContextMenuEntries: entries => this.desktop.addContextMenu(entries),\n      applySettings: settings => this.desktop.applySettings(settings),\n      createDropContextMenu: data => this.desktop.createDropContextMenu(data),\n      getRect: () => this.desktop.getRect()\n    };\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport Notifications from '../notifications';\nimport {ServiceProvider} from '@osjs/common';\n\n/**\n * OS.js Notification Service Provider\n */\nexport default class NotificationServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Core} core OS.js Core\n   */\n  constructor(core) {\n    super(core);\n\n    /**\n     * @type {Notifications}\n     * @readonly\n     */\n    this.notifications = new Notifications(core);\n  }\n\n  /**\n   * Destroys notifications\n   */\n  destroy() {\n    this.notifications.destroy();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   * @return {string[]}\n   */\n  provides() {\n    return [\n      'osjs/notification'\n    ];\n  }\n\n  /**\n   * Initializes authentication\n   * @return {Promise<undefined>}\n   */\n  init() {\n    this.core.instance('osjs/notification', (options) => {\n      return this.notifications.create(options);\n    });\n\n    return this.notifications.init();\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {\n  transformReaddir,\n  transformArrayBuffer,\n  createFileIter\n} from './utils/vfs';\n\n/**\n * VFS Method Options\n *\n * TODO: typedef\n * @typedef {Object} VFSMethodOptions\n */\n\n/**\n * VFS Download Options\n *\n * @typedef {Object} VFSDownloadOptions\n * @property {boolean} [readfile] Set to false to force backend fetch\n */\n\n/**\n * VFS File Object\n *\n * @typedef {Object} VFSFile\n * @property {string} path\n * @property {string} [filename]\n * @property {boolean} [isDirectory]\n * @property {boolean} [isFile]\n * @property {string} [mime]\n * @property {object} [stat]\n */\n\n// Cache the capability of each mount point\nlet capabilityCache = {};\n\n// Makes sure our input paths are object(s)\nconst pathToObject = path => ({\n  id: null,\n  ...typeof path === 'string' ? {path} : path\n});\n\n// Handles directory listing result(s)\nconst handleDirectoryList = (path, options) => result =>\n  Promise.resolve(result.map(stat => createFileIter(stat)))\n    .then(result => transformReaddir(pathToObject(path), result, {\n      showHiddenFiles: options.showHiddenFiles !== false,\n      filter: options.filter\n    }));\n\n/**\n * Get vfs capabilities\n *\n * @param {string|VFSFile} path The path of a file\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<object[]>} An object of capabilities\n */\nexport const capabilities = (adapter, mount) => (path, options = {}) => {\n  const cached = capabilityCache[mount.name];\n  if (cached) {\n    return Promise.resolve(cached);\n  }\n  return adapter.capabilities(pathToObject(path), options, mount)\n    .then(res => {\n      capabilityCache[mount.name] = res;\n      return res;\n    });\n};\n\n\n/**\n * Read a directory\n *\n * @param {string|VFSFile} path The path to read\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<object[]>} A list of files\n */\nexport const readdir = (adapter, mount) => (path, options = {}) =>\n  adapter.readdir(pathToObject(path), options, mount)\n    .then(handleDirectoryList(path, options));\n\n/**\n * Reads a file\n *\n * Available types are 'arraybuffer', 'blob', 'uri' and 'string'\n *\n * @param {string|VFSFile} path The path to read\n * @param {string} [type=string] Return this content type\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<ArrayBuffer>}\n */\nexport const readfile = (adapter, mount) => (path, type = 'string', options = {}) =>\n  adapter.readfile(pathToObject(path), type, options, mount)\n    .then(response => transformArrayBuffer(response.body, response.mime, type));\n\n/**\n * Writes a file\n * @param {string|VFSFile} path The path to write\n * @param {ArrayBuffer|Blob|string} data The data\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<number>} File size\n */\nexport const writefile = (adapter, mount) => (path, data, options = {}) => {\n  const binary = (data instanceof ArrayBuffer || data instanceof Blob)\n    ? data\n    : new Blob([data], {type: 'application/octet-stream'});\n\n  return adapter.writefile(pathToObject(path), binary, options, mount);\n};\n\n/**\n * Copies a file or directory (move)\n * @param {string|VFSFile} from The source (from)\n * @param {string|VFSFile} to The destination (to)\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<boolean>}\n */\nexport const copy = (adapter, mount) => (from, to, options = {}) =>\n  adapter.copy(pathToObject(from), pathToObject(to), options, mount);\n\n/**\n * Renames a file or directory (move)\n * @param {string|VFSFile} from The source (from)\n * @param {string|VFSFile} to The destination (to)\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<boolean>}\n */\nexport const rename = (adapter, mount) => (from, to, options = {}) =>\n  adapter.rename(pathToObject(from), pathToObject(to), options, mount);\n\n/**\n * Alias of 'rename'\n * @param {string|VFSFile} from The source (from)\n * @param {string|VFSFile} to The destination (to)\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<boolean>}\n */\nexport const move = rename;\n\n/**\n * Creates a directory\n * @param {string|VFSFile} path The path to new directory\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<boolean>}\n */\nexport const mkdir = (adapter, mount) => (path, options = {}) =>\n  adapter.mkdir(pathToObject(path), options, mount);\n\n/**\n * Removes a file or directory\n * @param {string|VFSFile} path The path to remove\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<boolean>}\n */\nexport const unlink = (adapter, mount) => (path, options = {}) =>\n  adapter.unlink(pathToObject(path), options, mount);\n\n/**\n * Checks if path exists\n * @param {string|VFSFile} path The path to check\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<boolean>}\n */\nexport const exists = (adapter, mount) => (path, options = {}) =>\n  adapter.exists(pathToObject(path), options, mount);\n\n/**\n * Gets the stats of the file or directory\n * @param {string|VFSFile} path The path to check\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<object>}\n */\nexport const stat = (adapter, mount) => (path, options = {}) =>\n  adapter.stat(pathToObject(path), options, mount)\n    .then(stat => createFileIter(stat));\n\n/**\n * Gets an URL to a resource defined by file\n * @param {string|VFSFile} path The file\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<string>}\n */\nexport const url = (adapter, mount) => (path, options = {}) =>\n  adapter.url(pathToObject(path), options, mount);\n\n/**\n * Initiates a native browser download of the file\n * @param {string|VFSFile} path The file\n * @param {VFSDownloadOptions} [options] Options\n * @return {Promise<any>}\n */\nexport const download = (adapter, mount) => (path, options = {}) =>\n  typeof adapter.download === 'function' && options.readfile !== true\n    ? adapter.download(pathToObject(path), options, mount)\n    : readfile(adapter)(path, 'blob')\n      .then(body => {\n        const filename = pathToObject(path).path.split('/').splice(-1)[0];\n        const url = window.URL.createObjectURL(body);\n\n        const a = document.createElement('a');\n        a.style.display = 'none';\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n\n        a.click();\n\n        setTimeout(() => {\n          window.URL.revokeObjectURL(url);\n          a.remove();\n        }, 1);\n      });\n\n/**\n * Searches for files and folders\n * @param {string|VFSFile} root The root\n * @param {string} pattern Search pattern\n * @param {VFSMethodOptions} [options] Options\n * @return {Promise<object[]>} A list of files\n */\nexport const search = (adapter, mount) => (root, pattern, options = {}) => {\n  if (mount.attributes && mount.attributes.searchable === false) {\n    return Promise.resolve([]);\n  }\n\n  return adapter.search(pathToObject(root), pattern, options, mount)\n    .then(handleDirectoryList(root, options));\n};\n\n/**\n * Touches a file\n * @param {string|VFSFile} path File path\n * @return {Promise<boolean>}\n */\nexport const touch = (adapter, mount) => (path, options = {}) =>\n  adapter.touch(pathToObject(path), options, mount);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * Null VFS adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst nullAdapter = ({\n  capabilities: (path, options) => Promise.resolve({}),\n  readdir: (path, options) => Promise.resolve([]),\n  readfile: (path, type, options) => Promise.resolve({body: new ArrayBuffer(), mime: 'application/octet-stream'}),\n  writefile: (path, data, options) => Promise.resolve(-1),\n  copy: (from, to, options) => Promise.resolve(false),\n  rename: (from, to, options) => Promise.resolve(false),\n  mkdir: (path, options) => Promise.resolve(false),\n  unlink: (path, options) => Promise.resolve(false),\n  exists: (path, options) => Promise.resolve(false),\n  stat: (path, options) => Promise.resolve({}),\n  url: (path, options) => Promise.resolve(null),\n  mount: options => Promise.resolve(true),\n  unmount: options => Promise.resolve(true),\n  search: (root, pattern, options) => Promise.resolve([]),\n  touch: (path, options) => Promise.resolve(false)\n});\n\nexport default nullAdapter;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nconst getters = ['capabilities', 'exists', 'stat', 'readdir', 'readfile'];\n\nconst requester = core => (fn, body, type, options = {}) =>\n  core.request(`/vfs/${fn}`, {\n    body,\n    method: getters.indexOf(fn) !== -1 ? 'get' : 'post',\n    ...options\n  }, type)\n    .then(response => {\n      if (type === 'json') {\n        return {mime: 'application/json', body: response};\n      } else if (fn === 'writefile') {\n        return response.json();\n      }\n\n      const contentType = response.headers.get('content-type') || 'application/octet-stream';\n\n      return response.arrayBuffer().then(result => ({\n        mime: contentType,\n        body: result\n      }));\n    });\n\nconst methods = (core, request) => {\n  const passthrough = (name) => ({path}, options) =>\n    request(name, {path, options}, 'json')\n      .then(({body}) => body);\n\n  return {\n    capabilities: passthrough('capabilities'),\n\n    readdir: ({path}, options) => request('readdir', {\n      path,\n      options,\n    }, 'json').then(({body}) => body),\n\n    readfile: ({path}, type, options) =>\n      request('readfile', {path, options}),\n\n    writefile: ({path}, data, options = {}) => {\n      const formData = new FormData();\n      formData.append('upload', data);\n      formData.append('path', path);\n      formData.append('options', options);\n\n      return request('writefile', formData, undefined, {\n        onProgress: options.onProgress,\n        xhr: !!options.onProgress\n      });\n    },\n\n    copy: (from, to, options) =>\n      request('copy', {from: from.path, to: to.path, options}, 'json').then(({body}) => body),\n\n    rename: (from, to, options) =>\n      request('rename', {from: from.path, to: to.path, options}, 'json').then(({body}) => body),\n\n    mkdir: passthrough('mkdir'),\n    unlink: passthrough('unlink'),\n    exists: passthrough('exists'),\n    stat: passthrough('stat'),\n\n    url: ({path}, options) => Promise.resolve(\n      core.url(`/vfs/readfile?path=${encodeURIComponent(path)}`)\n    ),\n\n    search: ({path}, pattern, options) =>\n      request('search', {root: path, pattern, options}, 'json')\n        .then(({body}) => body),\n\n    touch: ({path}, options) =>\n      request('touch', {path, options}, 'json').then(({body}) => body),\n\n    download: ({path}, options = {}) => {\n      const json = encodeURIComponent(JSON.stringify({download: true}));\n\n      return Promise.resolve(`/vfs/readfile?options=${json}&path=` + encodeURIComponent(path))\n        .then(url => {\n          return (options.target || window).open(url);\n        });\n    }\n  };\n};\n\n/**\n * System VFS adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst adapter = (core) => {\n  const request = requester(core);\n\n  return methods(core, request);\n};\n\nexport default adapter;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * Application VFS adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst adapter = (core) => {\n  const pkgs = core.make('osjs/packages');\n\n  return {\n    readdir: ({path}, options) => {\n      return Promise.resolve(pkgs.getPackages())\n        .then(pkgs => pkgs.map(pkg => ({\n          isDirectory: false,\n          isFile: true,\n          filename: pkg.name,\n          mime: 'osjs/application',\n          path: `${path.replace(/(\\/+)?$/, '/')}${pkg.name}`,\n          size: 0,\n          stat: {},\n          icon: pkg.icon ? core.url(pkg.icon, {}, pkg) : null\n        })));\n    }\n  };\n};\n\nexport default adapter;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport * as VFS from './vfs';\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {parseMountpointPrefix, filterMountByGroups, createWatchEvents} from './utils/vfs';\nimport defaultAdapter from './adapters/vfs/null';\nimport systemAdapter from './adapters/vfs/system';\nimport appsAdapter from './adapters/vfs/apps';\nimport logger from './logger';\nimport merge from 'deepmerge';\n\n/**\n * VFS Mountpoint attributes\n *\n * @typedef {Object} FilesystemMountpointAttributes\n * @property {string} [visibility='global'] Visibility in UI\n * @property {boolean} [local=true] Local filesystem ?\n * @property {boolean} [searchable=true] If can be searched\n * @property {boolean} [readOnly=false] Readonly\n */\n\n/**\n * VFS Mountpoint\n *\n * @typedef {Object} FilesystemMountpoint\n * @property {string} name Name\n * @property {string} label Label\n * @property {string} adapter Adater name\n * @property {string} [root] System adapter root\n * @property {boolean} [enabled=true] Enabled state\n * @property {FilesystemMountpointAttributes} [attributes] Attributes\n */\n\n/**\n * Filesystem Adapter Methods\n * TODO: typedef\n * @typedef {Object} FilesystemAdapterMethods\n * @property {Function} capabilities\n * @property {Function} readdir\n * @property {Function} readfile\n * @property {Function} writefile\n * @property {Function} copy\n * @property {Function} move\n * @property {Function} rename\n * @property {Function} mkdir\n * @property {Function} unlink\n * @property {Function} exists\n * @property {Function} stat\n * @property {Function} url\n * @property {Function} download\n * @property {Function} search\n * @property {Function} touch\n */\n\n/**\n * @callback FilesystemAdapterWrapper\n * @return {FilesystemAdapterMethods}\n */\n\n/**\n * Filesystem Options\n *\n * @typedef {Object} FilesystemOptions\n * @property {{name: FilesystemAdapterWrapper}} [adapters] Adapter registry\n * @property {FilesystemMountpoint[]} [mounts] Mountpoints\n */\n\n/**\n * Filesystem Class that manages filesystems and adapters\n */\nexport default class Filesystem extends EventEmitter {\n\n  /**\n   * Create filesystem manager\n   *\n   * @param {Core} core Core reference\n   * @param {FilesystemOptions} [options] Options\n   */\n  constructor(core, options = {}) {\n    options = {\n      adapters: {},\n      mounts: [],\n      ...options\n    };\n\n    super('Filesystem');\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n\n    /**\n     * Adapter registry\n     * @type {{name: FilesystemAdapterWrapper}}\n     * @readonly\n     */\n    this.adapters = {\n      system: systemAdapter,\n      apps: appsAdapter,\n      ...this.core.config('vfs.adapters', {}),\n      ...options.adapters\n    };\n\n    /**\n     * Mountpoints\n     * @type {FilesystemMountpoint[]}\n     */\n    this.mounts = [];\n\n    /**\n     * Options\n     * @type {FilesystemOptions}\n     */\n    this.options = {};\n\n    /**\n     * A wrapper for VFS method requests\n     * @type {{key: Function}}\n     * @readonly\n     */\n    this.proxy = Object.keys(VFS).reduce((result, method) => {\n      return {\n        [method]: (...args) => this._request(method, ...args),\n        ...result\n      };\n    }, {});\n  }\n\n  /**\n   * Mounts all configured mountpoints\n   * @param {boolean} [stopOnError=true] Stop on first error\n   * @return {Promise<boolean[]>}\n   */\n  mountAll(stopOnError = true) {\n    this.mounts = this._getConfiguredMountpoints();\n\n    const fn = m => stopOnError\n      ? this._mountpointAction(m)\n      : this._mountpointAction(m).catch(err => logger.warn('Error while mounting', m, err));\n\n    return Promise.all(this.mounts.map(fn));\n  }\n\n  /**\n   * Adds a new mountpoint\n   * @param {FilesystemMountpoint} props Mountpoint props\n   * @param {boolean} [automount=true] Automount after creation\n   * @return {Promise<boolean>}\n   */\n  addMountpoint(props, automount = true) {\n    const mount = this.createMountpoint(props);\n\n    this.mounts.push(mount);\n\n    if (automount) {\n      return this.mount(mount.name);\n    }\n\n    return Promise.resolve(true);\n  }\n\n  /**\n   * Mount given mountpoint\n   * @param {string|FilesystemMountpoint} m Mountpoint name or object\n   * @throws {Error} On invalid name or if already mounted\n   * @return {Promise<boolean>}\n   */\n  mount(m) {\n    if (typeof m === 'string') {\n      return this._mountAction(m, false);\n    }\n\n    return this.addMountpoint(m);\n  }\n\n  /**\n   * Unmount given filesystem\n   * @param {string} name Filesystem name\n   * @throws {Error} On invalid name or if already unmounted\n   * @return {Promise<boolean>}\n   */\n  unmount(name) {\n    return this._mountAction(name, true);\n  }\n\n  /**\n   * Internal wrapper for mounting/unmounting\n   *\n   * @private\n   * @param {FilesystemMountpoint} mountpoint The mountpoint\n   * @param {boolean} [unmount=false] If action is unmounting\n   * @return {Promise<boolean>}\n   */\n  _mountpointAction(mountpoint, unmount = false) {\n    const eventName = unmount ? 'unmounted' : 'mounted';\n    const coreEventName = unmount ? 'unmount' : 'mount';\n\n    return mountpoint._adapter[coreEventName]({}, mountpoint)\n      .then(result => {\n        if (result) {\n          mountpoint.mounted = !unmount;\n\n          this.emit(eventName, mountpoint);\n          this.core.emit('osjs/fs:' + coreEventName);\n        }\n\n        return result;\n      });\n  }\n\n  /**\n   * Internal wrapper for mounting/unmounting by name\n   *\n   * @private\n   * @param {string} name Mountpoint name\n   * @param {boolean} [unmount=false] If action is unmounting\n   * @return {Promise<boolean>}\n   */\n  _mountAction(name, unmount) {\n    return Promise.resolve(this.mounts.find(m => m.name === name))\n      .then(found => {\n        const _ = this.core.make('osjs/locale').translate;\n\n        // FIXME: Add already mounting state\n        if (!found) {\n          throw new Error(_('ERR_VFS_MOUNT_NOT_FOUND', name));\n        } else if (unmount && !found.mounted) {\n          throw new Error(_('ERR_VFS_MOUNT_NOT_MOUNTED', name));\n        } else if (!unmount && found.mounted) {\n          throw new Error(_('ERR_VFS_MOUNT_ALREADY_MOUNTED', name));\n        }\n\n        return this._mountpointAction(found, unmount);\n      });\n  }\n\n  /**\n   * Gets the proxy for VFS methods\n   * FIXME: Not correct type, but works for documentation atm\n   * @return {FilesystemAdapterMethods} A map of VFS functions\n   */\n  request() {\n    return this.proxy;\n  }\n\n  /**\n   * Perform a VFS method request\n   *\n   * @private\n   * @param {string} method VFS method name\n   * @param {*} ...args Arguments\n   * @return {*}\n   */\n  _request(method, ...args) {\n    const ev = `osjs/vfs:${method}`;\n\n    const done = (error) => {\n      this.core.emit(`${ev}:done`, ...args);\n\n      if (!error && this.core.config('vfs.watch')) {\n        const eva = createWatchEvents(method, args);\n        eva.forEach(([e, a]) => this.core.emit(e, a));\n      }\n    };\n\n    this.core.emit(ev, ...args);\n\n    return this._requestAction(method, ...args)\n      .then(result => {\n        done();\n        return result;\n      })\n      .catch(error => {\n        done(error);\n        throw error;\n      });\n  }\n\n  /**\n   * Request action wrapper\n   * @private\n   * @param {string} method\n   * @param {*} ...args Arguments\n   * @return {Promise<*>}\n   */\n  _requestAction(method, ...args) {\n    if (['rename', 'move', 'copy'].indexOf(method) !== -1) {\n      const [src, dest] = args;\n      const srcMount = this.getMountpointFromPath(src);\n      const destMount = this.getMountpointFromPath(dest);\n      const sameAdapter = srcMount.adapter === destMount.adapter;\n\n      if (!sameAdapter) {\n        return VFS.readfile(srcMount._adapter, srcMount)(src)\n          .then(ab => VFS.writefile(destMount._adapter, destMount)(dest, ab))\n          .then(result => {\n            return method === 'rename'\n              ? VFS.unlink(srcMount._adapter, srcMount)(src).then(() => result)\n              : result;\n          });\n      }\n    }\n\n    const [file] = args;\n    const mount = this.getMountpointFromPath(file);\n\n    return VFS[method](mount._adapter, mount)(...args);\n  }\n\n  /**\n   * Creates a new mountpoint based on given properties\n   * @param {FilesystemMountpoint} props Properties\n   * @return {FilesystemMountpoint}\n   */\n  createMountpoint(props) {\n    const name = props.adapter || this.core.config('vfs.defaultAdapter');\n    const adapter = {...defaultAdapter, ...this.adapters[name](this.core)};\n\n    const result = merge({\n      enabled: true,\n      mounted: false,\n      adapter: name,\n      attributes: {\n        visibility: 'global',\n        local: true,\n        searchable: true,\n        readOnly: false\n      }\n    }, props);\n\n    return {\n      _adapter: adapter,\n      label: name,\n      root: `${result.name || name}:/`,\n      ...result\n    };\n  }\n\n  /**\n   * Gets mountpoint from given path\n   * @param {string|VFSFile} file The file\n   * @return {FilesystemMountpoint|null}\n   */\n  getMountpointFromPath(file) {\n    const path = typeof file === 'string' ? file : file.path;\n    const prefix = parseMountpointPrefix(path);\n    const _ = this.core.make('osjs/locale').translate;\n\n    if (!prefix) {\n      throw new Error(_('ERR_VFS_PATH_FORMAT_INVALID', path));\n    }\n\n    const found = this.mounts.find(m => m.name === prefix);\n\n    if (!found) {\n      throw new Error(_('ERR_VFS_MOUNT_NOT_FOUND_FOR', `${prefix}:`));\n    }\n\n    return found;\n  }\n\n  /**\n   * Gets all mountpoints\n   * @return {FilesystemMountpoint[]}\n   */\n  getMounts(all = false) {\n    const user = this.core.getUser();\n    const theme = this.core.make('osjs/theme');\n    const icon = str => str\n      ? (typeof str === 'string' ? str : theme.icon(str.name))\n      : theme.icon('drive-harddisk');\n\n    return this.mounts\n      .filter(m => all || m.mounted)\n      .filter(m => m.enabled !== false)\n      .filter(m => {\n        const mg = m.attributes ? m.attributes.groups : [];\n        const ms = m.attributes ? m.attributes.strictGroups !== false : true;\n        return filterMountByGroups(user.groups)(mg, ms);\n      })\n      .map(m => ({\n        attributes: {...m.attributes},\n        icon: icon(m.icon),\n        name: m.name,\n        label: m.label,\n        root: m.root\n      }));\n  }\n\n  /**\n   * Gets configured mountpoints\n   * @return {FilesystemMountpoint[]}\n   */\n  _getConfiguredMountpoints() {\n    const list = [\n      ...this.core.config('vfs.mountpoints', []),\n      ...(this.options.mounts || [])\n    ];\n\n    return list\n      .map(mount => {\n        try {\n          return this.createMountpoint(mount);\n        } catch (e) {\n          logger.warn('Error while creating mountpoint', e);\n        }\n\n        return null;\n      })\n      .filter((mount, pos, arr) => {\n        const index = arr.findIndex(item => item.label === mount.label || item.root === mount.label);\n        if (index === pos) {\n          return true;\n        }\n\n        logger.warn('Removed duplicate mountpoint', mount);\n        return false;\n      })\n      .filter(mount => mount !== null);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Filesystem from '../filesystem';\nimport * as utils from '../utils/vfs';\n\n/**\n * Filesytem Service Contract\n * TODO: typedef\n * @typedef {Object} VFSServiceFilesystemContract\n * @property {Function} basename\n * @property {Function} pathname\n * @property {Function} pathJoin\n * @property {Function} icon\n * @property {Function} mountpoints\n * @property {Function} mount\n * @property {Function} unmount\n * @property {Function} addMountpoint\n */\n\n/**\n * VFS Service Contract\n * TODO: typedef\n * @typedef {Object} VFSServiceContract\n * @property {Function} readdir\n * @property {Function} readfile\n * @property {Function} writefile\n * @property {Function} copy\n * @property {Function} move\n * @property {Function} rename\n * @property {Function} mkdir\n * @property {Function} unlink\n * @property {Function} exists\n * @property {Function} stat\n * @property {Function} url\n * @property {Function} download\n * @property {Function} search\n * @property {Function} touch\n */\n\n/**\n * VFS Service Options\n * @typedef {Object} VFSServiceOptions\n * @property {{name: FilesystemAdapter}} [adapters={}]\n * @property {FilesystemMountpoint[]} [mountpoints=[]]\n */\n\n/**\n * OS.js Virtual Filesystem Service Provider\n */\nexport default class VFSServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Core} core OS.js Core\n   * @param {VFSServiceOptions} [options={}]\n   */\n  constructor(core, options = {}) {\n    super(core);\n\n    /**\n     * @type {Filesystem}\n     * @readonly\n     */\n    this.fs = new Filesystem(core, {\n      adapters: options.adapters || {},\n      mounts: options.mounts || []\n    });\n  }\n\n  /**\n   * Get a list of services this provider registers\n   * @return {string[]}\n   */\n  provides() {\n    return [\n      'osjs/vfs',\n      'osjs/fs'\n    ];\n  }\n\n  /**\n   * Initializes VFS providers\n   * @return {Promise<undefined>}\n   */\n  init() {\n    this.core.singleton('osjs/vfs', () => this.createVFSContract());\n    this.core.singleton('osjs/fs', () => this.createFilesystemContract());\n\n    return this.fs.mountAll(false);\n  }\n\n  /**\n   * @return {VFSServiceContract}\n   */\n  createVFSContract() {\n    return this.fs.request();\n  }\n\n  /**\n   * @return {VFSServiceFilesystemContract}\n   */\n  createFilesystemContract() {\n    const iconMap = this.core.config('vfs.icons', {});\n    const icon = utils.getFileIcon(iconMap);\n\n    return {\n      basename: p => utils.basename(p),\n      pathname: p => utils.pathname(p),\n      pathJoin: (...args) => utils.pathJoin(...args),\n      icon: icon,\n      mountpoints: (all = false) => this.fs.getMounts(all),\n      addMountpoint: (props, automount = true) => this.fs.addMountpoint(props, automount),\n      mount: m => this.fs.mount(m),\n      unmount: name => this.fs.unmount(name)\n    };\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Auth from '../auth';\n\n/**\n * Auth Service Contract\n * TODO: typedef\n * @typedef {Object} AuthProviderContract\n * @property {Function} show\n * @property {Function} login\n * @property {Function} logout\n * @property {Function} user\n */\n\n/**\n * Auth Service Options\n * @typedef {Object} AuthServiceOptions\n */\n\n/**\n * OS.js Auth Service Provider\n *\n * Creates the login prompt and handles authentication flow\n */\nexport default class AuthServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Core} core OS.js Core\n   * @param {AuthServiceOptions} [options={}]\n   */\n  constructor(core, options = {}) {\n    super(core);\n\n    /**\n     * @type {Auth}\n     * @readonly\n     */\n    this.auth = new Auth(core, options);\n  }\n\n  /**\n   * Initializes authentication\n   * @return {Promise<undefined>}\n   */\n  init() {\n    this.core.singleton('osjs/auth', () => this.createAuthContract());\n\n    return this.auth.init();\n  }\n\n  /**\n   * Destroys authentication\n   */\n  destroy() {\n    this.auth.destroy();\n\n    return super.destroy();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   * @return {string[]}\n   */\n  provides() {\n    return [\n      'osjs/auth'\n    ];\n  }\n\n  /**\n   * @return {AuthProviderContract}\n   */\n  createAuthContract() {\n    return {\n      show: (cb) => this.auth.show(cb),\n      login: (values) => this.auth.login(values),\n      logout: (reload) => this.auth.logout(reload),\n      user: () => this.core.getUser()\n    };\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport logger from '../../logger';\n\n/**\n * LocalStorage Settings adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst localStorageSettings = (core) => {\n  const prefix = core.config('settings.prefix', '');\n\n  return {\n    clear(ns) {\n      if (ns) {\n        localStorage.removeItem(prefix + ns);\n      } else {\n        localStorage.clear();\n      }\n\n      return Promise.resolve(true);\n    },\n\n    save(settings) {\n      Object.keys(settings).forEach((k) => {\n        localStorage.setItem(prefix + k, JSON.stringify(settings[k]));\n      });\n\n      return Promise.resolve(true);\n    },\n\n    load() {\n      const entries = Object\n        .keys(localStorage)\n        .filter(k => prefix ? k.startsWith(prefix) : true)\n        .map((k) => {\n          const v = localStorage.getItem(k);\n          const kk = prefix ? k.substr(prefix.length) : k;\n\n          try {\n            return [kk, JSON.parse(v)];\n          } catch (e) {\n            logger.warn(`localStorageAdapter parse failed for '${k}'`, e);\n          }\n\n          return [kk, v];\n        });\n\n      return Promise.resolve(Object.fromEntries(entries));\n    }\n  };\n};\n\n\nexport default localStorageSettings;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport merge from 'deepmerge';\nimport simplejsonconf from 'simplejsonconf';\nimport localStorageSettings from './adapters/settings/localstorage';\nimport serverSettings from './adapters/settings/server';\nimport logger from './logger';\n\nconst defaultAdapters = {\n  server: serverSettings,\n  localStorage: localStorageSettings\n};\n\nconst createAdapter = (core, options) => {\n  const adapter = core.config('standalone')\n    ? localStorageSettings\n    : typeof options.adapter === 'function'\n      ? options.adapter\n      : defaultAdapters[options.adapter || 'localStorage'];\n\n  return {\n    load: () => Promise.reject(new Error('Not implemented')),\n    save: () => Promise.reject(new Error('Not implemented')),\n    init: () => Promise.resolve(true),\n    clear: () => Promise.resolve(true),\n    destroy: () => {},\n    ...adapter(core, options.config)\n  };\n};\n\n/**\n * TODO: typedef\n * @typedef {Object} SettingsAdapterConfiguration\n */\n\n/**\n * TODO: typedef\n * @typedef {Object} SettingsAdapter\n */\n\n/**\n * @callback SettingsAdapterCallback\n * @param {Core} core\n * @return {SettingsAdapterCallback}\n */\n\n/**\n * Settings Options\n *\n * @typedef {Object} SettingsOptions\n * @property {SettingsAdapterCallback|SettingsAdapter} [adapter] Adapter to use\n * @property {SettingsAdapterConfiguration} [config] Adapter configuration\n */\n\n/**\n * OS.js Settings Manager\n */\nexport default class Settings {\n\n  // TODO: Destroy method\n\n  /**\n   * Create application\n   *\n   * @param {Core} core Core reference\n   * @param {SettingsOptions} options Options\n   */\n  constructor(core, options) {\n\n    /**\n     * The settings adapter\n     * @type {SettingsAdapter}\n     * @readonly\n     */\n    this.adapter = createAdapter(core, options);\n\n    /**\n     * Internal timeout reference used for debouncing\n     * @type {object}\n     */\n    this.debounce = null;\n\n    /**\n     * The settings tree\n     * @type {{name: *}}\n     */\n    this.settings = {};\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     * @readonly\n     */\n    this.core = core;\n  }\n\n  /**\n   * Initializes settings adapter\n   */\n  init() {\n    return this.adapter.init();\n  }\n\n  /**\n   * Saves settings\n   * @return {Promise<boolean>}\n   */\n  save() {\n    return new Promise((resolve, reject) => {\n      if (this.debounce) {\n        const [promise, timer] = this.debounce;\n        promise.resolve(false);\n        this.debounce = clearTimeout(timer);\n      }\n\n      this.debounce = [\n        {resolve, reject},\n        setTimeout(() => {\n          this.adapter.save(this.settings)\n            .then((...args) => {\n              this.core.emit('osjs/settings:save');\n\n              resolve(...args);\n            }).catch(reject);\n        }, 100)\n      ];\n    });\n  }\n\n  /**\n   * Loads settings\n   * @return {Promise<boolean>}\n   */\n  load() {\n    const defaults = this.core.config('settings.defaults', {});\n\n    return this.adapter.load()\n      .then(settings => {\n        this.settings = merge(defaults, settings, {\n          arrayMerge: (dest, source) => source\n        });\n\n        this.core.emit('osjs/settings:load');\n\n        return true;\n      }).catch(e => {\n        logger.warn('Failed to set settings', e);\n        this.settings = defaults;\n\n        return false;\n      });\n  }\n\n  /**\n   * Gets a settings entry by key (cached)\n   *\n   * @param {string} [ns] The namespace\n   * @param {string} [key] The key to get the value from\n   * @param {*} [defaultValue] If result is undefined, return this instead\n   * @return {*}\n   */\n  get(ns, key, defaultValue) {\n    if (typeof ns === 'undefined') {\n      return {...this.settings};\n    } else if (typeof this.settings[ns] === 'undefined') {\n      return key ? defaultValue : defaultValue || {};\n    }\n\n    const tree = simplejsonconf(this.settings[ns]);\n\n    return key\n      ? tree.get(key, defaultValue)\n      : tree.get() || defaultValue;\n  }\n\n  /**\n   * Sets a settings entry by root key (but does not save).\n   *\n   * @param {string} ns The namespace\n   * @param {string} [key] The key to set\n   * @param {*} [value] The value to set\n   * @return {Settings} This\n   */\n  set(ns, key, value) {\n    const lock = this.core.config('settings.lock', []);\n    if (lock.indexOf(ns) !== -1) {\n      return this;\n    }\n\n    if (typeof this.settings[ns] === 'undefined') {\n      this.settings[ns] = {};\n    }\n\n    if (key) {\n      try {\n        const sjc = simplejsonconf(this.settings[ns]);\n        sjc.set(key, value);\n        this.settings[ns] = sjc.get();\n      } catch (e) {\n        logger.warn('Error while setting settings for', key, e);\n      }\n    } else {\n      this.settings[ns] = {...value};\n    }\n\n    return this;\n  }\n\n  /**\n   * Clears a namespace by root key\n   * @param {string} ns The namespace\n   * @return {Promise<boolean>}\n   */\n  clear(ns) {\n    return this.adapter.clear(ns)\n      .then(result => {\n        if (result && this.settings[ns]) {\n          delete this.settings[ns];\n        }\n\n        return result;\n      });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\n/**\n * Server Settings adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst serverSettings = core => ({\n  save: settings => core.request(core.url('/settings'), {\n    method: 'post',\n    body: settings\n  }, 'json'),\n\n  load: () => core.request(core.url('/settings'), {\n    method: 'get'\n  }, 'json')\n});\n\nexport default serverSettings;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @license Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Settings from '../settings';\n\n/**\n * Settings Service Contract\n * TODO: typedef\n * @typedef {Object} SettingsProviderContract\n * @property {Function} save\n * @property {Function} load\n * @property {Function} clear\n * @property {Function} set\n * @property {Function} get\n */\n\n/**\n * TODO: typedef\n * @typedef {Object} SettingsServiceOptions\n * @property {Object} [config]\n */\n\n/**\n * OS.js Settings Service Provider\n */\nexport default class SettingsServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Core} core OS.js Core\n   * @param {SettingsServiceOptions} [options={}]\n   */\n  constructor(core, options = {}) {\n    super(core);\n\n    /**\n     * @type {Settings}\n     * @readonly\n     */\n    this.settings = new Settings(core, {\n      config: {},\n      ...options\n    });\n  }\n\n  /**\n   * Get a list of services this provider registers\n   * @return {string[]}\n   */\n  provides() {\n    return [\n      'osjs/settings'\n    ];\n  }\n\n  /**\n   * Initializes settings\n   * @return {Promise<undefined>}\n   */\n  init() {\n    this.core.singleton('osjs/settings', () => this.createSettingsContract());\n\n    return this.settings.init();\n  }\n\n  /**\n   * @return {SettingsProviderContract}\n   */\n  createSettingsContract() {\n    return {\n      save: () => this.settings.save(),\n      load: () => this.settings.load(),\n      clear: (ns) => this.settings.clear(ns),\n      get: (ns, key, defaultValue) => this.settings.get(ns, key, defaultValue),\n      set: (ns, key, value) => this.settings.set(ns, key, value)\n    };\n  }\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"osjsPanels\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsPanels\"] = factory();\n\telse\n\t\troot[\"osjsPanels\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.osjsEventEmitter=t():e.osjsEventEmitter=t()}(global,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=2)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){e.exports=n(3)},function(e,t,n){\"use strict\";n.r(t),n.d(t,\"EventEmitter\",(function(){return c}));var r=n(0),o=n.n(r),i=n(1),u=n.n(i),f=function(e){return e instanceof Array?e:String(e).replace(/\\s+/g,\"\").split(\",\")},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"undefined\";o()(this,e),this.name=t,this.events={}}return u()(e,[{key:\"destroy\",value:function(){this.events={}}},{key:\"on\",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r=r||{},\"function\"!=typeof t)throw new TypeError(\"Invalid callback\");return f(e).forEach((function(e){n.events[e]||(n.events[e]=[]),n.events[e].push({callback:t,options:r})})),this}},{key:\"once\",value:function(e,t){return this.on(e,t,{once:!0})}},{key:\"off\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(e).filter((function(e){return!!t.events[e]})).forEach((function(e){if(n)for(var o=t.events[e].length;o--;){var i=t.events[e][o];(!i.options.persist||r)&&i.callback===n&&t.events[e].splice(o,1)}else t.events[e]=r?[]:t.events[e].filter((function(e){return!0===e.options.persist}))})),this}},{key:\"emit\",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return f(e).forEach((function(e){if(t.events[e])for(var n=t.events[e].length;n--;){var o=t.events[e][n],i=o.options,u=o.callback;try{u.apply(void 0,r)}catch(e){console.warn(e)}i&&i.once&&t.events[e].splice(n,1)}})),this}}]),e}()}])}));\n//# sourceMappingURL=main.js.map","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {app, h} from 'hyperapp';\nimport {EventEmitter} from '@osjs/event-emitter';\n\n/**\n * OS.js Panel Item\n * @see {Panel}\n */\nexport default class PanelItem extends EventEmitter {\n\n  /**\n   * Create panel item\n   *\n   * @param {Core} core Core reference\n   * @param {Panel} panel Panel reference\n   * @param {Object} options Options\n   */\n  constructor(core, panel, options = {}) {\n    super('Panel');\n\n    this.core = core;\n    this.panel = panel;\n    this.options = options;\n    this.state = {};\n    this.actions = {};\n    this.inited = false;\n  }\n\n  /**\n   * Destroy panel item\n   */\n  destroy() {\n    this.emit('destroy', this);\n  }\n\n  /**\n   * Initializes panel item\n   * @param {Object} state State\n   * @param {Object} actions Actions\n   * @return {Object} Bound actions\n   */\n  init(state = {}, actions = {}) {\n    if (this.inited) {\n      return false;\n    }\n\n    this.inited = true;\n    this.emit('init', this);\n\n    return app(state, actions, (state, actions) => {\n      return this.render(state, actions);\n    }, this.panel.$element);\n  }\n\n  /**\n   * Renders the panel item\n   * @param {String} name The panel item virtual name\n   * @param {Object[]} children The panel item children\n   * @return {Node} A *virtual* node\n   */\n  render(name, children = []) {\n    return h('div', {\n      className: 'osjs-panel-item',\n      'data-name': name\n    }, children);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n *          Nguyễn Anh Khoa <khoaakt@gmail.com>\n            Julien Gomes Dias <abld@abld.info>\n            Filip Š <projects@filips.si>\n            Matheus Felipe <matheusfelipeog@gmail.com>\n * @licence Simplified BSD License\n */\n\n\nexport const de_DE = {\n  LBL_PANEL_ALL: 'Panel hinzufügen',\n  LBL_PANEL_REMOVE: 'Panel entfernen',\n  LBL_PANELITEM_ADD: 'Panelelemente hinzufügen',\n  LBL_PANELITEM_REMOVE: 'Panelelemente entfernen',\n  LBL_PANEL_POSITION: 'Panel-Position',\n  LBL_SAVE_AND_LOG_OUT: 'Session speichern & Abmelden',\n  LBL_LOG_OUT: 'Abmelden'\n};\n\nexport const en_EN = {\n  LBL_PANEL_ALL: 'Add panel',\n  LBL_PANEL_REMOVE: 'Remove panel',\n  LBL_PANELITEM_ADD: 'Add panelitem',\n  LBL_PANELITEM_REMOVE: 'Remove panelitem',\n  LBL_PANEL_POSITION: 'Panel Position',\n  LBL_SAVE_AND_LOG_OUT: 'Save Session & Log Out',\n  LBL_LOG_OUT: 'Log Out',\n  LBL_LAUNCHING: 'Launching \\'{0}\\''\n};\n\nexport const sv_SE = {\n  LBL_PANEL_ALL: 'Lägg till panel',\n  LBL_PANEL_REMOVE: 'Ta bort panel',\n  LBL_PANELITEM_ADD: 'Lägg till panelobjekt',\n  LBL_PANELITEM_REMOVE: 'Ta bort panelobjekt',\n  LBL_PANEL_POSITION: 'Panelposition',\n  LBL_SAVE_AND_LOG_OUT: 'Spara session och logga ut',\n  LBL_LOG_OUT: 'logga ut',\n  LBL_LAUNCHING: 'Startar \\'{0}\\''\n};\n\nexport const fr_FR = {\n  LBL_PANEL_ALL: 'Ajouter le panneau',\n  LBL_PANEL_REMOVE: 'Supprimer le panneau',\n  LBL_PANELITEM_ADD: 'Ajouter des éléments au panneau',\n  LBL_PANELITEM_REMOVE: 'Supprimer des éléments au panneau',\n  LBL_PANEL_POSITION: 'La position du panneau',\n  LBL_SAVE_AND_LOG_OUT: 'Sauvegarder la session et se déconnecter',\n  LBL_LOG_OUT: 'Se déconnecter'\n};\n\nexport const nb_NO = {\n  LBL_PANEL_ALL: 'Legg til panel',\n  LBL_PANEL_REMOVE: 'Fjern panel',\n  LBL_PANELITEM_ADD: 'Legg til panelobjekt',\n  LBL_PANELITEM_REMOVE: 'Fjern panelobjekt',\n  LBL_PANEL_POSITION: 'Panelposisjon',\n  LBL_SAVE_AND_LOG_OUT: 'Lagre Sessjon & Logg Ut',\n  LBL_LOG_OUT: 'Logg Ut',\n  LBL_LAUNCHING: 'Laster \\'{0}\\''\n};\n\nexport const sl_SI = {\n  LBL_PANEL_ALL: 'Dodaj ploščo',\n  LBL_PANEL_REMOVE: 'Odstrani ploščo',\n  LBL_PANELITEM_ADD: 'Dodaj element plošče',\n  LBL_PANELITEM_REMOVE: 'Odstrani element plošče',\n  LBL_PANEL_POSITION: 'Položaj plošče',\n  LBL_SAVE_AND_LOG_OUT: 'Shranitev seje & Odjava',\n  LBL_LOG_OUT: 'Odjava'\n};\n\nexport const vi_VN = {\n  LBL_PANEL_ALL: 'Thêm panel',\n  LBL_PANEL_REMOVE: 'Xóa panel',\n  LBL_PANELITEM_ADD: 'Thêm mục panel',\n  LBL_PANELITEM_REMOVE: 'Xóa mục panel',\n  LBL_PANEL_POSITION: 'Vị trí panel',\n  LBL_SAVE_AND_LOG_OUT: 'Lưu phiên & Đăng xuất',\n  LBL_LOG_OUT: 'Đăng xuất',\n  LBL_LAUNCHING: 'Đang khởi động \\'{0}\\''\n};\n\nexport const pt_BR = {\n  LBL_PANEL_ALL: 'Adicionar painel',\n  LBL_PANEL_REMOVE: 'Remover painel',\n  LBL_PANELITEM_ADD: 'Adicionar item ao painel',\n  LBL_PANELITEM_REMOVE: 'Remover item do painel',\n  LBL_PANEL_POSITION: 'Posição do painel',\n  LBL_SAVE_AND_LOG_OUT: 'Salvar sessão & Sair',\n  LBL_LOG_OUT: 'Sair',\n  LBL_LAUNCHING: 'Lançamento \\'{0}\\''\n};\n\nexport const tr_TR = {\n  LBL_PANEL_ALL: 'Panel ekle',\n  LBL_PANEL_REMOVE: 'Paneli sil',\n  LBL_PANELITEM_ADD: 'Panel nesnesi ekle',\n  LBL_PANELITEM_REMOVE: 'Panel nesnesini sil',\n  LBL_PANEL_POSITION: 'Panel Konumu',\n  LBL_SAVE_AND_LOG_OUT: 'Oturumu Kaydet & Çıkış Yap',\n  LBL_LOG_OUT: 'Çıkış Yap',\n  LBL_LAUNCHING: 'Başlatılıyor \\'{0}\\''\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport PanelItem from './panel-item';\nimport * as languages from './locales';\nimport {EventEmitter} from '@osjs/event-emitter';\n\n/**\n * Panel\n *\n * @desc Base Panel Class\n */\nexport default class Panel extends EventEmitter {\n\n  /**\n   * Create panel\n   *\n   * @param {Core} core Core reference\n   * @param {Object} options Options\n   */\n  constructor(core, options = {}) {\n    super('Panel');\n\n    this.core = core;\n    this.options = Object.assign({}, {\n      ontop: true,\n      position: 'top',\n      contextmenu: true,\n      items: []\n    }, options);\n\n    this.items = [];\n    this.inited = false;\n    this.destroyed = false;\n    this.$element = null;\n\n    this.options.items\n      .forEach(({name, options}) => {\n        const c = core.make('osjs/panels').get(name);\n        this.addItem(new c(this.core, this, options || {}));\n      });\n  }\n\n  /**\n   * Destroys the panel\n   */\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n\n    this.items = this.items.filter(item => {\n      try {\n        item.destroy();\n      } catch (e) {\n        console.warn(e);\n      }\n      return false;\n    });\n\n    this.destroyed = true;\n    this.inited = false;\n    this.emit('destroy');\n    this.core.emit('osjs/panel:destroy', this);\n\n    this.$element.remove();\n    this.$element = null;\n  }\n\n  /**\n   * Initializes the panel\n   */\n  init() {\n    if (this.inited) {\n      return;\n    }\n    this.destroyed = false;\n    this.inited = true;\n\n    const _ = this.core.make('osjs/locale').translate;\n    const __ = this.core.make('osjs/locale').translatable(languages);\n\n    this.$element = document.createElement('div');\n    this.$element.classList.add('osjs-panel');\n    this.$element.classList.add('osjs__contextmenu');\n    this.$element.addEventListener('contextmenu', ev => {\n      ev.preventDefault();\n\n      const disabled = this.core.config('desktop.lock') ||\n        this.core.config('desktop.disablePanelContextMenu');\n\n      if (disabled) {\n        return;\n      }\n\n      this.core.make('osjs/contextmenu').show({\n        position: ev,\n        menu: [{\n          label: __('LBL_PANEL_POSITION'),\n          items: [{\n            label: _('LBL_TOP'),\n            onclick: () => this.setPosition('top')\n          }, {\n            label: _('LBL_BOTTOM'),\n            onclick: () => this.setPosition('bottom')\n          }]\n        }]\n      });\n    });\n    this.$element.setAttribute('data-position', this.options.position);\n    this.$element.setAttribute('data-ontop', String(this.options.ontop));\n\n    this.core.$root.appendChild(this.$element);\n\n    this.items.forEach(item => item.init());\n\n    this.emit('create');\n  }\n\n  /**\n   * Add an item to the panel\n   * @param {PanelItem} item The panel item instance\n   */\n  addItem(item) {\n    if (!(item instanceof PanelItem)) {\n      throw new TypeError('Invalid panel item specified');\n    }\n\n    this.items.push(item);\n\n    if (this.inited) {\n      item.init();\n    }\n  }\n\n  setPosition(position) {\n    this.options.position = position;\n\n    return this.core.make('osjs/panels').save()\n      .then(() => {\n        const desktop = this.core.make('osjs/desktop');\n        return desktop.applySettings();\n      });\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport PanelItem from '../panel-item';\nimport * as languages from '../locales';\n\nconst mapWindow = win => {\n  return {\n    wid: win.wid,\n    icon: win.state.icon,\n    title: win.state.title,\n    focused: win.state.focused,\n    attributes: Object.assign({}, win.attributes),\n    state: Object.assign({}, win.state),\n    raise: () => {\n      win.raise();\n      win.focus();\n    },\n    restore: () => win.restore(),\n    maximize: () => win.maximize(),\n    minimize: () => win.minimize(),\n    close: () => win.close()\n  };\n};\n\n/**\n * Window List\n *\n * @desc Window List Panel Item. Also displays launching applications.\n */\nexport default class WindowsPanelItem extends PanelItem {\n\n  init() {\n    if (this.inited) {\n      return;\n    }\n\n    const filterVisibility = win => typeof win.attributes.visibility === 'undefined' ||\n      win.attributes.visibility === 'global';\n\n    const actions = super.init({\n      launchers: [],\n      windows: this.core.make('osjs/windows').list()\n        .filter(win => win.inited || win.rendered)\n        .filter(filterVisibility)\n        .map(mapWindow)\n    }, {\n      add: win => state => {\n        const found = state.windows.find(w => w.wid === win.wid);\n        if (found) {\n          return state;\n        }\n\n        const windows = state.windows\n          .concat([win])\n          .filter(win => !win.inited || !win.rendered)\n          .filter(filterVisibility);\n\n        return {windows};\n      },\n\n      remove: win => ({windows}) => {\n        const foundIndex = windows.findIndex(w => w.wid === win.wid);\n        if (foundIndex !== -1) {\n          windows.splice(foundIndex, 1);\n\n          return {windows};\n        }\n\n        return {};\n      },\n\n      change: win => state => {\n        const windows = state.windows;\n        const foundIndex = state.windows.findIndex(w => w.wid === win.wid);\n        if (foundIndex !== -1) {\n          windows[foundIndex] = win;\n        }\n\n        return {windows};\n      },\n\n      addLauncher: name => state => ({launchers: [...state.launchers, name]}),\n\n      removeLauncher: name => state => {\n        const foundIndex = state.launchers.findIndex(n => n === name);\n        const launchers = [...state.launchers];\n        if (foundIndex !== -1) {\n          launchers.splice(foundIndex, 1);\n        }\n\n        return {launchers};\n      }\n    });\n\n    const onlaunch = (name) => actions.addLauncher(name);\n    const onlaunched = (name) => actions.removeLauncher(name);\n    const ondestroy = (win) => actions.remove(mapWindow(win));\n    const oncreate = (win) => actions.add(mapWindow(win));\n    const onchange = (win) => actions.change(mapWindow(win));\n\n    this.core.on('osjs/application:launch', onlaunch);\n    this.core.on('osjs/application:launched', onlaunched);\n    this.core.on('osjs/window:destroy', ondestroy);\n    this.core.on('osjs/window:render', oncreate);\n    this.core.on('osjs/window:change', onchange);\n\n    this.on('destroy', () => {\n      this.core.off('osjs/application:launch', onlaunch);\n      this.core.off('osjs/application:launched', onlaunched);\n      this.core.off('osjs/window:destroy', ondestroy);\n      this.core.off('osjs/window:render', oncreate);\n      this.core.off('osjs/window:change', onchange);\n    });\n  }\n\n  render(state, actions) {\n    const __ = this.core.has('osjs/locale')\n      ? this.core.make('osjs/locale').translatable(languages)\n      : s => s;\n\n    const windows = state.windows.map(w => h('div', {\n      'data-has-image': w.icon ? true : undefined,\n      'data-focused': w.focused ? 'true' : 'false',\n      'data-minimized': w.state.minimized ? 'true' : 'false',\n      onclick: () => w.raise(),\n      oncontextmenu: ev => {\n        const _ = this.core.make('osjs/locale').translate;\n\n        ev.stopPropagation();\n        ev.preventDefault();\n        this.core.make('osjs/contextmenu').show({\n          position: ev.target,\n          menu: [\n            {\n              label: w.state.maximized ? _('LBL_RESTORE') : _('LBL_MAXIMIZE'),\n              onclick: () => w.attributes.maximizable ? (w.state.maximized ? w.restore() : w.maximize()) : null,\n              disabled: !w.attributes.maximizable\n            },\n            {\n              label: w.state.minimized ? _('LBL_RAISE') : _('LBL_MINIMIZE'),\n              onclick: () => w.attributes.minimizable ? (w.state.minimized ? w.raise() : w.minimize()) : null,\n              disabled: !w.attributes.minimizable\n            },\n            {type: 'separator'},\n            {\n              label: _('LBL_CLOSE'),\n              onclick: () => w.attributes.closeable ? w.close() : null,\n              disabled: !w.attributes.closeable\n            }\n          ]\n        });\n      },\n      className: 'osjs-panel-item--clickable osjs-panel-item--icon'\n    }, [\n      h('img', {\n        src: w.icon,\n        alt: w.title || '(window)',\n      }),\n      h('span', {}, w.title || '(window)'),\n    ]));\n\n    const special = state.launchers.map(name => h('div', {\n    }, h('span', {}, __('LBL_LAUNCHING', name))));\n\n    const children = [...windows, ...special];\n\n    return super.render('windows', children);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport PanelItem from '../panel-item';\n\n/**\n * Tray\n *\n * @desc Tray Panel Item\n */\nexport default class TrayPanelItem extends PanelItem {\n\n  init() {\n    if (this.inited) {\n      return;\n    }\n\n    const actions = super.init({\n      tray: this.core.make('osjs/tray').list()\n    }, {\n      setTray: tray => state => ({tray})\n    });\n\n    this.core.on('osjs/tray:update', list => actions.setTray(list));\n  }\n\n  render(state, actions) {\n    const child = entry => h('div', {\n      onclick: ev => entry.onclick(ev, entry),\n      oncontextmenu: ev => entry.oncontextmenu(ev, entry),\n      className: 'osjs-panel-item--clickable osjs-panel-item--icon'\n    }, h('img', {\n      src: entry.icon,\n      title: entry.title\n    }));\n\n    return super.render('tray', state.tray.map(child));\n  }\n\n}\n\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport PanelItem from '../panel-item';\n\n/**\n * Clock\n *\n * @desc Clock Panel Item\n */\nexport default class ClockPanelItem extends PanelItem {\n\n  init() {\n    const {format} = this.core.make('osjs/locale');\n    const date = () => format(new Date(), 'longTime');\n\n    if (this.inited) {\n      return;\n    }\n\n    const actions = super.init({\n      time: date()\n    }, {\n      increment: () => state => {\n        return {time: date()};\n      }\n    });\n\n    this.interval = setInterval(() => {\n      actions.increment();\n    }, 1000);\n  }\n\n  destroy() {\n    this.interval = clearInterval(this.interval);\n    super.destroy();\n  }\n\n  render(state, actions) {\n    return super.render('clock', [\n      h('span', {}, state.time)\n    ]);\n  }\n\n}\n","export default __webpack_public_path__ + \"881c86876af63b732063d7bdd51bb226.png\";","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport PanelItem from '../panel-item';\nimport * as languages from '../locales';\nimport defaultIcon from '../logo-blue-32x32.png';\n\nconst sortBy = fn => (a, b) => -(fn(a) < fn(b)) || +(fn(a) > fn(b));\nconst sortByLabel = iter => String(iter.label).toLowerCase();\n\nconst makeTree = (core, icon, __) => {\n  const configuredCategories = core.config('application.categories');\n  const locale = core.make('osjs/locale');\n\n  const getIcon = (m, fallbackIcon) => m.icon\n    ? (m.icon.match(/^(https?:)\\//)\n      ? m.icon\n      : core.url(m.icon, {}, m))\n    : fallbackIcon;\n\n  const getTitle = (item) => locale\n    .translatableFlat(item.title, item.name);\n\n  const getCategory = (cat) => locale\n    .translate(cat);\n\n  const createCategory = c => ({\n    icon: c.icon ? {name: c.icon} : icon,\n    label: getCategory(c.label),\n    items: []\n  });\n\n  const createItem = m => ({\n    icon: getIcon(m, icon),\n    label: getTitle(m),\n    data: {\n      name: m.name\n    }\n  });\n\n  const createCategoryTree = (metadata) => {\n    const categories = {};\n\n    metadata\n      .filter(m => m.hidden !== true)\n      .forEach((m) => {\n        const cat = Object.keys(configuredCategories).find(c => c === m.category) || 'other';\n        const found = configuredCategories[cat];\n\n        if (!categories[cat]) {\n          categories[cat] = createCategory(found);\n        }\n\n        categories[cat].items.push(createItem(m));\n      });\n\n    Object.keys(categories).forEach(k => {\n      categories[k].items.sort(sortBy(sortByLabel));\n    });\n\n    const result = Object.values(categories);\n    result.sort(sortBy(sortByLabel));\n\n    return result;\n  };\n\n  const createFlatMenu = (metadata) => {\n    const pinned = [\n      ...core.config('application.pinned', [])\n      // TODO: User configurable pinned items\n    ];\n\n    const items = metadata\n      .filter(m => pinned.indexOf(m.name) !== -1)\n      .map(createItem);\n\n    if (items.length) {\n      items.sort(sortBy(sortByLabel));\n      return [\n        {type: 'separator'},\n        ...items\n      ];\n    }\n\n    return [];\n  };\n\n  const createSystemMenu = () => ([{\n    type: 'separator'\n  }, {\n    icon,\n    label: __('LBL_SAVE_AND_LOG_OUT'),\n    data: {\n      action: 'saveAndLogOut'\n    }\n  }, {\n    icon,\n    label: __('LBL_LOG_OUT'),\n    data: {\n      action: 'logOut'\n    }\n  }]);\n\n  return (metadata) => {\n    const categories = createCategoryTree(metadata);\n    const flat = createFlatMenu(metadata);\n    const system = createSystemMenu();\n\n    return [\n      ...categories,\n      ...flat,\n      ...system\n    ];\n  };\n};\n\n/**\n * Menu\n *\n * @desc Menu Panel Item\n */\nexport default class MenuPanelItem extends PanelItem {\n\n  render(state, actions) {\n    const _ = this.core.make('osjs/locale').translate;\n    const __ = this.core.make('osjs/locale').translatable(languages);\n    const icon = this.options.icon || defaultIcon;\n\n    const logout = async (save) => {\n      if (save) {\n        await this.core.make('osjs/session').save();\n      }\n\n      this.core.make('osjs/auth').logout();\n    };\n\n    const makeMenu = makeTree(this.core, icon, __);\n\n    const onclick = (ev) => {\n      const packages = this.core.make('osjs/packages')\n        .getPackages(m => (!m.type || m.type === 'application'));\n\n      this.core.make('osjs/contextmenu').show({\n        menu: makeMenu([].concat(packages)),\n        position: ev.target,\n        callback: (item) => {\n          const {name, action} = item.data || {};\n\n          if (name) {\n            this.core.run(name);\n          } else if (action === 'saveAndLogOut') {\n            logout(true);\n          } else if (action === 'logOut') {\n            logout(false);\n          }\n        },\n        toggle: true\n      });\n    };\n\n    const onmenuopen = () => {\n      const els = Array.from(this.panel.$element.querySelectorAll('.osjs-panel-item[data-name=\"menu\"]'));\n      els.forEach(el => el.querySelector('.osjs-panel-item--icon').click());\n    };\n\n    this.core.on('osjs/desktop:keybinding:open-application-menu', onmenuopen);\n    this.on('destroy', () => this.core.off('osjs/desktop:keybinding:open-application-menu', onmenuopen));\n\n    return super.render('menu', [\n      h('div', {\n        onclick,\n        className: 'osjs-panel-item--clickable osjs-panel-item--icon'\n      }, [\n        h('img', {\n          src: icon,\n          alt: _('LBL_MENU')\n        }),\n        h('span', {}, _('LBL_MENU'))\n      ])\n    ]);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport Panel from './panel';\nimport WindowsPanelItem from './items/windows';\nimport TrayPanelItem from './items/tray';\nimport ClockPanelItem from './items/clock';\nimport MenuPanelItem from './items/menu';\n\n/**\n * Panel Service Provider\n *\n * @desc Provides methods to handle panels on a desktop in OS.js\n */\nexport default class PanelServiceProvider {\n\n  constructor(core, args = {}) {\n    this.core = core;\n    this.panels = [];\n    this.inited = false;\n    this.registry = Object.assign({\n      menu: MenuPanelItem,\n      windows: WindowsPanelItem,\n      tray: TrayPanelItem,\n      clock: ClockPanelItem\n    }, args.registry || {});\n  }\n\n  destroy() {\n    this.inited = false;\n    this.panels.forEach(panel => panel.destroy());\n    this.panels = [];\n  }\n\n  async init() {\n    this.core.singleton('osjs/panels', () => ({\n      register: (name, classRef) => {\n        if (this.registry[name]) {\n          console.warn('Overwriting previously registered panel item', name);\n        }\n\n        this.registry[name] = classRef;\n      },\n\n      removeAll: () => {\n        this.panels.forEach(p => p.destroy());\n        this.panels = [];\n      },\n\n      remove: (panel) => {\n        const index = typeof panel === 'number'\n          ? panel\n          : this.panels.findIndex(p => p === panel);\n\n        if (index >= 0) {\n          this.panels[index].destroy();\n          this.panels.splice(index, 1);\n        }\n      },\n\n      create: (options) => {\n        const panel = new Panel(this.core, options);\n\n        this.panels.push(panel);\n\n        panel.on('destroy', () => this.core.emit('osjs/panel:destroy', panel, this.panels));\n        panel.on('create', () => setTimeout(() => {\n          this.core.emit('osjs/panel:create', panel, this.panels);\n        }, 1));\n\n        if (this.inited) {\n          panel.init();\n        }\n      },\n\n      save: () => {\n        const settings = this.core.make('osjs/settings');\n        const panels = this.panels.map(panel => panel.options);\n\n        return Promise.resolve(settings.set('osjs/desktop', 'panels', panels))\n          .then(() => settings.save());\n      },\n\n      get: (name) => this.registry[name]\n    }));\n  }\n\n  start() {\n    this.inited = true;\n    this.panels.forEach(p => p.init());\n  }\n\n}\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\n\n/**\n * Elemet Box definition\n * @property {string} [class] Container class name\n * @property {number} [grow] Flexbox grow value\n * @property {number} [shrink] Flexbox shrink value\n * @property {number|string} [basis] Flexbox basis value\n * @property {string} [align] Flexbox alignItems value\n * @property {string} [justify] Flexbox justifyContent value\n * @property {number|string} [padding] Margin\n * @property {number|string} [margin] Margin\n * @property {string} [key] Hyperapp element key\n * @property {Function} [oncreate] Hyperapp oncreate function\n * @property {Function} [onupdate] Hyperapp onupdate function\n * @property {Function} [ondestroy] Hyperapp ondestroy function\n * @typedef BoxProperties\n */\n\nconst unitValue = (value, unset) => typeof value === 'number'\n  ? `${value}px`\n  : (value === false ? unset : value);\n\nconst boxPropNames = {\n  grow: value => ({flexGrow: value}),\n  shrink: value => ({flexShrink: value}),\n  basis: value => ({flexBasis: unitValue(value, 'auto')}),\n  align: value => ({alignItems: value}),\n  justify: value => ({justifyContent: value}),\n  padding: value => ({margin: unitValue(value, '0')}),\n  margin: value => ({margin: unitValue(value, '0')})\n};\n\n/**\n * A generic OS.js GUI container\n * @param {Object} props Properties\n * @param {h[]} children Children\n */\nexport const Element = (props, children = []) => {\n  const givenClassNames = props.class instanceof Array\n    ? props.class\n    : [props.class];\n\n  const classNames = [\n    'osjs-gui',\n    ...givenClassNames\n  ];\n\n  if (props.orientation) {\n    classNames.push('osjs-gui-' + props.orientation);\n  }\n\n  const defaultStyle = typeof props.style === 'string'\n    ? {}\n    : Object.assign({}, props.style || {});\n\n  const style = Object.keys(props).reduce((result, prop) => {\n    const value = boxPropNames[prop]\n      ? boxPropNames[prop](props[prop])\n      : undefined;\n\n    return Object.assign({}, result, value);\n  }, defaultStyle);\n\n  return h('div', {\n    oncreate: props.oncreate,\n    ondestroy: props.ondestroy,\n    class: classNames.filter(s => !!s).join(' '),\n    style\n  }, children);\n};\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\n\n/**\n * A styled flexbox container\n * @param {BoxProperties} props Properties\n * @param {h[]} children Children\n */\nexport const BoxStyled = (props, children) =>\n  h(Element, Object.assign({}, props, {\n    class: ['osjs-gui-box-styled', props.class]\n  }), children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\n\n/**\n * An icon\n * @param {Object} props Properties\n * @param {string} props.src Icon src\n * @param {string} [props.name] Icon name\n * @param {h[]} children Children\n */\nexport const Icon = (props, children) => {\n  const i = props && typeof props === 'object'\n    ? props.src\n    : props;\n\n  const n = props && typeof props === 'object'\n    ? props.name\n    : undefined;\n\n  return h('i', {\n    'data-icon': n,\n    class: 'osjs-icon',\n    style: {\n      backgroundImage: typeof props === 'string' ? `url(${i})` : undefined\n    }\n  });\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Filter an object based on keys\n * @param {Object} props Props\n * @param {String[]} filterKeys List of keys to filter\n * @return {Object}\n */\nexport const filteredProps = (props, filterKeys) => {\n  const keys = Object.keys(props);\n  const filter = k => filterKeys.indexOf(k) === -1;\n\n  return keys\n    .filter(filter)\n    .reduce((result, k) => Object.assign({\n      [k]: props[k]\n    }, result), {});\n};\n\n/**\n * Creates a double-tap event handler\n * @param {number} [timeout=250] Timeout\n * @return {Function} Handler with => (ev, cb)\n */\nexport const doubleTap = (timeout = 250) => {\n  let tapped = false;\n  let timer;\n\n  return (ev, cb) => {\n    timer = clearTimeout(timer);\n    timer = setTimeout(() => (tapped = false), timeout);\n\n    if (tapped) {\n      ev.preventDefault();\n      return cb(ev);\n    }\n\n    tapped = true;\n\n    return false;\n  };\n};\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Icon} from './Icon';\n\nconst ul = (props, children = [], level = 0) => {\n\n  const label = child => {\n    const children = [];\n\n    if (child.type === 'checkbox' || typeof child.checked === 'boolean') {\n      children.push(h('span', {\n        class: 'osjs-gui-menu-checkbox ' + (child.checked ? 'active' : '')\n      }));\n    } else if (child.icon) {\n      children.push(h(Icon, child.icon));\n    }\n\n    children.push(h('span', {}, child.label));\n\n    return children;\n  };\n\n  const inner = (props, child) => {\n    if (typeof child.element === 'function') {\n      return child.element();\n    }\n\n    const className = child.type === 'separator'\n      ? 'osjs-gui-menu-separator'\n      : 'osjs-gui-menu-label ' + (child.disabled ? 'osjs__disabled' : '');\n\n    const children = [\n      h('span', {class: className}, label(child))\n    ];\n\n    if (child.items) {\n      children.push(ul(props, child.items, level + 1));\n    }\n\n    return children;\n  };\n\n  return h('ul', {\n    class: ''\n  }, children.map(\n    child => h('li', {\n      class: 'osjs-gui-menu-entry'\n    }, [\n      h('div', {\n        class: 'osjs-gui-menu-container',\n        'data-has-image': child.icon ? true : undefined,\n        'data-has-children': child.items ? true : undefined,\n        onmouseover: child.items ? props.onshow : undefined,\n        ontouchend: child.items ? props.onshow : undefined,\n        onclick: (ev) => {\n          if (child.items) {\n            return;\n          }\n\n          if (child.onclick) {\n            child.onclick(child, ev);\n          }\n\n          if (props.onclick) {\n            props.onclick(child, ev, child);\n          }\n        }\n      }, inner(props, child))\n    ])\n  ));\n};\n\n/**\n * Menu tree\n * @property {String} label Label\n * @property {String} [icon] Icon source\n * @property {Boolean} [disabled] Disabled state\n * @property {Boolean} [closeable] Disable close on click\n * @property {Function} [element] A callback that returns a virtual DOM element (ex. Hyperapp)\n * @property {Function} onclick Click callback\n * @property {MenuItems} [items] Child items\n * @typedef MenuItems\n */\n\n/**\n * A menu\n * @param {Object} props Properties\n * @param {Boolean} [props.visible=true] Visible property\n * @param {Object} [posprops.ition] Position\n * @param {MenuItems} [props.menu] Menu items\n */\nexport const Menu = (props) => h('div', {\n  id: 'osjs-context-menu',\n  className: 'osjs-gui osjs-gui-menu',\n  oncreate: props.oncreate,\n  onupdate: props.onupdate,\n  style: {\n    display: props.visible !== false ? 'block' : 'none',\n    top: props.position ? String(props.position.top) + 'px' : 0,\n    left: props.position ? String(props.position.left) + 'px' : 0\n  }\n}, ul(props, props.menu));\n","import {h, app} from 'hyperapp'\n\nexport default \nfunction nestable (state, actions, view, tagname) {\n    actions._$r = function () {return {}}\n    return function (props, children) {\n        return h(tagname || 'x-', {\n            key: props.key,\n            id: props.id,\n            class: props.class,\n            oncreate: function (el) {\n                var wired = app(\n                    state,\n                    actions,\n                    function (s, a) {\n                        var v = view(s, a)\n                        if (typeof v === 'function') v = v(el._$p, el._$c)\n                        return v\n                    },\n                    el\n                )\n                el._$p = props\n                el._$c = children\n                el._$r = wired._$r\n                el._$u = wired.uninit\n                wired.init && wired.init(props)\n                props.oncreate && props.oncreate(el)\n            },\n            onupdate: function (el) {\n                el._$p = props\n                el._$c = children\n                el._$r()\n                props.onupdate && props.onupdate(el)\n            },\n            ondestroy: function (el) {\n                el._$u && el._$u()\n            },\n            onremove: function (el, done) {\n               if (!props.onremove) return done()\n\n               props.onremove(el, done)\n            }\n        })\n    }    \n}\n\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport nestable from 'hyperapp-nestable';\nimport {Element} from './Element';\n\nconst onmousedown = (ev, actions, orientation) => {\n  const {target, clientX, clientY} = ev;\n  const pane = target.previousSibling;\n  const {offsetWidth, offsetHeight} = pane;\n  const index = Array.from(target.parentNode.children).indexOf(pane);\n  const maxWidth = pane.parentNode.offsetWidth * 0.8;\n  const maxHeight = pane.parentNode.offsetHeight * 0.8;\n\n  if (index < 0) {\n    return;\n  }\n\n  const mousemove = ev => {\n    ev.preventDefault();\n\n    let size = orientation === 'vertical' ? offsetWidth : offsetHeight;\n\n    if (orientation === 'vertical') {\n      const diffX = ev.clientX - clientX;\n      size = Math.min(maxWidth, size + diffX);\n    } else {\n      const diffY = ev.clientY - clientY;\n      size = Math.min(maxHeight, size + diffY);\n    }\n\n    actions.setSize({index, size});\n  };\n\n  const mouseup = ev => {\n    ev.preventDefault();\n    document.removeEventListener('mousemove', mousemove);\n    document.removeEventListener('mouseup', mouseup);\n  };\n\n  ev.preventDefault();\n  document.addEventListener('mousemove', mousemove);\n  document.addEventListener('mouseup', mouseup);\n};\n\nconst panes = (state, actions, children, orientation) => {\n  const spacers = Array(Math.ceil(children.length / 2))\n    .fill(null)\n    .map(() => h('div', {\n      class: 'osjs-gui-panes-spacer',\n      onmousedown: ev => onmousedown(ev, actions, orientation)\n    }));\n\n  const child = (c, i) => {\n    const w = state.sizes[i] ? String(state.sizes[i]) + 'px' : undefined;\n\n    return h('div', {\n      class: 'osjs-gui-panes-pane',\n      style: {\n        flex: w ? `0 0 ${w}` : w\n      }\n    }, c);\n  };\n\n  return children\n    .map(child)\n    .map((v, i) => [v, spacers[i]])\n    .reduce((a, b) => a.concat(b))\n    .filter(v => typeof v !== 'undefined');\n};\n\nconst view = (state, actions) => (props, children) => {\n  const orientation = props.orientation || 'vertical';\n\n  return h(Element, {\n    orientation,\n    class: 'osjs-gui-panes-inner'\n  }, panes(state, actions, children, orientation));\n};\n\nconst inner = nestable({\n  sizes: []\n}, {\n  init: props => ({sizes: props.sizes || [150]}),\n  setSize: ({index, size}) => state => {\n    const sizes = [].concat(state.sizes);\n    sizes[index] = size;\n    return {sizes};\n  }\n}, view, 'div');\n\n/**\n * Resizable panes\n * @param {Object} props Properties\n * @param {string} [props.orientation='vertical'] Pane orientation\n * @param {number[]} [props.sizes] Pane sizes\n * @param {h[]} children Children\n */\nexport const Panes = (props, children) => h(inner, {\n  class: 'osjs-gui-panes'\n}, children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport nestable from 'hyperapp-nestable';\n\nconst headers = ({labels, onchange, oncontextmenu}, state, actions) => (labels || [])\n  .map((label, index) => h('div', {\n    class: state.selectedIndex === index ? 'osjs__active' : '',\n    oncontextmenu: ev => {\n      (oncontextmenu || function() {})(ev, index, label);\n    },\n    onclick: ev => {\n      actions.setSelectedIndex(index);\n      (onchange || function() {})(ev, index, label);\n    }\n  }, h('span', {}, label)));\n\nconst panes = (state, children) => children\n  .map((child, index) => h('div', {\n    class: state.selectedIndex === index ? 'osjs__active' : ''\n  }, child));\n\nconst view = nestable({\n  selectedIndex: 0\n}, {\n  init: props => ({\n    selectedIndex: props.selectedIndex || 0\n  }),\n  setSelectedIndex: selectedIndex => state => ({selectedIndex})\n}, (state, actions) => (props, children) => h('div', {\n  class: 'osjs-gui-tabs-wrapper'\n}, [\n  h('div', {class: 'osjs-gui-tabs-header'}, headers(props, state, actions)),\n  h('div', {class: 'osjs-gui-tabs-panes'}, panes(state, children))\n]), 'div');\n\n/**\n * A tab container\n * @param {Object} props Properties\n * @param {String[]} props.labels Labels\n * @param {h[]} children Tabs\n */\nexport const Tabs = (props, children) => h(view, Object.assign({\n  class: 'osjs-gui osjs-gui-tabs ' + (props.class || '')\n}, props), children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {filteredProps, doubleTap} from '../utils';\nimport {Element} from './Element';\nimport {Icon} from './Icon';\n\nconst tapper = doubleTap();\n\nconst createView = props => {\n  let debounceScroll;\n\n  const cols = (paneIndex) => (row, rowIndex) => {\n    const col = row.columns[paneIndex] || {};\n    const selected = props.selectedIndex === rowIndex;\n    const colIcon = col.icon ? h(Icon, col.icon) : null;\n    const children = [h('span', {}, [typeof col === 'object' ? col.label : col])];\n\n    if (colIcon) {\n      children.unshift(colIcon);\n    }\n\n    return h('div', {\n      key: row.key,\n      'data-has-icon': col.icon ? true : undefined,\n      class: 'osjs-gui-list-view-cell' + (selected ? ' osjs__active' : ''),\n      ontouchstart: (ev) => tapper(ev, () => props.onactivate({data: row.data, index: rowIndex, ev})),\n      ondblclick: (ev) => props.onactivate({data: row.data, index: rowIndex, ev}),\n      onclick: (ev) => props.onselect({data: row.data, index: rowIndex, ev}),\n      oncontextmenu: (ev) => props.oncontextmenu({data: row.data, index: rowIndex, ev}),\n      oncreate: (el) => props.oncreate({data: row.data, index: rowIndex, el})\n    }, children);\n  };\n\n  const pane = (index, col) => h('div', {\n    class: 'osjs-gui-list-view-pane',\n    style: col.style || {}\n  }, [\n    h('div', {\n      class: 'osjs-gui-list-view-header',\n      style: {\n        display: props.hideColumns ? 'none' : undefined\n      }\n    }, h('span', {}, typeof col === 'object' ? col.label : col)),\n    h('div', {\n      class: 'rows',\n      'data-zebra': String(props.zebra)\n    }, props.rows.map(cols(index)))\n  ]);\n\n  return h('div', {\n    class: 'osjs-gui-list-view-wrapper',\n    onscroll: ev => {\n      debounceScroll = clearTimeout(debounceScroll);\n      debounceScroll = setTimeout(() => {\n        props.onscroll(ev);\n      }, 100);\n    },\n    oncreate: el => (el.scrollTop = props.scrollTop),\n    onupdate: el => {\n      if (props.selectedIndex < 0) {\n        el.scrollTop = props.scrollTop;\n      }\n    }\n  }, props.columns.map((c, i) => pane(i, c)));\n};\n\nexport const ListView = props => h(Element, Object.assign({\n  class: 'osjs-gui-list-view'\n}, props.box || {}), createView(filteredProps(props, ['box'])));\n\nexport const listView = ({\n  component: (state, actions) => {\n    const newProps = Object.assign({\n      zebra: true,\n      columns: [],\n      rows: [],\n      onselect: ({data, index, ev}) => {\n        actions.select({data, index, ev});\n        actions.setSelectedIndex(index);\n      },\n      onactivate: ({data, index, ev}) => {\n        actions.activate({data, index, ev});\n        actions.setSelectedIndex(-1);\n      },\n      oncontextmenu: ({data, index, ev}) => {\n        actions.select({data, index, ev});\n        actions.contextmenu({data, index, ev});\n        actions.setSelectedIndex(index);\n      },\n      oncreate: (args) => {\n        actions.created(args);\n      },\n      onscroll: (ev) => {\n        actions.scroll(ev);\n      }\n    }, state);\n\n    return (props = {}) => ListView(Object.assign(newProps, props));\n  },\n\n  state: state => Object.assign({\n    selectedIndex: -1,\n    scrollTop: 0\n  }, state),\n\n  actions: actions => Object.assign({\n    select: () => () => ({}),\n    activate: () => () => ({}),\n    contextmenu: () => () => ({}),\n    created: () => () => ({}),\n    scroll: () => state => state,\n    setRows: rows => ({rows}),\n    setColumns: columns => ({columns}),\n    setScrollTop: scrollTop => state => ({scrollTop}),\n    setSelectedIndex: selectedIndex => state => ({selectedIndex})\n  }, actions || {})\n});\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {doubleTap} from '../utils';\nimport {Element} from './Element';\nimport {Icon} from './Icon';\n\nconst tapper = doubleTap();\n\nexport const IconViewEntry = (entry, index, props) => () => {\n  const icon = entry.icon || {name: 'application-x-executable'};\n  const selected = props.selectedIndex === index;\n\n  return h('div', {\n    class: 'osjs-gui-icon-view-entry' + (selected ? ' osjs__active' : ''),\n    ontouchstart: (ev) => tapper(ev, () => props.onactivate({data: entry.data, index, ev})),\n    ondblclick: (ev) => props.onactivate({data: entry.data, index, ev}),\n    onclick: (ev) => props.onselect({data: entry.data, index, ev}),\n    oncontextmenu: (ev) => props.oncontextmenu({data: entry.data, index, ev}),\n    oncreate: (el) => props.oncreate({data: entry.data, index, el})\n  }, [\n    h('div', {class: 'osjs__container'}, [\n      h('div', {class: 'osjs__image'}, [\n        h(Icon, icon)\n      ]),\n      h('div', {class: 'osjs__label'}, [\n        h('span', {}, entry.label)\n      ])\n    ])\n  ]);\n};\n\nexport const IconView = (props) => {\n  const inner = h('div', {\n    class: 'osjs-gui-icon-view-wrapper',\n    oncreate: el => (el.scrollTop = props.scrollTop),\n    onupdate: el => {\n      if (props.selectedIndex < 0) {\n        el.scrollTop = props.scrollTop;\n      }\n    }\n  }, props.entries.map((entry, index) => {\n    return h(IconViewEntry(entry, index, props));\n  }));\n\n  return h(Element, Object.assign({\n    class: 'osjs-gui-icon-view'\n  }, props.box || {}), inner);\n};\n\nexport const iconView = ({\n  component: (state, actions) => {\n    const newProps = Object.assign({\n      entries: [],\n      onselect: ({data, index, ev}) => {\n        actions.select({data, index, ev});\n        actions.setSelectedIndex(index);\n      },\n      onactivate: ({data, index, ev}) => {\n        actions.activate({data, index, ev});\n        actions.setSelectedIndex(-1);\n      },\n      oncontextmenu: ({data, index, ev}) => {\n        actions.select({data, index, ev});\n        actions.contextmenu({data, index, ev});\n        actions.setSelectedIndex(index);\n      },\n      oncreate: (args) => {\n        actions.created(args);\n      }\n    }, state);\n\n    return (props = {}) => IconView(Object.assign(newProps, props));\n  },\n\n  state: state => Object.assign({\n    selectedIndex: -1,\n    scrollTop: 0\n  }, state),\n\n  actions: actions => Object.assign({\n    select: () => () => ({}),\n    activate: () => () => ({}),\n    contextmenu: () => () => ({}),\n    created: () => () => ({}),\n    setEntries: entries => () => ({entries}),\n    setScrollTop: scrollTop => state => ({scrollTop}),\n    setSelectedIndex: selectedIndex => state => ({selectedIndex}),\n  }, actions || {})\n});\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\nimport nestable from 'hyperapp-nestable';\n\nconst view = (state, actions) => (props, children) => {\n  return h(Element, Object.assign({}, props.box || {}, {\n    class: ['osjs-gui-expander-wrapper']\n  }), [\n    h('div', {\n      class: 'osjs-gui-expander-header',\n      onclick: ev => actions.ontoggle({\n        ev,\n        active: !state.active,\n        ontoggle: props.ontoggle\n      })\n    }, [\n      h('div', {\n        class: 'osjs-gui-expander-header-icon',\n        'data-active': String(state.active)\n      }),\n      h('div', {\n        class: 'osjs-gui-expander-header-label'\n      }, props.label)\n    ]),\n    h('div', {\n      class: 'osjs-gui-expander-content',\n      style: {\n        display: state.active === false ? 'none' : undefined\n      }\n    }, children)\n  ]);\n};\n\nconst inner = nestable({\n  active: true\n}, {\n  init: props => ({\n    ative: props.active !== false\n  }),\n  ontoggle: ({ev, active, ontoggle}) => {\n    const cb = ontoggle || function() {};\n    cb(ev, active);\n    return {active};\n  }\n}, view, 'div');\n\n/**\n * A status bar\n * @param {Object} props Properties\n * @param {boolean} [props.active] Active state\n * @param {Function} [props.ontoggle] Toggle callback => (ev, active)\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const Expander = (props, children) =>\n  h(inner, Object.assign({}, props, {\n    class: 'osjs-gui osjs-gui-expander'\n  }), children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\n\n/**\n * A label element\n * @param {Object} props Properties\n * @param {string} [props.text] Label Text\n * @param {string} [props.placement] Placement\n * @param {string} [props.for] The \"for\" attribute\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const Label = (props = {}, children = []) => {\n  const placement = props.placement || 'top';\n  const text = props.text || '';\n\n  const elementProps = Object.assign({\n    class: ['osjs-gui-field-label', 'osjs-gui-field-label-on-' + placement]\n  }, props.box || {});\n\n  return h(Element, elementProps, [\n    h('label', {for: props.for}, text),\n    children\n  ]);\n};\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {Menu} from './components/Menu';\n\n/*\n * Makes sure sub-menus stays within viewport\n */\nconst clampSubMenu = (root, ev) => {\n  let ul = ev.target.querySelector('ul');\n  if (!ul) {\n    return;\n  }\n\n  // FIXME: Safari reports wrong item\n  if (ul.classList.contains('osjs-gui-menu-container')) {\n    ul = ul.parentNode.parentNode;\n  }\n\n  if (!ul || !ul.offsetParent) {\n    return;\n  }\n\n  ul.classList.remove('clamp-right');\n\n  const rect = ul.getBoundingClientRect();\n  if (rect.right > root.offsetWidth) {\n    ul.classList.add('clamp-right');\n  }\n};\n\n/*\n * Makes sure menu stays within viewport\n */\nconst clampMenu = (root, el, currentPosition) => {\n  const result = {};\n  const bottom = currentPosition.top + el.offsetHeight;\n  const right = currentPosition.left + el.offsetWidth;\n  const offY = root.offsetHeight - currentPosition.top;\n  const offX = root.offsetWidth - currentPosition.left;\n  const overflowRight = right > root.offsetWidth;\n  const overflowBottom = bottom > root.offsetHeight;\n\n  if (overflowBottom) {\n    if (root.offsetHeight > el.offsetHeight) {\n      result.top = root.offsetHeight - el.offsetHeight - offY;\n    }\n  }\n\n  if (overflowRight) {\n    result.left = root.offsetWidth - el.offsetWidth - offX;\n  }\n\n  return (overflowBottom || overflowRight) ? result : null;\n};\n\n/*\n * Context Menu view\n */\nconst view = callback => (props, actions) => h(Menu, {\n  position: props.position,\n  visible: props.visible,\n  menu: props.menu,\n  onclick: callback,\n  onshow: actions.onshow\n});\n\nconst timeout = fn => {\n  fn();\n  return setTimeout(fn, 100);\n};\n\n/**\n * ContextMenu Class\n *\n * @desc Handles a Menu/ContextMenu globally for OS.js\n */\nexport class ContextMenu {\n\n  constructor(core) {\n    this.core = core;\n    this.callback = () => {};\n    this.actions = null;\n    this.$element = document.createElement('div');\n  }\n\n  destroy() {\n    this.callback = null;\n    this.actions = null;\n  }\n\n  /**\n   * Initializes the Menu Hyperapp\n   */\n  init() {\n    let clampTimeout;\n\n    this.$element.className = 'osjs-system-context-menu';\n    this.core.$root.appendChild(this.$element);\n\n    let isActive = false;\n\n    this.actions = app({\n      visible: false,\n      menu: [],\n      position: {\n        top: 0,\n        left: 0\n      }\n    }, {\n      clamp: (el) => props => {\n        el = el || document.querySelector('#osjs-context-menu');\n        clearTimeout(clampTimeout);\n\n        if (el) {\n          const root = this.core.$root;\n          const newPosition = clampMenu(root, el, props.position);\n          if (newPosition) {\n            return {position: newPosition};\n          }\n        }\n\n        return {};\n      },\n      onshow: (ev) => props => {\n        clampTimeout = timeout(() => clampSubMenu(this.core.$root, ev));\n      },\n      show: (options) => (props, actions) => {\n        let {menu, position, toggle} = options;\n        if (toggle && isActive) {\n          return actions.hide();\n        } else if (position instanceof Event) {\n          position = {left: position.clientX, top: position.clientY};\n        } else if (position instanceof Element) {\n          const box = position.getBoundingClientRect();\n          position = {\n            left: box.left,\n            top: box.top + box.height\n          };\n        }\n\n        this.callback = (child, ev, iter) => {\n          if (options.callback) {\n            options.callback(child, ev);\n          }\n\n          if (iter.closeable !== false) {\n            actions.hide();\n          }\n        };\n\n        isActive = true;\n        this.onclose = options.onclose;\n\n        timeout(() => actions.clamp());\n\n        return {\n          visible: true,\n          menu: menu || [],\n          position: position || {top: 0, left: 0}\n        };\n      },\n      hide: () => props => {\n        if (isActive) {\n          setTimeout(() => (isActive = false), 0);\n        }\n        if (this.onclose) {\n          this.onclose();\n        }\n        this.onclose = null;\n        this.callback = null;\n\n        return {visible: false};\n      }\n    }, view((...args) => {\n      if (!this.core.destroyed) {\n        if (this.callback) {\n          this.callback(...args);\n        }\n      }\n    }), this.$element);\n  }\n\n  /**\n   * Show the menu\n   */\n  show(...args) {\n    return this.actions ? this.actions.show(...args) : null;\n  }\n\n  /**\n   * Hide the menu\n   */\n  hide(...args) {\n    return this.actions ? this.actions.hide(...args) : null;\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ContextMenu} from './contextmenu.js';\n\n/*\n * Check if a target allows for context menu\n */\nconst validContextMenuTarget = ev => {\n  const target = ev.target;\n  let isValid = target.tagName === 'TEXTAREA';\n  if (!isValid && target.tagName === 'INPUT') {\n    isValid = ['text', 'password', 'number', 'email'].indexOf(target.type) !== -1;\n  }\n\n  return isValid;\n};\n\n/**\n * OS.js GUI Service Provider\n *\n * @desc Provides wrapper services around GUI features\n */\nexport class GUIServiceProvider {\n\n  constructor(core) {\n    this.core = core;\n    this.contextmenu = new ContextMenu(core);\n  }\n\n  destroy() {\n    const menu = document.getElementById('osjs-context-menu');\n    if (menu) {\n      menu.remove();\n    }\n\n    this.contextmenu.destroy();\n  }\n\n  async init() {\n    const contextmenuApi = {\n      show: (...args) => this.contextmenu.show(...args),\n      hide: (...args) => this.contextmenu.hide(...args)\n    };\n\n    this.core.instance('osjs/contextmenu', (...args) => {\n      if (args.length) {\n        return contextmenuApi.show(...args);\n      }\n\n      return contextmenuApi;\n    });\n\n    this.core.$root.addEventListener('contextmenu', (ev) => {\n      if (validContextMenuTarget(ev)) {\n        return;\n      }\n\n      ev.stopPropagation();\n      ev.preventDefault();\n    });\n  }\n\n  start() {\n    const callback = ev => {\n      const menu = document.getElementById('osjs-context-menu');\n      const hit = menu && menu.contains(ev.target);\n\n      if (!hit && this.contextmenu) {\n        this.contextmenu.hide();\n      }\n    };\n\n    this.core.$root.addEventListener('click', callback, true);\n    this.core.once('destroy', () => {\n      this.core.$root.removeEventListener('click', callback, true);\n    });\n\n    this.contextmenu.init();\n  }\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"osjsDialogs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsDialogs\"] = factory();\n\telse\n\t\troot[\"osjsDialogs\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var superPropBase = require(\"./superPropBase.js\");\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get.bind(), module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n  return _get.apply(this, arguments);\n}\nmodule.exports = _get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nmodule.exports = _superPropBase, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\n\n/**\n * Elemet Box definition\n * @property {string} [class] Container class name\n * @property {number} [grow] Flexbox grow value\n * @property {number} [shrink] Flexbox shrink value\n * @property {number|string} [basis] Flexbox basis value\n * @property {string} [align] Flexbox alignItems value\n * @property {string} [justify] Flexbox justifyContent value\n * @property {number|string} [padding] Margin\n * @property {number|string} [margin] Margin\n * @property {string} [key] Hyperapp element key\n * @property {Function} [oncreate] Hyperapp oncreate function\n * @property {Function} [onupdate] Hyperapp onupdate function\n * @property {Function} [ondestroy] Hyperapp ondestroy function\n * @typedef BoxProperties\n */\n\nconst unitValue = (value, unset) => typeof value === 'number'\n  ? `${value}px`\n  : (value === false ? unset : value);\n\nconst boxPropNames = {\n  grow: value => ({flexGrow: value}),\n  shrink: value => ({flexShrink: value}),\n  basis: value => ({flexBasis: unitValue(value, 'auto')}),\n  align: value => ({alignItems: value}),\n  justify: value => ({justifyContent: value}),\n  padding: value => ({margin: unitValue(value, '0')}),\n  margin: value => ({margin: unitValue(value, '0')})\n};\n\n/**\n * A generic OS.js GUI container\n * @param {Object} props Properties\n * @param {h[]} children Children\n */\nexport const Element = (props, children = []) => {\n  const givenClassNames = props.class instanceof Array\n    ? props.class\n    : [props.class];\n\n  const classNames = [\n    'osjs-gui',\n    ...givenClassNames\n  ];\n\n  if (props.orientation) {\n    classNames.push('osjs-gui-' + props.orientation);\n  }\n\n  const defaultStyle = typeof props.style === 'string'\n    ? {}\n    : Object.assign({}, props.style || {});\n\n  const style = Object.keys(props).reduce((result, prop) => {\n    const value = boxPropNames[prop]\n      ? boxPropNames[prop](props[prop])\n      : undefined;\n\n    return Object.assign({}, result, value);\n  }, defaultStyle);\n\n  return h('div', {\n    oncreate: props.oncreate,\n    ondestroy: props.ondestroy,\n    class: classNames.filter(s => !!s).join(' '),\n    style\n  }, children);\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\n\n/**\n * A flexbox\n * @param {BoxProperties} props Properties\n * @param {string} [props.orientation='horizontal'] Box orientation\n * @param {h[]} children Children\n */\nexport const Box = (props, children) =>\n  h(Element, Object.assign({\n    orientation: 'horizontal'\n  }, props, {\n    class: ['osjs-gui-box', props.class],\n  }), children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\n\n/**\n * A flexbox container\n * @param {BoxProperties} props Properties\n * @param {string} [props.orientation='vertical'] Box orientation\n * @param {h[]} children Children\n */\nexport const BoxContainer = (props, children) =>\n  h(Element, Object.assign({}, props, {\n    class: ['osjs-gui-box-container', props.class]\n  }), children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\n\n/**\n * A styled flexbox container\n * @param {BoxProperties} props Properties\n * @param {h[]} children Children\n */\nexport const BoxStyled = (props, children) =>\n  h(Element, Object.assign({}, props, {\n    class: ['osjs-gui-box-styled', props.class]\n  }), children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\n\n/**\n * An icon\n * @param {Object} props Properties\n * @param {string} props.src Icon src\n * @param {string} [props.name] Icon name\n * @param {h[]} children Children\n */\nexport const Icon = (props, children) => {\n  const i = props && typeof props === 'object'\n    ? props.src\n    : props;\n\n  const n = props && typeof props === 'object'\n    ? props.name\n    : undefined;\n\n  return h('i', {\n    'data-icon': n,\n    class: 'osjs-icon',\n    style: {\n      backgroundImage: typeof props === 'string' ? `url(${i})` : undefined\n    }\n  });\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Filter an object based on keys\n * @param {Object} props Props\n * @param {String[]} filterKeys List of keys to filter\n * @return {Object}\n */\nexport const filteredProps = (props, filterKeys) => {\n  const keys = Object.keys(props);\n  const filter = k => filterKeys.indexOf(k) === -1;\n\n  return keys\n    .filter(filter)\n    .reduce((result, k) => Object.assign({\n      [k]: props[k]\n    }, result), {});\n};\n\n/**\n * Creates a double-tap event handler\n * @param {number} [timeout=250] Timeout\n * @return {Function} Handler with => (ev, cb)\n */\nexport const doubleTap = (timeout = 250) => {\n  let tapped = false;\n  let timer;\n\n  return (ev, cb) => {\n    timer = clearTimeout(timer);\n    timer = setTimeout(() => (tapped = false), timeout);\n\n    if (tapped) {\n      ev.preventDefault();\n      return cb(ev);\n    }\n\n    tapped = true;\n\n    return false;\n  };\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport {h} from 'hyperapp';\nimport {filteredProps} from './utils';\nimport {Element} from './components/Element';\n\n/**\n * Creates a new field Element wrapper\n * @param {String} name Field name\n * @param {Object} props Field props\n * @param {Function} cb Callback to create inner element => (props)\n * @param {Function} cb Callback to get value => (event)\n */\nexport const createField = (name, props, defaultProps, cb, cbInput) => {\n  const oninput = props.oninput || function() {};\n  const onchange = props.onchange || function() {};\n  const onkeydown = props.onkeydown || function() {};\n\n  const getValue = cbInput || (ev => [ev.target.value]);\n  const fieldProps = Object.assign(\n    {\n      oninput: ev => oninput(ev, ...getValue(ev)),\n      onchange: ev => onchange(ev, ...getValue(ev)),\n      onkeydown: ev => {\n        if (ev.keyCode === 13 && props.onenter) {\n          props.onenter(ev, ...getValue(ev));\n        }\n        onkeydown(ev);\n      }\n    },\n    defaultProps,\n    filteredProps(props, ['choices', 'label', 'box', 'oninput', 'onchange'])\n  );\n\n  return h(Element, Object.assign({}, props.box || {}, {\n    class: 'osjs-gui-field osjs-gui-' + name\n  }), cb(fieldProps));\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Icon} from './Icon';\nimport {createField} from '../element';\n\n/**\n * A button\n * @param {Object} props Properties\n * @param {string} [props.icon] Icon source\n * @param {string} [props.label] Use this as label instead of children\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const Button = (props = {}, children = []) =>\n  createField('button', props, {\n  }, (fieldProps) => {\n    const inner = [];\n    if (props.icon) {\n      inner.push(h(Icon, props.icon));\n    }\n\n    if (typeof props.label === 'string') {\n      inner.push(h('span', {class: 'osjs-label'}, props.label));\n    }\n\n    return h('button', fieldProps, [\n      ...inner,\n      ...children\n    ]);\n  });\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\n\n/**\n * A progress bar\n * @param {Object} props Properties\n * @param {number} [props.value] The value (percentage)\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const Progressbar = (props, children = []) => {\n  let value = typeof props.value === 'number'\n    ? Math.min(100, Math.max(0, Math.abs(props.value)))\n    : 0;\n\n  const c = h('div', {class: 'osjs-gui-progressbar-wrapper'}, [\n    h('div', {\n      className: 'osjs-gui-progressbar-value',\n      style: {\n        width: String(value) + '%'\n      }\n    }),\n    h('div', {\n      className: 'osjs-gui-progressbar-label',\n    }, [\n      h('span', {}, [\n        String(value) + '%'\n      ])\n    ])\n  ]);\n\n  return h(Element, Object.assign({}, props.box || {}, {\n    class: ['osjs-gui-progressbar', props.class]\n  }), [\n    c,\n    ...children\n  ]);\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Icon} from './Icon';\n\nconst ul = (props, children = [], level = 0) => {\n\n  const label = child => {\n    const children = [];\n\n    if (child.type === 'checkbox' || typeof child.checked === 'boolean') {\n      children.push(h('span', {\n        class: 'osjs-gui-menu-checkbox ' + (child.checked ? 'active' : '')\n      }));\n    } else if (child.icon) {\n      children.push(h(Icon, child.icon));\n    }\n\n    children.push(h('span', {}, child.label));\n\n    return children;\n  };\n\n  const inner = (props, child) => {\n    if (typeof child.element === 'function') {\n      return child.element();\n    }\n\n    const className = child.type === 'separator'\n      ? 'osjs-gui-menu-separator'\n      : 'osjs-gui-menu-label ' + (child.disabled ? 'osjs__disabled' : '');\n\n    const children = [\n      h('span', {class: className}, label(child))\n    ];\n\n    if (child.items) {\n      children.push(ul(props, child.items, level + 1));\n    }\n\n    return children;\n  };\n\n  return h('ul', {\n    class: ''\n  }, children.map(\n    child => h('li', {\n      class: 'osjs-gui-menu-entry'\n    }, [\n      h('div', {\n        class: 'osjs-gui-menu-container',\n        'data-has-image': child.icon ? true : undefined,\n        'data-has-children': child.items ? true : undefined,\n        onmouseover: child.items ? props.onshow : undefined,\n        ontouchend: child.items ? props.onshow : undefined,\n        onclick: (ev) => {\n          if (child.items) {\n            return;\n          }\n\n          if (child.onclick) {\n            child.onclick(child, ev);\n          }\n\n          if (props.onclick) {\n            props.onclick(child, ev, child);\n          }\n        }\n      }, inner(props, child))\n    ])\n  ));\n};\n\n/**\n * Menu tree\n * @property {String} label Label\n * @property {String} [icon] Icon source\n * @property {Boolean} [disabled] Disabled state\n * @property {Boolean} [closeable] Disable close on click\n * @property {Function} [element] A callback that returns a virtual DOM element (ex. Hyperapp)\n * @property {Function} onclick Click callback\n * @property {MenuItems} [items] Child items\n * @typedef MenuItems\n */\n\n/**\n * A menu\n * @param {Object} props Properties\n * @param {Boolean} [props.visible=true] Visible property\n * @param {Object} [posprops.ition] Position\n * @param {MenuItems} [props.menu] Menu items\n */\nexport const Menu = (props) => h('div', {\n  id: 'osjs-context-menu',\n  className: 'osjs-gui osjs-gui-menu',\n  oncreate: props.oncreate,\n  onupdate: props.onupdate,\n  style: {\n    display: props.visible !== false ? 'block' : 'none',\n    top: props.position ? String(props.position.top) + 'px' : 0,\n    left: props.position ? String(props.position.left) + 'px' : 0\n  }\n}, ul(props, props.menu));\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\n\n/**\n * A toolbar\n * @desc Contains entries with spacing\n * @param {BoxProperties} props Properties\n * @param {string} [props.orientation='vertical'] Box orientation\n * @param {h[]} children Children\n */\nexport const Toolbar = (props, children) =>\n  h(Element, Object.assign({\n    orientation: 'vertical'\n  }, props, {\n    class: ['osjs-gui-toolbar', props.class]\n  }), children);\n","import {h, app} from 'hyperapp'\n\nexport default \nfunction nestable (state, actions, view, tagname) {\n    actions._$r = function () {return {}}\n    return function (props, children) {\n        return h(tagname || 'x-', {\n            key: props.key,\n            id: props.id,\n            class: props.class,\n            oncreate: function (el) {\n                var wired = app(\n                    state,\n                    actions,\n                    function (s, a) {\n                        var v = view(s, a)\n                        if (typeof v === 'function') v = v(el._$p, el._$c)\n                        return v\n                    },\n                    el\n                )\n                el._$p = props\n                el._$c = children\n                el._$r = wired._$r\n                el._$u = wired.uninit\n                wired.init && wired.init(props)\n                props.oncreate && props.oncreate(el)\n            },\n            onupdate: function (el) {\n                el._$p = props\n                el._$c = children\n                el._$r()\n                props.onupdate && props.onupdate(el)\n            },\n            ondestroy: function (el) {\n                el._$u && el._$u()\n            },\n            onremove: function (el, done) {\n               if (!props.onremove) return done()\n\n               props.onremove(el, done)\n            }\n        })\n    }    \n}\n\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {filteredProps, doubleTap} from '../utils';\nimport {Element} from './Element';\nimport {Icon} from './Icon';\n\nconst tapper = doubleTap();\n\nconst createView = props => {\n  let debounceScroll;\n\n  const cols = (paneIndex) => (row, rowIndex) => {\n    const col = row.columns[paneIndex] || {};\n    const selected = props.selectedIndex === rowIndex;\n    const colIcon = col.icon ? h(Icon, col.icon) : null;\n    const children = [h('span', {}, [typeof col === 'object' ? col.label : col])];\n\n    if (colIcon) {\n      children.unshift(colIcon);\n    }\n\n    return h('div', {\n      key: row.key,\n      'data-has-icon': col.icon ? true : undefined,\n      class: 'osjs-gui-list-view-cell' + (selected ? ' osjs__active' : ''),\n      ontouchstart: (ev) => tapper(ev, () => props.onactivate({data: row.data, index: rowIndex, ev})),\n      ondblclick: (ev) => props.onactivate({data: row.data, index: rowIndex, ev}),\n      onclick: (ev) => props.onselect({data: row.data, index: rowIndex, ev}),\n      oncontextmenu: (ev) => props.oncontextmenu({data: row.data, index: rowIndex, ev}),\n      oncreate: (el) => props.oncreate({data: row.data, index: rowIndex, el})\n    }, children);\n  };\n\n  const pane = (index, col) => h('div', {\n    class: 'osjs-gui-list-view-pane',\n    style: col.style || {}\n  }, [\n    h('div', {\n      class: 'osjs-gui-list-view-header',\n      style: {\n        display: props.hideColumns ? 'none' : undefined\n      }\n    }, h('span', {}, typeof col === 'object' ? col.label : col)),\n    h('div', {\n      class: 'rows',\n      'data-zebra': String(props.zebra)\n    }, props.rows.map(cols(index)))\n  ]);\n\n  return h('div', {\n    class: 'osjs-gui-list-view-wrapper',\n    onscroll: ev => {\n      debounceScroll = clearTimeout(debounceScroll);\n      debounceScroll = setTimeout(() => {\n        props.onscroll(ev);\n      }, 100);\n    },\n    oncreate: el => (el.scrollTop = props.scrollTop),\n    onupdate: el => {\n      if (props.selectedIndex < 0) {\n        el.scrollTop = props.scrollTop;\n      }\n    }\n  }, props.columns.map((c, i) => pane(i, c)));\n};\n\nexport const ListView = props => h(Element, Object.assign({\n  class: 'osjs-gui-list-view'\n}, props.box || {}), createView(filteredProps(props, ['box'])));\n\nexport const listView = ({\n  component: (state, actions) => {\n    const newProps = Object.assign({\n      zebra: true,\n      columns: [],\n      rows: [],\n      onselect: ({data, index, ev}) => {\n        actions.select({data, index, ev});\n        actions.setSelectedIndex(index);\n      },\n      onactivate: ({data, index, ev}) => {\n        actions.activate({data, index, ev});\n        actions.setSelectedIndex(-1);\n      },\n      oncontextmenu: ({data, index, ev}) => {\n        actions.select({data, index, ev});\n        actions.contextmenu({data, index, ev});\n        actions.setSelectedIndex(index);\n      },\n      oncreate: (args) => {\n        actions.created(args);\n      },\n      onscroll: (ev) => {\n        actions.scroll(ev);\n      }\n    }, state);\n\n    return (props = {}) => ListView(Object.assign(newProps, props));\n  },\n\n  state: state => Object.assign({\n    selectedIndex: -1,\n    scrollTop: 0\n  }, state),\n\n  actions: actions => Object.assign({\n    select: () => () => ({}),\n    activate: () => () => ({}),\n    contextmenu: () => () => ({}),\n    created: () => () => ({}),\n    scroll: () => state => state,\n    setRows: rows => ({rows}),\n    setColumns: columns => ({columns}),\n    setScrollTop: scrollTop => state => ({scrollTop}),\n    setSelectedIndex: selectedIndex => state => ({selectedIndex})\n  }, actions || {})\n});\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport nestable from 'hyperapp-nestable';\nimport {Element} from './Element';\n\nconst onmousedown = (ev, actions, orientation) => {\n  const {target, clientX, clientY} = ev;\n  const pane = target.previousSibling;\n  const {offsetWidth, offsetHeight} = pane;\n  const index = Array.from(target.parentNode.children).indexOf(pane);\n  const maxWidth = pane.parentNode.offsetWidth * 0.8;\n  const maxHeight = pane.parentNode.offsetHeight * 0.8;\n\n  if (index < 0) {\n    return;\n  }\n\n  const mousemove = ev => {\n    ev.preventDefault();\n\n    let size = orientation === 'vertical' ? offsetWidth : offsetHeight;\n\n    if (orientation === 'vertical') {\n      const diffX = ev.clientX - clientX;\n      size = Math.min(maxWidth, size + diffX);\n    } else {\n      const diffY = ev.clientY - clientY;\n      size = Math.min(maxHeight, size + diffY);\n    }\n\n    actions.setSize({index, size});\n  };\n\n  const mouseup = ev => {\n    ev.preventDefault();\n    document.removeEventListener('mousemove', mousemove);\n    document.removeEventListener('mouseup', mouseup);\n  };\n\n  ev.preventDefault();\n  document.addEventListener('mousemove', mousemove);\n  document.addEventListener('mouseup', mouseup);\n};\n\nconst panes = (state, actions, children, orientation) => {\n  const spacers = Array(Math.ceil(children.length / 2))\n    .fill(null)\n    .map(() => h('div', {\n      class: 'osjs-gui-panes-spacer',\n      onmousedown: ev => onmousedown(ev, actions, orientation)\n    }));\n\n  const child = (c, i) => {\n    const w = state.sizes[i] ? String(state.sizes[i]) + 'px' : undefined;\n\n    return h('div', {\n      class: 'osjs-gui-panes-pane',\n      style: {\n        flex: w ? `0 0 ${w}` : w\n      }\n    }, c);\n  };\n\n  return children\n    .map(child)\n    .map((v, i) => [v, spacers[i]])\n    .reduce((a, b) => a.concat(b))\n    .filter(v => typeof v !== 'undefined');\n};\n\nconst view = (state, actions) => (props, children) => {\n  const orientation = props.orientation || 'vertical';\n\n  return h(Element, {\n    orientation,\n    class: 'osjs-gui-panes-inner'\n  }, panes(state, actions, children, orientation));\n};\n\nconst inner = nestable({\n  sizes: []\n}, {\n  init: props => ({sizes: props.sizes || [150]}),\n  setSize: ({index, size}) => state => {\n    const sizes = [].concat(state.sizes);\n    sizes[index] = size;\n    return {sizes};\n  }\n}, view, 'div');\n\n/**\n * Resizable panes\n * @param {Object} props Properties\n * @param {string} [props.orientation='vertical'] Pane orientation\n * @param {number[]} [props.sizes] Pane sizes\n * @param {h[]} children Children\n */\nexport const Panes = (props, children) => h(inner, {\n  class: 'osjs-gui-panes'\n}, children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport nestable from 'hyperapp-nestable';\n\nconst headers = ({labels, onchange, oncontextmenu}, state, actions) => (labels || [])\n  .map((label, index) => h('div', {\n    class: state.selectedIndex === index ? 'osjs__active' : '',\n    oncontextmenu: ev => {\n      (oncontextmenu || function() {})(ev, index, label);\n    },\n    onclick: ev => {\n      actions.setSelectedIndex(index);\n      (onchange || function() {})(ev, index, label);\n    }\n  }, h('span', {}, label)));\n\nconst panes = (state, children) => children\n  .map((child, index) => h('div', {\n    class: state.selectedIndex === index ? 'osjs__active' : ''\n  }, child));\n\nconst view = nestable({\n  selectedIndex: 0\n}, {\n  init: props => ({\n    selectedIndex: props.selectedIndex || 0\n  }),\n  setSelectedIndex: selectedIndex => state => ({selectedIndex})\n}, (state, actions) => (props, children) => h('div', {\n  class: 'osjs-gui-tabs-wrapper'\n}, [\n  h('div', {class: 'osjs-gui-tabs-header'}, headers(props, state, actions)),\n  h('div', {class: 'osjs-gui-tabs-panes'}, panes(state, children))\n]), 'div');\n\n/**\n * A tab container\n * @param {Object} props Properties\n * @param {String[]} props.labels Labels\n * @param {h[]} children Tabs\n */\nexport const Tabs = (props, children) => h(view, Object.assign({\n  class: 'osjs-gui osjs-gui-tabs ' + (props.class || '')\n}, props), children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {doubleTap} from '../utils';\nimport {Element} from './Element';\nimport {Icon} from './Icon';\n\nconst tapper = doubleTap();\n\nexport const IconViewEntry = (entry, index, props) => () => {\n  const icon = entry.icon || {name: 'application-x-executable'};\n  const selected = props.selectedIndex === index;\n\n  return h('div', {\n    class: 'osjs-gui-icon-view-entry' + (selected ? ' osjs__active' : ''),\n    ontouchstart: (ev) => tapper(ev, () => props.onactivate({data: entry.data, index, ev})),\n    ondblclick: (ev) => props.onactivate({data: entry.data, index, ev}),\n    onclick: (ev) => props.onselect({data: entry.data, index, ev}),\n    oncontextmenu: (ev) => props.oncontextmenu({data: entry.data, index, ev}),\n    oncreate: (el) => props.oncreate({data: entry.data, index, el})\n  }, [\n    h('div', {class: 'osjs__container'}, [\n      h('div', {class: 'osjs__image'}, [\n        h(Icon, icon)\n      ]),\n      h('div', {class: 'osjs__label'}, [\n        h('span', {}, entry.label)\n      ])\n    ])\n  ]);\n};\n\nexport const IconView = (props) => {\n  const inner = h('div', {\n    class: 'osjs-gui-icon-view-wrapper',\n    oncreate: el => (el.scrollTop = props.scrollTop),\n    onupdate: el => {\n      if (props.selectedIndex < 0) {\n        el.scrollTop = props.scrollTop;\n      }\n    }\n  }, props.entries.map((entry, index) => {\n    return h(IconViewEntry(entry, index, props));\n  }));\n\n  return h(Element, Object.assign({\n    class: 'osjs-gui-icon-view'\n  }, props.box || {}), inner);\n};\n\nexport const iconView = ({\n  component: (state, actions) => {\n    const newProps = Object.assign({\n      entries: [],\n      onselect: ({data, index, ev}) => {\n        actions.select({data, index, ev});\n        actions.setSelectedIndex(index);\n      },\n      onactivate: ({data, index, ev}) => {\n        actions.activate({data, index, ev});\n        actions.setSelectedIndex(-1);\n      },\n      oncontextmenu: ({data, index, ev}) => {\n        actions.select({data, index, ev});\n        actions.contextmenu({data, index, ev});\n        actions.setSelectedIndex(index);\n      },\n      oncreate: (args) => {\n        actions.created(args);\n      }\n    }, state);\n\n    return (props = {}) => IconView(Object.assign(newProps, props));\n  },\n\n  state: state => Object.assign({\n    selectedIndex: -1,\n    scrollTop: 0\n  }, state),\n\n  actions: actions => Object.assign({\n    select: () => () => ({}),\n    activate: () => () => ({}),\n    contextmenu: () => () => ({}),\n    created: () => () => ({}),\n    setEntries: entries => () => ({entries}),\n    setScrollTop: scrollTop => state => ({scrollTop}),\n    setSelectedIndex: selectedIndex => state => ({selectedIndex}),\n  }, actions || {})\n});\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {createField} from '../element';\n\n/**\n * A text field\n * @param {Object} props Properties\n * @param {string} [props.value] Value\n * @param {string} [props.type=text] Type\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const TextField = (props = {}, children = []) =>\n  createField('text-field', props, {\n    autocomplete: 'off',\n    autocorrect: 'off',\n    autocapitalize: 'off',\n    spellcheck: 'false',\n    type: 'text'\n  }, (fieldProps) => h('input', fieldProps));\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {createField} from '../element';\n\n/**\n * A text field\n * @param {Object} props Properties\n * @param {string} [props.value] Value\n * @param {number} [props.rows=4] Number of rows\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const TextareaField = (props = {}, children = []) =>\n  createField('textarea-field', props, {\n    rows: 4\n  }, (fieldProps) => h('textarea', fieldProps, children));\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {createField} from '../element';\n\n/**\n * A text field\n * @param {Object} props Properties\n * @param {string} [props.value] Value\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const SelectField = (props = {}, children = []) => {\n\n  const getChoices = choices => choices instanceof Array\n    ? choices.map(value => typeof value === 'object' ? value : {value, label: value})\n    : Object.keys(props.choices || {})\n      .map(value => ({value, label: props.choices[value]}));\n\n  const choices = getChoices(props.choices)\n    .map(({value, label}) => {\n      return h('option', {\n        value,\n        selected: props.value === value\n      }, label);\n    });\n\n  const getValue = ev => [ev.target.value, ev.target.textContent];\n  const createSelect = fieldProps => h('div', {}, h('select', fieldProps, [\n    ...choices,\n    ...children\n  ]));\n\n  return createField('select-field', props, {\n    selectedIndex: undefined\n  }, createSelect, getValue);\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {createField} from '../element';\n\n/*\n * Parses option value\n */\nconst parseValue = value => {\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    return value;\n  }\n};\n\n/**\n * A text field\n * @param {Object} props Properties\n * @param {string} [props.checked] Value\n * @param {string} [props.type=checkbox] Type\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const ToggleField = (props = {}, children = []) =>\n  createField('toggle-field', props, {\n    type: 'checkbox',\n    checked: false\n  }, (fieldProps) => h('label', {\n\n  }, [\n    h('input', fieldProps),\n    h('span', {\n      class: 'osjs-toggle-input'\n    }),\n    h('span', {\n      class: 'osjs-toggle-label'\n    }, [\n      props.label || '',\n      ...children\n    ])\n  ]), ev => [props.type === 'radio'\n    ? parseValue(ev.target.value)\n    : !!ev.target.checked]);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {createField} from '../element';\n\n/**\n * A range field\n * @param {Object} props Properties\n * @param {string} [props.min] Minimum value\n * @param {string} [props.max] Maximum value\n * @param {string} [props.value] Value\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const RangeField = (props = {}, children = []) =>\n  createField('range-field', props, {\n    type: 'range'\n  }, (fieldProps) => h('input', fieldProps));\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\nimport nestable from 'hyperapp-nestable';\n\nconst view = (state, actions) => (props, children) => {\n  return h(Element, Object.assign({}, props.box || {}, {\n    class: ['osjs-gui-expander-wrapper']\n  }), [\n    h('div', {\n      class: 'osjs-gui-expander-header',\n      onclick: ev => actions.ontoggle({\n        ev,\n        active: !state.active,\n        ontoggle: props.ontoggle\n      })\n    }, [\n      h('div', {\n        class: 'osjs-gui-expander-header-icon',\n        'data-active': String(state.active)\n      }),\n      h('div', {\n        class: 'osjs-gui-expander-header-label'\n      }, props.label)\n    ]),\n    h('div', {\n      class: 'osjs-gui-expander-content',\n      style: {\n        display: state.active === false ? 'none' : undefined\n      }\n    }, children)\n  ]);\n};\n\nconst inner = nestable({\n  active: true\n}, {\n  init: props => ({\n    ative: props.active !== false\n  }),\n  ontoggle: ({ev, active, ontoggle}) => {\n    const cb = ontoggle || function() {};\n    cb(ev, active);\n    return {active};\n  }\n}, view, 'div');\n\n/**\n * A status bar\n * @param {Object} props Properties\n * @param {boolean} [props.active] Active state\n * @param {Function} [props.ontoggle] Toggle callback => (ev, active)\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const Expander = (props, children) =>\n  h(inner, Object.assign({}, props, {\n    class: 'osjs-gui osjs-gui-expander'\n  }), children);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport {Element} from './Element';\n\n/**\n * A label element\n * @param {Object} props Properties\n * @param {string} [props.text] Label Text\n * @param {string} [props.placement] Placement\n * @param {string} [props.for] The \"for\" attribute\n * @param {BoxProperties} [props.box] Box Properties\n * @param {h[]} children Children\n */\nexport const Label = (props = {}, children = []) => {\n  const placement = props.placement || 'top';\n  const text = props.text || '';\n\n  const elementProps = Object.assign({\n    class: ['osjs-gui-field-label', 'osjs-gui-field-label-on-' + placement]\n  }, props.box || {});\n\n  return h(Element, elementProps, [\n    h('label', {for: props.for}, text),\n    children\n  ]);\n};\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {Menu} from './components/Menu';\n\n/*\n * Makes sure sub-menus stays within viewport\n */\nconst clampSubMenu = (root, ev) => {\n  let ul = ev.target.querySelector('ul');\n  if (!ul) {\n    return;\n  }\n\n  // FIXME: Safari reports wrong item\n  if (ul.classList.contains('osjs-gui-menu-container')) {\n    ul = ul.parentNode.parentNode;\n  }\n\n  if (!ul || !ul.offsetParent) {\n    return;\n  }\n\n  ul.classList.remove('clamp-right');\n\n  const rect = ul.getBoundingClientRect();\n  if (rect.right > root.offsetWidth) {\n    ul.classList.add('clamp-right');\n  }\n};\n\n/*\n * Makes sure menu stays within viewport\n */\nconst clampMenu = (root, el, currentPosition) => {\n  const result = {};\n  const bottom = currentPosition.top + el.offsetHeight;\n  const right = currentPosition.left + el.offsetWidth;\n  const offY = root.offsetHeight - currentPosition.top;\n  const offX = root.offsetWidth - currentPosition.left;\n  const overflowRight = right > root.offsetWidth;\n  const overflowBottom = bottom > root.offsetHeight;\n\n  if (overflowBottom) {\n    if (root.offsetHeight > el.offsetHeight) {\n      result.top = root.offsetHeight - el.offsetHeight - offY;\n    }\n  }\n\n  if (overflowRight) {\n    result.left = root.offsetWidth - el.offsetWidth - offX;\n  }\n\n  return (overflowBottom || overflowRight) ? result : null;\n};\n\n/*\n * Context Menu view\n */\nconst view = callback => (props, actions) => h(Menu, {\n  position: props.position,\n  visible: props.visible,\n  menu: props.menu,\n  onclick: callback,\n  onshow: actions.onshow\n});\n\nconst timeout = fn => {\n  fn();\n  return setTimeout(fn, 100);\n};\n\n/**\n * ContextMenu Class\n *\n * @desc Handles a Menu/ContextMenu globally for OS.js\n */\nexport class ContextMenu {\n\n  constructor(core) {\n    this.core = core;\n    this.callback = () => {};\n    this.actions = null;\n    this.$element = document.createElement('div');\n  }\n\n  destroy() {\n    this.callback = null;\n    this.actions = null;\n  }\n\n  /**\n   * Initializes the Menu Hyperapp\n   */\n  init() {\n    let clampTimeout;\n\n    this.$element.className = 'osjs-system-context-menu';\n    this.core.$root.appendChild(this.$element);\n\n    let isActive = false;\n\n    this.actions = app({\n      visible: false,\n      menu: [],\n      position: {\n        top: 0,\n        left: 0\n      }\n    }, {\n      clamp: (el) => props => {\n        el = el || document.querySelector('#osjs-context-menu');\n        clearTimeout(clampTimeout);\n\n        if (el) {\n          const root = this.core.$root;\n          const newPosition = clampMenu(root, el, props.position);\n          if (newPosition) {\n            return {position: newPosition};\n          }\n        }\n\n        return {};\n      },\n      onshow: (ev) => props => {\n        clampTimeout = timeout(() => clampSubMenu(this.core.$root, ev));\n      },\n      show: (options) => (props, actions) => {\n        let {menu, position, toggle} = options;\n        if (toggle && isActive) {\n          return actions.hide();\n        } else if (position instanceof Event) {\n          position = {left: position.clientX, top: position.clientY};\n        } else if (position instanceof Element) {\n          const box = position.getBoundingClientRect();\n          position = {\n            left: box.left,\n            top: box.top + box.height\n          };\n        }\n\n        this.callback = (child, ev, iter) => {\n          if (options.callback) {\n            options.callback(child, ev);\n          }\n\n          if (iter.closeable !== false) {\n            actions.hide();\n          }\n        };\n\n        isActive = true;\n        this.onclose = options.onclose;\n\n        timeout(() => actions.clamp());\n\n        return {\n          visible: true,\n          menu: menu || [],\n          position: position || {top: 0, left: 0}\n        };\n      },\n      hide: () => props => {\n        if (isActive) {\n          setTimeout(() => (isActive = false), 0);\n        }\n        if (this.onclose) {\n          this.onclose();\n        }\n        this.onclose = null;\n        this.callback = null;\n\n        return {visible: false};\n      }\n    }, view((...args) => {\n      if (!this.core.destroyed) {\n        if (this.callback) {\n          this.callback(...args);\n        }\n      }\n    }), this.$element);\n  }\n\n  /**\n   * Show the menu\n   */\n  show(...args) {\n    return this.actions ? this.actions.show(...args) : null;\n  }\n\n  /**\n   * Hide the menu\n   */\n  hide(...args) {\n    return this.actions ? this.actions.hide(...args) : null;\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ContextMenu} from './contextmenu.js';\n\n/*\n * Check if a target allows for context menu\n */\nconst validContextMenuTarget = ev => {\n  const target = ev.target;\n  let isValid = target.tagName === 'TEXTAREA';\n  if (!isValid && target.tagName === 'INPUT') {\n    isValid = ['text', 'password', 'number', 'email'].indexOf(target.type) !== -1;\n  }\n\n  return isValid;\n};\n\n/**\n * OS.js GUI Service Provider\n *\n * @desc Provides wrapper services around GUI features\n */\nexport class GUIServiceProvider {\n\n  constructor(core) {\n    this.core = core;\n    this.contextmenu = new ContextMenu(core);\n  }\n\n  destroy() {\n    const menu = document.getElementById('osjs-context-menu');\n    if (menu) {\n      menu.remove();\n    }\n\n    this.contextmenu.destroy();\n  }\n\n  async init() {\n    const contextmenuApi = {\n      show: (...args) => this.contextmenu.show(...args),\n      hide: (...args) => this.contextmenu.hide(...args)\n    };\n\n    this.core.instance('osjs/contextmenu', (...args) => {\n      if (args.length) {\n        return contextmenuApi.show(...args);\n      }\n\n      return contextmenuApi;\n    });\n\n    this.core.$root.addEventListener('contextmenu', (ev) => {\n      if (validContextMenuTarget(ev)) {\n        return;\n      }\n\n      ev.stopPropagation();\n      ev.preventDefault();\n    });\n  }\n\n  start() {\n    const callback = ev => {\n      const menu = document.getElementById('osjs-context-menu');\n      const hit = menu && menu.contains(ev.target);\n\n      if (!hit && this.contextmenu) {\n        this.contextmenu.hide();\n      }\n    };\n\n    this.core.$root.addEventListener('click', callback, true);\n    this.core.once('destroy', () => {\n      this.core.$root.removeEventListener('click', callback, true);\n    });\n\n    this.contextmenu.init();\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h} from 'hyperapp';\nimport merge from 'deepmerge';\nimport plain from 'is-plain-object';\nimport {Box, Button, Toolbar} from '@osjs/gui';\n\nlet dialogCount = 0;\n\n/*\n * Default button attributes\n */\nconst defaultButtons = (_) => ({\n  ok: {label: _('LBL_OK'), positive: true},\n  close: {label: _('LBL_CLOSE')},\n  cancel: {label: _('LBL_CANCEL')},\n  yes: {label: _('LBL_YES'), positive: true},\n  no: {label: _('LBL_NO')}\n});\n\n/*\n * Creates a button from name\n */\nconst defaultButton = (n, _) => {\n  const defs = defaultButtons(_);\n  if (defs[n]) {\n    return Object.assign({}, {\n      name: n\n    }, defs[n]);\n  }\n\n  return {label: n, name: n};\n};\n\n/*\n * Creates options\n */\nconst createOptions = (options, args) =>\n  merge({\n    id: null,\n    className: 'unknown',\n    defaultValue: null,\n    buttons: [],\n    sound: null,\n    window: {\n      id: options.id || 'Dialog_' + String(dialogCount),\n      title: 'Dialog',\n      attributes: {\n        gravity: 'center',\n        resizable: false,\n        maximizable: false,\n        minimizable: false,\n        sessionable: false,\n        classNames: [\n          'osjs-dialog',\n          `osjs-${options.className || 'unknown'}-dialog`\n        ],\n        minDimension: {\n          width: 300,\n          height: 100\n        },\n      }\n    }\n  }, options, {\n    isMergeableObject: plain\n  });\n\n/**\n * OS.js default Dialog implementation\n *\n * Creates a Window with predefined content and actions(s)\n */\nexport default class Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {Object} options Dialog options (including Window)\n   * @param {Object} [options.defaultValue] Default callback value\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, options, callback) {\n    this.core = core;\n    this.args = args;\n    this.callback = callback || function() {};\n    this.options = createOptions(options, args);\n    this.win = null;\n    this.value = undefined;\n    this.calledBack = false;\n\n    const _ = core.make('osjs/locale').translate;\n\n    this.buttons = this.options.buttons.map(n =>\n      typeof n === 'string'\n        ? defaultButton(n, _)\n        : {\n          label: n.label || 'button',\n          name: n.name || 'unknown'\n        });\n\n    dialogCount++;\n  }\n\n  /**\n   * Destroys the dialog\n   */\n  destroy() {\n    if (this.win) {\n      this.win.destroy();\n    }\n\n    this.win = null;\n    this.callback = null;\n  }\n\n  /**\n   * Renders the dialog\n   * @param {Function} cb Callback from window\n   */\n  render(options, cb) {\n    const opts = merge(this.options.window || {}, options, {\n      isMergeableObject: plain\n    });\n\n    this.win = this.core.make('osjs/window', opts);\n\n    this.win.on('keydown', (ev, win) => {\n      if (ev.keyCode === 27) {\n        this.emitCallback(this.getNegativeButton(), null, true);\n      }\n    });\n\n    this.win.on('dialog:button', (name, ev) => {\n      this.emitCallback(name, ev, true);\n    });\n\n    this.win.on('destroy', () => {\n      this.emitCallback('destroy');\n    });\n\n    this.win.on('close', () => {\n      this.emitCallback('cancel', undefined, true);\n    });\n\n    this.win.on('render', () => {\n      // this.win.resizeFit();\n      this.win.focus();\n\n      const focusButton = this.getNegativeButton();\n      const btn = focusButton ? this.win.$content.querySelector(`button[name=${focusButton}]`) : null;\n      if (btn) {\n        btn.focus();\n      }\n\n      this.playSound();\n    });\n\n    this.win.init();\n    this.win.render(cb);\n    this.win.focus();\n\n    return this;\n  }\n\n  /**\n   * Creates the default view\n   * @param {Object[]} children Child nodes\n   * @param {Object} [state] Pass on application state (mainly used for buttons)\n   * @return {Object} Virtual dom node\n   */\n  createView(children, state = {}) {\n    return h(Box, {grow: 1, shrink: 1}, [\n      ...children,\n      h(Toolbar, {class: 'osjs-dialog-buttons'}, [\n        ...this.createButtons(state.buttons || {})\n      ])\n    ]);\n  }\n\n  /**\n   * Gets the button (virtual) DOM elements\n   * @param {Object} [states] Button states\n   * @return {Object[]} Virtual dom node children list\n   */\n  createButtons(states = {}) {\n    const onclick = (n, ev) => {\n      this.win.emit('dialog:button', n, ev);\n    };\n\n    return this.buttons.map(b => h(Button, Object.assign({}, {\n      disabled: states[b.name] === false,\n      onclick: ev => onclick(b.name, ev)\n    }, b)));\n  }\n\n  /**\n   * Emits the callback\n   * @param {String} name Button or action name\n   * @param {Event} [ev] Browser event reference\n   * @param {Boolean} [close=false] Close dialog\n   */\n  emitCallback(name, ev, close = false) {\n    if (this.calledBack) {\n      return;\n    }\n    this.calledBack = true;\n\n    console.debug('Callback in dialog', name, ev, close);\n\n    this.callback(name, this.getValue(), ev);\n\n    if (close) {\n      this.destroy();\n    }\n  }\n\n  /**\n   */\n  playSound() {\n    if (this.core.has('osjs/sounds')) {\n      const snd = this.options.sound;\n      if (snd) {\n        this.core.make('osjs/sounds').play(snd);\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Gets the first positive button\n   * @return {String|undefined}\n   */\n  getPositiveButton() {\n    const found = this.buttons.find(b => b.positive === true);\n    return found ? found.name : null;\n  }\n\n  /**\n   * Gets the first negative button\n   * @return {String|undefined}\n   */\n  getNegativeButton() {\n    const found = this.buttons.find(b => !b.positive);\n    return found ? found.name : null;\n  }\n\n  /**\n   * Gets the dialog result value\n   * @return {*}\n   */\n  getValue() {\n    return typeof this.value === 'undefined'\n      ? this.options.defaultValue\n      : this.value;\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {Box, TextareaField} from '@osjs/gui';\nimport Dialog from '../dialog';\n\n/**\n * Default OS.js Alert Dialog\n */\nexport default class AlertDialog extends Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {String} [args.title='Alert'] Dialog title\n   * @param {String} [args.message=''] Dialog message\n   * @param {String} [args.type='info'] Alert type (info/warning/error)\n   * @param {String} [args.sound='bell'] Sound\n   * @param {Error|*} [args.error] When 'alert' type is set this error stack or message will appear in a textbox\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, callback) {\n    args = Object.assign({}, {\n      title: 'Alert',\n      type: 'info',\n      message: ''\n    }, args);\n\n    if (typeof args.sound === 'undefined') {\n      args.sound = args.type === 'error' ? 'bell' : 'message';\n    }\n\n    super(core, args, {\n      className: 'alert',\n      sound: args.sound,\n      window: {\n        title: args.title,\n        attributes: {\n          ontop: args.type === 'error',\n          minDimension: {\n            width: 400,\n            height: 220\n          }\n        }\n      },\n      buttons: ['close']\n    }, callback);\n  }\n\n  render(options) {\n    super.render(options, ($content) => {\n      const children = [\n        h('div', {class: 'osjs-dialog-message'}, String(this.args.message))\n      ];\n\n      if (this.args.type === 'error') {\n        const {error} = this.args;\n        const msg = error instanceof Error ? `${error.message}\\n\\n${error.stack || 'No stack'}` : error;\n\n        children.push(h(TextareaField, {value: msg, readonly: true, placeholder: this.args.message}));\n      }\n\n      app({}, {}, (state, actions) => this.createView([\n        h(Box, {grow: 1}, children)\n      ]), $content);\n    });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport Dialog from '../dialog';\nimport {Box} from '@osjs/gui';\n\n/**\n * Default OS.js Confirm Dialog\n */\nexport default class ConfirmDialog extends Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {String} [args.title] Dialog title\n   * @param {String} [args.message] Dialog message\n   * @param {Boolean} [args.yesno=true] Yes/No or Ok/Cancel\n   * @param {String[]} [args.buttons] Custom buttons\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, callback) {\n    const yesno = typeof args.yesno === 'undefined' || args.yesno === true;\n\n    const buttons = args.buttons instanceof Array\n      ? args.buttons\n      : yesno ? ['yes', 'no'] : ['ok', 'cancel'];\n\n    super(core, args, {\n      className: 'confirm',\n      window: {\n        title: args.title || 'Confirm',\n        attributes: {\n          minDimension: {\n            height: 140\n          }\n        }\n      },\n      buttons\n    }, callback);\n  }\n\n  render(options) {\n    super.render(options, ($content) => {\n      app({}, {}, (state, actions) => this.createView([\n        h(Box, {grow: 1}, [\n          h('div', {class: 'osjs-dialog-message'}, String(this.args.message))\n        ])\n      ]), $content);\n    });\n  }\n\n}\n\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport Dialog from '../dialog';\nimport {Box, TextField} from '@osjs/gui';\n\n/**\n * Default OS.js Prompt Dialog\n */\nexport default class PromptDialog extends Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {String} [args.title] Dialog title\n   * @param {String} [args.message] Dialog message\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, callback) {\n    super(core, Object.assign({}, {\n      value: '',\n      placeholder: '',\n    }, args), {\n      className: 'prompt',\n      buttons: ['ok', 'cancel'],\n      window: {\n        title: args.title || 'Prompt',\n        attributes: {\n          minDimension: {\n            width: 500,\n            height: 200\n          }\n        }\n      }\n    }, callback);\n\n    this.value = this.args.value;\n  }\n\n  render(options) {\n    super.render(options, ($content) => {\n      app({\n        value: this.args.value\n      }, {\n        setValue: value => state => {\n          this.value = value;\n          return {value};\n        }\n      }, (state, actions) => this.createView([\n        h(Box, {grow: 1, padding: false}, [\n          h(Box, {class: 'osjs-dialog-message'}, String(this.args.message)),\n          h(TextField, {\n            value: state.value,\n            placeholder: this.args.placeholder,\n            onenter: (ev, value) => {\n              actions.setValue(value);\n\n              this.emitCallback(this.getPositiveButton(), ev, true);\n            },\n            oninput: (ev, value) => actions.setValue(value)\n          })\n        ])\n      ]), $content);\n    });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport Dialog from '../dialog';\nimport {Box, Progressbar} from '@osjs/gui';\n\n/**\n * Default OS.js Progress Dialog\n */\nexport default class ProgressDialog extends Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {String} [args.title] Dialog title\n   * @param {String} [args.message] Dialog message\n   * @param {String} [args.status] Dialog status message\n   * @param {String} [args.progress] Initial progress value\n   * @param {String[]} [args.buttons] Override dialog buttons\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, callback) {\n    super(core, args, {\n      className: 'progress',\n      buttons: args.buttons || ['cancel'],\n      window: {\n        title: args.title || 'Progress',\n        attributes: {\n          minDimension: {\n            width: 500,\n            height: 200\n          }\n        }\n      }\n    }, callback);\n\n    this.value = this.args.progress || 0;\n    this.status = this.args.status || '';\n    this.app = null;\n  }\n\n  render(options) {\n    super.render(options, ($content) => {\n      this.app = app({\n        progress: this.value,\n        status: this.status\n      }, {\n        setProgress: progress => state => ({progress}),\n        setStatus: status => state => ({status})\n      }, (state, actions) => this.createView([\n        h(Box, {grow: 1, shrink: 1}, [\n          h('div', {class: 'osjs-dialog-message'}, String(this.args.message)),\n          h('div', {class: 'osjs-dialog-status'}, String(state.status)),\n          h(Progressbar, {value: state.progress})\n        ])\n      ]), $content);\n    });\n  }\n\n  /**\n   * Set the progress value\n   * @param {Number} value A value between 0 and 100\n   */\n  setProgress(value) {\n    this.app.setProgress(value);\n  }\n\n  /**\n   * Set the status text\n   * @param {String} status Status text\n   */\n  setStatus(status) {\n    this.app.setStatus(status);\n  }\n\n}\n\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport Dialog from '../dialog';\nimport {\n  Box,\n  BoxContainer,\n  TextField,\n  RangeField\n} from '@osjs/gui';\n\n/*\n * Creates a palette canvas\n */\nconst createPalette = (width, height) => {\n  let gradient;\n\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n\n  const ctx = canvas.getContext('2d');\n\n  gradient = ctx.createLinearGradient(0, 0, ctx.canvas.width, 0);\n  gradient.addColorStop(0,    'rgb(255,   0,   0)');\n  gradient.addColorStop(0.15, 'rgb(255,   0, 255)');\n  gradient.addColorStop(0.33, 'rgb(0,     0, 255)');\n  gradient.addColorStop(0.49, 'rgb(0,   255, 255)');\n  gradient.addColorStop(0.67, 'rgb(0,   255,   0)');\n  gradient.addColorStop(0.84, 'rgb(255, 255,   0)');\n  gradient.addColorStop(1,    'rgb(255,   0,   0)');\n\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n  gradient = ctx.createLinearGradient(0, 0, 0, ctx.canvas.height);\n  gradient.addColorStop(0,   'rgba(255, 255, 255, 1)');\n  gradient.addColorStop(0.5, 'rgba(255, 255, 255, 0)');\n  gradient.addColorStop(0.5, 'rgba(0,     0,   0, 0)');\n  gradient.addColorStop(1,   'rgba(0,     0,   0, 1)');\n\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n  return canvas;\n};\n\n/*\n * Converts hex to its component values\n */\nconst hexToComponent = hex => {\n  const rgb = parseInt(hex.replace('#', ''), 16);\n  const val = {};\n  val.r = (rgb & (255 << 16)) >> 16;\n  val.g = (rgb & (255 << 8)) >> 8;\n  val.b = (rgb & 255);\n  return val;\n};\n\n/*\n * Convert component values into hex\n */\nconst componentToHex = ({r, g, b}) => {\n  const hex = [\n    parseInt(r, 10).toString(16),\n    parseInt(g, 10).toString(16),\n    parseInt(b, 10).toString(16)\n  ].map(i => String(i).length === 1 ? '0' + String(i) : i);\n\n  return '#' + hex.join('').toUpperCase();\n};\n\n/*\n * Gets the color of a clicked palette area\n */\nconst colorFromClick = (ev, canvas) => {\n  const {clientX, clientY} = ev;\n  const box = canvas.getBoundingClientRect();\n  const cx = clientX - box.x;\n  const cy = clientY - box.y;\n  const ctx = canvas.getContext('2d');\n  const {data} = ctx.getImageData(cx, cy, 1, 1);\n  const [r, g, b] = data;\n  const hex = componentToHex({r, g, b});\n  return {r, g, b, hex};\n};\n\n/**\n * Default OS.js Color Dialog\n */\nexport default class ColorDialog extends Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {String} [args.title] Dialog title\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, callback) {\n    super(core, args, {\n      className: 'color',\n      buttons: ['ok', 'cancel'],\n      window: {\n        title: args.title || 'Select Color',\n        attributes: {\n          minDimension: {\n            width: 500,\n            height: 260\n          }\n        }\n      }\n    }, callback);\n\n    this.value = {r: 0, g: 0, b: 0, hex: '#000000'};\n\n    let color = args.color;\n    if (color) {\n      if (typeof color === 'string') {\n        if (color.charAt(0) !== '#') {\n          color = '#' + color;\n        }\n\n        this.value = Object.assign({}, this.value, hexToComponent(args.color));\n        this.value.hex = args.color;\n      } else {\n        this.value = Object.assign({}, this.value, args.color);\n        this.value.hex = componentToHex(this.value);\n      }\n    }\n  }\n\n  render(options) {\n    super.render(options, ($content) => {\n      const canvas = createPalette(98, 98);\n      const initialState = Object.assign({}, this.value);\n      const initialActions = {\n        setColor: color => state => color,\n        setComponent: ({color, value}) => state => {\n          this.value[color] = value;\n          return {[color]: value};\n        },\n        updateHex: () => state => {\n          const hex = componentToHex(state);\n          this.value.hex = hex;\n          return {hex};\n        }\n      };\n\n      const rangeContainer = (c, v, actions) =>\n        h(Box, {orientation: 'vertical', align: 'center', padding: false}, [\n          h(Box, {shrink: 1}, h('div', {}, c.toUpperCase())),\n          h(RangeField, {\n            box: {grow: 1},\n            min: 0,\n            max: 255,\n            value: v,\n            oncreate: el => (el.value = v),\n            oninput: (ev, value) => {\n              actions.setComponent({color: c, value});\n              actions.updateHex();\n            }\n          }),\n          h(TextField, {\n            box: {shrink: 1, basis: '5em'},\n            value: String(v),\n            oninput: (ev, value) => {\n              actions.setComponent({color: c, value});\n              actions.updateHex();\n            }\n          })\n        ]);\n\n      const a = app(initialState, initialActions, (state, actions) => this.createView([\n        h(Box, {orientation: 'vertical', grow: 1, shrink: 1}, [\n          h(BoxContainer, {orientation: 'horizontal'}, [\n            h('div', {\n              class: 'osjs-gui-border',\n              style: {display: 'inline-block'},\n              oncreate: el => el.appendChild(canvas)\n            }),\n            h(TextField, {\n              value: state.hex,\n              style: {width: '100px', color: state.hex}\n            })\n          ]),\n          h(Box, {padding: false, grow: 1, shrink: 1}, [\n            rangeContainer('r', state.r, actions),\n            rangeContainer('g', state.g, actions),\n            rangeContainer('b', state.b, actions)\n          ])\n        ])\n      ]), $content);\n\n      canvas.addEventListener('click', ev => {\n        const color = colorFromClick(ev, canvas);\n        if (color) {\n          a.setColor(color);\n          a.updateHex();\n        }\n      });\n    });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport Dialog from '../dialog';\nimport {\n  Toolbar,\n  SelectField,\n  TextareaField\n} from '@osjs/gui';\n\n/**\n * Default OS.js Font Dialog\n */\nexport default class FontDialog extends Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {number} [args.minSize=6] Minimum size\n   * @param {number} [args.maxSize] Maximum size\n   * @param {string} [args.unit=px] Unit\n   * @param {string} [args.name] Initial font name\n   * @param {number} [args.size] Initial font size\n   * @param {string} [args.text] What text to preview\n   * @param {string[]} [args.controls] What controls to show\n   * @param {string[]} [args.fonts] List of fonts\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, callback) {\n    args = Object.assign({}, {\n      title: 'Choose Font',\n      minSize: 6,\n      maxSize: 48,\n      unit: 'px',\n      name: 'Roboto',\n      size: 10,\n      style: 'regular',\n      text: 'The quick brown fox jumps over the lazy dog',\n      controls: ['size', 'name', 'style'],\n      fonts: [\n        'Roboto',\n        'arial',\n        'sans-serif',\n        'monospace'\n      ]\n    }, args);\n\n    super(core, args, {\n      className: 'info',\n      window: {\n        title: args.title,\n        attributes: {\n          minDimension: {\n            width: 400,\n            height: 200\n          }\n        }\n      },\n      buttons: ['ok', 'cancel']\n    }, callback);\n\n    this.value = {\n      name: this.args.name,\n      size: this.args.size,\n      style: this.args.style\n    };\n  }\n\n  render(options) {\n    const fontSizes = Array(this.args.maxSize - this.args.minSize)\n      .fill(0)\n      .map((v, i) => this.args.minSize + i)\n      .reduce((o, i) => Object.assign(o, {[i]: i}), {});\n\n    const fontNames = this.args.fonts\n      .reduce((o, i) => {\n        const k = i.toLowerCase();\n        return Object.assign(o, {[k]: i});\n      }, {});\n\n    const fontStyles = {\n      'regular': 'Regular',\n      'bold': 'Bold',\n      'italic': 'Italic'\n    };\n\n    const initialState = Object.assign({}, this.value);\n    const initialActions = {\n      setSize: size => state => {\n        this.value.size = size;\n        return {size};\n      },\n      setFont: name => state => {\n        this.value.name = name;\n        return {name};\n      },\n      setStyle: style => state => {\n        this.value.style = style;\n        return {style};\n      }\n    };\n\n    super.render(options, ($content) => {\n      app(initialState, initialActions, (state, actions) => this.createView([\n        h(Toolbar, {}, [\n          h(SelectField, {\n            box: {grow: 1, style: {display: this.args.controls.indexOf('size') !== -1 ? 'flex' : 'none'}},\n            value: state.size,\n            choices: fontSizes,\n            onchange: (ev, v) => actions.setSize(v)\n          }),\n          h(SelectField, {\n            box: {grow: 1, style: {display: this.args.controls.indexOf('name') !== -1 ? 'flex' : 'none'}},\n            value: state.name.toLowerCase(),\n            choices: fontNames,\n            onchange: (ev, v) => actions.setFont(v)\n          }),\n          h(SelectField, {\n            box: {grow: 1, style: {display: this.args.controls.indexOf('style') !== -1 ? 'flex' : 'none'}},\n            value: state.size,\n            choices: fontStyles,\n            onchange: (ev, v) => actions.setStyle(v)\n          })\n        ]),\n        h(TextareaField, {\n          box: {grow: 1},\n          value: this.args.text,\n          style: {\n            fontFamily: state.name,\n            fontSize: `${state.size}${this.args.unit}`,\n            fontWeight: state.style === 'bold' ? 'bold' : 'normal',\n            fontStyle: state.style !== 'bold' ? state.style : 'normal',\n            height: '4rem',\n            overflow: 'hidden',\n            whiteSpace: 'nowrap'\n          }\n        })\n      ]), $content);\n    });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport Dialog from '../dialog';\nimport {\n  TextField,\n  SelectField,\n  listView\n} from '@osjs/gui';\n\nconst getMountpoint = str => str\n  .split(':')[0] + ':/';\n\nconst getMountpoints = core => core.make('osjs/fs')\n  .mountpoints(true)\n  .filter(mount => {\n    return !(mount.attributes.readOnly && mount.attributes.visibility === 'restricted');\n  })\n  .reduce((mounts, iter) => Object.assign(mounts, {\n    [iter.root]: iter.label\n  }), {});\n\n/**\n * Default OS.js File Dialog\n */\nexport default class FileDialog extends Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {String} [args.title] Dialog title\n   * @param {String} [args.type='open'] Dialog type (open/save)\n   * @param {String} [args.path] Current path\n   * @param {String} [args.filetype='file'] Dialog filetype (file/directory)\n   * @param {String} [args.filename] Current filename\n   * @param {String[]} [args.mime] Mime filter\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, callback) {\n    args = Object.assign({}, {\n      title: null,\n      type: 'open',\n      filetype: 'file',\n      path: core.config('vfs.defaultPath'),\n      filename: null,\n      mime: []\n    }, args);\n\n    if (typeof args.path === 'string') {\n      args.path = {path: args.path};\n    }\n\n    try {\n      args.path = Object.assign({\n        isDirectory: true,\n        filename: args.path.path.split(':/')[1].split('/').pop() || ''\n      }, args.path);\n    } catch (e) {\n      console.warn(e);\n    }\n\n    const _ = core.make('osjs/locale').translate;\n    const title = args.title\n      ? args.title\n      : (args.type === 'open' ? _('LBL_OPEN') : _('LBL_SAVE'));\n\n    super(core, args, {\n      className: 'file',\n      window: {\n        title,\n        attributes: {\n          resizable: true\n        },\n        dimension: {\n          width: 400,\n          height: 400\n        }\n      },\n      buttons: ['ok', 'cancel']\n    }, callback);\n  }\n\n  render(options) {\n    const getFileIcon = file => this.core.make('osjs/fs').icon(file);\n    const startingLocation = this.args.path;\n\n    super.render(options, ($content) => {\n      const a = app({\n        mount: startingLocation ? getMountpoint(startingLocation.path) : null,\n        filename: this.args.filename,\n        listview: listView.state({\n          columns: [{\n            label: 'Name'\n          }, {\n            label: 'Type'\n          }, {\n            label: 'Size'\n          }]\n        }),\n        buttons: {\n          ok: this.args.type === 'open' && this.args.filetype === 'directory'\n            ? true\n            : !!this.args.filename\n        }\n      }, {\n        _readdir: ({path, files}) => (state, actions) => {\n          const listview = state.listview;\n          listview.selectedIndex = -1;\n          listview.rows = files.map(file => ({\n            columns: [{\n              label: file.filename,\n              icon: getFileIcon(file)\n            }, file.mime, file.humanSize],\n            data: file\n          }));\n\n          return {path, listview};\n        },\n\n        setButtonState: btn => state => ({\n          buttons: Object.assign({}, state.buttons, btn)\n        }),\n\n        setMountpoint: mount => (state, actions) => {\n          actions.setPath({path: mount});\n\n          return {mount};\n        },\n\n        setPath: file => async (state, actions) => {\n          const files = await this.core.make('osjs/vfs')\n            .readdir(file, {\n              filter: (item) => {\n                if (this.args.filetype === 'directory') {\n                  return item.isDirectory === true;\n                } else if (this.args.mime.length) {\n                  return item.mime\n                    ? this.args.mime.some(test => (new RegExp(test)).test(item.mime))\n                    : true;\n                }\n\n                return true;\n              }\n            });\n\n          this.args.path = file;\n\n          actions._readdir({path: file.path, files});\n\n          if (this.args.filetype === 'file') {\n            actions.setButtonState({ok: this.args.type === 'save' ? !!this.args.filename : false});\n          }\n        },\n\n        setFilename: filename => state => ({filename}),\n\n        listview: listView.actions({\n          select: ({data}) => {\n            if (data.isFile) {\n              a.setFilename(data.filename);\n            }\n            this.value = data.isFile ? data : null;\n\n            if (this.args.filetype === 'file' && data.isFile) {\n              a.setButtonState({ok: true});\n            }\n          },\n          activate: ({data, ev}) => {\n            if (data.isDirectory) {\n              a.setPath(data);\n            } else {\n              this.value = data.isFile ? data : null;\n              this.emitCallback(this.getPositiveButton(), ev, true);\n            }\n          },\n        })\n      }, (state, actions) => this.createView([\n        h(SelectField, {\n          choices: getMountpoints(this.core),\n          onchange: (ev, val) => a.setMountpoint(val),\n          value: state.mount\n        }),\n        h(listView.component(Object.assign({\n          box: {grow: 1, shrink: 1}\n        }, state.listview), actions.listview)),\n        h(TextField, {\n          placeholder: this.args.filetype === 'directory' ? 'Directory Name' : 'File Name',\n          value: state.filename,\n          onenter: (ev, value) => this.emitCallback(this.getPositiveButton(), ev, true),\n          oninput: (ev) => {\n            const filename = ev.target.value;\n            actions.setButtonState({ok: !!filename});\n            actions.setFilename(filename);\n          },\n          box: {\n            style: {display: this.args.type === 'save' ? null : 'none'}\n          }\n        })\n      ], state), $content);\n\n      a.setPath(startingLocation);\n    });\n  }\n\n  emitCallback(name, ev, close = false) {\n    if (this.calledBack) {\n      return;\n    }\n\n    const file = this.getValue();\n    const next = () => super.emitCallback(name, ev, close);\n    const isSave = this.args.type === 'save';\n    const buttonCancel = name === 'cancel';\n    const hasVfs = this.core.has('osjs/vfs');\n\n    const confirm = callback => this.core.make('osjs/dialog', 'confirm', {\n      message: `Do you want to overwrite ${file.path}?`\n    }, {\n      parent: this.win,\n      attributes: {modal: true}\n    }, (btn) => {\n      if (btn === 'yes') {\n        callback();\n      }\n    });\n\n    if (file && isSave && hasVfs && !buttonCancel) {\n      this.core\n        .make('osjs/vfs')\n        .exists(file)\n        .then(exists => {\n          if (exists) {\n            confirm(() => next());\n          } else {\n            next();\n          }\n        })\n        .catch(error => {\n          console.error(error);\n          next();\n        });\n    } else {\n      next();\n    }\n  }\n\n  getValue() {\n    if (this.args.type === 'save') {\n      const {path} = this.args.path;\n      const filename = this.win.$content.querySelector('input[type=text]')\n        .value;\n\n      return filename\n        ? Object.assign({}, this.args.path, {\n          filename,\n          path: path.replace(/\\/?$/, '/') + filename\n        })\n        : undefined;\n    } else {\n      if (this.args.filetype === 'directory') {\n        return this.args.path;\n      }\n    }\n\n    return super.getValue();\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {SelectField, Box} from '@osjs/gui';\nimport Dialog from '../dialog';\n\n/**\n * Default OS.js Choice Dialog\n */\nexport default class ChoiceDialog extends Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {String} [args.title] Dialog title\n   * @param {String} [args.message] Dialog message\n   * @param {String} [args.value] Set default selected value\n   * @param {Map<String,*>} [args.choices] Choice map\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, callback) {\n    args = Object.assign({}, {\n      title: 'Choice',\n      message: '',\n      value: undefined,\n      choices: {}\n    }, args);\n\n    super(core, args, {\n      className: 'alert',\n      window: {\n        title: args.title,\n        attributes: {\n          ontop: args.type === 'error'\n        },\n        dimension: {\n          width: 400,\n          height: 200\n        }\n      },\n      buttons: ['ok', 'close']\n    }, callback);\n\n    this.value = typeof args.value !== 'undefined'\n      ? this.args.value\n      : Object.keys(this.args.choices)[0];\n  }\n\n  render(options) {\n    super.render(options, ($content) => {\n      app({\n        current: this.value\n      }, {\n        setCurrent: current => state => {\n          this.value = current;\n\n          return {current};\n        }\n      }, (state, actions) => this.createView([\n        h(Box, {grow: 1}, [\n          h('div', {class: 'osjs-dialog-message'}, String(this.args.message)),\n          h(SelectField, {\n            choices: this.args.choices,\n            value: state.current,\n            onchange: (ev, val) => actions.setCurrent(val)\n          })\n        ])\n      ]), $content);\n    });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {SelectField, ToggleField, Box} from '@osjs/gui';\nimport Dialog from '../dialog';\n\n/**\n * Default OS.js DefaultApplication Dialog\n */\nexport default class DefaultApplicationDialog extends Dialog {\n\n  /**\n   * Constructor\n   * @param {Core} core OS.js Core reference\n   * @param {Object} args Arguments given from service creation\n   * @param {String} [args.title] Dialog title\n   * @param {String} [args.message] Dialog message\n   * @param {*} [args.checked] Default checked state\n   * @param {*} [args.value] Default value\n   * @param {Map<String,*>} [args.choices] DefaultApplication map\n   * @param {Function} callback The callback function\n   */\n  constructor(core, args, callback) {\n    args = Object.assign({}, {\n      title: 'DefaultApplication',\n      message: '',\n      choices: {}\n    }, args);\n\n    super(core, args, {\n      className: 'alert',\n      window: {\n        title: args.title,\n        dimension: {\n          width: 400,\n          height: 200\n        }\n      },\n      buttons: ['ok', 'close']\n    }, callback);\n\n    this.value = {\n      value: args.value || Object.keys(this.args.choices)[0],\n      checked: args.checked === true\n    };\n\n  }\n\n  render(options) {\n    const setLocalState = (oldState, newState) => {\n      const state = Object.assign({}, oldState, newState);\n      this.value = state;\n      return state;\n    };\n\n    super.render(options, ($content) => {\n      app(this.value, {\n        setValue: value => state => setLocalState(state, {value}),\n        setChecked: checked => state => setLocalState(state, {checked})\n      }, (state, actions) => this.createView([\n        h(Box, {grow: 1}, [\n          h('div', {class: 'osjs-dialog-message'}, String(this.args.message)),\n          h(SelectField, {\n            choices: this.args.choices,\n            value: state.value,\n            onchange: (ev, val) => actions.setValue(val)\n          }),\n          h(ToggleField, {\n            label: this.args.label || 'Use as default',\n            checked: state.checked,\n            onchange: (ev, val) => actions.setChecked(val)\n          })\n        ])\n      ]), $content);\n    });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {app, h} from 'hyperapp';\nimport Dialog from '../dialog';\n\n/**\n * Custom OS.js Dialog\n */\nexport default class CustomDialog extends Dialog {\n\n  constructor(core, options, valueCallback, callback) {\n    super(core, {}, options, callback);\n\n    this.valueCallback = valueCallback;\n  }\n\n  render(render) {\n    return super.render({}, ($content, win) => render($content, win, this));\n  }\n\n  renderCustom(render, styles = {}) {\n    return this.render(($content, dialogWindow, dialog) => {\n      app({}, {}, () => {\n        return this.createView([\n          h('div', {\n            style: {\n              'flex-grow': 1,\n              'flex-shrink': 1,\n              position: 'relative',\n              ...styles\n            },\n            oncreate: $el => render($el, dialogWindow, dialog)\n          })\n        ]);\n      }, $content);\n    });\n  }\n\n  getValue() {\n    return this.valueCallback(this);\n  }\n\n}\n"],"sourceRoot":""}