{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/client/config.js","webpack:///./src/client/index.js","webpack:///./src/client/index.scss?fd06","webpack:///./src/client/src/adapters/auth/localstorage.js","webpack:///./src/client/src/adapters/auth/server.js","webpack:///./src/client/src/adapters/search/vfs.js","webpack:///./src/client/src/adapters/settings/localstorage.js","webpack:///./src/client/src/adapters/settings/server.js","webpack:///./src/client/src/adapters/ui/iconview.js","webpack:///./src/client/src/adapters/ui/login.js","webpack:///./src/client/src/adapters/ui/search.js","webpack:///./src/client/src/adapters/vfs/apps.js","webpack:///./src/client/src/adapters/vfs/null.js","webpack:///./src/client/src/adapters/vfs/system.js","webpack:///./src/client/src/application.js","webpack:///./src/client/src/auth.js","webpack:///./src/client/src/basic-application.js","webpack:///./src/client/src/clipboard.js","webpack:///./src/client/src/config.js","webpack:///./src/client/src/core.js","webpack:///./src/client/src/desktop.js","webpack:///./src/client/src/filesystem.js","webpack:///./src/client/src/locale/de_DE.js","webpack:///./src/client/src/locale/en_EN.js","webpack:///./src/client/src/locale/fa_FA.js","webpack:///./src/client/src/locale/fr_FR.js","webpack:///./src/client/src/locale/index.js","webpack:///./src/client/src/locale/nb_NO.js","webpack:///./src/client/src/locale/pt_BR.js","webpack:///./src/client/src/locale/ru_RU.js","webpack:///./src/client/src/locale/sl_SI.js","webpack:///./src/client/src/locale/sv_SE.js","webpack:///./src/client/src/locale/tr_TR.js","webpack:///./src/client/src/locale/vi_VN.js","webpack:///./src/client/src/locale/zh_CN.js","webpack:///./src/client/src/logger.js","webpack:///./src/client/src/login.js","webpack:///./src/client/src/middleware.js","webpack:///./src/client/src/notification.js","webpack:///./src/client/src/notifications.js","webpack:///./src/client/src/packages.js","webpack:///./src/client/src/providers/auth.js","webpack:///./src/client/src/providers/core.js","webpack:///./src/client/src/providers/desktop.js","webpack:///./src/client/src/providers/notifications.js","webpack:///./src/client/src/providers/settings.js","webpack:///./src/client/src/providers/vfs.js","webpack:///./src/client/src/search.js","webpack:///./src/client/src/session.js","webpack:///./src/client/src/settings.js","webpack:///./src/client/src/splash.js","webpack:///./src/client/src/styles/logo-blue-32x32.png","webpack:///./src/client/src/styles/wallpaper.png","webpack:///./src/client/src/tray.js","webpack:///./src/client/src/utils/colors.js","webpack:///./src/client/src/utils/desktop.js","webpack:///./src/client/src/utils/dnd.js","webpack:///./src/client/src/utils/dom.js","webpack:///./src/client/src/utils/fetch.js","webpack:///./src/client/src/utils/input.js","webpack:///./src/client/src/utils/locale.js","webpack:///./src/client/src/utils/packages.js","webpack:///./src/client/src/utils/preloader.js","webpack:///./src/client/src/utils/url.js","webpack:///./src/client/src/utils/vfs.js","webpack:///./src/client/src/utils/windows.js","webpack:///./src/client/src/vfs.js","webpack:///./src/client/src/websocket.js","webpack:///./src/client/src/window-behavior.js","webpack:///./src/client/src/window.js"],"names":["auth","window","osjsBooted","init","osjs","Core","config","register","CoreServiceProvider","DesktopServiceProvider","VFSServiceProvider","NotificationServiceProvider","SettingsServiceProvider","before","AuthServiceProvider","PanelServiceProvider","DialogServiceProvider","GUIServiceProvider","boot","addEventListener","localStorageAuth","core","options","login","values","Promise","resolve","serverAuth","request","endpoint","params","method","body","JSON","stringify","logout","VFSSearchAdapter","constructor","destroy","search","pattern","vfs","make","promises","mountpoints","map","mount","name","path","catch","error","logger","warn","all","then","lists","concat","localStorageSettings","prefix","clear","ns","localStorage","removeItem","save","settings","Object","keys","forEach","k","setItem","load","entries","filter","startsWith","v","getItem","kk","substr","length","parse","e","fromEntries","serverSettings","url","tapper","doubleTap","onDropAction","actions","ev","data","files","shortcut","validVfsDrop","addEntry","entry","uploadEntries","createLabelComputer","packages","f","getPackages","translate","n","translatableFlat","filename","mime","label","metadata","pkg","title","isRootElement","target","classList","contains","view","computeLabel","fileIcon","themeIcon","droppable","state","h","class","oncontextmenu","openContextMenu","onclick","selectEntry","index","oncreate","el","ondrop","droppedImage","isDroppingImage","shiftKey","openDropContextMenu","selected","ontouchstart","openEntry","ondblclick","src","icon","createShortcuts","root","readfile","writefile","read","pathJoin","contents","write","shortcuts","add","remove","splice","readDesktopFolder","readdir","supressError","showHiddenFiles","s","readShortcuts","results","DesktopIconView","EventEmitter","$root","iconview","parentNode","emit","_render","oldRoot","reload","render","document","createElement","className","$contents","appendChild","copy","unlink","mkdir","err","console","app","setEntries","createDropContextMenu","createFileContextMenu","createRootContextMenu","forceDialog","isDirectory","run","open","useDefault","dest","removeEntry","fromUI","applySettings","_createWatcher","on","_","position","menu","desktop","action","listener","args","currentPath","String","replace","watchPath","off","defaults","fontColorStyle","get","fontColor","backgroundColor","background","color","styles","system","invert","invertHex","custom","style","createAttributes","props","field","disabled","undefined","tagName","attributes","type","autocapitalize","autocomplete","value","createFields","fields","children","choices","c","current","createView","logo","backgroundImage","result","loading","push","stamp","header","indexOf","m","createSide","side","left","right","middle","formFields","display","onsubmit","submit","id","hidden","create","startHidden","$container","ee","a","setLoading","setError","preventDefault","Array","from","elements","reduce","o","msg","fs","resultView","r","i","onupdate","scrollIntoView","join","visible","placeholder","query","onblur","setTimeout","toggle","oninput","setQuery","onkeydown","keyCode","setPreviousIndex","setNextIndex","resetIndex","hide","onkeypress","status","$element","hyperapp","iter","setResults","querySelector","focus","adapter","pkgs","isFile","size","stat","nullAdapter","capabilities","ArrayBuffer","to","rename","exists","unmount","touch","getters","requester","fn","response","json","contentType","headers","arrayBuffer","methods","passthrough","formData","FormData","append","onProgress","xhr","encodeURIComponent","download","applications","applicationCount","getSettingsKey","Application","debug","defaultSettings","pid","sessionable","windowAutoFocus","windows","workers","requestOptions","destroyed","started","Date","sockets","list","ws","close","worker","terminate","foundIndex","findIndex","relaunch","w","getSession","forcePreload","restore","resource","uri","socket","Websocket","send","Worker","credentials","createWindow","found","find","Error","configWindows","applyOptions","loadOptionsFromConfig","instance","Window","merge","setPosition","setDimension","dimension","minimized","minimize","maximized","maximize","removeWindow","win","session","emitAll","defaultFilter","proc","filterFn","saveSettings","service","set","getApplications","destroyAll","defaultAdapters","server","createUi","defaultUi","Login","ui","createAdapter","reject","Auth","callback","shutdown","location","show","cb","autologin","username","password","enabled","cookie","Cookies","expires","sameSite","BasicApplication","mimeTypes","mimes","loadMimeTypes","saveMimeTypes","defaultFilename","file","getDialogOptions","rest","currentFile","defaultPath","basename","pathname","parent","modal","updateWindowTitle","_createTitle","setTitle","createDialog","opts","has","btn","item","_setFile","createNew","createSaveDialog","createOpenDialog","eventName","Clipboard","clipboard","RegExp","match","createUri","str","href","languages","en_EN","nb_NO","vi_VN","fr_FR","de_DE","sl_SI","zh_CN","fa_FA","pt_BR","ru_RU","tr_TR","sv_SE","defaultConfiguration","development","process","standalone","http","ping","public","connectInterval","manifest","permissions","overrideMetadata","application","pinned","autostart","categories","science","games","graphics","network","multimedia","office","utilities","other","secure","defaultUserData","groups","lock","notifications","native","contextmenu","font","theme","sounds","icons","animations","panels","items","widgets","keybindings","defaultWallpaper","locale","language","clientLocale","rtl","format","shortDate","mediumDate","longDate","fullDate","shortTime","longTime","lofi","mobile","template","clampToViewport","moveKeybinding","watch","defaultAdapter","adapters","defaultIcon","visibility","readOnly","providers","globalBlacklist","globalWhitelist","CoreBase","classNames","splash","Splash","$resourceRoot","resourceRoot","urlResolver","configuration","user","protocol","host","clearInterval","done","groupEnd","start","booted","group","_attachEvents","defaultData","connect","valid","_createConnection","_createListeners","play","pingTime","setInterval","connected","reconnecting","updateRootLocale","l","setAttribute","wasConnected","interval","once","reconnected","handle","wid","p","message","force","t","fetch","launch","split","pop","compatible","getCompatiblePackages","_openApplicationDialog","setDefault","choice","checked","TypeError","broadcast","apps","setRequestOptions","getUser","middleware","kill","matcher","Desktop","$theme","$icons","contextmenuEntries","Search","keyboardContext","subtract","top","bottom","_removeIcons","_removeTheme","initConnectionEvents","initUIEvents","initDragEvents","initKeyboardEvents","initGlobalKeyboardEvents","initMouseEvents","initBaseEvents","initLocales","initDeveloperTray","panel","createPanelSubtraction","_updateCSS","_clampWindows","getRect","tray","onDeveloperMenu","strict","onDropContextMenu","forwardKeyEvent","lastWindow","isVisible","isWithinContext","isWithinWindow","isWithin","isInput","handleTabOnTextarea","some","combo","matchKeyCombo","closeBindingName","closeBindingCallback","onContextMenu","moved","onmousemove","onmouseup","removeEventListener","resizeDebounce","clearTimeout","history","pushState","URL","rtls","checkRTL","getLocale","toLowerCase","isRtl","isMobile","offsetWidth","resize","getWindows","addContextMenu","lockSettings","newSettings","userSettings","arrayMerge","source","applyOverlays","test","removeAll","applyCss","fontFamily","applyBackgroundStyles","slice","applyTheme","applyIcons","applyIconView","_applyTheme","errors","_applySettingsByKey","setWallpaper","storageItems","extras","hasIconview","useDefaults","__","themes","defaultItems","base","provided","setKeyboardContext","ctx","width","height","offsetHeight","Filesystem","mounts","systemAdapter","appsAdapter","proxy","VFS","_request","mountAll","stopOnError","_getConfiguredMountpoints","_mountpointAction","addMountpoint","automount","createMountpoint","_mountAction","mountpoint","coreEventName","_adapter","mounted","eva","createWatchEvents","_requestAction","srcMount","getMountpointFromPath","destMount","sameAdapter","ab","local","searchable","parseMountpointPrefix","getMounts","mg","ms","strictGroups","filterMountByGroups","pos","arr","ERR_REQUEST_STANDALONE","ERR_REQUEST_NOT_OK","ERR_VFS_MOUNT_NOT_FOUND","ERR_VFS_MOUNT_NOT_FOUND_FOR","ERR_VFS_MOUNT_NOT_MOUNTED","ERR_VFS_MOUNT_ALREADY_MOUNTED","ERR_VFS_PATH_FORMAT_INVALID","ERR_PACKAGE_NOT_FOUND","ERR_PACKAGE_LOAD","ERR_PACKAGE_NO_RUNTIME","ERR_PACKAGE_NO_METADATA","ERR_PACKAGE_EXCEPTION","ERR_WINDOW_ID_EXISTS","ERR_INVALID_LOCALE","LBL_CONNECTION_LOST","LBL_CONNECTION_LOST_MESSAGE","LBL_CONNECTION_RESTORED","LBL_CONNECTION_RESTORED_MESSAGE","LBL_APP_CAT_DEVELOPMENT","LBL_APP_CAT_SCIENCE","LBL_APP_CAT_GAMES","LBL_APP_CAT_GRAPHICS","LBL_APP_CAT_NETWORK","LBL_APP_CAT_MULTIMEDIA","LBL_APP_CAT_OFFICE","LBL_APP_CAT_SYSTEM","LBL_APP_CAT_UTILITIES","LBL_APP_CAT_OTHER","LBL_LAUNCH_SELECT","LBL_LAUNCH_SELECT_MESSAGE","LBL_DESKTOP_SELECT_WALLPAPER","LBL_DESKTOP_SELECT_THEME","LBL_SEARCH_TOOLTOP","LBL_SEARCH_PLACEHOLDER","LBL_SEARCH_WAIT","LBL_SEARCH_RESULT","LBL_FS_B","LBL_FS_M","LBL_FS_G","LBL_FS_KIB","LBL_FS_MIB","LBL_FS_GIB","LBL_TOP","LBL_LEFT","LBL_RIGHT","LBL_BOTTOM","LBL_MENU","LBL_ERROR","LBL_INFO","LBL_MESSAGE","LBL_WARNINIG","LBL_SUCCESS","LBL_FAILURE","LBL_WINDOW","LBL_WINDOWS","LBL_NOTIFICATION","LBL_NOTIFICATIONS","LBL_TRAY","LBL_NAME","LBL_TYPE","LBL_SIZE","LBL_FILE","LBL_NEW","LBL_OPEN","LBL_SAVE","LBL_SAVEAS","LBL_OK","LBL_ABORT","LBL_CANCEL","LBL_CLOSE","LBL_QUIT","LBL_YES","LBL_NO","LBL_GO","LBL_MKDIR","LBL_MKFILE","LBL_COPY","LBL_PASTE","LBL_CUT","LBL_MOVE","LBL_RENAME","LBL_DELETE","LBL_DOWNLOAD","LBL_REFRESH","LBL_RELOAD","LBL_HOME","LBL_VIEW","LBL_HELP","LBL_ABOUT","LBL_APPLICATION","LBL_APPLICATIONS","LBL_KILL","LBL_KILL_ALL","ERR_PACKAGE_PERMISSION_DENIED","LBL_CONNECTION_FAILED","LBL_CONNECTION_FAILED_MESSAGE","LBL_DESKTOP_SET_AS_WALLPAPER","LBL_OPEN_WITH","LBL_MINIMIZE","LBL_MAXIMIZE","LBL_RESTORE","LBL_RAISE","LBL_SHADE","LBL_UNSHADE","LBL_ONTOP","LBL_RESIZE","LBL_BACK","LBL_FORWARD","LBL_UPLOAD","LBL_IMAGE","LBL_CREATE_SHORTCUT","LBL_REMOVE_SHORTCUT","LBL_EDIT","input","bind","thisArg","Function","prototype","apply","bindMethod","log","assignMethods","addMiddleware","clearMiddleware","createUI","Middleware","Notification","defaultLabel","timeout","sound","renderCustom","createNativeNotification","Notifications","setElementStyles","notification","createCssText","createElementStyles","cssText","defaultPosition","carry","key","Packages","_running","preloader","Preloader","inited","_autostart","addPackages","_preloadBackgroundFiles","_launchTheme","_launchApplication","signaled","singleton","foundApp","_launch","preloads","_getPreloads","fileType","packageType","metadataFilesToFilenames","filterMetadataFilesByType","canLaunch","createPackageAvailabilityCheck","dialog","alert","stack","fail","meta","configured","override","createManifestFromArray","filterAvailable","filterConfigHidden","mimeType","re","backgroundFiles","filenames","running","getMetadataFromName","ServiceProvider","createAuthContract","provides","Session","Tray","pm","OSjs","createGlobalApi","registerContracts","_onDistChanged","_onPackageChanged","createWindowContract","createLocaleContract","createDnDContract","createDOMContract","createThemeContract","createSoundsContract","createSessionContract","createPackagesContract","createClipboardContract","createMiddlewareContract","handler","createTrayContract","windowBehavior","WindowBehavior","blacklisted","notWhitelisted","freeze","querySelectorAll","getAttribute","strs","translations","locales","translatable","ref","userLocale","defaultLocale","setLocale","last","dnd","script","themeResource","resourceResolver","soundResource","soundsEnabled","absoluteSrc","playSound","fresh","createDesktopContract","addContextMenuEntries","Settings","createSettingsContract","defaultValue","createVFSContract","createFilesystemContract","iconMap","utils","focusLastWindow","providedAdapters","useAdapters","A","flat","blur","debounce","promise","timer","tree","simplejsonconf","sjc","$loading","createTextNode","defaultTitle","obj","update","u","hex","parseInt","toString","imageDropMimes","backgroundRepeat","backgroundPosition","backgroundSize","subtraction","getState","media","supportedMedia","getThemeName","defaultTheme","getSoundThemeName","defaultExtension","checkExtensions","audio","use","iconDefinitions","extension","retval","getDataTransfer","dataTransferProperty","dataTransfer","transfer","getData","setDataTransfer","effect","setDragImage","hasDragImage","transferData","effectAllowed","setData","draggable","ondragstart","ondragend","setter","dragstart","dragend","removeAttribute","ondragenter","ondragover","ondragleave","dragenter","dragleave","dragover","inside","stopPropagation","dropEffect","drop","supportsNativeNotification","onload","onerror","async","defer","onreadystatechange","readyState","assign","escapeHtml","text","div","innerHTML","textContent","selectionStart","selectionEnd","substring","getActiveElement","ae","activeElement","supportsPassive","defineProperty","volume","Audio","videoFormats","mp4","ogv","audioFormats","mp3","oga","elem","canPlayType","video","supportsTransition","tests","supported","Notif","permission","requestPermission","encodeQueryData","pairs","val","bodyTypes","ArrayBufferView","Blob","File","URLSearchParams","createFetchOptions","fetchOptions","hasBody","stringBody","fetchXhr","req","XMLHttpRequest","onError","onLoad","statusText","ok","getResponseHeader","responseText","rel","toUpperCase","upload","lengthComputable","percentComplete","Math","round","loaded","total","setRequestHeader","responseType","createErrorRejection","op","modifierNames","checkKeys","keyName","validKeypress","every","getEvent","clientX","clientY","touches","changedTouches","tapped","FALLBACK_LOCALE","prefixMap","nb","sprintfRegex","sprintfMatcher","getDefaultLocale","getUserLocale","getFromList","ul","dl","fallbackList","localizedList","fmt","date","useFormat","dateformat","browserLocale","nav","browserLanguage","userLanguage","langs","lang","navigator","acceptedLocales","lenght","checkMetadataGroups","g","checkConfigGroups","perm","checkBlacklist","blacklist","checks","cached","success","_load","successes","res","failed","parentDirectory","sortString","d","b","localeCompare","sortDate","sortDefault","sortFn","sortMap","mtime","ctime","atime","createSpecials","specials","stripped","createFileReader","FileReader","onloadend","humanFileSize","bytes","si","isNaN","thresh","units","toFixed","transformReaddir","sortBy","sortDir","filterHidden","sorter","modify","humanSize","sortedSpecial","sort","sortedDirectories","sortedFiles","transformArrayBuffer","getFileIcon","regexp","createFileIter","parent_id","reverse","userGroups","mountGroups","events","movement","invalid","CASCADE_DISTANCE","MINIMUM_WIDTH","MINIMUM_HEIGHT","ONTOP_ZINDEX","BOTTOM_ZINDEX","attrs","ontop","gravity","moveable","resizable","focusable","maximizable","minimizable","closeable","controls","shadowDOM","clamp","mediaQueries","small","medium","big","minDimension","maxDimension","createState","moving","resizing","focused","zIndex","max","createDOMAttributes","createDOMStyles","clampPosition","rect","maxLeft","maxTop","minLeft","minTop","min","renderCallback","mode","shadow","$content","attachShadow","positionFromGravity","hasVertical","hasHorizontal","dimensionFromElement","container","innerBox","getBoundingClientRect","outerBox","diffY","ceil","diffX","topHeight","$header","transformVectors","transform","attr","Number","isInteger","parseFloat","clamper","maxPosition","resizer","directions","going","dir","xDir","yDir","mover","getCascadePosition","startX","startY","distance","wrap","newX","newY","getScreenOrientation","screen","orientation","matchMedia","getMediaQueryName","mediaQuery","appName","windowId","matchStringOrRegex","foundOptions","allowedProperties","capabilityCache","pathToObject","handleDirectoryList","binary","move","createObjectURL","click","revokeObjectURL","eventNames","closed","connecting","connectfailed","reconnect","connection","_destroyConnection","WebSocket","isPassive","touchArg","passive","actionMap","lastAction","$lofi","mousedown","onmousedown","dblclick","onicondblclick","iconDblclick","oniconclick","iconClick","ontrasitionend","$icon","setState","hitButton","hitTitle","raise","attributeSet","checkMove","actionCallback","mousemove","transformedEvent","posX","posY","_setState","mouseup","setNextZindex","windowCount","nextZindex","TEMPLATE","trim","ondestroy","rendered","$title","_preventDefaultPosition","_loadingDebounce","_template","_ondestroy","_lastCssText","_lastAttributes","_initTemplate","_initBehavior","tpl","behavior","_checkModal","_setClassNames","_updateButtons","_updateAttributes","_updateStyles","_updateTitle","_updateIconStyles","_updateHeaderStyles","gravitate","_toggleState","_focus","_maximize","resizeFit","firstChild","setIcon","setZindex","setNext","_checkNextZindex","oldValue","windexes","_updateDOM","hideButton","buttonmap","escapedTitle","iconSource","headerDisplay","applyAttrs"],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;;ACvJA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEe;EACbA,IAAI,EAAE,CAEN;AACF,CAAC,E;;;;;;;;;;;;ACxCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEyC;AACV;AACiB;AACf;AACE;AACR;AACU;AACA;AACE;AACG;AACwC;AAC5B;AACJ;AACd;AACqB;AACZ;AACI;AAClB;AACD;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACe,MAAMhkB,mBAAmB,SAAS23B,6DAAe,CAAC;EAE/D;AACF;AACA;AACA;EACE91B,WAAWA,CAAChB,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;IAC9B,KAAK,CAACD,IAAI,EAAEC,OAAO,CAAC;;IAEpB;AACJ;AACA;AACA;IACI,IAAI,CAAC0W,OAAO,GAAG,IAAIsgB,gDAAO,CAACj3B,IAAI,CAAC;;IAEhC;AACJ;AACA;AACA;IACI,IAAI,CAACglB,IAAI,GAAG,IAAIkS,6CAAI,CAACl3B,IAAI,CAAC;;IAE1B;AACJ;AACA;AACA;IACI,IAAI,CAACm3B,EAAE,GAAG,IAAI3C,iDAAQ,CAACx0B,IAAI,CAAC;;IAE5B;AACJ;AACA;A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CxD,CAAC,EAAE;QACDlR,KAAK,EAAEmR,SAAS,GAAG1L,CAAC,CAAC,aAAa,CAAC,GAAGA,CAAC,CAAC,cAAc,CAAC;QACvD4B,QAAQ,EAAE,CAACq9B,WAAW;QACtBxjC,OAAO,EAAEA,CAAA,KAAMiQ,SAAS,GAAGG,GAAG,CAAC1B,OAAO,CAAC,CAAC,GAAG0B,GAAG,CAACF,QAAQ,CAAC;MAC1D,CAAC,EAAE;QACDpR,KAAK,EAAEyF,CAAC,CAAC,WAAW,CAAC;QACrB4B,QAAQ,EAAE,CAACu9B,SAAS;QACpB1jC,OAAO,EAAEA,CAAA,KAAMoQ,GAAG,CAACnC,KAAK,CAAC;MAC3B,CAAC;IACH,CAAC,CAAC;EACJ;AACF,C;;;;;;;;;;;;AC9XA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiD;AACX;AACsD;AAWnE;AACK;;AAE9B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIT,OAAO,GAAG,EAAE;AAChB,IAAI29B,WAAW,GAAG,CAAC;AACnB,IAAIC,UAAU,GAAG,CAAC;AAClB,IAAIrsB,UAAU,GAAG,IAAI;;AAErB;AACA;AACA;AACA,MAAMssB,QAAQ,GAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"osjs.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"osjs\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/client/index.js\",\"vendors~osjs\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @licence Simplified BSD License\r\n */\r\n\r\n//\r\n// This is the client configuration tree.\r\n// Guide: https://manual.os-js.org/config/#client\r\n// Complete config tree: https://github.com/os-js/osjs-client/blob/master/src/config.js\r\n//\r\n\r\nexport default {\r\n  auth: {\r\n\r\n  }\r\n};\r\n","/*!\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice, this\r\n *    list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES;\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n// Exporting modules for external use\r\nimport './index.scss';\r\n\r\nexport {default as Core} from './src/core';\r\nexport {default as Window} from './src/window';\r\nexport {default as Desktop} from './src/desktop';\r\nexport {default as Application} from './src/application';\r\nexport {default as Notification} from './src/notification';\r\nexport {default as Notifications} from './src/notifications';\r\nexport {default as WindowBehavior} from './src/window-behavior';\r\nexport {default as Auth} from './src/auth';\r\nexport {default as Login} from './src/login';\r\nexport {default as Websocket} from './src/websocket';\r\nexport {default as CoreServiceProvider} from './src/providers/core';\r\nexport {default as DesktopServiceProvider} from './src/providers/desktop';\r\nexport {default as NotificationServiceProvider} from './src/providers/notifications';\r\nexport {default as VFSServiceProvider} from './src/providers/vfs';\r\nexport {default as AuthServiceProvider} from './src/providers/auth';\r\nexport {default as SettingsServiceProvider} from './src/providers/settings';\r\nexport {default as logger} from './src/logger';\r\nexport {default as Splash} from './src/splash';\r\nexport {default as Settings} from './src/settings';\r\nexport {default as Tray} from './src/tray';\r\nexport {default as Search} from './src/search';\r\nexport {default as Packages} from './src/packages';\r\nexport {default as Filesystem} from './src/filesystem';\r\nexport {default as Clipboard} from './src/clipboard';\r\nexport {default as Middleware} from './src/middleware';\r\nexport {BasicApplication} from './src/basic-application';\r\nexport {defaultConfiguration as configuration} from './src/config';\r\nexport {default as icon} from './src/styles/logo-blue-32x32.png';\r\n\r\n// Bootstrapping logic (only once)\r\nimport {\r\n  Core,\r\n  CoreServiceProvider,\r\n  DesktopServiceProvider,\r\n  VFSServiceProvider,\r\n  NotificationServiceProvider,\r\n  SettingsServiceProvider,\r\n  AuthServiceProvider\r\n} from '@osjs/client';\r\n\r\nimport {PanelServiceProvider} from '@osjs/panels';\r\nimport {GUIServiceProvider} from '@osjs/gui';\r\nimport {DialogServiceProvider} from '@osjs/dialogs';\r\nimport config from './config.js';\r\n\r\n// Prevent double booting by ensuring `init` is only called once\r\nif (!window.osjsBooted) {\r\n  const init = () => {\r\n    const osjs = new Core(config, {});\r\n\r\n    // Register service providers\r\n    osjs.register(CoreServiceProvider);\r\n    osjs.register(DesktopServiceProvider);\r\n    osjs.register(VFSServiceProvider);\r\n    osjs.register(NotificationServiceProvider);\r\n    osjs.register(SettingsServiceProvider, {before: true});\r\n    osjs.register(AuthServiceProvider, {before: true});\r\n    osjs.register(PanelServiceProvider);\r\n    osjs.register(DialogServiceProvider);\r\n    osjs.register(GUIServiceProvider);\r\n\r\n    osjs.boot();\r\n  };\r\n\r\n  window.addEventListener('DOMContentLoaded', () => {\r\n    window.osjsBooted = true; // Set flag to prevent reinitialization\r\n    init();\r\n  });\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport {};","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * LocalStorage Auth adapter\r\n * @param {Core} core Core reference\r\n * @param {object} [options] Adapter options\r\n */\r\nconst localStorageAuth = (core, options) => ({\r\n  login: (values) => Promise.resolve(values)\r\n});\r\n\r\nexport default localStorageAuth;\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * Server Auth adapter\r\n * @param {Core} core Core reference\r\n * @param {object} [options] Adapter options\r\n */\r\nconst serverAuth = (core, options) => {\r\n  const request = (endpoint, params = {}) => core.request(endpoint, {\r\n    method: 'POST',\r\n    body: JSON.stringify(params)\r\n  }, 'json');\r\n\r\n  return {\r\n    register: (values) => request('/register', values),\r\n    login: (values) => request('/login', values),\r\n    logout: () =>  request('/logout')\r\n  };\r\n};\r\n\r\nexport default serverAuth;\r\n","import logger from '../../logger';\r\n\r\nexport default class VFSSearchAdapter {\r\n  constructor(core) {\r\n    this.core = core;\r\n  }\r\n\r\n  destroy() {\r\n  }\r\n\r\n  async init() {\r\n  }\r\n\r\n  async search(pattern) {\r\n    const vfs = this.core.make('osjs/vfs');\r\n    const promises = this.core.make('osjs/fs')\r\n      .mountpoints()\r\n      .map(mount => `${mount.name}:/`)\r\n      .map(path => {\r\n        return vfs.search({path}, pattern)\r\n          .catch(error => {\r\n            logger.warn('Error while searching', error);\r\n            return [];\r\n          });\r\n      });\r\n    return Promise.all(promises)\r\n      .then(lists => [].concat(...lists));\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport logger from '../../logger';\r\n\r\n/**\r\n * LocalStorage Settings adapter\r\n * @param {Core} core Core reference\r\n * @param {object} [options] Adapter options\r\n */\r\nconst localStorageSettings = (core) => {\r\n  const prefix = core.config('settings.prefix', '');\r\n\r\n  return {\r\n    clear(ns) {\r\n      if (ns) {\r\n        localStorage.removeItem(prefix + ns);\r\n      } else {\r\n        localStorage.clear();\r\n      }\r\n\r\n      return Promise.resolve(true);\r\n    },\r\n\r\n    save(settings) {\r\n      Object.keys(settings).forEach((k) => {\r\n        localStorage.setItem(prefix + k, JSON.stringify(settings[k]));\r\n      });\r\n\r\n      return Promise.resolve(true);\r\n    },\r\n\r\n    load() {\r\n      const entries = Object\r\n        .keys(localStorage)\r\n        .filter(k => prefix ? k.startsWith(prefix) : true)\r\n        .map((k) => {\r\n          const v = localStorage.getItem(k);\r\n          const kk = prefix ? k.substr(prefix.length) : k;\r\n\r\n          try {\r\n            return [kk, JSON.parse(v)];\r\n          } catch (e) {\r\n            logger.warn(`localStorageAdapter parse failed for '${k}'`, e);\r\n          }\r\n\r\n          return [kk, v];\r\n        });\r\n\r\n      return Promise.resolve(Object.fromEntries(entries));\r\n    }\r\n  };\r\n};\r\n\r\n\r\nexport default localStorageSettings;\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * Server Settings adapter\r\n * @param {Core} core Core reference\r\n * @param {object} [options] Adapter options\r\n */\r\nconst serverSettings = core => ({\r\n  save: settings => core.request(core.url('/settings'), {\r\n    method: 'post',\r\n    body: settings\r\n  }, 'json'),\r\n\r\n  load: () => core.request(core.url('/settings'), {\r\n    method: 'get'\r\n  }, 'json')\r\n});\r\n\r\nexport default serverSettings;\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\nimport {h, app} from 'hyperapp';\r\nimport {doubleTap} from '../../utils/input';\r\nimport {pathJoin} from '../../utils/vfs';\r\nimport {invertHex} from '../../utils/colors';\r\nimport {isDroppingImage, validVfsDrop} from '../../utils/desktop';\r\n\r\nconst tapper = doubleTap();\r\n\r\nconst onDropAction = actions => (ev, data, files, shortcut = true) => {\r\n  if (validVfsDrop(data)) {\r\n    actions.addEntry({entry: data, shortcut});\r\n  } else if (files.length > 0) {\r\n    actions.uploadEntries(files);\r\n  }\r\n};\r\n\r\nconst createLabelComputer = (core) => {\r\n  const packages = f => core.make('osjs/packages').getPackages(f)[0];\r\n  const translate = n => core.make('osjs/locale').translatableFlat(n);\r\n\r\n  return ({filename, mime, label}) => {\r\n    const metadata = (mime === 'osjs/application' ? packages(pkg => (pkg.name === filename)) : null);\r\n    return label || (metadata ? translate(metadata.title) : filename);\r\n  };\r\n};\r\n\r\nconst isRootElement = ev =>\r\n  ev.target && ev.target.classList.contains('osjs-desktop-iconview__wrapper');\r\n\r\nconst view = (computeLabel, fileIcon, themeIcon, droppable) => (state, actions) =>\r\n  h('div', {\r\n    class: 'osjs-desktop-iconview__wrapper',\r\n    oncontextmenu: ev => {\r\n      if (isRootElement(ev)) {\r\n        actions.openContextMenu({ev});\r\n      }\r\n    },\r\n    onclick: ev => {\r\n      if (isRootElement(ev)) {\r\n        actions.selectEntry({index: -1});\r\n      }\r\n    },\r\n    oncreate: el => {\r\n      droppable(el, {\r\n        ondrop: (ev, data, files) => {\r\n          const droppedImage = isDroppingImage(data);\r\n\r\n          if (droppedImage || (ev.shiftKey && validVfsDrop(data))) {\r\n            actions.openDropContextMenu({ev, data, files});\r\n          } else {\r\n            onDropAction(actions)(ev, data, files);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, state.entries.map((entry, index) => {\r\n    return h('div', {\r\n      class: 'osjs-desktop-iconview__entry' + (\r\n        state.selected === index\r\n          ? ' osjs-desktop-iconview__entry--selected'\r\n          : ''\r\n      ),\r\n      oncontextmenu: ev => actions.openContextMenu({ev, entry, index}),\r\n      ontouchstart: ev => tapper(ev, () => actions.openEntry({ev, entry, index})),\r\n      ondblclick: ev => actions.openEntry({ev, entry, index}),\r\n      onclick: ev => actions.selectEntry({ev, entry, index})\r\n    }, [\r\n      h('div', {\r\n        class: 'osjs-desktop-iconview__entry__inner'\r\n      }, [\r\n        h('div', {\r\n          class: 'osjs-desktop-iconview__entry__icon'\r\n        }, [\r\n          h('img', {\r\n            src: entry.icon ? entry.icon : themeIcon(fileIcon(entry).name),\r\n            class: 'osjs-desktop-iconview__entry__icon__icon'\r\n          }),\r\n          entry.shortcut !== false\r\n            ? h('img', {\r\n              src: themeIcon('emblem-symbolic-link'),\r\n              class: 'osjs-desktop-iconview__entry__icon__shortcut'\r\n            })\r\n            : null\r\n        ]),\r\n        h('div', {\r\n          class: 'osjs-desktop-iconview__entry__label'\r\n        }, computeLabel(entry))\r\n      ])\r\n    ]);\r\n  }));\r\n\r\nconst createShortcuts = (root, readfile, writefile) => {\r\n  const read = () => {\r\n    const filename = pathJoin(root, '.shortcuts.json');\r\n\r\n    return readfile(filename)\r\n      .then(contents => JSON.parse(contents))\r\n      .catch(error => ([]));\r\n  };\r\n\r\n  const write = shortcuts => {\r\n    const filename = pathJoin(root, '.shortcuts.json');\r\n    const contents = JSON.stringify(shortcuts || []);\r\n\r\n    return writefile(filename, contents)\r\n      .catch(() => 0);\r\n  };\r\n\r\n  const add = entry => read(root)\r\n    .then(shortcuts => ([...shortcuts, entry]))\r\n    .then(write);\r\n\r\n  const remove = index => read(root)\r\n    .then(shortcuts => {\r\n      shortcuts.splice(index, 1);\r\n      return shortcuts;\r\n    })\r\n    .then(write);\r\n\r\n  return {read, add, remove};\r\n};\r\n\r\nconst readDesktopFolder = (root, readdir, shortcuts) => {\r\n  const supressError = () => [];\r\n\r\n  const read = () => readdir(root, {\r\n    showHiddenFiles: false\r\n  })\r\n    .then(files => files.map(s => ({shortcut: false, ...s})))\r\n    .catch(supressError);\r\n\r\n  const readShortcuts = () => shortcuts.read()\r\n    .then(shortcuts => shortcuts.map((s, index) => ({shortcut: index, ...s})))\r\n    .catch(supressError);\r\n\r\n  return () => {\r\n    return Promise.all([readShortcuts(), read()])\r\n      .then(results => [].concat(...results));\r\n  };\r\n};\r\n\r\n/**\r\n * Desktop Icon View\r\n */\r\nexport class DesktopIconView extends EventEmitter {\r\n\r\n  /**\r\n   * @param {Core} core Core reference\r\n   */\r\n  constructor(core) {\r\n    super('DesktopIconView');\r\n\r\n    this.core = core;\r\n    this.$root = null;\r\n    this.iconview = null;\r\n    this.root = 'home:/.desktop'; // Default path, changed later\r\n  }\r\n\r\n  destroy() {\r\n    if (this.$root && this.$root.parentNode) {\r\n      this.$root.remove();\r\n    }\r\n\r\n    this.iconview = null;\r\n    this.$root = null;\r\n\r\n    this.emit('destroy');\r\n\r\n    super.destroy();\r\n  }\r\n\r\n  _render(root) {\r\n    const oldRoot = this.root;\r\n    if (root) {\r\n      this.root = root;\r\n    }\r\n\r\n    if (this.$root) {\r\n      if (this.root !== oldRoot) {\r\n        this.iconview.reload();\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  render(root) {\r\n    if (!this._render(root)) {\r\n      return;\r\n    }\r\n\r\n    this.$root = document.createElement('div');\r\n    this.$root.className = 'osjs-desktop-iconview';\r\n    this.core.$contents.appendChild(this.$root);\r\n\r\n    const {droppable} = this.core.make('osjs/dnd');\r\n    const {icon: fileIcon} = this.core.make('osjs/fs');\r\n    const {icon: themeIcon} = this.core.make('osjs/theme');\r\n    const {copy, readdir, readfile, writefile, unlink, mkdir} = this.core.make('osjs/vfs');\r\n    const error = err => console.error(err);\r\n    const shortcuts = createShortcuts(root, readfile, writefile);\r\n    const read = readDesktopFolder(root, readdir, shortcuts);\r\n    const computeLabel = createLabelComputer(this.core);\r\n\r\n    this.iconview = app({\r\n      selected: -1,\r\n      entries: []\r\n    }, {\r\n      setEntries: entries => ({entries}),\r\n\r\n      openDropContextMenu: ({ev, data, files, droppedImage}) => {\r\n        this.createDropContextMenu(ev, data, files, droppedImage);\r\n      },\r\n\r\n      openContextMenu: ({ev, entry, index}) => {\r\n        if (entry) {\r\n          this.createFileContextMenu(ev, entry);\r\n\r\n          return {selected: index};\r\n        } else {\r\n          this.createRootContextMenu(ev);\r\n\r\n          return {selected: -1};\r\n        }\r\n      },\r\n\r\n      openEntry: ({entry, forceDialog}) => {\r\n        if (entry.isDirectory) {\r\n          this.core.run('FileManager', {\r\n            path: entry\r\n          });\r\n        } else if (entry.mime === 'osjs/application') {\r\n          this.core.run(entry.filename);\r\n        } else {\r\n          this.core.open(entry, {\r\n            useDefault: true,\r\n            forceDialog\r\n          });\r\n        }\r\n\r\n        return {selected: -1};\r\n      },\r\n\r\n      selectEntry: ({index}) => ({selected: index}),\r\n\r\n      uploadEntries: files => {\r\n        // TODO\r\n      },\r\n\r\n      addEntry: ({entry, shortcut}) => (state, actions) => {\r\n        const dest = `${root}/${entry.filename}`;\r\n\r\n        mkdir(root)\r\n          .catch(() => true)\r\n          .then(() => {\r\n            if (shortcut || entry.mime === 'osjs/application') {\r\n              return shortcuts.add(entry);\r\n            }\r\n\r\n            return copy(entry, dest)\r\n              .then(() => actions.reload(true))\r\n              .catch(error);\r\n          })\r\n          .then(() => actions.reload(true));\r\n\r\n        return {selected: -1};\r\n      },\r\n\r\n      removeEntry: entry => (state, actions) => {\r\n        if (entry.shortcut !== false) {\r\n          shortcuts.remove(entry.shortcut)\r\n            .then(() => actions.reload(true))\r\n            .catch(error);\r\n        } else {\r\n          unlink(entry)\r\n            .then(() => actions.reload(true))\r\n            .catch(error);\r\n        }\r\n\r\n        return {selected: -1};\r\n      },\r\n\r\n      reload: (fromUI) => (state, actions) => {\r\n        if (fromUI && this.core.config('vfs.watch')) {\r\n          return;\r\n        }\r\n\r\n        read()\r\n          .then(entries => entries.filter(e => e.filename !== '..'))\r\n          .then(entries => actions.setEntries(entries));\r\n      }\r\n\r\n    }, view(computeLabel, fileIcon, themeIcon, droppable), this.$root);\r\n\r\n    this.applySettings();\r\n    this.iconview.reload();\r\n    this._createWatcher();\r\n\r\n    this.core.on('osjs/settings:save', () => this.iconview.reload());\r\n  }\r\n\r\n  createFileContextMenu(ev, entry) {\r\n    const _ = this.core.make('osjs/locale').translate;\r\n\r\n    this.core.make('osjs/contextmenu', {\r\n      position: ev,\r\n      menu: [{\r\n        label: _('LBL_OPEN'),\r\n        onclick: () => this.iconview.openEntry({entry, forceDialog: false})\r\n      }, {\r\n        label: _('LBL_OPEN_WITH'),\r\n        onclick: () => this.iconview.openEntry({entry, forceDialog: true})\r\n      }, {\r\n        label: entry.shortcut !== false ? _('LBL_REMOVE_SHORTCUT') : _('LBL_DELETE'),\r\n        onclick: () => this.iconview.removeEntry(entry)\r\n      }]\r\n    });\r\n  }\r\n\r\n  createDropContextMenu(ev, data, files) {\r\n    const desktop = this.core.make('osjs/desktop');\r\n    const _ = this.core.make('osjs/locale').translate;\r\n\r\n    const action = shortcut => onDropAction(this.iconview)(ev, data, files, shortcut);\r\n\r\n    const menu = [{\r\n      label: _('LBL_COPY'),\r\n      onclick: () => action(false)\r\n    }, {\r\n      label: _('LBL_CREATE_SHORTCUT'),\r\n      onclick: () => action(true)\r\n    }, ...desktop.createDropContextMenu(data)];\r\n\r\n    this.core.make('osjs/contextmenu', {\r\n      position: ev,\r\n      menu\r\n    });\r\n  }\r\n\r\n  createRootContextMenu(ev) {\r\n    this.core.make('osjs/desktop')\r\n      .openContextMenu(ev);\r\n  }\r\n\r\n  _createWatcher() {\r\n    const listener = (args) => {\r\n      const currentPath = String(this.root).replace(/\\/$/, '');\r\n      const watchPath = String(args.path).replace(/\\/$/, '');\r\n      if (currentPath === watchPath) {\r\n        this.iconview.reload();\r\n      }\r\n    };\r\n\r\n    this.core.on('osjs/vfs:directoryChanged', listener);\r\n    this.on('destroy', () => this.core.off('osjs/vfs:directoryChanged', listener));\r\n  }\r\n\r\n  applySettings() {\r\n    if (!this.$root) {\r\n      return;\r\n    }\r\n\r\n    const settings = this.core\r\n      .make('osjs/settings');\r\n\r\n    const defaults = this.core\r\n      .config('desktop.settings');\r\n\r\n    const fontColorStyle = settings\r\n      .get('osjs/desktop', 'iconview.fontColorStyle', defaults.iconview.fontColorStyle);\r\n\r\n    const fontColor = settings\r\n      .get('osjs/desktop', 'iconview.fontColor', '#ffffff', defaults.iconview.fontColor);\r\n\r\n    const backgroundColor = settings\r\n      .get('osjs/desktop', 'background.color', defaults.background.color);\r\n\r\n    const styles = {\r\n      system: 'inherit',\r\n      invert: invertHex(backgroundColor),\r\n      custom: fontColor\r\n    };\r\n\r\n    this.$root.style.color = styles[fontColorStyle];\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {h, app} from 'hyperapp';\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\n\r\nconst createAttributes = (props, field, disabled) => {\r\n  disabled = disabled ? 'disabled' : undefined;\r\n  if (field.tagName === 'input') {\r\n    if (field.attributes.type !== 'submit') {\r\n      return {\r\n        autocapitalize: 'off',\r\n        autocomplete: 'new-' + field.attributes.name,\r\n        disabled,\r\n        oncreate: el => (el.value = props[field.attributes.name] || field.value || ''),\r\n        ...field.attributes\r\n      };\r\n    }\r\n  }\r\n\r\n  return {disabled, ...field.attributes};\r\n};\r\n\r\nconst createFields = (props, fields, disabled) => {\r\n  const children = f => {\r\n    if (f.tagName === 'select' && f.choices) {\r\n      return f.choices.map(c => h('option', {\r\n        current: c.current ? 'current' : undefined,\r\n        value: c.value\r\n      }, c.label));\r\n    }\r\n\r\n    return f.children || [];\r\n  };\r\n\r\n  return fields.map(f => h('div', {\r\n    class: 'osjs-login-field osjs-login-field-' + f.tagName\r\n  }, h(f.tagName, createAttributes(props, f, disabled), children(f))));\r\n};\r\n\r\nconst createView = (options) => {\r\n  const {src, position} = options.logo;\r\n\r\n  const logo = () =>\r\n    h('div', {\r\n      class: 'osjs-login-logo',\r\n      'data-position': position,\r\n      style: {\r\n        backgroundImage: `url('${src}')`\r\n      }\r\n    });\r\n\r\n  const fields = state => {\r\n    const result = createFields(state, options.fields, state.loading);\r\n\r\n    if (src && position === 'bottom') {\r\n      result.push(logo());\r\n    }\r\n\r\n    if (options.stamp) {\r\n      result.push(h('div', {\r\n        class: 'osjs-login-stamp'\r\n      }, options.stamp));\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  return (state, actions) => {\r\n    const header = [];\r\n\r\n    if (options.title) {\r\n      header.push(h('div', {\r\n        class: 'osjs-login-header'\r\n      }, h('span', {}, options.title)));\r\n    }\r\n\r\n    if (src && ['top', 'middle'].indexOf(position) !== -1) {\r\n      const m = position === 'top'\r\n        ? 'unshift'\r\n        : 'push';\r\n\r\n      header[m](logo());\r\n    }\r\n\r\n    const createSide = side => position === side\r\n      ? h('div', {'data-position': position}, logo())\r\n      : null;\r\n\r\n    const left = () => createSide('left');\r\n    const right = () => createSide('right');\r\n    const middle = () => h('div', {class: 'osjs-login-content'}, children);\r\n\r\n    const formFields = fields(state);\r\n\r\n    const children = [\r\n      ...header,\r\n\r\n      h('div', {\r\n        class: 'osjs-login-error',\r\n        style: {display: state.error ? 'block' : 'none'}\r\n      }, h('span', {}, state.error)),\r\n      h('form', {\r\n        loading: false,\r\n        method: 'post',\r\n        action: '#',\r\n        autocomplete: 'off',\r\n        onsubmit: actions.submit\r\n      }, formFields)\r\n    ];\r\n\r\n    return h('div', {\r\n      class: 'osjs-login',\r\n      id: options.id,\r\n      style: {display: state.hidden ? 'none' : undefined}\r\n    }, [left(), middle(), right()].filter(el => !!el));\r\n  };\r\n};\r\n\r\n/**\r\n * Login UI Adapter\r\n */\r\nconst create = (options, login, startHidden, $container) => {\r\n  const ee = new EventEmitter('LoginUI');\r\n  const view = createView(options);\r\n  const a = app({\r\n    hidden: startHidden,\r\n    ...login\r\n  }, {\r\n    setLoading: loading => ({loading}),\r\n    setError: error => ({error, hidden: false}),\r\n    submit: ev => state => {\r\n      ev.preventDefault();\r\n\r\n      if (state.loading) {\r\n        return;\r\n      }\r\n\r\n      const values = Array.from(ev.target.elements)\r\n        .filter(el => el.type !== 'submit')\r\n        .reduce((o, el) => ({...o, [el.name] : el.value}), {});\r\n\r\n      ee.emit('login:post', values);\r\n    }\r\n  }, view, $container);\r\n\r\n  ee.on('login:start', () => a.setLoading(true));\r\n  ee.on('login:stop', () => a.setLoading(false));\r\n  ee.on('login:error', (msg) => a.setError(msg));\r\n\r\n  return ee;\r\n};\r\n\r\nexport default create;\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {h, app} from 'hyperapp';\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\n\r\nconst createView = (core, fs, icon, _) => {\r\n  const resultView = ({results, index}, actions) => results.map((r, i) => h('li', {\r\n    onclick: () => actions.open(i),\r\n    onupdate: el => {\r\n      if (i === index) {\r\n        el.scrollIntoView();\r\n      }\r\n    },\r\n    class: [\r\n      'osjs-search-result',\r\n      index === i ? 'osjs__active' : ''\r\n    ].join(' ')\r\n  }, [\r\n    h('img', {src: icon(fs.icon(r).name)}),\r\n    h('span', {}, `${r.path} (${r.mime})`)\r\n  ]));\r\n\r\n  return (state, actions) => h('div', {\r\n    class: 'osjs-search-container osjs-notification',\r\n    style: {\r\n      display: state.visible ? undefined : 'none'\r\n    }\r\n  }, [\r\n    h('input', {\r\n      type: 'text',\r\n      placeholder: _('LBL_SEARCH_PLACEHOLDER'),\r\n      class: 'osjs-search-input',\r\n      value: state.query,\r\n      onblur: () => {\r\n        if (!state.value) {\r\n          setTimeout(() => actions.toggle(false), 300);\r\n        }\r\n      },\r\n      oninput: ev => actions.setQuery(ev.target.value),\r\n      onkeydown: ev => {\r\n        if (ev.keyCode === 38) { // Up\r\n          actions.setPreviousIndex();\r\n        } else if (ev.keyCode === 40) { // Down\r\n          actions.setNextIndex();\r\n        } else if (ev.keyCode === 27) { // Escape\r\n          actions.resetIndex();\r\n\r\n          if (state.index === -1) {\r\n            actions.hide();\r\n          }\r\n        }\r\n      },\r\n      onkeypress: ev => {\r\n        if (ev.keyCode === 13) {\r\n          if (state.index >= 0) {\r\n            actions.open(state.index);\r\n          } else {\r\n            actions.search(state.query.replace(/\\*?$/, '*').replace(/^\\*?/, '*'));\r\n          }\r\n        }\r\n      }\r\n    }),\r\n    h('div', {\r\n      'data-error': !!state.error,\r\n      class: 'osjs-search-message',\r\n      style: {\r\n        display: (state.error || state.status) ? 'block' : 'none'\r\n      }\r\n    }, state.error || state.status),\r\n    h('ol', {\r\n      class: 'osjs-search-results',\r\n      style: {\r\n        display: state.results.length ? undefined : 'none'\r\n      }\r\n    }, resultView(state, actions))\r\n  ]);\r\n};\r\n\r\n/**\r\n * Search UI Adapter\r\n */\r\nconst create = (core, $element) => {\r\n  const _ = core.make('osjs/locale').translate;\r\n  const fs = core.make('osjs/fs');\r\n  const {icon} = core.make('osjs/theme');\r\n  const view = createView(core, fs, icon, _);\r\n  const ee = new EventEmitter('SearchUI');\r\n\r\n  const hyperapp = app({\r\n    query: '',\r\n    index: -1,\r\n    status: undefined,\r\n    error: null,\r\n    visible: false,\r\n    results: []\r\n  }, {\r\n    search: query => {\r\n      ee.emit('search', query);\r\n\r\n      return {status: _('LBL_SEARCH_WAIT')};\r\n    },\r\n    open: index => (state, actions) => {\r\n      const iter = state.results[index];\r\n      if (iter) {\r\n        ee.emit('open', iter);\r\n      }\r\n\r\n      actions.toggle(false);\r\n    },\r\n    resetIndex: () => () => ({\r\n      index: -1\r\n    }),\r\n    setNextIndex: () => state => ({\r\n      index: (state.index + 1) % state.results.length\r\n    }),\r\n    setPreviousIndex: () => state => ({\r\n      index: state.index <= 0 ? state.results.length - 1 : state.index - 1\r\n    }),\r\n    setError: error => () => ({\r\n      error,\r\n      status: undefined,\r\n      index: -1\r\n    }),\r\n    setResults: results => () => ({\r\n      results,\r\n      index: -1,\r\n      status: _('LBL_SEARCH_RESULT', results.length),\r\n    }),\r\n    setQuery: query => () => ({\r\n      query\r\n    }),\r\n    hide: () => {\r\n      ee.emit('hide');\r\n    },\r\n    toggle: visible => state => ({\r\n      query: '',\r\n      results: [],\r\n      index: -1,\r\n      status: undefined,\r\n      error: null,\r\n      visible: typeof visible === 'boolean' ? visible : !state.visible\r\n    })\r\n  }, view, $element);\r\n\r\n  ee.on('error', error => hyperapp.setError(error));\r\n  ee.on('success', results => hyperapp.setResults(results));\r\n  ee.on('toggle', toggle => hyperapp.toggle(toggle));\r\n  ee.on('focus', () => {\r\n    const el = $element.querySelector('.osjs-search-input');\r\n    if (el) {\r\n      el.focus();\r\n    }\r\n  });\r\n\r\n  return ee;\r\n};\r\n\r\nexport default create;\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * Application VFS adapter\r\n * @param {Core} core Core reference\r\n * @param {object} [options] Adapter options\r\n */\r\nconst adapter = (core) => {\r\n  const pkgs = core.make('osjs/packages');\r\n\r\n  return {\r\n    readdir: ({path}, options) => {\r\n      return Promise.resolve(pkgs.getPackages())\r\n        .then(pkgs => pkgs.map(pkg => ({\r\n          isDirectory: false,\r\n          isFile: true,\r\n          filename: pkg.name,\r\n          mime: 'osjs/application',\r\n          path: `${path.replace(/(\\/+)?$/, '/')}${pkg.name}`,\r\n          size: 0,\r\n          stat: {},\r\n          icon: pkg.icon ? core.url(pkg.icon, {}, pkg) : null\r\n        })));\r\n    }\r\n  };\r\n};\r\n\r\nexport default adapter;\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * Null VFS adapter\r\n * @param {Core} core Core reference\r\n * @param {object} [options] Adapter options\r\n */\r\nconst nullAdapter = ({\r\n  capabilities: (path, options) => Promise.resolve({}),\r\n  readdir: (path, options) => Promise.resolve([]),\r\n  readfile: (path, type, options) => Promise.resolve({body: new ArrayBuffer(), mime: 'application/octet-stream'}),\r\n  writefile: (path, data, options) => Promise.resolve(-1),\r\n  copy: (from, to, options) => Promise.resolve(false),\r\n  rename: (from, to, options) => Promise.resolve(false),\r\n  mkdir: (path, options) => Promise.resolve(false),\r\n  unlink: (path, options) => Promise.resolve(false),\r\n  exists: (path, options) => Promise.resolve(false),\r\n  stat: (path, options) => Promise.resolve({}),\r\n  url: (path, options) => Promise.resolve(null),\r\n  mount: options => Promise.resolve(true),\r\n  unmount: options => Promise.resolve(true),\r\n  search: (root, pattern, options) => Promise.resolve([]),\r\n  touch: (path, options) => Promise.resolve(false)\r\n});\r\n\r\nexport default nullAdapter;\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nconst getters = ['capabilities', 'exists', 'stat', 'readdir', 'readfile'];\r\n\r\nconst requester = core => (fn, body, type, options = {}) =>\r\n  core.request(`/vfs/${fn}`, {\r\n    body,\r\n    method: getters.indexOf(fn) !== -1 ? 'get' : 'post',\r\n    ...options\r\n  }, type)\r\n    .then(response => {\r\n      if (type === 'json') {\r\n        return {mime: 'application/json', body: response};\r\n      } else if (fn === 'writefile') {\r\n        return response.json();\r\n      }\r\n\r\n      const contentType = response.headers.get('content-type') || 'application/octet-stream';\r\n\r\n      return response.arrayBuffer().then(result => ({\r\n        mime: contentType,\r\n        body: result\r\n      }));\r\n    });\r\n\r\nconst methods = (core, request) => {\r\n  const passthrough = (name) => ({path}, options) =>\r\n    request(name, {path, options}, 'json')\r\n      .then(({body}) => body);\r\n\r\n  return {\r\n    capabilities: passthrough('capabilities'),\r\n\r\n    readdir: ({path}, options) => request('readdir', {\r\n      path,\r\n      options,\r\n    }, 'json').then(({body}) => body),\r\n\r\n    readfile: ({path}, type, options) =>\r\n      request('readfile', {path, options}),\r\n\r\n    writefile: ({path}, data, options = {}) => {\r\n      const formData = new FormData();\r\n      formData.append('upload', data);\r\n      formData.append('path', path);\r\n      formData.append('options', options);\r\n\r\n      return request('writefile', formData, undefined, {\r\n        onProgress: options.onProgress,\r\n        xhr: !!options.onProgress\r\n      });\r\n    },\r\n\r\n    copy: (from, to, options) =>\r\n      request('copy', {from: from.path, to: to.path, options}, 'json').then(({body}) => body),\r\n\r\n    rename: (from, to, options) =>\r\n      request('rename', {from: from.path, to: to.path, options}, 'json').then(({body}) => body),\r\n\r\n    mkdir: passthrough('mkdir'),\r\n    unlink: passthrough('unlink'),\r\n    exists: passthrough('exists'),\r\n    stat: passthrough('stat'),\r\n\r\n    url: ({path}, options) => Promise.resolve(\r\n      core.url(`/vfs/readfile?path=${encodeURIComponent(path)}`)\r\n    ),\r\n\r\n    search: ({path}, pattern, options) =>\r\n      request('search', {root: path, pattern, options}, 'json')\r\n        .then(({body}) => body),\r\n\r\n    touch: ({path}, options) =>\r\n      request('touch', {path, options}, 'json').then(({body}) => body),\r\n\r\n    download: ({path}, options = {}) => {\r\n      const json = encodeURIComponent(JSON.stringify({download: true}));\r\n\r\n      return Promise.resolve(`/vfs/readfile?options=${json}&path=` + encodeURIComponent(path))\r\n        .then(url => {\r\n          return (options.target || window).open(url);\r\n        });\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * System VFS adapter\r\n * @param {Core} core Core reference\r\n * @param {object} [options] Adapter options\r\n */\r\nconst adapter = (core) => {\r\n  const request = requester(core);\r\n\r\n  return methods(core, request);\r\n};\r\n\r\nexport default adapter;\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\nimport merge from 'deepmerge';\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\nimport {loadOptionsFromConfig} from './utils/windows';\r\nimport Websocket from './websocket';\r\nimport Window from './window';\r\nimport logger from './logger';\r\n\r\nconst applications = [];\r\nlet applicationCount = 0;\r\n\r\nconst getSettingsKey = metadata =>\r\n  'osjs/application/' + metadata.name;\r\n\r\n/**\r\n * Application Options\r\n *\r\n * @typedef {Object} ApplicationOptions\r\n * @property {object} [settings] Initial settings\r\n * @property {object} [restore] Restore data\r\n * @property {boolean} [windowAutoFocus=true] Auto-focus first created window\r\n * @property {boolean} [sessionable=true] Allow session storage\r\n */\r\n\r\n/**\r\n * Application Data\r\n *\r\n * @typedef {Object} ApplicationData\r\n * @property {{foo: *}} args Launch arguments\r\n * @property {ApplicationOptions} [options] Options\r\n * @property {PackageMetadata} [metadata] Package Metadata\r\n */\r\n\r\n/**\r\n * Application Session\r\n *\r\n * @typedef {Object} ApplicationSession\r\n * @property {{foo: string}} args\r\n * @property {string} name\r\n * @property {WindowSession[]} windows\r\n */\r\n\r\n/**\r\n * Base class for an Application\r\n */\r\nexport default class Application extends EventEmitter {\r\n\r\n  /**\r\n   * Create application\r\n   *\r\n   * @param {Core} core Core reference\r\n   * @param {ApplicationData} data Application data\r\n   */\r\n  constructor(core, data) {\r\n    data = {\r\n      args: {},\r\n      options: {},\r\n      metadata: {},\r\n      ...data\r\n    };\r\n\r\n    logger.debug('Application::constructor()', data);\r\n\r\n    const defaultSettings = data.options.settings\r\n      ? {...data.options.settings}\r\n      : {};\r\n\r\n    const name = data.metadata && data.metadata.name\r\n      ? 'Application@' + data.metadata.name\r\n      : 'Application' + String(applicationCount);\r\n\r\n    super(name);\r\n\r\n    /**\r\n     * The Application ID\r\n     * @type {Number}\r\n     * @readonly\r\n     */\r\n    this.pid = applicationCount;\r\n\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * Application arguments\r\n     * @type {{foo: *}}\r\n     */\r\n    this.args = data.args;\r\n\r\n    /**\r\n     * Application options\r\n     * @type {ApplicationOptions}\r\n     */\r\n    this.options = {\r\n      sessionable: true,\r\n      windowAutoFocus: true,\r\n      ...data.options\r\n    };\r\n\r\n    /**\r\n     * Application metadata\r\n     * @type {PackageMetadata}\r\n     * @readonly\r\n     */\r\n    this.metadata = data.metadata;\r\n\r\n    /**\r\n     * Window list\r\n     * @type {Window[]}\r\n     */\r\n    this.windows = [];\r\n\r\n    /**\r\n     * Worker instances\r\n     * @type {Worker[]}\r\n     */\r\n    this.workers = [];\r\n\r\n    /**\r\n     * Options for internal fetch/requests\r\n     * @type {object}\r\n     */\r\n    this.requestOptions = {};\r\n\r\n    /**\r\n     * The application destruction state\r\n     * @type {boolean}\r\n     */\r\n    this.destroyed = false;\r\n\r\n    /**\r\n     * Application settings\r\n     * @type {{foo: *}}\r\n     */\r\n    this.settings = core.make('osjs/settings')\r\n      .get(getSettingsKey(this.metadata), null, defaultSettings);\r\n\r\n    /**\r\n     * Application started time\r\n     * @type {Date}\r\n     * @readonly\r\n     */\r\n    this.started = new Date();\r\n\r\n    /**\r\n     * Application WebSockets\r\n     * @type {Websocket[]}\r\n     */\r\n    this.sockets = [];\r\n\r\n    applications.push(this);\r\n    applicationCount++;\r\n\r\n    this.core.emit('osjs/application:create', this);\r\n  }\r\n\r\n  /**\r\n   * Destroy application\r\n   */\r\n  destroy(remove = true) {\r\n    if (this.destroyed) {\r\n      return;\r\n    }\r\n    this.destroyed = true;\r\n\r\n    this.emit('destroy');\r\n    this.core.emit('osjs/application:destroy', this);\r\n\r\n    const destroy = (list, fn) => {\r\n      try {\r\n        list.forEach(fn);\r\n      } catch (e) {\r\n        logger.warn('Exception on application destruction', e);\r\n      }\r\n\r\n      return [];\r\n    };\r\n\r\n    this.windows = destroy(this.windows, window => window.destroy());\r\n    this.sockets = destroy(this.sockets, ws => ws.close());\r\n    this.workers = destroy(this.workers, worker => worker.terminate());\r\n\r\n    if (remove) {\r\n      const foundIndex = applications.findIndex(a => a === this);\r\n      if (foundIndex !== -1) {\r\n        applications.splice(foundIndex, 1);\r\n      }\r\n    }\r\n\r\n    super.destroy();\r\n  }\r\n\r\n  /**\r\n   * Re-launch this application\r\n   */\r\n  relaunch() {\r\n    const windows = this.windows.map(w => w.getSession());\r\n\r\n    this.destroy();\r\n\r\n    setTimeout(() => {\r\n      this.core.run(this.metadata.name, {...this.args}, {\r\n        ...this.options,\r\n        forcePreload: this.core.config('development'),\r\n        restore: {windows}\r\n      });\r\n    }, 1);\r\n  }\r\n\r\n  /**\r\n   * Gets a URI to a resource for this application\r\n   *\r\n   * If given path is an URI it will just return itself.\r\n   *\r\n   * @param {string} path The path\r\n   * @param {object} [options] Options for url() in core\r\n   * @return {string} A complete URI\r\n   */\r\n  resource(path = '/', options = {}) {\r\n    return this.core.url(path, options, this.metadata);\r\n  }\r\n\r\n  /**\r\n   * Performs a request to the OS.js server with the application\r\n   * as the endpoint.\r\n   * @param {string} [path=/] Append this to endpoint\r\n   * @param {Options} [options] fetch options\r\n   * @param {string} [type='json'] Request / Response type\r\n   * @return {Promise<*>} ArrayBuffer or JSON\r\n   */\r\n  request(path = '/', options = {}, type = 'json') {\r\n    const uri = this.resource(path);\r\n\r\n    return this.core.request(uri, options, type);\r\n  }\r\n\r\n  /**\r\n   * Creates a new Websocket\r\n   * @param {string} [path=/socket] Append this to endpoint\r\n   * @param {WebsocketOptions} [options={}] Connection options\r\n   * @return {Websocket}\r\n   */\r\n  socket(path = '/socket', options = {}) {\r\n    options = {\r\n      socket: {},\r\n      ...options\r\n    };\r\n\r\n    const uri = this.resource(path, {type: 'websocket'});\r\n    const ws = new Websocket(this.metadata.name, uri, options.socket);\r\n\r\n    this.sockets.push(ws);\r\n\r\n    return ws;\r\n  }\r\n\r\n  /**\r\n   * Sends a message over websocket via the core connection.\r\n   *\r\n   * This does not create a new connection, but rather uses the core connection.\r\n   * For subscribing to messages from the server use the 'ws:message' event\r\n   *\r\n   * @param {*} ...args Arguments to pass to message\r\n   */\r\n  send(...args) {\r\n    this.core.send('osjs/application:socket:message', {\r\n      pid: this.pid,\r\n      name: this.metadata.name,\r\n      args\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a new Worker\r\n   * @param {string} filename Worker filename\r\n   * @param {object} [options] Worker options\r\n   * @return {Worker}\r\n   */\r\n  worker(filename, options = {}) {\r\n    const uri = this.resource(filename);\r\n    const worker =  new Worker(uri, {\r\n      credentials: 'same-origin',\r\n      ...options\r\n    });\r\n\r\n    this.workers.push(worker);\r\n\r\n    return worker;\r\n  }\r\n\r\n  /**\r\n   * Create a new window belonging to this application\r\n   * @param {WindowOptions} [options={}] Window options\r\n   * @return {Window}\r\n   */\r\n  createWindow(options = {}) {\r\n    const found = this.windows.find(w => w.id === options.id);\r\n    if (found) {\r\n      const msg = this.core.make('osjs/locale')\r\n        .translate('ERR_WINDOW_ID_EXISTS', options.id);\r\n\r\n      throw new Error(msg);\r\n    }\r\n\r\n    const configWindows = this.core.config('application.windows', []);\r\n    const applyOptions = loadOptionsFromConfig(configWindows, this.metadata.name, options.id);\r\n    const instance = new Window(this.core, merge(options, applyOptions));\r\n\r\n    if (this.options.restore) {\r\n      const windows = this.options.restore.windows || [];\r\n      const found = windows.findIndex(r => r.id === instance.id);\r\n\r\n      if (found !== -1) {\r\n        const restore = windows[found];\r\n        instance.setPosition(restore.position, true);\r\n        instance.setDimension(restore.dimension);\r\n\r\n        if (restore.minimized) {\r\n          instance.minimize();\r\n        } else if (restore.maximized) {\r\n          instance.maximize();\r\n        }\r\n\r\n        this.options.restore.windows.splice(found, 1);\r\n      }\r\n    }\r\n\r\n    instance.init();\r\n\r\n    this.windows.push(instance);\r\n\r\n    this.emit('create-window', instance);\r\n    instance.on('destroy', () => {\r\n      if (!this.destroyed) {\r\n        const foundIndex = this.windows.findIndex(w => w === instance);\r\n        if (foundIndex !== -1) {\r\n          this.windows.splice(foundIndex, 1);\r\n        }\r\n      }\r\n\r\n      this.emit('destroy-window', instance);\r\n    });\r\n\r\n    if (this.options.windowAutoFocus) {\r\n      instance.focus();\r\n    }\r\n\r\n    return instance;\r\n  }\r\n\r\n  /**\r\n   * Removes window(s) based on given filter\r\n   * @param {Function} filter Filter function\r\n   */\r\n  removeWindow(filter) {\r\n    const found = this.windows.filter(filter);\r\n    found.forEach(win => win.destroy());\r\n  }\r\n\r\n  /**\r\n   * Gets a snapshot of the application session\r\n   * @return {ApplicationSession}\r\n   */\r\n  getSession() {\r\n    const session = {\r\n      args: {...this.args},\r\n      name: this.metadata.name,\r\n      windows: this.windows\r\n        .map(w => w.getSession())\r\n        .filter(s => s !== null)\r\n    };\r\n\r\n    return session;\r\n  }\r\n\r\n  /**\r\n   * Emits an event across all (or filtered) applications\r\n   *\r\n   * @deprecated\r\n   * @param {Function} [filter] A method to filter what applications to send to\r\n   * @return {Function} Function with 'emit()' signature\r\n   */\r\n  emitAll(filter) {\r\n    logger.warn('Application#emitAll is deprecated. Use Core#broadcast instead');\r\n\r\n    const defaultFilter = proc => proc.pid !== this.pid;\r\n    const filterFn = typeof filter === 'function'\r\n      ? filter\r\n      : typeof filter === 'string'\r\n        ? proc => defaultFilter(proc) && proc.metadata.name === filter\r\n        : defaultFilter;\r\n\r\n    return (name, ...args) => applications.filter(filterFn)\r\n      .map(proc => proc.emit(name, ...args));\r\n  }\r\n\r\n  /**\r\n   * Saves settings\r\n   * @return {Promise<boolean>}\r\n   */\r\n  saveSettings() {\r\n    const service = this.core.make('osjs/settings');\r\n    const name = getSettingsKey(this.metadata);\r\n\r\n    service.set(name, null, this.settings);\r\n\r\n    return service.save();\r\n  }\r\n\r\n  /**\r\n   * Get a list of all running applications\r\n   *\r\n   * @return {Application[]}\r\n   */\r\n  static getApplications() {\r\n    return applications;\r\n  }\r\n\r\n  /**\r\n   * Kills all running applications\r\n   */\r\n  static destroyAll() {\r\n    applications.forEach(proc => {\r\n      try {\r\n        proc.destroy(false);\r\n      } catch (e) {\r\n        logger.warn('Exception on destroyAll', e);\r\n      }\r\n    });\r\n\r\n    applications.splice(0, applications.length);\r\n  }\r\n\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\nimport Cookies from 'js-cookie';\r\nimport Login from './login';\r\nimport serverAuth  from './adapters/auth/server';\r\nimport localStorageAuth from './adapters/auth/localstorage';\r\nimport logger from './logger';\r\n\r\nconst defaultAdapters = {\r\n  server: serverAuth,\r\n  localStorage: localStorageAuth\r\n};\r\n\r\nconst createUi = (core, options) => {\r\n  const defaultUi = core.config('auth.ui', {});\r\n\r\n  return options.login\r\n    ? options.login(core, options.config || {})\r\n    : new Login(core, options.ui || defaultUi);\r\n};\r\n\r\nconst createAdapter = (core, options) => {\r\n  const adapter = core.config('standalone')\r\n    ? localStorageAuth\r\n    : typeof options.adapter === 'function'\r\n      ? options.adapter\r\n      : defaultAdapters[options.adapter || 'server'];\r\n\r\n  return {\r\n    login: () => Promise.reject(new Error('Not implemented')),\r\n    logout: () => Promise.reject(new Error('Not implemented')),\r\n    register: () => Promise.reject(new Error('Not implemented')),\r\n    init: () => Promise.resolve(true),\r\n    destroy: () => {},\r\n    ...adapter(core, options.config || {})\r\n  };\r\n};\r\n\r\n/**\r\n * TODO: typedef\r\n * @typedef {Object} AuthAdapter\r\n */\r\n\r\n/**\r\n * TODO: typedef\r\n * @typedef {Object} AuthAdapterConfig\r\n */\r\n\r\n/**\r\n * @typedef {Object} AuthForm\r\n * @property {string} [username]\r\n * @property {string} [password]\r\n */\r\n\r\n/**\r\n * @callback AuthAdapterCallback\r\n * @param {Core} core\r\n * @return {AuthAdapter}\r\n */\r\n\r\n/**\r\n * @callback LoginAdapterCallback\r\n * @param {Core} core\r\n * @return {Login}\r\n */\r\n\r\n/**\r\n * @callback AuthCallback\r\n * @param {AuthForm} data\r\n * @return {boolean}\r\n */\r\n\r\n/**\r\n * @typedef {Object} AuthSettings\r\n * @property {AuthAdapterCallback|AuthAdapter} [adapter] Adapter to use\r\n * @property {LoginAdapterCallback|Login} [login] Login Adapter to use\r\n * @property {AuthAdapterConfig} [config] Adapter configuration\r\n */\r\n\r\n/**\r\n * Handles Authentication\r\n */\r\nexport default class Auth {\r\n\r\n  /**\r\n   * @param {Core} core OS.js Core instance reference\r\n   * @param {AuthSettings} [options={}] Auth Options\r\n   */\r\n  constructor(core, options = {}) {\r\n    /**\r\n     * Authentication UI\r\n     * @type {Login}\r\n     * @readonly\r\n     */\r\n    this.ui = createUi(core, options);\r\n\r\n    /**\r\n     * Authentication adapter\r\n     * @type {AuthAdapter}\r\n     * @readonly\r\n     */\r\n    this.adapter = createAdapter(core, options);\r\n\r\n    /**\r\n     * Authentication callback function\r\n     * @type {AuthCallback}\r\n     * @readonly\r\n     */\r\n    this.callback = function() {};\r\n\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n  }\r\n\r\n  /**\r\n   * Initializes authentication handler\r\n   */\r\n  init() {\r\n    this.ui.on('login:post', values => this.login(values));\r\n    this.ui.on('register:post', values => this.register(values));\r\n\r\n    return this.adapter.init();\r\n  }\r\n\r\n  /**\r\n   * Destroy authentication handler\r\n   */\r\n  destroy() {\r\n    this.ui.destroy();\r\n  }\r\n\r\n  /**\r\n   * Run the shutdown procedure\r\n   * @param {boolean} [reload] Reload afterwards\r\n   */\r\n  shutdown(reload) {\r\n    try {\r\n      this.core.destroy();\r\n    } catch (e) {\r\n      logger.warn('Exception on destruction', e);\r\n    }\r\n\r\n    this.core.emit('osjs/core:logged-out');\r\n\r\n    if (reload) {\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n        // FIXME Reload, not refresh\r\n        // this.core.boot();\r\n      }, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Shows Login UI\r\n   * @param {AuthCallback} cb Authentication callback\r\n   * @return {Promise<boolean>}\r\n   */\r\n  show(cb) {\r\n    const login = this.core.config('auth.login', {});\r\n    const autologin = login.username && login.password;\r\n    const settings = this.core.config('auth.cookie');\r\n\r\n    this.callback = cb;\r\n    this.ui.init(autologin);\r\n\r\n    if (autologin) {\r\n      return this.login(login);\r\n    } else if (settings.enabled) {\r\n      const cookie = Cookies.get(settings.name);\r\n      console.warn(cookie);\r\n      if (cookie) {\r\n        return this.login(JSON.parse(cookie));\r\n      }\r\n    }\r\n\r\n    return Promise.resolve(true);\r\n  }\r\n\r\n  /**\r\n   * Performs a login\r\n   * @param {AuthForm} values Form values as JSON\r\n   * @return {Promise<boolean>}\r\n   */\r\n  login(values) {\r\n    this.ui.emit('login:start');\r\n\r\n    return this.adapter\r\n      .login(values)\r\n      .then(response => {\r\n        if (response) {\r\n          const settings = this.core.config('auth.cookie');\r\n          if (settings.enabled) {\r\n            Cookies.set(settings.name, JSON.stringify(values), {\r\n              expires: settings.expires,\r\n              sameSite: 'strict'\r\n            });\r\n          } else {\r\n            Cookies.remove(settings.name);\r\n          }\r\n\r\n          this.ui.destroy();\r\n          this.callback(response);\r\n\r\n          this.core.emit('osjs/core:logged-in');\r\n          this.ui.emit('login:stop', response);\r\n\r\n          return true;\r\n        }\r\n\r\n        return false;\r\n      })\r\n      .catch(e => {\r\n        if (this.core.config('development')) {\r\n          logger.warn('Exception on login', e);\r\n        }\r\n\r\n        this.ui.emit('login:error', 'Login failed', e);\r\n        this.ui.emit('login:stop');\r\n\r\n        return false;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Performs a logout\r\n   * @param {boolean} [reload=true] Reload client afterwards\r\n   * @return {Promise<boolean>}\r\n   */\r\n  logout(reload = true) {\r\n    return this.adapter.logout(reload)\r\n      .then(response => {\r\n        if (!response) {\r\n          return false;\r\n        }\r\n\r\n        const settings = this.core.config('auth.cookie');\r\n        Cookies.remove(settings.name);\r\n\r\n        this.shutdown(reload);\r\n\r\n        return true;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Performs a register call\r\n   * @param {AuthForm} values Form values as JSON\r\n   * @return {Promise<*>}\r\n   */\r\n  register(values) {\r\n    this.ui.emit('register:start');\r\n\r\n    return this.adapter\r\n      .register(values)\r\n      .then(response => {\r\n        if (response) {\r\n          this.ui.emit('register:stop', response);\r\n\r\n          return response;\r\n        }\r\n\r\n        return false;\r\n      })\r\n      .catch(e => {\r\n        if (this.core.config('development')) {\r\n          logger.warn('Exception on registration', e);\r\n        }\r\n\r\n        this.ui.emit('register:error', 'Registration failed');\r\n        this.ui.emit('register:stop');\r\n\r\n        return false;\r\n      });\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\nimport {basename, pathname} from './utils/vfs';\r\n\r\n/**\r\n * Basic Application Options\r\n *\r\n * @typedef {Object} BasicApplicationOptions\r\n * @property {string[]} [mimeTypes] What MIME types to support (all/fallback)\r\n * @property {string[]} [loadMimeTypes] What MIME types to support on load\r\n * @property {string[]} [saveMimeTypes] What MIME types to support on save\r\n * @property {string} [defaultFilename] Default filename of a new file\r\n */\r\n\r\n/**\r\n * Basic Application Helper\r\n *\r\n * A class for helping creating basic applications with open/load/create functionality.\r\n * Also sets the internal proc args for sessions.\r\n */\r\nexport class BasicApplication extends EventEmitter {\r\n\r\n  /**\r\n   * Basic Application Constructor\r\n   * @param {Core} core OS.js Core API\r\n   * @param {Application} proc The application process\r\n   * @param {Window} win The main application window\r\n   * @param {BasicApplicationOptions} [options={}] Basic application options\r\n   */\r\n  constructor(core, proc, win, options = {}) {\r\n    super('BasicApplication<' + proc.name + '>');\r\n\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * Application instance reference\r\n     * @type {Application}\r\n     * @readonly\r\n     */\r\n    this.proc = proc;\r\n\r\n    /**\r\n     * Window instance reference\r\n     * @type {Window}\r\n     * @readonly\r\n     */\r\n    this.win = win;\r\n\r\n    /**\r\n     * Basic Application Options\r\n     * @type {BasicApplicationOptions}\r\n     * @readonly\r\n     */\r\n    this.options = {\r\n      mimeTypes: proc.metadata.mimes || [],\r\n      loadMimeTypes: [],\r\n      saveMimeTypes: [],\r\n      defaultFilename: 'New File',\r\n      ...options\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Destroys all Basic Application internals\r\n   */\r\n  destroy() {\r\n    this.off();\r\n    super.destroy();\r\n  }\r\n\r\n  /**\r\n   * Initializes the application\r\n   * @return {Promise<boolean>}\r\n   */\r\n  init() {\r\n    if (this.proc.args.file) {\r\n      this.open(this.proc.args.file);\r\n    } else {\r\n      this.create();\r\n    }\r\n\r\n    return Promise.resolve(true);\r\n  }\r\n\r\n  /**\r\n   * Gets options for a dialog\r\n   * @param {string} type Dialog type\r\n   * @return {object}\r\n   */\r\n  getDialogOptions(type, options = {}) {\r\n    const {\r\n      file,\r\n      ...rest\r\n    } = options;\r\n\r\n    const {\r\n      defaultFilename,\r\n      mimeTypes,\r\n      loadMimeTypes,\r\n      saveMimeTypes\r\n    } = this.options;\r\n\r\n    const currentFile = file ? file : this.proc.args.file;\r\n    const defaultPath = this.core.config('vfs.defaultPath');\r\n    const path = currentFile ? currentFile.path : null;\r\n\r\n    let mime = type === 'open' ? loadMimeTypes : saveMimeTypes;\r\n    if (!mime.length) {\r\n      mime = mimeTypes;\r\n    }\r\n\r\n    return [{\r\n      type,\r\n      mime,\r\n      filename: path ? basename(path) : defaultFilename,\r\n      path: path ? pathname(path) : defaultPath,\r\n      ...rest\r\n    }, {\r\n      parent: this.win,\r\n      attributes: {\r\n        modal: true\r\n      }\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * Updates the window title to match open file\r\n   */\r\n  updateWindowTitle() {\r\n    if (this.win) {\r\n      const {translatableFlat} = this.core.make('osjs/locale');\r\n      const prefix = translatableFlat(this.proc.metadata.title);\r\n      const title = this._createTitle(prefix);\r\n\r\n      this.win.setTitle(title);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a new dialog of a type\r\n   * @param {string} type Dialog type\r\n   * @param {Function} cb Callback\r\n   * @param {object} [options] Override options\r\n   */\r\n  createDialog(type, cb, options = {}) {\r\n    const [args, opts] = this.getDialogOptions(type, options);\r\n\r\n    if (this.core.has('osjs/dialog')) {\r\n      this.core.make('osjs/dialog', 'file', args, opts, (btn, item) => {\r\n        if (btn === 'ok') {\r\n          cb(item);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens given file\r\n   *\r\n   * Does not do any actual VFS operation\r\n   *\r\n   * @param {VFSFile} file A file\r\n   */\r\n  open(item) {\r\n    this._setFile(item, 'open-file');\r\n  }\r\n\r\n  /**\r\n   * Saves given file\r\n   *\r\n   * Does not do any actual VFS operation\r\n   *\r\n   * @param {VFSFile} file A file\r\n   */\r\n  save(item) {\r\n    this._setFile(item, 'save-file');\r\n  }\r\n\r\n  /**\r\n   * Create new file\r\n   *\r\n   * Does not do any actual VFS operation\r\n   */\r\n  create() {\r\n    this.proc.args.file = null;\r\n\r\n    this.emit('new-file');\r\n\r\n    this.updateWindowTitle();\r\n  }\r\n\r\n  /**\r\n   * Create new file\r\n   * @see BasicApplication#create\r\n   */\r\n  createNew() {\r\n    this.create();\r\n  }\r\n\r\n  /**\r\n   * Creates a new save dialog\r\n   * @param {object} [options] Dialog options\r\n   */\r\n  createSaveDialog(options = {}) {\r\n    this.createDialog('save', item => this.save(item), options);\r\n  }\r\n\r\n  /**\r\n   * Creates a new load dialog\r\n   * @param {object} [options] Dialog options\r\n   */\r\n  createOpenDialog(options = {}) {\r\n    this.createDialog('open', item => this.open(item), options);\r\n  }\r\n\r\n  /**\r\n   * Sets file from open/save action\r\n   *\r\n   * @private\r\n   * @param {VFSFile} item File\r\n   * @param {string} eventName Event to fire\r\n   */\r\n  _setFile(item, eventName) {\r\n    this.proc.args.file = {...item};\r\n    this.emit(eventName, item);\r\n    this.updateWindowTitle();\r\n  }\r\n\r\n  /**\r\n   * Creates the window title\r\n   *\r\n   * @private\r\n   * @param {string} prefix Title prefix\r\n   * @return {string}\r\n   */\r\n  _createTitle(prefix) {\r\n    const title = this.proc.args.file\r\n      ? basename(this.proc.args.file.path)\r\n      : this.options.defaultFilename;\r\n\r\n    return title\r\n      ? `${prefix} - ${title}`\r\n      : prefix;\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * Clipboard Data\r\n *\r\n * @typedef {Object} ClipboardData\r\n * @property {string} [type] Optional data type\r\n * @property {*} data\r\n */\r\n\r\n/**\r\n * Clipboard Manager\r\n */\r\nexport default class Clipboard {\r\n\r\n  /**\r\n   * Create new clipboard\r\n   */\r\n  constructor() {\r\n    /**\r\n     * @type {ClipboardData}\r\n     */\r\n    this.clipboard = undefined;\r\n\r\n    this.clear();\r\n  }\r\n\r\n  /**\r\n   * Destroy clipboard\r\n   */\r\n  destroy() {\r\n    this.clear();\r\n  }\r\n\r\n  /**\r\n   * Clear clipboard\r\n   */\r\n  clear() {\r\n    this.clipboard = {data: undefined, type: undefined};\r\n  }\r\n\r\n  /**\r\n   * Set clipboard data\r\n   * @param {*} data Clipboard data. For async data, provide a function that returns a promise\r\n   * @param {string} [type] Optional type used by applications for identifying content\r\n   */\r\n  set(data, type) {\r\n    this.clipboard = {data, type};\r\n  }\r\n\r\n  /**\r\n   * Checks if current clipboard data has this type\r\n   * @param {string|RegExp} type Data type\r\n   * @return {boolean}\r\n   */\r\n  has(type) {\r\n    if (type instanceof RegExp) {\r\n      return typeof this.clipboard.type === 'string' &&\r\n        !!this.clipboard.type.match(type);\r\n    }\r\n    return this.clipboard.type === type;\r\n  }\r\n\r\n  /**\r\n   * Gets clipboard data\r\n   * @param {boolean} [clear=false] Clear clipboard\r\n   * @return {Promise<*>}\r\n   */\r\n  get(clear = false) {\r\n    const {data} = this.clipboard;\r\n    const result = typeof data === 'function'\r\n      ? data()\r\n      : data;\r\n\r\n    if (clear) {\r\n      this.clear();\r\n    }\r\n\r\n    return Promise.resolve(result);\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {clientLocale} from './utils/locale.js';\r\nimport defaultWallpaper from './styles/wallpaper.png';\r\nimport defaultIcon from './styles/logo-blue-32x32.png';\r\n\r\n/**\r\n * TODO: typedef\r\n * @typedef {Object} CoreConfig\r\n */\r\n\r\nconst createUri = str => str\r\n  .replace(/(index\\.(html?|php))$/, '')\r\n  .replace(/\\/?$/, '/');\r\n\r\nconst pathname = createUri(window.location.pathname);\r\n\r\nconst href = createUri(window.location.href);\r\n\r\nconst languages = {\r\n  en_EN: 'English',\r\n  nb_NO: 'Norwegian, Norsk (bokmål)',\r\n  vi_VN: 'Vietnamese, Vietnamese',\r\n  fr_FR: 'French',\r\n  de_DE: 'German',\r\n  sl_SI: 'Slovenian, Slovenščina',\r\n  zh_CN: 'Chinese (simplified)',\r\n  fa_FA: 'Persian',\r\n  pt_BR: 'Português (Brasil)',\r\n  ru_RU: 'Русский (Russian)',\r\n  tr_TR: 'Türkçe (Turkish)',\r\n  sv_SE: 'Svenska (Swedish)'\r\n};\r\n\r\nexport const defaultConfiguration = {\r\n  development: !(process.env.NODE_ENV || '').match(/^prod/i),\r\n  standalone: false,\r\n  languages,\r\n\r\n  http: {\r\n    ping: true,\r\n    public: pathname,\r\n    uri: href\r\n  },\r\n\r\n  ws: {\r\n    connectInterval: 5000,\r\n    uri: href.replace(/^http/, 'ws'),\r\n    disabled: false\r\n  },\r\n\r\n  packages: {\r\n    manifest: '/metadata.json',\r\n    metadata: [],\r\n    hidden: [],\r\n    permissions: {},\r\n    overrideMetadata: {}\r\n  },\r\n\r\n  // FIXME: Move into packages above ?!\r\n  application: {\r\n    pinned: [],\r\n    autostart: [],\r\n    categories: {\r\n      development: {\r\n        label: 'LBL_APP_CAT_DEVELOPMENT',\r\n        icon: 'applications-development'\r\n      },\r\n      science: {\r\n        label: 'LBL_APP_CAT_SCIENCE',\r\n        icon: 'applications-science'\r\n      },\r\n      games: {\r\n        label: 'LBL_APP_CAT_GAMES',\r\n        icon: 'applications-games'\r\n      },\r\n      graphics: {\r\n        label: 'LBL_APP_CAT_GRAPHICS',\r\n        icon: 'applications-graphics'\r\n      },\r\n      network: {\r\n        label: 'LBL_APP_CAT_NETWORK',\r\n        icon: 'applications-internet'\r\n      },\r\n      multimedia: {\r\n        label: 'LBL_APP_CAT_MULTIMEDIA',\r\n        icon: 'applications-multimedia'\r\n      },\r\n      office: {\r\n        label: 'LBL_APP_CAT_OFFICE',\r\n        icon: 'applications-office'\r\n      },\r\n      system: {\r\n        label: 'LBL_APP_CAT_SYSTEM',\r\n        icon: 'applications-system'\r\n      },\r\n      utilities: {\r\n        label: 'LBL_APP_CAT_UTILITIES',\r\n        icon: 'applications-utilities'\r\n      },\r\n      other: {\r\n        label: 'LBL_APP_CAT_OTHER',\r\n        icon: 'applications-other'\r\n      }\r\n    },\r\n    windows: [\r\n      /*\r\n      {\r\n        application: string | RegExp | undefined,\r\n        window: string | RegExp | undefined,\r\n        options: {\r\n          dimension: object | undefined,\r\n          position: object | undefined,\r\n          attributes: object | undefined\r\n        }\r\n      }\r\n      */\r\n    ]\r\n  },\r\n\r\n  auth: {\r\n    ui: {},\r\n\r\n    cookie: {\r\n      name: 'osjs.auth',\r\n      expires: 7,\r\n      enabled: false,\r\n      secure: false\r\n    },\r\n\r\n    login: {\r\n      username: \"Kamogelo\",\r\n      password: \"admin\"\r\n    },\r\n\r\n    // NOTE: These are the fallback default values\r\n    defaultUserData: {\r\n      id: null,\r\n      username: 'osjs',\r\n      groups: []\r\n    }\r\n  },\r\n\r\n  settings: {\r\n    lock: [],\r\n    prefix: 'osjs__', // localStorage settings adapter key prefix\r\n\r\n    defaults: {\r\n      'osjs/default-application': {},\r\n      'osjs/session': [],\r\n      'osjs/desktop': {},\r\n      'osjs/locale': {}\r\n    }\r\n  },\r\n\r\n  search: {\r\n    enabled: true\r\n  },\r\n\r\n  notifications: {\r\n    native: false\r\n  },\r\n\r\n  desktop: {\r\n    lock: false,\r\n    contextmenu: {\r\n      enabled: true,\r\n      defaults: true\r\n    },\r\n\r\n    settings: {\r\n      font: 'Roboto',\r\n      theme: 'StandardTheme',\r\n      sounds: 'FreedesktopSounds',\r\n      icons: 'GnomeIcons',\r\n      animations: false,\r\n      panels: [{\r\n        position: 'bottom',\r\n        items: [\r\n          {name: 'menu'},\r\n          {name: 'windows'},\r\n          {name: 'tray'},\r\n          {name: 'clock'}\r\n        ]\r\n      }],\r\n      widgets: [],\r\n      keybindings: {\r\n        'open-application-menu': 'shift+alt+a',\r\n        'close-window': 'shift+alt+w'\r\n      },\r\n      notifications: {\r\n        position: 'top-right'\r\n      },\r\n      background: {\r\n        src: defaultWallpaper,\r\n        color: '#572a79',\r\n        style: 'cover'\r\n      },\r\n      iconview: {\r\n        enabled: true,\r\n        path: 'home:/.desktop',\r\n        fontColorStyle: 'system',\r\n        fontColor: '#ffffff'\r\n      }\r\n    }\r\n  },\r\n\r\n  locale: {\r\n    language: clientLocale('en_EN', Object.keys(languages)),\r\n    rtl: ['az', 'fa', 'he', 'uz', 'ar'],\r\n    format: {\r\n      shortDate: 'yyyy-mm-dd',\r\n      mediumDate: 'dS mmm yyyy',\r\n      longDate: 'dS mmmm yyyy',\r\n      fullDate: 'dddd dS mmmm yyyy',\r\n      shortTime: 'HH:MM',\r\n      longTime: 'HH:MM:ss'\r\n    }\r\n  },\r\n\r\n  windows: {\r\n    lofi: false,\r\n    mobile: false, // Trigger for setting mobile UI\r\n    template: null, // A string. See 'window.js' for example\r\n    clampToViewport: true, // Clamp windows to viewport on resize\r\n    moveKeybinding: 'ctrl'\r\n  },\r\n\r\n  vfs: {\r\n    watch: true,\r\n    defaultPath: 'home:/',\r\n    defaultAdapter: 'system',\r\n    adapters: {},\r\n    mountpoints: [{\r\n      name: 'apps',\r\n      label: 'Applications',\r\n      adapter: 'apps',\r\n      icon: defaultIcon,\r\n      attributes: {\r\n        visibility: 'restricted',\r\n        readOnly: true\r\n      }\r\n    }, {\r\n      name: 'osjs',\r\n      label: 'OS.js',\r\n      adapter: 'system',\r\n      icon: {name: 'folder-publicshare'}\r\n    }, {\r\n      name: 'home',\r\n      label: 'Home',\r\n      adapter: 'system',\r\n      icon: {name: 'user-home'}\r\n    }],\r\n    icons: {\r\n      '^application/zip': {name: 'package-x-generic'},\r\n      '^application/javascript': {name: 'text-x-script'},\r\n      '^application/json': {name: 'text-x-script'},\r\n      '^application/x-python': {name: 'text-x-script'},\r\n      '^application/php': {name: 'text-x-script'},\r\n      '^application/pdf': {name: 'x-office-document'},\r\n      '^application/rtf': {name: 'x-office-document'},\r\n      '^application/msword': {name: 'x-office-document'},\r\n      '^application/(xz|tar|gzip)': {name: 'package-x-generic'},\r\n      '^text/css': {name: 'text-x-script'},\r\n      '^text/html': {name: 'text-html'},\r\n      '^(application|text)/xml': {name: 'text-html'},\r\n      '^application': {name: 'application-x-executable'},\r\n      '^text': {name: 'text-x-generic'},\r\n      '^audio': {name: 'audio-x-generic'},\r\n      '^video': {name: 'video-x-generic'},\r\n      '^image': {name: 'image-x-generic'}\r\n    }\r\n  },\r\n\r\n  providers: {\r\n    globalBlacklist: [\r\n      'osjs/websocket',\r\n      'osjs/clipboard',\r\n      'osjs/gapi'\r\n    ],\r\n    globalWhitelist: []\r\n  }\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport Application from './application';\r\nimport Websocket from './websocket';\r\nimport Splash from './splash';\r\nimport {CoreBase} from '@osjs/common';\r\nimport {defaultConfiguration} from './config';\r\nimport {fetch} from './utils/fetch';\r\nimport {urlResolver} from './utils/url';\r\nimport logger from './logger';\r\n\r\n/**\r\n * @callback SplashCallback\r\n * @param {Core} core\r\n * @return {Splash}\r\n */\r\n\r\n/**\r\n * User Data\r\n * @typedef {Object} CoreUserData\r\n * @property {string} username\r\n * @property {number} [id]\r\n * @property {string[]} [groups=[]]\r\n */\r\n\r\n/**\r\n * Core Options\r\n *\r\n * @typedef {Object} CoreOptions\r\n * @property {Element} [root] The root DOM element for elements\r\n * @property {Element} [resourceRoot] The root DOM element for resources\r\n * @property {String[]} [classNames] List of class names to apply to root dom element\r\n * @property {SplashCallback|Splash} [splash] Custom callback function for creating splash screen\r\n */\r\n\r\n/*\r\n * Core Open File Options\r\n *\r\n * @typedef {Object} CoreOpenOptions\r\n * @property {boolean} [useDefault] Use saved default application preference\r\n * @property {boolean} [forceDialog] Force application choice dialog on multiple choices\r\n */\r\n\r\n/**\r\n * Main Core class for OS.js service providers and bootstrapping.\r\n */\r\nexport default class Core extends CoreBase {\r\n\r\n  /**\r\n   * Create core instance\r\n   * @param {CoreConfig} [config={}] Configuration tree\r\n   * @param {CoreOptions} [options={}] Options\r\n   */\r\n  constructor(config = {}, options = {}) {\r\n    options = {\r\n      classNames: ['osjs-root'],\r\n      root: document.body,\r\n      ...options || {}\r\n    };\r\n\r\n    super(defaultConfiguration, config, options);\r\n\r\n    const $contents = document.createElement('div');\r\n    $contents.className = 'osjs-contents';\r\n\r\n    this.logger = logger;\r\n\r\n    /**\r\n     * Websocket connection\r\n     * @type {Websocket}\r\n     */\r\n    this.ws = null;\r\n\r\n    /**\r\n     * Ping (stay alive) interval\r\n     * @type {number}\r\n     */\r\n    this.ping = null;\r\n\r\n    /**\r\n     * Splash instance\r\n     * @type {Splash}\r\n     * @readonly\r\n     */\r\n    this.splash = options.splash ? options.splash(this) : new Splash(this);\r\n\r\n    /**\r\n     * Main DOM element\r\n     * @type {Element}\r\n     * @readonly\r\n     */\r\n    this.$root = options.root;\r\n\r\n    /**\r\n     * Windows etc DOM element\r\n     * @type {Element}\r\n     * @readonly\r\n     */\r\n    this.$contents = $contents;\r\n\r\n    /**\r\n     * Resource script container DOM element\r\n     * @type {Element}\r\n     * @readonly\r\n     */\r\n    this.$resourceRoot = options.resourceRoot || document.querySelector('head');\r\n\r\n    /**\r\n     * Default fetch request options\r\n     * @type {Object}\r\n     */\r\n    this.requestOptions = {};\r\n\r\n    /**\r\n     * Url Resolver\r\n     * TODO: typedef\r\n     * @type {function(): string}\r\n     * @readonly\r\n     */\r\n    this.urlResolver = urlResolver(this.configuration);\r\n\r\n    /**\r\n     * Current user data\r\n     * @type {CoreUserData}\r\n     * @readonly\r\n     */\r\n    this.user = this.config('auth.defaultUserData');\r\n\r\n    this.options.classNames.forEach(n => this.$root.classList.add(n));\r\n\r\n    const {uri} = this.configuration.ws;\r\n    if (!uri.match(/^wss?:/)) {\r\n      const {protocol, host} = window.location;\r\n\r\n      this.configuration.ws.uri = protocol.replace(/^http/, 'ws') + '//' + host + uri.replace(/^\\/+/, '/');\r\n    }\r\n\r\n    this.splash.init();\r\n  }\r\n\r\n  /**\r\n   * Destroy core instance\r\n   * @return {boolean}\r\n   */\r\n  destroy() {\r\n    if (this.destroyed) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    this.emit('osjs/core:destroy');\r\n\r\n    this.ping = clearInterval(this.ping);\r\n\r\n    Application.destroyAll();\r\n\r\n    if (this.ws) {\r\n      this.ws.close();\r\n    }\r\n\r\n    if (this.$contents) {\r\n      this.$contents.remove();\r\n      this.$contents = undefined;\r\n    }\r\n\r\n    this.user = this.config('auth.defaultUserData');\r\n    this.ws = null;\r\n    this.ping = null;\r\n\r\n    return super.destroy();\r\n  }\r\n\r\n  /**\r\n   * Boots up OS.js\r\n   * @return {Promise<boolean>}\r\n   */\r\n  boot() {\r\n    const done = e => {\r\n      if (e) {\r\n        logger.error('Error while booting', e);\r\n      }\r\n\r\n      console.groupEnd();\r\n\r\n      return this.start();\r\n    };\r\n\r\n    if (this.booted) {\r\n      return Promise.resolve(false);\r\n    }\r\n\r\n    console.group('Core::boot()');\r\n\r\n    this.$root.appendChild(this.$contents);\r\n    this._attachEvents();\r\n    this.emit('osjs/core:boot');\r\n\r\n    return super.boot()\r\n      .then(() => {\r\n        this.emit('osjs/core:booted');\r\n\r\n        if (this.has('osjs/auth')) {\r\n          return this.make('osjs/auth').show(user => {\r\n            const defaultData = this.config('auth.defaultUserData');\r\n            this.user = {\r\n              ...defaultData,\r\n              ...user\r\n            };\r\n\r\n            if (this.has('osjs/settings')) {\r\n              this.make('osjs/settings').load()\r\n                .then(() => done())\r\n                .catch(() => done());\r\n            } else {\r\n              done();\r\n            }\r\n          });\r\n        } else {\r\n          logger.debug('OS.js STARTED WITHOUT ANY AUTHENTICATION');\r\n        }\r\n\r\n        return done();\r\n      }).catch(done);\r\n  }\r\n\r\n  /**\r\n   * Starts all core services\r\n   * @return {Promise<boolean>}\r\n   */\r\n  start() {\r\n    const connect = () => new Promise((resolve, reject) => {\r\n      try {\r\n        const valid = this._createConnection(error => error ? reject(error) : resolve());\r\n        if (valid === false) {\r\n          // We can skip the connection\r\n          resolve();\r\n        }\r\n      } catch (e) {\r\n        reject(e);\r\n      }\r\n    });\r\n\r\n    const done = (err) => {\r\n      this.emit('osjs/core:started');\r\n\r\n      if (err) {\r\n        logger.warn('Error while starting', err);\r\n      }\r\n\r\n      console.groupEnd();\r\n\r\n      return !err;\r\n    };\r\n\r\n    if (this.started) {\r\n      return Promise.resolve(false);\r\n    }\r\n\r\n    console.group('Core::start()');\r\n\r\n    this.emit('osjs/core:start');\r\n\r\n    this._createListeners();\r\n\r\n    return super.start()\r\n      .then(result => {\r\n        console.groupEnd();\r\n\r\n        if (result) {\r\n          return connect()\r\n            .then(() => done())\r\n            .catch(err => done(err));\r\n        }\r\n\r\n        return false;\r\n      }).catch(done);\r\n  }\r\n\r\n  /**\r\n   * Attaches some internal events\r\n   * @private\r\n   */\r\n  _attachEvents() {\r\n    // Attaches sounds for certain events\r\n    this.on('osjs/core:started', () => {\r\n      if (this.has('osjs/sounds')) {\r\n        this.make('osjs/sounds').play('service-login');\r\n      }\r\n    });\r\n\r\n    this.on('osjs/core:destroy', () => {\r\n      if (this.has('osjs/sounds')) {\r\n        this.make('osjs/sounds').play('service-logout');\r\n      }\r\n    });\r\n\r\n    // Forwards messages to an application from internal websocket\r\n    this.on('osjs/application:socket:message', ({pid, args}) => {\r\n      const found = Application.getApplications()\r\n        .find(proc => proc && proc.pid === pid);\r\n\r\n      if (found) {\r\n        found.emit('ws:message', ...args);\r\n      }\r\n    });\r\n\r\n    // Sets up a server ping\r\n    this.on('osjs/core:connected', config => {\r\n      const enabled = this.config('http.ping');\r\n\r\n      if (enabled) {\r\n        const pingTime = typeof enabled === 'number'\r\n          ? enabled\r\n          : (30 * 60 * 1000);\r\n\r\n        this.ping = setInterval(() => {\r\n          if (this.ws) {\r\n            if (this.ws.connected && !this.ws.reconnecting) {\r\n              this.request('/ping').catch(e => logger.warn('Error on ping', e));\r\n            }\r\n          }\r\n        }, pingTime);\r\n      }\r\n    });\r\n\r\n    const updateRootLocale = () => {\r\n      try {\r\n        const s = this.make('osjs/settings');\r\n        const l = s.get('osjs/locale', 'language');\r\n        this.$root.setAttribute('data-locale', l);\r\n      } catch (e) {\r\n        console.warn(e);\r\n      }\r\n    };\r\n\r\n    this.on('osjs/locale:change', updateRootLocale);\r\n    this.on('osjs/settings:load', updateRootLocale);\r\n    this.on('osjs/settings:save', updateRootLocale);\r\n  }\r\n\r\n  /**\r\n   * Creates the main connection to server\r\n   *\r\n   * @private\r\n   * @param {Function} cb Callback function\r\n   * @return {boolean}\r\n   */\r\n  _createConnection(cb) {\r\n    if (this.configuration.standalone || this.configuration.ws.disabled) {\r\n      return false;\r\n    }\r\n\r\n    const {uri} = this.config('ws');\r\n    let wasConnected = false;\r\n\r\n    logger.debug('Creating websocket connection on', uri);\r\n\r\n    this.ws = new Websocket('CoreSocket', uri, {\r\n      interval: this.config('ws.connectInterval', 1000)\r\n    });\r\n\r\n    this.ws.once('connected', () => {\r\n      // Allow for some grace-time in case we close prematurely\r\n      setTimeout(() => {\r\n        wasConnected = true;\r\n        cb();\r\n      }, 100);\r\n    });\r\n\r\n    this.ws.on('connected', (ev, reconnected) => {\r\n      this.emit('osjs/core:connect', ev, reconnected);\r\n    });\r\n\r\n    this.ws.once('failed', ev => {\r\n      if (!wasConnected) {\r\n        cb(new Error('Connection closed'));\r\n        this.emit('osjs/core:connection-failed', ev);\r\n      }\r\n    });\r\n\r\n    this.ws.on('disconnected', ev => {\r\n      this.emit('osjs/core:disconnect', ev);\r\n    });\r\n\r\n    this.ws.on('message', ev => {\r\n      try {\r\n        const data = JSON.parse(ev.data);\r\n        const params = data.params || [];\r\n        this.emit(data.name, ...params);\r\n      } catch (e) {\r\n        logger.warn('Exception on websocket message', e);\r\n      }\r\n    });\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Creates event listeners*\r\n   * @private\r\n   */\r\n  _createListeners() {\r\n    const handle = data => {\r\n      const {pid, wid, args} = data;\r\n\r\n      const proc = Application.getApplications()\r\n        .find(p => p.pid === pid);\r\n\r\n      const win = proc\r\n        ? proc.windows.find(w => w.wid === wid)\r\n        : null;\r\n\r\n      if (win) {\r\n        win.emit('iframe:get', ...(args || []));\r\n      }\r\n    };\r\n\r\n    window.addEventListener('message', ev => {\r\n      const message = ev.data || {};\r\n      if (message && message.name === 'osjs/iframe:message') {\r\n        handle(...(message.params || []));\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates an URL based on configured public path\r\n   *\r\n   * If you give a options.type, the URL will be resolved\r\n   * to the correct resource.\r\n   *\r\n   * @param {string} [endpoint=/] Endpoint\r\n   * @param {object} [options] Additional options for resolving url\r\n   * @param {boolean} [options.prefix=false] Returns a full URL complete with scheme, etc. (will always be true on websocket)\r\n   * @param {string} [options.type] Optional URL type (websocket)\r\n   * @param {PackageMetadata} [metadata] A package metadata\r\n   * @return {string}\r\n   */\r\n  url(endpoint = '/', options = {}, metadata = {}) {\r\n    return this.urlResolver(endpoint, options, metadata);\r\n  }\r\n\r\n\r\n  /**\r\n   * Make a HTTP request\r\n   *\r\n   * This is a wrapper for making a 'fetch' request with some helpers\r\n   * and integration with OS.js\r\n   *\r\n   * @param {string} url The endpoint\r\n   * @param {Options} [options] fetch options\r\n   * @param {string} [type] Request / Response type\r\n   * @param {boolean} [force=false] Force request even when in standalone mode\r\n   * @return {*}\r\n   */\r\n  request(url, options = {}, type = null, force = false) {\r\n    const _ = this.has('osjs/locale')\r\n      ? this.make('osjs/locale').translate\r\n      : t => t;\r\n\r\n    if (this.config('standalone') && !force) {\r\n      return Promise.reject(new Error(_('ERR_REQUEST_STANDALONE')));\r\n    }\r\n\r\n    if (!url.match(/^((http|ws|ftp)s?:)/i)) {\r\n      url = this.url(url);\r\n      // FIXME: Deep merge\r\n      options = {\r\n        ...options || {},\r\n        ...this.requestOptions || {}\r\n      };\r\n    }\r\n\r\n    return fetch(url, options, type)\r\n      .catch(error => {\r\n        logger.warn(error);\r\n\r\n        throw new Error(_('ERR_REQUEST_NOT_OK', error));\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Create an application from a package\r\n   *\r\n   * @param {string} name Package name\r\n   * @param {{foo: *}} [args] Launch arguments\r\n   * @param {PackageLaunchOptions} [options] Launch options\r\n   * @see {Packages}\r\n   * @return {Promise<Application>}\r\n   */\r\n  run(name, args = {}, options = {}) {\r\n    logger.debug('Core::run()', name, args, options);\r\n\r\n    return this.make('osjs/packages').launch(name, args, options);\r\n  }\r\n\r\n  /**\r\n   * Spawns an application based on the file given\r\n   * @param {VFSFile} file A file object\r\n   * @param {CoreOpenOptions} [options] Options\r\n   * @return {Boolean|Application}\r\n   */\r\n  open(file, options = {}) {\r\n    if (file.mime === 'osjs/application') {\r\n      return this.run(file.path.split('/').pop());\r\n    }\r\n\r\n    const run = app => this.run(app, {file}, options);\r\n\r\n    const compatible = this.make('osjs/packages')\r\n      .getCompatiblePackages(file.mime);\r\n\r\n    if (compatible.length > 0) {\r\n      if (compatible.length > 1) {\r\n        try {\r\n          this._openApplicationDialog(options, compatible, file, run);\r\n\r\n          return true;\r\n        } catch (e) {\r\n          logger.warn('Exception on compability check', e);\r\n        }\r\n      }\r\n\r\n      run(compatible[0].name);\r\n\r\n      return Promise.resolve(true);\r\n    }\r\n\r\n    return Promise.resolve(false);\r\n  }\r\n\r\n  /**\r\n   * Wrapper method to create an application choice dialog\r\n   * @private\r\n   */\r\n  _openApplicationDialog(options, compatible, file, run) {\r\n    const _ = this.make('osjs/locale').translate;\r\n    const useDefault = options.useDefault && this.has('osjs/settings');\r\n    const setDefault = name => this.make('osjs/settings')\r\n      .set('osjs/default-application', file.mime, name)\r\n      .save();\r\n\r\n    const value = useDefault\r\n      ? this.make('osjs/settings').get('osjs/default-application', file.mime)\r\n      : null;\r\n\r\n    const type = useDefault\r\n      ? 'defaultApplication'\r\n      : 'choice';\r\n\r\n    const args = {\r\n      title: _('LBL_LAUNCH_SELECT'),\r\n      message: _('LBL_LAUNCH_SELECT_MESSAGE', file.path),\r\n      choices: compatible.reduce((o, i) => ({...o, [i.name]: i.name}), {}),\r\n      value\r\n    };\r\n\r\n    if (value && !options.forceDialog) {\r\n      run(value);\r\n    } else {\r\n      this.make('osjs/dialog', type, args, (btn, choice) => {\r\n        if (btn === 'ok') {\r\n          if (type === 'defaultApplication') {\r\n            if (useDefault) {\r\n              setDefault(choice.checked ? choice.value : null);\r\n            }\r\n\r\n            run(choice.value);\r\n          } else if (choice) {\r\n            run(choice);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes an event handler\r\n   * @param {string} name\r\n   * @param {Function} [callback=null]\r\n   * @param {boolean} [force=false]\r\n   * @return {Core} this\r\n   */\r\n  off(name, callback = null, force = false) {\r\n    if (name.match(/^osjs\\//) && typeof callback !== 'function') {\r\n      throw new TypeError('The callback must be a function');\r\n    }\r\n\r\n    return super.off(name, callback, force);\r\n  }\r\n\r\n  /**\r\n   * Sends a 'broadcast' event with given arguments\r\n   * to all applications matching given filter\r\n   *\r\n   * @param {string|Function} pkg The filter\r\n   * @param {string} name The event name\r\n   * @param {*} ...args Arguments to pass to emit\r\n   * @return {string[]} List of application names emitted to\r\n   */\r\n  broadcast(pkg, name, ...args) {\r\n    const filter = typeof pkg === 'function'\r\n      ? pkg\r\n      : p => p.metadata.name === pkg;\r\n\r\n\r\n    const apps = Application\r\n      .getApplications()\r\n      .filter(filter);\r\n\r\n    return apps.map(proc => {\r\n      proc.emit(name, ...args);\r\n\r\n      return proc.name;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sends a signal to the server over websocket.\r\n   * This will be interpreted as an event in the server core.\r\n   * @param {string} name Event name\r\n   * @param {*} ...params Event callback parameters\r\n   */\r\n  send(name, ...params) {\r\n    return this.ws.send(JSON.stringify({\r\n      name,\r\n      params\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Set the internal fetch/request options\r\n   * @param {object} options Request options\r\n   */\r\n  setRequestOptions(options) {\r\n    this.requestOptions = {...options};\r\n  }\r\n\r\n  /**\r\n   * Gets the current user\r\n   * @return {CoreUserData} User object\r\n   */\r\n  getUser() {\r\n    return {...this.user};\r\n  }\r\n\r\n  /**\r\n   * Add middleware function to a group\r\n   *\r\n   * @param {string} group Middleware group\r\n   * @param {Function} callback Middleware function to add\r\n   */\r\n  middleware(group, callback) {\r\n    return this.make('osjs/middleware').add(group, callback);\r\n  }\r\n\r\n  /**\r\n   * Kills the specified application\r\n   * @param {string|number} match Application name or PID\r\n   */\r\n  kill(match) {\r\n    const apps = Application.getApplications();\r\n    const matcher = typeof match === 'number'\r\n      ? app => app.pid === match\r\n      : app => app.metadata.name === match;\r\n\r\n    const found = apps.filter(matcher);\r\n    found.forEach(app => app.destroy());\r\n  }\r\n\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\nimport Application from './application';\r\nimport {handleTabOnTextarea} from './utils/dom';\r\nimport {matchKeyCombo} from './utils/input';\r\nimport {DesktopIconView} from './adapters/ui/iconview';\r\nimport {\r\n  isDroppingImage,\r\n  applyBackgroundStyles,\r\n  createPanelSubtraction,\r\n  isVisible\r\n} from './utils/desktop';\r\nimport Window from './window';\r\nimport Search from './search';\r\nimport merge from 'deepmerge';\r\nimport logger from './logger';\r\n\r\n/**\r\n * TODO: typedef\r\n * @typedef {Object} DesktopContextMenuEntry\r\n */\r\n\r\n/**\r\n * @typedef {Object} DesktopIconViewSettings\r\n */\r\n\r\n/**\r\n * TODO: typedef\r\n * @typedef {Object} DesktopSettings\r\n * @property {DesktopIconViewSettings} [iconview]\r\n */\r\n\r\n/**\r\n * Desktop Options\r\n *\r\n * @typedef {Object} DeskopOptions\r\n * @property {object[]} [contextmenu={}] Default Context menu items\r\n */\r\n\r\n/**\r\n * Desktop Viewport Rectangle\r\n *\r\n * @typedef {Object} DesktopViewportRectangle\r\n * @property {number} left\r\n * @property {number} top\r\n * @property {number} right\r\n * @property {number} bottom\r\n */\r\n\r\n/**\r\n * Desktop Class\r\n */\r\nexport default class Desktop extends EventEmitter {\r\n\r\n  /**\r\n   * Create Desktop\r\n   *\r\n   * @param {Core} core Core reference\r\n   * @param {DesktopOptions} [options={}] Options\r\n   */\r\n  constructor(core, options = {}) {\r\n    super('Desktop');\r\n\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * Desktop Options\r\n     * @type {DeskopOptions}\r\n     * @readonly\r\n     */\r\n    this.options = {\r\n      contextmenu: [],\r\n      ...options\r\n    };\r\n\r\n    /**\r\n     * Theme DOM elements\r\n     * @type {Element[]}\r\n     */\r\n    this.$theme = [];\r\n\r\n    /**\r\n     * Icon DOM elements\r\n     * @type {Element[]}\r\n     */\r\n    this.$icons = [];\r\n\r\n    /**\r\n     * Default context menu entries\r\n     * @type {DesktopContextMenuEntry[]}\r\n     */\r\n    this.contextmenuEntries = [];\r\n\r\n    /**\r\n     * Search instance\r\n     * @type {Search|null}\r\n     * @readonly\r\n     */\r\n    this.search = core.config('search.enabled') ? new Search(core, options.search || {}) : null;\r\n\r\n    /**\r\n     * Icon View instance\r\n     * @type {DesktopIconView}\r\n     * @readonly\r\n     */\r\n    this.iconview = new DesktopIconView(this.core);\r\n\r\n    /**\r\n     * Keyboard context dom element\r\n     * @type {Element|null}\r\n     */\r\n    this.keyboardContext = null;\r\n\r\n    /**\r\n     * Desktop subtraction rectangle\r\n     * TODO: typedef\r\n     * @type {DesktopViewportRectangle}\r\n     */\r\n    this.subtract = {\r\n      left: 0,\r\n      top: 0,\r\n      right: 0,\r\n      bottom: 0\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Destroy Desktop\r\n   */\r\n  destroy() {\r\n    if (this.search) {\r\n      this.search = this.search.destroy();\r\n    }\r\n\r\n    if (this.iconview) {\r\n      this.iconview.destroy();\r\n    }\r\n\r\n    this._removeIcons();\r\n    this._removeTheme();\r\n\r\n    super.destroy();\r\n  }\r\n\r\n  /**\r\n   * Initializes Desktop\r\n   */\r\n  init() {\r\n    this.initConnectionEvents();\r\n    this.initUIEvents();\r\n    this.initDragEvents();\r\n    this.initKeyboardEvents();\r\n    this.initGlobalKeyboardEvents();\r\n    this.initMouseEvents();\r\n    this.initBaseEvents();\r\n    this.initLocales();\r\n    this.initDeveloperTray();\r\n  }\r\n\r\n  /**\r\n   * Initializes connection events\r\n   */\r\n  initConnectionEvents() {\r\n    this.core.on('osjs/core:disconnect', ev => {\r\n      logger.warn('Connection closed', ev);\r\n\r\n      const _ = this.core.make('osjs/locale').translate;\r\n      this.core.make('osjs/notification', {\r\n        title: _('LBL_CONNECTION_LOST'),\r\n        message: _('LBL_CONNECTION_LOST_MESSAGE')\r\n      });\r\n    });\r\n\r\n    this.core.on('osjs/core:connect', (ev, reconnected) => {\r\n      logger.debug('Connection opened');\r\n\r\n      if (reconnected) {\r\n        const _ = this.core.make('osjs/locale').translate;\r\n        this.core.make('osjs/notification', {\r\n          title: _('LBL_CONNECTION_RESTORED'),\r\n          message: _('LBL_CONNECTION_RESTORED_MESSAGE')\r\n        });\r\n      }\r\n    });\r\n\r\n    this.core.on('osjs/core:connection-failed', (ev) => {\r\n      logger.warn('Connection failed');\r\n\r\n      const _ = this.core.make('osjs/locale').translate;\r\n      this.core.make('osjs/notification', {\r\n        title: _('LBL_CONNECTION_FAILED'),\r\n        message: _('LBL_CONNECTION_FAILED_MESSAGE')\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initializes user interface events\r\n   */\r\n  initUIEvents() {\r\n    this.core.on(['osjs/panel:create', 'osjs/panel:destroy'], (panel, panels = []) => {\r\n      this.subtract = createPanelSubtraction(panel, panels);\r\n\r\n      try {\r\n        this._updateCSS();\r\n        this._clampWindows();\r\n      } catch (e) {\r\n        logger.warn('Panel event error', e);\r\n      }\r\n\r\n      this.core.emit('osjs/desktop:transform', this.getRect());\r\n    });\r\n\r\n    this.core.on('osjs/window:transitionend', (...args) => {\r\n      this.emit('theme:window:transitionend', ...args);\r\n    });\r\n\r\n    this.core.on('osjs/window:change', (...args) => {\r\n      this.emit('theme:window:change', ...args);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initializes development tray icons\r\n   */\r\n  initDeveloperTray() {\r\n    if (!this.core.config('development')) {\r\n      return;\r\n    }\r\n\r\n    // Creates tray\r\n    const tray = this.core.make('osjs/tray').create({\r\n      title: 'OS.js developer tools'\r\n    }, (ev) => this.onDeveloperMenu(ev));\r\n\r\n    this.core.on('destroy', () => tray.destroy());\r\n  }\r\n\r\n  /**\r\n   * Initializes drag-and-drop events\r\n   */\r\n  initDragEvents() {\r\n    const {droppable} = this.core.make('osjs/dnd');\r\n\r\n    droppable(this.core.$contents, {\r\n      strict: true,\r\n      ondrop: (ev, data, files) => {\r\n        const droppedImage = isDroppingImage(data);\r\n        if (droppedImage) {\r\n          this.onDropContextMenu(ev, data);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initializes keyboard events\r\n   */\r\n  initKeyboardEvents() {\r\n    const forwardKeyEvent = (n, e) => {\r\n      const w = Window.lastWindow();\r\n      if (isVisible(w)) {\r\n        w.emit(n, e, w);\r\n      }\r\n    };\r\n\r\n    const isWithinContext = (target) => this.keyboardContext &&\r\n      this.keyboardContext.contains(target);\r\n\r\n    const isWithinWindow = (w, target) => w &&\r\n      w.$element.contains(target);\r\n\r\n    const isWithin = (w, target) => isWithinWindow(w, target) ||\r\n      isWithinContext(target);\r\n\r\n    ['keydown', 'keyup', 'keypress'].forEach(n => {\r\n      this.core.$root.addEventListener(n, e => forwardKeyEvent(n, e));\r\n    });\r\n\r\n    this.core.$root.addEventListener('keydown', e => {\r\n      if (!e.target) {\r\n        return;\r\n      }\r\n\r\n      if (e.keyCode === 114) { // F3\r\n        e.preventDefault();\r\n\r\n        if (this.search) {\r\n          this.search.show();\r\n        }\r\n      } else if (e.keyCode === 9) { // Tab\r\n        const {tagName} = e.target;\r\n        const isInput = ['INPUT', 'TEXTAREA', 'SELECT', 'BUTTON'].indexOf(tagName) !== -1;\r\n        const w = Window.lastWindow();\r\n\r\n        if (isWithin(w, e.target)) {\r\n          if (isInput) {\r\n            if (tagName === 'TEXTAREA') {\r\n              handleTabOnTextarea(e);\r\n            }\r\n          } else {\r\n            e.preventDefault();\r\n          }\r\n        } else {\r\n          e.preventDefault();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initializes global keyboard events\r\n   */\r\n  initGlobalKeyboardEvents() {\r\n    let keybindings = [];\r\n\r\n    const defaults = this.core.config('desktop.settings.keybindings', {});\r\n\r\n    const reload = () => {\r\n      keybindings = this.core.make('osjs/settings')\r\n        .get('osjs/desktop', 'keybindings', defaults);\r\n    };\r\n\r\n    window.addEventListener('keydown', ev => {\r\n      Object.keys(keybindings).some(eventName => {\r\n        const combo = keybindings[eventName];\r\n        const result = matchKeyCombo(combo, ev);\r\n        if (result) {\r\n          this.core.emit('osjs/desktop:keybinding:' + eventName, ev);\r\n        }\r\n      });\r\n    });\r\n\r\n    this.core.on('osjs/settings:load', reload);\r\n    this.core.on('osjs/settings:save', reload);\r\n    this.core.on('osjs/core:started', reload);\r\n\r\n    const closeBindingName = 'osjs/desktop:keybinding:close-window';\r\n    const closeBindingCallback = () => {\r\n      const w = Window.lastWindow();\r\n      if (isVisible(w)) {\r\n        w.close();\r\n      }\r\n    };\r\n    this.core.on(closeBindingName, closeBindingCallback);\r\n  }\r\n\r\n  /**\r\n   * Initializes mouse events\r\n   */\r\n  initMouseEvents() {\r\n    // Custom context menu\r\n    this.core.$contents.addEventListener('contextmenu', ev => {\r\n      if (ev.target === this.core.$contents) {\r\n        this.onContextMenu(ev);\r\n      }\r\n    });\r\n\r\n    // A hook to prevent iframe events when dragging mouse\r\n    window.addEventListener('mousedown', () => {\r\n      let moved = false;\r\n\r\n      const onmousemove = () => {\r\n        if (!moved) {\r\n          moved = true;\r\n\r\n          this.core.$root.setAttribute('data-mousemove', String(true));\r\n        }\r\n      };\r\n\r\n      const onmouseup = () => {\r\n        moved = false;\r\n\r\n        this.core.$root.setAttribute('data-mousemove', String(false));\r\n        window.removeEventListener('mousemove', onmousemove);\r\n        window.removeEventListener('mouseup', onmouseup);\r\n      };\r\n\r\n      window.addEventListener('mousemove', onmousemove);\r\n      window.addEventListener('mouseup', onmouseup);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initializes base events\r\n   */\r\n  initBaseEvents() {\r\n    // Resize hook\r\n    let resizeDebounce;\r\n    window.addEventListener('resize', () => {\r\n      clearTimeout(resizeDebounce);\r\n      resizeDebounce = setTimeout(() => {\r\n        this._updateCSS();\r\n        this._clampWindows(true);\r\n      }, 200);\r\n    });\r\n\r\n    // Prevent navigation\r\n    history.pushState(null, null, document.URL);\r\n    window.addEventListener('popstate', () => {\r\n      history.pushState(null, null, document.URL);\r\n    });\r\n\r\n    // Prevents background scrolling on iOS\r\n    this.core.$root.addEventListener('touchmove', e => e.preventDefault());\r\n  }\r\n\r\n  /**\r\n   * Initializes locales\r\n   */\r\n  initLocales() {\r\n    // Right-to-left support triggers\r\n    const rtls = this.core.config('locale.rtl');\r\n    const checkRTL = () => {\r\n      const locale = this.core.make('osjs/locale')\r\n        .getLocale()\r\n        .split('_')[0]\r\n        .toLowerCase();\r\n\r\n      const isRtl = rtls.indexOf(locale) !== -1;\r\n      this.core.$root.setAttribute('data-dir', isRtl ? 'rtl' : 'ltr');\r\n    };\r\n    this.core.on('osjs/settings:load', checkRTL);\r\n    this.core.on('osjs/settings:save', checkRTL);\r\n    this.core.on('osjs/core:started', checkRTL);\r\n  }\r\n\r\n  /**\r\n   * Starts desktop services\r\n   */\r\n  start() {\r\n    if (this.search) {\r\n      this.search.init();\r\n    }\r\n\r\n    this._updateCSS();\r\n  }\r\n\r\n  /**\r\n   * Update CSS\r\n   * @private\r\n   */\r\n  _updateCSS() {\r\n    const mobile = this.core.config('windows.mobile');\r\n    const isMobile = !mobile ? false : this.core.$root.offsetWidth <= mobile;\r\n    this.core.$root.setAttribute('data-mobile', isMobile);\r\n\r\n    if (this.core.$contents) {\r\n      this.core.$contents.style.top = `${this.subtract.top}px`;\r\n      this.core.$contents.style.left = `${this.subtract.left}px`;\r\n      this.core.$contents.style.right = `${this.subtract.right}px`;\r\n      this.core.$contents.style.bottom = `${this.subtract.bottom}px`;\r\n    }\r\n  }\r\n\r\n  _clampWindows(resize) {\r\n    if (resize && !this.core.config('windows.clampToViewport')) {\r\n      return;\r\n    }\r\n\r\n    Window.getWindows().forEach(w => w.clampToViewport());\r\n  }\r\n\r\n  /**\r\n   * Adds something to the default contextmenu entries\r\n   * @param {DesktopContextMenuEntry[]} entries\r\n   */\r\n  addContextMenu(entries) {\r\n    this.contextmenuEntries = this.contextmenuEntries.concat(entries);\r\n  }\r\n\r\n  /**\r\n   * Applies settings and updates desktop\r\n   * @param {DesktopSettings} [settings] Use this set instead of loading from settings\r\n   * @return {DesktopSettings} New settings\r\n   */\r\n  applySettings(settings) {\r\n    const lockSettings = this.core.config('desktop.lock');\r\n    const defaultSettings = this.core.config('desktop.settings');\r\n    let newSettings;\r\n\r\n    if (lockSettings) {\r\n      newSettings = defaultSettings;\r\n    } else {\r\n      const userSettings = settings\r\n        ? settings\r\n        : this.core.make('osjs/settings').get('osjs/desktop');\r\n\r\n      newSettings = merge(defaultSettings, userSettings, {\r\n        arrayMerge: (dest, source) => source\r\n      });\r\n    }\r\n\r\n    const applyOverlays = (test, list) => {\r\n      if (this.core.has(test)) {\r\n        const instance = this.core.make(test);\r\n        instance.removeAll();\r\n        list.forEach(item => instance.create(item));\r\n      }\r\n    };\r\n\r\n    const applyCss = ({font, background}) => {\r\n      this.core.$root.style.fontFamily = `${font}, sans-serif`;\r\n\r\n      applyBackgroundStyles(this.core, background);\r\n\r\n    };\r\n\r\n    applyCss(newSettings);\r\n\r\n    // TODO: Multiple panels\r\n    applyOverlays('osjs/panels', (newSettings.panels || []).slice(-1));\r\n    applyOverlays('osjs/widgets', newSettings.widgets);\r\n\r\n    this.applyTheme(newSettings.theme);\r\n    this.applyIcons(newSettings.icons);\r\n\r\n    this.applyIconView(newSettings.iconview);\r\n\r\n    this.core.emit('osjs/desktop:applySettings');\r\n\r\n    return {...newSettings};\r\n  }\r\n\r\n  /**\r\n   * Removes current style theme from DOM\r\n   * @private\r\n   */\r\n  _removeTheme() {\r\n    this.emit('theme:destroy');\r\n\r\n    this.off([\r\n      'theme:init',\r\n      'theme:destroy',\r\n      'theme:window:change',\r\n      'theme:window:transitionend'\r\n    ]);\r\n\r\n    this.$theme.forEach(el => {\r\n      if (el && el.parentNode) {\r\n        el.remove();\r\n      }\r\n    });\r\n\r\n    this.$theme = [];\r\n  }\r\n\r\n  /**\r\n   * Removes current icon theme from DOM\r\n   * @private\r\n   */\r\n  _removeIcons() {\r\n    this.$icons.forEach(el => {\r\n      if (el && el.parentNode) {\r\n        el.remove();\r\n      }\r\n    });\r\n\r\n    this.$icons = [];\r\n  }\r\n\r\n  /**\r\n   * Adds or removes the icon view\r\n   * @param {DesktopIconViewSettings} settings\r\n   */\r\n  applyIconView(settings) {\r\n    if (!this.iconview) {\r\n      return;\r\n    }\r\n\r\n    if (settings.enabled) {\r\n      this.iconview.render(settings.path);\r\n    } else {\r\n      this.iconview.destroy();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the current icon theme from settings\r\n   * @param {string} name Icon theme name\r\n   * @return {Promise<undefined>}\r\n   */\r\n  applyIcons(name) {\r\n    name = name || this.core.config('desktop.icons');\r\n\r\n    return this._applyTheme(name)\r\n      .then(({elements, errors, callback, metadata}) => {\r\n        this._removeIcons();\r\n\r\n        this.$icons = Object.values(elements);\r\n\r\n        this.emit('icons:init');\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Sets the current style theme from settings\r\n   * @param {string} name Theme name\r\n   * @return {Promise<undefined>}\r\n   */\r\n  applyTheme(name) {\r\n    name = name || this.core.config('desktop.theme');\r\n\r\n    return this._applyTheme(name)\r\n      .then(({elements, errors, callback, metadata}) => {\r\n        this._removeTheme();\r\n\r\n        if (callback && metadata) {\r\n          try {\r\n            callback(this.core, this, {}, metadata);\r\n          } catch (e) {\r\n            logger.warn('Exception while calling theme callback', e);\r\n          }\r\n        }\r\n\r\n        this.$theme = Object.values(elements);\r\n\r\n        this.emit('theme:init');\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Apply theme wrapper\r\n   * @private\r\n   * @param {string} name Theme name\r\n   * @return {Promise<undefined>}\r\n   */\r\n  _applyTheme(name) {\r\n    return this.core.make('osjs/packages')\r\n      .launch(name)\r\n      .then(result => {\r\n        if (result.errors.length) {\r\n          logger.error(result.errors);\r\n        }\r\n\r\n        return result;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Apply settings by key\r\n   * @private\r\n   * @param {string} k Key\r\n   * @param {*} v Value\r\n   * @return {Promise<boolean>}\r\n   */\r\n  _applySettingsByKey(k, v) {\r\n    return this.core.make('osjs/settings')\r\n      .set('osjs/desktop', k, v)\r\n      .save()\r\n      .then(() => this.applySettings());\r\n  }\r\n\r\n  /**\r\n   * Create drop context menu entries\r\n   * @param {Object} data Drop data\r\n   * @return {Object[]}\r\n   */\r\n  createDropContextMenu(data) {\r\n    const _ = this.core.make('osjs/locale').translate;\r\n    const settings = this.core.make('osjs/settings');\r\n    const desktop = this.core.make('osjs/desktop');\r\n    const droppedImage = isDroppingImage(data);\r\n    const menu = [];\r\n\r\n    const setWallpaper = () => settings\r\n      .set('osjs/desktop', 'background.src', data)\r\n      .save()\r\n      .then(() => desktop.applySettings());\r\n\r\n    if (droppedImage) {\r\n      menu.push({\r\n        label: _('LBL_DESKTOP_SET_AS_WALLPAPER'),\r\n        onclick: setWallpaper\r\n      });\r\n    }\r\n\r\n    return menu;\r\n  }\r\n\r\n  /**\r\n   * When developer menu is shown\r\n   * @param {Event} ev\r\n   */\r\n  onDeveloperMenu(ev) {\r\n    const _ = this.core.make('osjs/locale').translate;\r\n    const s = this.core.make('osjs/settings').get();\r\n\r\n    const storageItems = Object.keys(s)\r\n      .map(k => ({\r\n        label: k,\r\n        onclick: () => {\r\n          this.core.make('osjs/settings')\r\n            .clear(k)\r\n            .then(() => this.applySettings());\r\n        }\r\n      }));\r\n\r\n    this.core.make('osjs/contextmenu').show({\r\n      position: ev,\r\n      menu: [\r\n        {\r\n          label: _('LBL_KILL_ALL'),\r\n          onclick: () => Application.destroyAll()\r\n        },\r\n        {\r\n          label: _('LBL_APPLICATIONS'),\r\n          items: Application.getApplications().map(proc => ({\r\n            label: `${proc.metadata.name} (${proc.pid})`,\r\n            items: [\r\n              {\r\n                label: _('LBL_KILL'),\r\n                onclick: () => proc.destroy()\r\n              },\r\n              {\r\n                label: _('LBL_RELOAD'),\r\n                onclick: () => proc.relaunch()\r\n              }\r\n            ]\r\n          }))\r\n        },\r\n        {\r\n          label: 'Clear Storage',\r\n          items: storageItems\r\n        }\r\n      ]\r\n    });\r\n  }\r\n\r\n  /**\r\n   * When drop menu is shown\r\n   * @param {Event} ev\r\n   * @param {Object} data\r\n   */\r\n  onDropContextMenu(ev, data) {\r\n    const menu = this.createDropContextMenu(data);\r\n\r\n    this.core.make('osjs/contextmenu', {\r\n      position: ev,\r\n      menu\r\n    });\r\n  }\r\n\r\n  /**\r\n   * When context menu is shown\r\n   * @param {Event} ev\r\n   */\r\n  onContextMenu(ev) {\r\n    const lockSettings = this.core.config('desktop.lock');\r\n    const extras = [].concat(...this.contextmenuEntries.map(e => typeof e === 'function' ? e() : e));\r\n    const config = this.core.config('desktop.contextmenu');\r\n    const hasIconview = this.core.make('osjs/settings').get('osjs/desktop', 'iconview.enabled');\r\n\r\n    if (config === false || config.enabled === false) {\r\n      return;\r\n    }\r\n\r\n    const useDefaults = config === true || config.defaults; // NOTE: Backward compability\r\n\r\n    const _ = this.core.make('osjs/locale').translate;\r\n    const __ = this.core.make('osjs/locale').translatableFlat;\r\n\r\n    const themes = this.core.make('osjs/packages')\r\n      .getPackages(p => p.type === 'theme');\r\n\r\n    const defaultItems = lockSettings ? [] : [{\r\n      label: _('LBL_DESKTOP_SELECT_WALLPAPER'),\r\n      onclick: () => {\r\n        this.core.make('osjs/dialog', 'file', {\r\n          mime: ['^image']\r\n        }, (btn, file) => {\r\n          if (btn === 'ok') {\r\n            this._applySettingsByKey('background.src', file);\r\n          }\r\n        });\r\n      }\r\n    }, {\r\n      label: _('LBL_DESKTOP_SELECT_THEME'),\r\n      items: themes.map(t => ({\r\n        label: __(t.title, t.name),\r\n        onclick: () => {\r\n          this._applySettingsByKey('theme', t.name);\r\n        }\r\n      }))\r\n    }];\r\n\r\n    if (hasIconview && this.iconview) {\r\n      defaultItems.push({\r\n        label: _('LBL_REFRESH'),\r\n        onclick: () => this.iconview.iconview.reload()\r\n      });\r\n    }\r\n\r\n    const base = useDefaults === 'function'\r\n      ? config.defaults(this, defaultItems)\r\n      : (useDefaults ? defaultItems : []);\r\n\r\n    const provided = typeof this.options.contextmenu === 'function'\r\n      ? this.options.contextmenu(this, defaultItems)\r\n      : this.options.contextmenu || [];\r\n\r\n    const menu = [\r\n      ...base,\r\n      ...provided,\r\n      ...extras\r\n    ];\r\n\r\n    if (menu.length) {\r\n      this.core.make('osjs/contextmenu').show({\r\n        menu,\r\n        position: ev\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the keyboard context.\r\n   *\r\n   * Used for tabbing and other special events\r\n   *\r\n   * @param {Element} [ctx]\r\n   */\r\n  setKeyboardContext(ctx) {\r\n    this.keyboardContext = ctx;\r\n  }\r\n\r\n  /**\r\n   * Gets the rectangle of available space\r\n   *\r\n   * This is based on any panels etc taking up space\r\n   *\r\n   * @return {DesktopViewportRectangle}\r\n   */\r\n  getRect() {\r\n    const root = this.core.$root;\r\n    // FIXME: Is this now wrong because panels are not on the root anymore ?!\r\n    const {left, top, right, bottom} = this.subtract;\r\n    const width = root.offsetWidth - left - right;\r\n    const height = root.offsetHeight - top - bottom;\r\n\r\n    return {width, height, top, bottom, left, right};\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport * as VFS from './vfs';\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\nimport {parseMountpointPrefix, filterMountByGroups, createWatchEvents} from './utils/vfs';\r\nimport defaultAdapter from './adapters/vfs/null';\r\nimport systemAdapter from './adapters/vfs/system';\r\nimport appsAdapter from './adapters/vfs/apps';\r\nimport logger from './logger';\r\nimport merge from 'deepmerge';\r\n\r\n/**\r\n * VFS Mountpoint attributes\r\n *\r\n * @typedef {Object} FilesystemMountpointAttributes\r\n * @property {string} [visibility='global'] Visibility in UI\r\n * @property {boolean} [local=true] Local filesystem ?\r\n * @property {boolean} [searchable=true] If can be searched\r\n * @property {boolean} [readOnly=false] Readonly\r\n */\r\n\r\n/**\r\n * VFS Mountpoint\r\n *\r\n * @typedef {Object} FilesystemMountpoint\r\n * @property {string} name Name\r\n * @property {string} label Label\r\n * @property {string} adapter Adater name\r\n * @property {string} [root] System adapter root\r\n * @property {boolean} [enabled=true] Enabled state\r\n * @property {FilesystemMountpointAttributes} [attributes] Attributes\r\n */\r\n\r\n/**\r\n * Filesystem Adapter Methods\r\n * TODO: typedef\r\n * @typedef {Object} FilesystemAdapterMethods\r\n * @property {Function} capabilities\r\n * @property {Function} readdir\r\n * @property {Function} readfile\r\n * @property {Function} writefile\r\n * @property {Function} copy\r\n * @property {Function} move\r\n * @property {Function} rename\r\n * @property {Function} mkdir\r\n * @property {Function} unlink\r\n * @property {Function} exists\r\n * @property {Function} stat\r\n * @property {Function} url\r\n * @property {Function} download\r\n * @property {Function} search\r\n * @property {Function} touch\r\n */\r\n\r\n/**\r\n * @callback FilesystemAdapterWrapper\r\n * @return {FilesystemAdapterMethods}\r\n */\r\n\r\n/**\r\n * Filesystem Options\r\n *\r\n * @typedef {Object} FilesystemOptions\r\n * @property {{name: FilesystemAdapterWrapper}} [adapters] Adapter registry\r\n * @property {FilesystemMountpoint[]} [mounts] Mountpoints\r\n */\r\n\r\n/**\r\n * Filesystem Class that manages filesystems and adapters\r\n */\r\nexport default class Filesystem extends EventEmitter {\r\n\r\n  /**\r\n   * Create filesystem manager\r\n   *\r\n   * @param {Core} core Core reference\r\n   * @param {FilesystemOptions} [options] Options\r\n   */\r\n  constructor(core, options = {}) {\r\n    options = {\r\n      adapters: {},\r\n      mounts: [],\r\n      ...options\r\n    };\r\n\r\n    super('Filesystem');\r\n\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * Adapter registry\r\n     * @type {{name: FilesystemAdapterWrapper}}\r\n     * @readonly\r\n     */\r\n    this.adapters = {\r\n      system: systemAdapter,\r\n      apps: appsAdapter,\r\n      ...this.core.config('vfs.adapters', {}),\r\n      ...options.adapters\r\n    };\r\n\r\n    /**\r\n     * Mountpoints\r\n     * @type {FilesystemMountpoint[]}\r\n     */\r\n    this.mounts = [];\r\n\r\n    /**\r\n     * Options\r\n     * @type {FilesystemOptions}\r\n     */\r\n    this.options = {};\r\n\r\n    /**\r\n     * A wrapper for VFS method requests\r\n     * @type {{key: Function}}\r\n     * @readonly\r\n     */\r\n    this.proxy = Object.keys(VFS).reduce((result, method) => {\r\n      return {\r\n        [method]: (...args) => this._request(method, ...args),\r\n        ...result\r\n      };\r\n    }, {});\r\n  }\r\n\r\n  /**\r\n   * Mounts all configured mountpoints\r\n   * @param {boolean} [stopOnError=true] Stop on first error\r\n   * @return {Promise<boolean[]>}\r\n   */\r\n  mountAll(stopOnError = true) {\r\n    this.mounts = this._getConfiguredMountpoints();\r\n\r\n    const fn = m => stopOnError\r\n      ? this._mountpointAction(m)\r\n      : this._mountpointAction(m).catch(err => logger.warn('Error while mounting', m, err));\r\n\r\n    return Promise.all(this.mounts.map(fn));\r\n  }\r\n\r\n  /**\r\n   * Adds a new mountpoint\r\n   * @param {FilesystemMountpoint} props Mountpoint props\r\n   * @param {boolean} [automount=true] Automount after creation\r\n   * @return {Promise<boolean>}\r\n   */\r\n  addMountpoint(props, automount = true) {\r\n    const mount = this.createMountpoint(props);\r\n\r\n    this.mounts.push(mount);\r\n\r\n    if (automount) {\r\n      return this.mount(mount.name);\r\n    }\r\n\r\n    return Promise.resolve(true);\r\n  }\r\n\r\n  /**\r\n   * Mount given mountpoint\r\n   * @param {string|FilesystemMountpoint} m Mountpoint name or object\r\n   * @throws {Error} On invalid name or if already mounted\r\n   * @return {Promise<boolean>}\r\n   */\r\n  mount(m) {\r\n    if (typeof m === 'string') {\r\n      return this._mountAction(m, false);\r\n    }\r\n\r\n    return this.addMountpoint(m);\r\n  }\r\n\r\n  /**\r\n   * Unmount given filesystem\r\n   * @param {string} name Filesystem name\r\n   * @throws {Error} On invalid name or if already unmounted\r\n   * @return {Promise<boolean>}\r\n   */\r\n  unmount(name) {\r\n    return this._mountAction(name, true);\r\n  }\r\n\r\n  /**\r\n   * Internal wrapper for mounting/unmounting\r\n   *\r\n   * @private\r\n   * @param {FilesystemMountpoint} mountpoint The mountpoint\r\n   * @param {boolean} [unmount=false] If action is unmounting\r\n   * @return {Promise<boolean>}\r\n   */\r\n  _mountpointAction(mountpoint, unmount = false) {\r\n    const eventName = unmount ? 'unmounted' : 'mounted';\r\n    const coreEventName = unmount ? 'unmount' : 'mount';\r\n\r\n    return mountpoint._adapter[coreEventName]({}, mountpoint)\r\n      .then(result => {\r\n        if (result) {\r\n          mountpoint.mounted = !unmount;\r\n\r\n          this.emit(eventName, mountpoint);\r\n          this.core.emit('osjs/fs:' + coreEventName);\r\n        }\r\n\r\n        return result;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Internal wrapper for mounting/unmounting by name\r\n   *\r\n   * @private\r\n   * @param {string} name Mountpoint name\r\n   * @param {boolean} [unmount=false] If action is unmounting\r\n   * @return {Promise<boolean>}\r\n   */\r\n  _mountAction(name, unmount) {\r\n    return Promise.resolve(this.mounts.find(m => m.name === name))\r\n      .then(found => {\r\n        const _ = this.core.make('osjs/locale').translate;\r\n\r\n        // FIXME: Add already mounting state\r\n        if (!found) {\r\n          throw new Error(_('ERR_VFS_MOUNT_NOT_FOUND', name));\r\n        } else if (unmount && !found.mounted) {\r\n          throw new Error(_('ERR_VFS_MOUNT_NOT_MOUNTED', name));\r\n        } else if (!unmount && found.mounted) {\r\n          throw new Error(_('ERR_VFS_MOUNT_ALREADY_MOUNTED', name));\r\n        }\r\n\r\n        return this._mountpointAction(found, unmount);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Gets the proxy for VFS methods\r\n   * FIXME: Not correct type, but works for documentation atm\r\n   * @return {FilesystemAdapterMethods} A map of VFS functions\r\n   */\r\n  request() {\r\n    return this.proxy;\r\n  }\r\n\r\n  /**\r\n   * Perform a VFS method request\r\n   *\r\n   * @private\r\n   * @param {string} method VFS method name\r\n   * @param {*} ...args Arguments\r\n   * @return {*}\r\n   */\r\n  _request(method, ...args) {\r\n    const ev = `osjs/vfs:${method}`;\r\n\r\n    const done = (error) => {\r\n      this.core.emit(`${ev}:done`, ...args);\r\n\r\n      if (!error && this.core.config('vfs.watch')) {\r\n        const eva = createWatchEvents(method, args);\r\n        eva.forEach(([e, a]) => this.core.emit(e, a));\r\n      }\r\n    };\r\n\r\n    this.core.emit(ev, ...args);\r\n\r\n    return this._requestAction(method, ...args)\r\n      .then(result => {\r\n        done();\r\n        return result;\r\n      })\r\n      .catch(error => {\r\n        done(error);\r\n        throw error;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Request action wrapper\r\n   * @private\r\n   * @param {string} method\r\n   * @param {*} ...args Arguments\r\n   * @return {Promise<*>}\r\n   */\r\n  _requestAction(method, ...args) {\r\n    if (['rename', 'move', 'copy'].indexOf(method) !== -1) {\r\n      const [src, dest] = args;\r\n      const srcMount = this.getMountpointFromPath(src);\r\n      const destMount = this.getMountpointFromPath(dest);\r\n      const sameAdapter = srcMount.adapter === destMount.adapter;\r\n\r\n      if (!sameAdapter) {\r\n        return VFS.readfile(srcMount._adapter, srcMount)(src)\r\n          .then(ab => VFS.writefile(destMount._adapter, destMount)(dest, ab))\r\n          .then(result => {\r\n            return method === 'rename'\r\n              ? VFS.unlink(srcMount._adapter, srcMount)(src).then(() => result)\r\n              : result;\r\n          });\r\n      }\r\n    }\r\n\r\n    const [file] = args;\r\n    const mount = this.getMountpointFromPath(file);\r\n\r\n    return VFS[method](mount._adapter, mount)(...args);\r\n  }\r\n\r\n  /**\r\n   * Creates a new mountpoint based on given properties\r\n   * @param {FilesystemMountpoint} props Properties\r\n   * @return {FilesystemMountpoint}\r\n   */\r\n  createMountpoint(props) {\r\n    const name = props.adapter || this.core.config('vfs.defaultAdapter');\r\n    const adapter = {...defaultAdapter, ...this.adapters[name](this.core)};\r\n\r\n    const result = merge({\r\n      enabled: true,\r\n      mounted: false,\r\n      adapter: name,\r\n      attributes: {\r\n        visibility: 'global',\r\n        local: true,\r\n        searchable: true,\r\n        readOnly: false\r\n      }\r\n    }, props);\r\n\r\n    return {\r\n      _adapter: adapter,\r\n      label: name,\r\n      root: `${result.name || name}:/`,\r\n      ...result\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Gets mountpoint from given path\r\n   * @param {string|VFSFile} file The file\r\n   * @return {FilesystemMountpoint|null}\r\n   */\r\n  getMountpointFromPath(file) {\r\n    const path = typeof file === 'string' ? file : file.path;\r\n    const prefix = parseMountpointPrefix(path);\r\n    const _ = this.core.make('osjs/locale').translate;\r\n\r\n    if (!prefix) {\r\n      throw new Error(_('ERR_VFS_PATH_FORMAT_INVALID', path));\r\n    }\r\n\r\n    const found = this.mounts.find(m => m.name === prefix);\r\n\r\n    if (!found) {\r\n      throw new Error(_('ERR_VFS_MOUNT_NOT_FOUND_FOR', `${prefix}:`));\r\n    }\r\n\r\n    return found;\r\n  }\r\n\r\n  /**\r\n   * Gets all mountpoints\r\n   * @return {FilesystemMountpoint[]}\r\n   */\r\n  getMounts(all = false) {\r\n    const user = this.core.getUser();\r\n    const theme = this.core.make('osjs/theme');\r\n    const icon = str => str\r\n      ? (typeof str === 'string' ? str : theme.icon(str.name))\r\n      : theme.icon('drive-harddisk');\r\n\r\n    return this.mounts\r\n      .filter(m => all || m.mounted)\r\n      .filter(m => m.enabled !== false)\r\n      .filter(m => {\r\n        const mg = m.attributes ? m.attributes.groups : [];\r\n        const ms = m.attributes ? m.attributes.strictGroups !== false : true;\r\n        return filterMountByGroups(user.groups)(mg, ms);\r\n      })\r\n      .map(m => ({\r\n        attributes: {...m.attributes},\r\n        icon: icon(m.icon),\r\n        name: m.name,\r\n        label: m.label,\r\n        root: m.root\r\n      }));\r\n  }\r\n\r\n  /**\r\n   * Gets configured mountpoints\r\n   * @return {FilesystemMountpoint[]}\r\n   */\r\n  _getConfiguredMountpoints() {\r\n    const list = [\r\n      ...this.core.config('vfs.mountpoints', []),\r\n      ...(this.options.mounts || [])\r\n    ];\r\n\r\n    return list\r\n      .map(mount => {\r\n        try {\r\n          return this.createMountpoint(mount);\r\n        } catch (e) {\r\n          logger.warn('Error while creating mountpoint', e);\r\n        }\r\n\r\n        return null;\r\n      })\r\n      .filter((mount, pos, arr) => {\r\n        const index = arr.findIndex(item => item.label === mount.label || item.root === mount.label);\r\n        if (index === pos) {\r\n          return true;\r\n        }\r\n\r\n        logger.warn('Removed duplicate mountpoint', mount);\r\n        return false;\r\n      })\r\n      .filter(mount => mount !== null);\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Julien Gomes Dias <abld@abld.info\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const de_DE = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Im standalone modus können keine Anfragen gemacht werden.',\r\n  ERR_REQUEST_NOT_OK: 'Beim Ausführen einer Anfrage ist der folgende Fehler aufgetreten: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filesystem \\'{0}\\' nicht gefunden',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filesystem für \\'{0}\\' nicht gefunden',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filesystem \\'{0}\\' nicht gemountet',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' schon gemountet',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'Der gegebene Pfad \\'{0}\\' stimmt nicht mit \\'name:/path\\' überein',\r\n  ERR_PACKAGE_NOT_FOUND: 'Paket-Metadaten  \\'{0}\\' nicht gefunden',\r\n  ERR_PACKAGE_LOAD: 'Paket Laden \\'{0}\\' ist fehlgeschlagen: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'Paketlaufzeit \\'{0}\\' nicht gefunden',\r\n  ERR_PACKAGE_NO_METADATA: 'Metadaten für \\'{0}\\' nicht gefunden. Ist es in der Manifest?',\r\n  ERR_PACKAGE_EXCEPTION: 'Eine Ausnahme trat in \\'{0}\\' auf.',\r\n  ERR_WINDOW_ID_EXISTS: 'Fenster mit der ID \\'{0}\\' existiert schon',\r\n  ERR_INVALID_LOCALE: 'Invalide Sprache \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Verbindung unterbrochen',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'Die Verbindung zu OS.js wurde unterbrochen. Wiederverbinden... ',\r\n  LBL_CONNECTION_RESTORED: 'Verbindung wiederhergestellt',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Die Verbindung zu dem OS.js wurde wieder hergestellt.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'IT-Entwicklung',\r\n  LBL_APP_CAT_SCIENCE: 'Wissenschaft',\r\n  LBL_APP_CAT_GAMES: 'Spiele',\r\n  LBL_APP_CAT_GRAPHICS: 'Grafiken',\r\n  LBL_APP_CAT_NETWORK: 'Netzwerk',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\r\n  LBL_APP_CAT_OFFICE: 'Office',\r\n  LBL_APP_CAT_SYSTEM: 'System',\r\n  LBL_APP_CAT_UTILITIES: 'Dienstprogramme',\r\n  LBL_APP_CAT_OTHER: 'Andere',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Applikation auswählen',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'Applikation für \\'{0}\\' auswählen',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Hintergrundbild auswählen',\r\n  LBL_DESKTOP_SELECT_THEME: 'Theme auswählen',\r\n  LBL_SEARCH_TOOLTOP: 'Dateisysteme ({0}) finden',\r\n  LBL_SEARCH_PLACEHOLDER: 'Dateisysteme finden...',\r\n  LBL_SEARCH_WAIT: 'Suche...',\r\n  LBL_SEARCH_RESULT: 'Anzeige von {0} Ergebnissen',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KiB',\r\n  LBL_FS_MIB: 'MiB',\r\n  LBL_FS_GIB: 'GiB',\r\n\r\n  // Generic\r\n  LBL_TOP: 'Oben',\r\n  LBL_LEFT: 'Links',\r\n  LBL_RIGHT: 'Rechts',\r\n  LBL_BOTTOM: 'Unten',\r\n  LBL_MENU: 'Menü',\r\n  LBL_ERROR: 'Error',\r\n  LBL_INFO: 'Info',\r\n  LBL_MESSAGE: 'Nachricht',\r\n  LBL_WARNINIG: 'Warnung',\r\n  LBL_SUCCESS: 'Success',\r\n  LBL_FAILURE: 'Fehler',\r\n  LBL_WINDOW: 'Fenster',\r\n  LBL_WINDOWS: 'Fenster',\r\n  LBL_NOTIFICATION: 'Benachrichtigung',\r\n  LBL_NOTIFICATIONS: 'Benachrichtigungen',\r\n  LBL_TRAY: 'Infobereich-Eintrag',\r\n  LBL_NAME: 'Name',\r\n  LBL_TYPE: 'Typ',\r\n  LBL_SIZE: 'Größe',\r\n  LBL_FILE: 'Datei',\r\n  LBL_NEW: 'Neue',\r\n  LBL_OPEN: 'Öffnen',\r\n  LBL_SAVE: 'Speichern',\r\n  LBL_SAVEAS: 'Speichern als',\r\n  LBL_OK: 'OK',\r\n  LBL_ABORT: 'Abbrechen',\r\n  LBL_CANCEL: 'Beenden',\r\n  LBL_CLOSE: 'Schließen',\r\n  LBL_QUIT: 'Verlassen',\r\n  LBL_YES: 'Ja',\r\n  LBL_NO: 'Nein',\r\n  LBL_GO: 'Los',\r\n  LBL_MKDIR: 'Neues Verzeichnis erstellen',\r\n  LBL_MKFILE: 'Neue Datei erstellen',\r\n  LBL_COPY: 'Kopieren',\r\n  LBL_PASTE: 'Einfügen',\r\n  LBL_CUT: 'Ausschneiden',\r\n  LBL_MOVE: 'Verschieben',\r\n  LBL_RENAME: 'Umbenennen',\r\n  LBL_DELETE: 'Löschen',\r\n  LBL_DOWNLOAD: 'Herunterladen',\r\n  LBL_REFRESH: 'Aktualisieren',\r\n  LBL_RELOAD: 'Neu laden',\r\n  LBL_HOME: 'Startseite',\r\n  LBL_VIEW: 'Ansicht',\r\n  LBL_HELP: 'Hilfe',\r\n  LBL_ABOUT: 'Über',\r\n  LBL_APPLICATION: 'Anwendungsprogramme',\r\n  LBL_APPLICATIONS: 'Anwendungsprogrammen',\r\n  LBL_KILL: 'Beenden',\r\n  LBL_KILL_ALL: 'Alle benden'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const en_EN = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Cannot make requests in standalone mode.',\r\n  ERR_REQUEST_NOT_OK: 'An error occured while performing a request: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filesystem \\'{0}\\' not found',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filesystem not found for \\'{0}\\'',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filesystem \\'{0}\\' not mounted',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' already mounted',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'Given path \\'{0}\\' does not match \\'name:/path\\'',\r\n  ERR_PACKAGE_PERMISSION_DENIED: 'You are not permitted to run \\'{0}\\'',\r\n  ERR_PACKAGE_NOT_FOUND: 'Package Metadata \\'{0}\\' not found',\r\n  ERR_PACKAGE_LOAD: 'Package Loading \\'{0}\\' failed: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'Package Runtime \\'{0}\\' not found',\r\n  ERR_PACKAGE_NO_METADATA: 'Metadata not found for \\'{0}\\'. Is it in the manifest?',\r\n  ERR_PACKAGE_EXCEPTION: 'An exception occured in \\'{0}\\'',\r\n  ERR_WINDOW_ID_EXISTS: 'Window with ID \\'{0}\\' already exists',\r\n  ERR_INVALID_LOCALE: 'Invalid locale \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Connection Lost',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'The connection to the OS.js was lost. Reconnecting....',\r\n  LBL_CONNECTION_RESTORED: 'Connection Restored',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'The connection to the OS.js server was restored.',\r\n  LBL_CONNECTION_FAILED: 'Connection Failed',\r\n  LBL_CONNECTION_FAILED_MESSAGE: 'The connection to the OS.js could not be established. Some features might not work properly.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'Development',\r\n  LBL_APP_CAT_SCIENCE: 'Science',\r\n  LBL_APP_CAT_GAMES: 'Games',\r\n  LBL_APP_CAT_GRAPHICS: 'Graphics',\r\n  LBL_APP_CAT_NETWORK: 'Network',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\r\n  LBL_APP_CAT_OFFICE: 'Office',\r\n  LBL_APP_CAT_SYSTEM: 'System',\r\n  LBL_APP_CAT_UTILITIES: 'Utilities',\r\n  LBL_APP_CAT_OTHER: 'Other',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Select application',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'Select application for \\'{0}\\'',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Select wallpaper',\r\n  LBL_DESKTOP_SELECT_THEME: 'Select theme',\r\n  LBL_SEARCH_TOOLTOP: 'Search Filesystem ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: 'Search filesystems...',\r\n  LBL_SEARCH_WAIT: 'Searching...',\r\n  LBL_SEARCH_RESULT: 'Showing {0} results',\r\n  LBL_DESKTOP_SET_AS_WALLPAPER: 'Set as wallpaper',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KiB',\r\n  LBL_FS_MIB: 'MiB',\r\n  LBL_FS_GIB: 'GiB',\r\n\r\n  // Generic\r\n  LBL_TOP: 'Top',\r\n  LBL_LEFT: 'Left',\r\n  LBL_RIGHT: 'Right',\r\n  LBL_BOTTOM: 'Bottom',\r\n  LBL_MENU: 'Menu',\r\n  LBL_ERROR: 'Error',\r\n  LBL_INFO: 'Info',\r\n  LBL_MESSAGE: 'Message',\r\n  LBL_WARNINIG: 'Warning',\r\n  LBL_SUCCESS: 'Success',\r\n  LBL_FAILURE: 'Failure',\r\n  LBL_WINDOW: 'Window',\r\n  LBL_WINDOWS: 'Windows',\r\n  LBL_NOTIFICATION: 'Notification',\r\n  LBL_NOTIFICATIONS: 'Notifications',\r\n  LBL_TRAY: 'Tray Entry',\r\n  LBL_NAME: 'Name',\r\n  LBL_TYPE: 'Type',\r\n  LBL_SIZE: 'Size',\r\n  LBL_FILE: 'File',\r\n  LBL_NEW: 'New',\r\n  LBL_OPEN: 'Open',\r\n  LBL_OPEN_WITH: 'Open with...',\r\n  LBL_SAVE: 'Save',\r\n  LBL_SAVEAS: 'Save As',\r\n  LBL_OK: 'OK',\r\n  LBL_ABORT: 'Abort',\r\n  LBL_CANCEL: 'Cancel',\r\n  LBL_CLOSE: 'Close',\r\n  LBL_QUIT: 'Quit',\r\n  LBL_YES: 'Yes',\r\n  LBL_NO: 'No',\r\n  LBL_GO: 'Go',\r\n  LBL_MKDIR: 'Create new directory',\r\n  LBL_MKFILE: 'Create new file',\r\n  LBL_COPY: 'Copy',\r\n  LBL_PASTE: 'Paste',\r\n  LBL_CUT: 'Cut',\r\n  LBL_MOVE: 'Move',\r\n  LBL_RENAME: 'Rename',\r\n  LBL_DELETE: 'Delete',\r\n  LBL_DOWNLOAD: 'Download',\r\n  LBL_REFRESH: 'Refresh',\r\n  LBL_RELOAD: 'Reload',\r\n  LBL_HOME: 'Home',\r\n  LBL_VIEW: 'View',\r\n  LBL_HELP: 'Help',\r\n  LBL_ABOUT: 'About',\r\n  LBL_APPLICATION: 'Application',\r\n  LBL_APPLICATIONS: 'Applications',\r\n  LBL_KILL: 'Kill',\r\n  LBL_KILL_ALL: 'Kill all',\r\n  LBL_MINIMIZE: 'Minimize',\r\n  LBL_MAXIMIZE: 'Maximize',\r\n  LBL_RESTORE: 'Restore',\r\n  LBL_RAISE: 'Raise',\r\n  LBL_SHADE: 'Shade',\r\n  LBL_UNSHADE: 'Unshade',\r\n  LBL_ONTOP: 'On top',\r\n  LBL_RESIZE: 'Resize',\r\n  LBL_BACK: 'Back',\r\n  LBL_FORWARD: 'Forward',\r\n  LBL_UPLOAD: 'Upload',\r\n  LBL_IMAGE: 'Image',\r\n  LBL_CREATE_SHORTCUT: 'Create shortcut',\r\n  LBL_REMOVE_SHORTCUT: 'Remove shortcut',\r\n  LBL_EDIT: 'Edit'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *\r\n * @author  Morteza Javan <javan.it@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const fa_FA = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'امکان اجرای درخواست در حالت واحد وجود ندارد.',\r\n  ERR_REQUEST_NOT_OK: 'خطایی در حال انجام این درخواست رخ داد: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'سیستم فایل \\'{0}\\' پیدا نشد',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'سیستم فایل برای \\'{0}\\' پیدا نشد',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'سیستم فایل \\'{0}\\' متصل نیست',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'سیستم فایل \\'{0}\\' از قبل متصل شده است',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'آدرس \\'{0}\\' با الگو مطابقت ندارد \\'name:/path\\'',\r\n  ERR_PACKAGE_NOT_FOUND: 'فراداده بسته \\'{0}\\' پیدا نشد',\r\n  ERR_PACKAGE_LOAD: 'بارگزاری بسته \\'{0}\\' دچار خطا شد: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'فایل های اجرایی \\'{0}\\' پیدا نشد',\r\n  ERR_PACKAGE_NO_METADATA: 'فراداده برای \\'{0}\\' پیدا نشد. ممکن است در مانیفست باشد؟?',\r\n  ERR_PACKAGE_EXCEPTION: 'بروز شرایط استثنا \\'{0}\\'',\r\n  ERR_WINDOW_ID_EXISTS: 'پنجره با شناسه \\'{0}\\' قبلا وجود دارد',\r\n  ERR_INVALID_LOCALE: 'زبان نامعتبر \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'از دست رفتن ارتباط',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'ارتباط با سرور قطع شد. در حال تلاش ....',\r\n  LBL_CONNECTION_RESTORED: 'ارتباط بازیابی شد',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'ارتباط با سرور مجدد برقرار شد.',\r\n  LBL_CONNECTION_FAILED: 'ارتباط با خطا مواجه شد',\r\n  LBL_CONNECTION_FAILED_MESSAGE: 'ارتباط نمیتواند با سرور برقرار شود.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'توسعه',\r\n  LBL_APP_CAT_SCIENCE: 'علمی',\r\n  LBL_APP_CAT_GAMES: 'بازی',\r\n  LBL_APP_CAT_GRAPHICS: 'گرافیک',\r\n  LBL_APP_CAT_NETWORK: 'شبکه',\r\n  LBL_APP_CAT_MULTIMEDIA: 'چندرسانه ای',\r\n  LBL_APP_CAT_OFFICE: 'اداری',\r\n  LBL_APP_CAT_SYSTEM: 'سیستمی',\r\n  LBL_APP_CAT_UTILITIES: 'ابزارها',\r\n  LBL_APP_CAT_OTHER: 'سایر',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'انتخاب برنامه کاربردی',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'انتخاب برنامه کاربردی برای \\'{0}\\'',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'انتخاب کاغذ دیواری',\r\n  LBL_DESKTOP_SELECT_THEME: 'انتخاب الگو',\r\n  LBL_SEARCH_TOOLTOP: 'جستجوی سیستم فایل ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: 'جستجوی سیستم فایل...',\r\n  LBL_SEARCH_WAIT: 'در جال جستجو...',\r\n  LBL_SEARCH_RESULT: 'نمایش {0} نتیجه',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'کیلوبایت',\r\n  LBL_FS_MIB: 'مگابایت',\r\n  LBL_FS_GIB: 'گیگابایت',\r\n\r\n  // Generic\r\n  LBL_TOP: 'بالا',\r\n  LBL_LEFT: 'چپ',\r\n  LBL_RIGHT: 'راست',\r\n  LBL_BOTTOM: 'پایین',\r\n  LBL_MENU: 'منوی اصلی',\r\n  LBL_ERROR: 'خطا',\r\n  LBL_INFO: 'نکته',\r\n  LBL_MESSAGE: 'پیام',\r\n  LBL_WARNINIG: 'هشدار',\r\n  LBL_SUCCESS: 'موفق',\r\n  LBL_FAILURE: 'شکست',\r\n  LBL_WINDOW: 'پنجره',\r\n  LBL_WINDOWS: 'پنجره ها',\r\n  LBL_NOTIFICATION: 'اطلاعیه',\r\n  LBL_NOTIFICATIONS: 'اطلاعیه ها',\r\n  LBL_TRAY: 'سینی ابزار',\r\n  LBL_NAME: 'نام',\r\n  LBL_TYPE: 'نوع',\r\n  LBL_SIZE: 'اندازه',\r\n  LBL_FILE: 'فایل',\r\n  LBL_NEW: 'جدید',\r\n  LBL_OPEN: 'بازکردن',\r\n  LBL_OPEN_WITH: 'باز کردن با...',\r\n  LBL_SAVE: 'ذخیره',\r\n  LBL_SAVEAS: 'ذخیره جدید',\r\n  LBL_OK: 'تایید',\r\n  LBL_ABORT: 'بیخیال',\r\n  LBL_CANCEL: 'رد',\r\n  LBL_CLOSE: 'بستن',\r\n  LBL_QUIT: 'خروج',\r\n  LBL_YES: 'بله',\r\n  LBL_NO: 'خیر',\r\n  LBL_GO: 'برو',\r\n  LBL_MKDIR: 'ایجاد پوشه جدید',\r\n  LBL_MKFILE: 'ایجاد فایل جدید',\r\n  LBL_COPY: 'کپی',\r\n  LBL_PASTE: 'الصاق',\r\n  LBL_CUT: 'برداشتن',\r\n  LBL_MOVE: 'انتقال',\r\n  LBL_RENAME: 'تغییرنام',\r\n  LBL_DELETE: 'حذف',\r\n  LBL_DOWNLOAD: 'دانلود',\r\n  LBL_REFRESH: 'نوسازی',\r\n  LBL_RELOAD: 'بارگزاری مجدد',\r\n  LBL_HOME: 'خانه',\r\n  LBL_VIEW: 'نمایش',\r\n  LBL_HELP: 'کمک',\r\n  LBL_ABOUT: 'درباره',\r\n  LBL_APPLICATION: 'برنامه کاربردی',\r\n  LBL_APPLICATIONS: 'برنامه های کاربردی',\r\n  LBL_KILL: 'از بین بردن',\r\n  LBL_KILL_ALL: 'از بین بردن همه',\r\n  LBL_MINIMIZE: 'کمینه',\r\n  LBL_MAXIMIZE: 'بیشینه',\r\n  LBL_RESTORE: 'عادی',\r\n  LBL_RAISE: 'شناور',\r\n  LBL_SHADE: 'بالا بردن',\r\n  LBL_UNSHADE: 'پایین آوردن',\r\n  LBL_ONTOP: 'در بالا',\r\n  LBL_RESIZE: 'تغییراندازه',\r\n  LBL_BACK: 'عقب',\r\n  LBL_FORWARD: 'جلو',\r\n  LBL_UPLOAD: 'آپلود',\r\n  LBL_IMAGE: 'تصویر',\r\n  LBL_CREATE_SHORTCUT: 'ایجاد میانبر',\r\n  LBL_REMOVE_SHORTCUT: 'حذف میانبر',\r\n  LBL_EDIT: 'ویرایش'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Julien Gomes Dias <abld@abld.info>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const fr_FR = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Impossible d\\'effectuer des requêtes en mode autonome.',\r\n  ERR_REQUEST_NOT_OK: 'Une erreur s\\'est produite en exécutant une requête : {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'Système de fichier \\'{0}\\' absent',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Système de fichier pour \\'{0}\\' absent',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Le système de fichier \\'{0}\\' n\\'est pas encore monté',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Le système de fichier \\'{0}\\' est déjà monté',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'Le dossier \\'{0}\\' ne correspond pas \\'name:/path\\'',\r\n  ERR_PACKAGE_NOT_FOUND: 'Les métadonnées du paquet \\'{0}\\' n\\'ont pas été touvées',\r\n  ERR_PACKAGE_LOAD: 'Le chargement du paquet \\'{0}\\' a échoué: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'Durée d\\'exécution du paquet \\'{0}\\' absente',\r\n  ERR_PACKAGE_NO_METADATA: 'Métadonnées absentes pour \\'{0}\\'. Sont-elles dans le manifeste ?',\r\n  ERR_PACKAGE_EXCEPTION: 'Une exception s\\'est produite dans \\'{0}\\'',\r\n  ERR_WINDOW_ID_EXISTS: 'La fénêtre avec l\\'identifiant \\'{0}\\' existe déjà',\r\n  ERR_INVALID_LOCALE: 'Paramètre de langue invalide \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Connexion perdue',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'La connexion à OS.js a été perdue. Reconnexion...',\r\n  LBL_CONNECTION_RESTORED: 'Connexion restaurée',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'La connexion à OS.js a été restaurée.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'Développement',\r\n  LBL_APP_CAT_SCIENCE: 'Science',\r\n  LBL_APP_CAT_GAMES: 'Jeux',\r\n  LBL_APP_CAT_GRAPHICS: 'Graphisme',\r\n  LBL_APP_CAT_NETWORK: 'Réseau',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Multimédia',\r\n  LBL_APP_CAT_OFFICE: 'Bureautique',\r\n  LBL_APP_CAT_SYSTEM: 'Système',\r\n  LBL_APP_CAT_UTILITIES: 'Utilitaires',\r\n  LBL_APP_CAT_OTHER: 'Autre',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Sélectionner l\\'application',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'Sélectionner l\\'application pour \\'{0}\\'',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Sélectionner le fond d\\'écran',\r\n  LBL_DESKTOP_SELECT_THEME: 'Sélectionner le thème',\r\n  LBL_SEARCH_TOOLTOP: 'Recherche d\\'un système de fichier ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: 'Recherche des systèmes de fichiers...',\r\n  LBL_SEARCH_WAIT: 'Recherche...',\r\n  LBL_SEARCH_RESULT: 'Affichage des résultats {0}',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KiB',\r\n  LBL_FS_MIB: 'MiB',\r\n  LBL_FS_GIB: 'GiB',\r\n\r\n  // Generic\r\n  LBL_TOP: 'En Haut',\r\n  LBL_LEFT: 'À Gauche',\r\n  LBL_RIGHT: 'À Droite',\r\n  LBL_BOTTOM: 'En Bas',\r\n  LBL_MENU: 'Menu',\r\n  LBL_ERROR: 'Erreur',\r\n  LBL_INFO: 'Info',\r\n  LBL_MESSAGE: 'Message',\r\n  LBL_WARNINIG: 'Attention',\r\n  LBL_SUCCESS: 'Succès',\r\n  LBL_FAILURE: 'Échec',\r\n  LBL_WINDOW: 'Fenêtre',\r\n  LBL_WINDOWS: 'Fenêtres',\r\n  LBL_NOTIFICATION: 'Notification',\r\n  LBL_NOTIFICATIONS: 'Notifications',\r\n  LBL_TRAY: 'Accès au plateau',\r\n  LBL_NAME: 'Nom',\r\n  LBL_TYPE: 'Type',\r\n  LBL_SIZE: 'Taille',\r\n  LBL_FILE: 'Fichier',\r\n  LBL_NEW: 'Nouveau',\r\n  LBL_OPEN: 'Ouvrir',\r\n  LBL_SAVE: 'Sauvegarder',\r\n  LBL_SAVEAS: 'Sauvegarder comme',\r\n  LBL_OK: 'OK',\r\n  LBL_ABORT: 'Abandonner',\r\n  LBL_CANCEL: 'Annuler',\r\n  LBL_CLOSE: 'Fermer',\r\n  LBL_QUIT: 'Quitter',\r\n  LBL_YES: 'Oui',\r\n  LBL_NO: 'Non',\r\n  LBL_GO: 'C\\'est parti !',\r\n  LBL_MKDIR: 'Créer nouveau dossier',\r\n  LBL_MKFILE: 'Créer nouveau fichier',\r\n  LBL_COPY: 'Copier',\r\n  LBL_PASTE: 'Coller',\r\n  LBL_CUT: 'Couper',\r\n  LBL_MOVE: 'Déplacer',\r\n  LBL_RENAME: 'Renommer',\r\n  LBL_DELETE: 'Supprimer',\r\n  LBL_DOWNLOAD: 'Télécharger',\r\n  LBL_REFRESH: 'Rafraîchir',\r\n  LBL_RELOAD: 'Recharger',\r\n  LBL_HOME: 'Accueil',\r\n  LBL_VIEW: 'Aperçu',\r\n  LBL_HELP: 'Aide',\r\n  LBL_ABOUT: 'À propos',\r\n  LBL_APPLICATION: 'Application',\r\n  LBL_APPLICATIONS: 'Applications',\r\n  LBL_KILL: 'Tuer',\r\n  LBL_KILL_ALL: 'Tuer tout'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport * from './en_EN';\r\nexport * from './fr_FR';\r\nexport * from './nb_NO';\r\nexport * from './sl_SI';\r\nexport * from './vi_VN';\r\nexport * from './de_DE';\r\nexport * from './zh_CN';\r\nexport * from './fa_FA';\r\nexport * from './pt_BR';\r\nexport * from './ru_RU';\r\nexport * from './tr_TR';\r\nexport * from './sv_SE';\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const nb_NO = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Kan ikke gjøre spørringer i standalone modus.',\r\n  ERR_REQUEST_NOT_OK: 'En feil oppstod under spørring: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filsystem \\'{0}\\' ikke funnet',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filsystem ikke funnet for \\'{0}\\'',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filsystem \\'{0}\\' ikke montert',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' allerede montert',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'Angitt sti \\'{0}\\' tilfredstiller ikke format \\'name:/path\\'',\r\n  ERR_PACKAGE_NOT_FOUND: 'Pakke Metadata \\'{0}\\' ikke funnet',\r\n  ERR_PACKAGE_LOAD: 'Pakke Lasting \\'{0}\\' feilet: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'Pakke Runtime \\'{0}\\' ikke funnet',\r\n  ERR_PACKAGE_NO_METADATA: 'Metadata ikke funnet for \\'{0}\\'. Er den i manifestet?',\r\n  ERR_PACKAGE_EXCEPTION: 'En unntaksfeil oppstod i \\'{0}\\'',\r\n  ERR_WINDOW_ID_EXISTS: 'Vindu med ID \\'{0}\\' eksisterer allerede',\r\n  ERR_INVALID_LOCALE: 'Ugyldig lokalisering \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Tilkobling tapt',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'Tilkobling til OS.js var tapt. Kobler til på nytt....',\r\n  LBL_CONNECTION_RESTORED: 'Tilkobling gjenopprettet',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Tilkobling til OS.js var gjenopprettet.',\r\n  LBL_CONNECTION_FAILED: 'Tilkobling feilet',\r\n  LBL_CONNECTION_FAILED_MESSAGE: 'Tilkobling til OS.js var ikke vellykket. Noen egenskaper er utilgjenglig.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'Utvikling',\r\n  LBL_APP_CAT_SCIENCE: 'Vitenskap',\r\n  LBL_APP_CAT_GAMES: 'Spill',\r\n  LBL_APP_CAT_GRAPHICS: 'Grafikk',\r\n  LBL_APP_CAT_NETWORK: 'Nettverk',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\r\n  LBL_APP_CAT_OFFICE: 'Kontor',\r\n  LBL_APP_CAT_SYSTEM: 'System',\r\n  LBL_APP_CAT_UTILITIES: 'Verktøy',\r\n  LBL_APP_CAT_OTHER: 'Andre',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Velg applikasjon',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'Velg applikasjon for \\'{0}\\'',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Velg bakgrunnsbilde',\r\n  LBL_DESKTOP_SELECT_THEME: 'Velg tema',\r\n  LBL_SEARCH_TOOLTOP: 'Søk i filsystemer ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: 'Søker filsystemer...',\r\n  LBL_SEARCH_WAIT: 'Søker...',\r\n  LBL_SEARCH_RESULT: 'Viser {0} resultater',\r\n  LBL_DESKTOP_SET_AS_WALLPAPER: 'Sett som bakgrunnsbilde',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KiB',\r\n  LBL_FS_MIB: 'MiB',\r\n  LBL_FS_GIB: 'GiB',\r\n\r\n  // Generic\r\n  LBL_TOP: 'Topp',\r\n  LBL_LEFT: 'Venstre',\r\n  LBL_RIGHT: 'Høyre',\r\n  LBL_BOTTOM: 'Bunn',\r\n  LBL_MENU: 'Meny',\r\n  LBL_ERROR: 'Feil',\r\n  LBL_INFO: 'Info',\r\n  LBL_MESSAGE: 'Melding',\r\n  LBL_WARNINIG: 'Advarsel',\r\n  LBL_SUCCESS: 'Velykket',\r\n  LBL_FAILURE: 'Svikt',\r\n  LBL_WINDOW: 'Vindu',\r\n  LBL_WINDOWS: 'Vinduer',\r\n  LBL_NOTIFICATION: 'Notifikasjon',\r\n  LBL_NOTIFICATIONS: 'Notifikasjoner',\r\n  LBL_TRAY: 'Tray Oppføring',\r\n  LBL_NAME: 'Navn',\r\n  LBL_TYPE: 'Type',\r\n  LBL_SIZE: 'Størrelse',\r\n  LBL_FILE: 'Fil',\r\n  LBL_NEW: 'Ny',\r\n  LBL_OPEN: 'Åpne',\r\n  LBL_OPEN_WITH: 'Åpne med...',\r\n  LBL_SAVE: 'Lagre',\r\n  LBL_SAVEAS: 'Lagre Som',\r\n  LBL_OK: 'OK',\r\n  LBL_ABORT: 'Abort',\r\n  LBL_CANCEL: 'Avbryt',\r\n  LBL_CLOSE: 'Lukk',\r\n  LBL_QUIT: 'Slutt',\r\n  LBL_YES: 'Ja',\r\n  LBL_NO: 'Nei',\r\n  LBL_GO: 'Gå',\r\n  LBL_MKDIR: 'Lag ny mappe',\r\n  LBL_MKFILE: 'Lag ny fil',\r\n  LBL_COPY: 'Kopier',\r\n  LBL_PASTE: 'Lim inn',\r\n  LBL_CUT: 'Kutt',\r\n  LBL_MOVE: 'Flytt',\r\n  LBL_RENAME: 'Navngi',\r\n  LBL_DELETE: 'Slett',\r\n  LBL_DOWNLOAD: 'Last ned',\r\n  LBL_REFRESH: 'Gjenoppfrisk',\r\n  LBL_RELOAD: 'Last på nytt',\r\n  LBL_HOME: 'Hjem',\r\n  LBL_VIEW: 'Visning',\r\n  LBL_HELP: 'Hjelp',\r\n  LBL_ABOUT: 'Om',\r\n  LBL_APPLICATION: 'Applikasjon',\r\n  LBL_APPLICATIONS: 'Applikasjoner',\r\n  LBL_KILL: 'Drep',\r\n  LBL_KILL_ALL: 'Drep alle',\r\n  LBL_MINIMIZE: 'Minimisèr',\r\n  LBL_MAXIMIZE: 'Maksimisèr',\r\n  LBL_RESTORE: 'Gjenopprett',\r\n  LBL_RAISE: 'Løft',\r\n  LBL_SHADE: 'Rull opp',\r\n  LBL_UNSHADE: 'Rull ned',\r\n  LBL_ONTOP: 'Alltid øverst',\r\n  LBL_RESIZE: 'Endre størrelse',\r\n  LBL_BACK: 'Tilbake',\r\n  LBL_FORWARD: 'Frem',\r\n  LBL_UPLOAD: 'Last opp',\r\n  LBL_IMAGE: 'Bilde',\r\n  LBL_CREATE_SHORTCUT: 'Lag til snarvei',\r\n  LBL_REMOVE_SHORTCUT: 'Fjern snarvei',\r\n  LBL_EDIT: 'Rediger'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Matheus Felipe <matheusfelipeog@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const pt_BR = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Não é possível fazer solicitações autônomas.',\r\n  ERR_REQUEST_NOT_OK: 'Ocorreu um erro ao executar a solicitação: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'Sistema de arquivo \\'{0}\\' não encontrado',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Sistema de arquivo não encontrado para \\'{0}\\'',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Sistema de arquivo \\'{0}\\' não montado',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Sistema de arquivo \\'{0}\\' já montado',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'O caminho especificado \\'{0}\\' não corresponde \\'name:/path\\'',\r\n  ERR_PACKAGE_NOT_FOUND: 'Metadados do pacote \\'{0}\\' não encontrados',\r\n  ERR_PACKAGE_LOAD: 'Carregamento do pacote \\'{0}\\' falhou: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'Tempo de execução do pacote \\'{0}\\' não encontrado',\r\n  ERR_PACKAGE_NO_METADATA: 'Metadados não encontrado para \\'{0}\\'. Está no manifesto?',\r\n  ERR_PACKAGE_EXCEPTION: 'Ocorreu uma exceção em \\'{0}\\'',\r\n  ERR_WINDOW_ID_EXISTS: 'Janela com ID \\'{0}\\' Já existe',\r\n  ERR_INVALID_LOCALE: 'Código de idioma inválido \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Conexão perdida',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'A conexão com OS.js foi perdida. Reconectando....',\r\n  LBL_CONNECTION_RESTORED: 'Conexão restaurada',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'A conexão com o servidor OS.js foi restaurada.',\r\n  LBL_CONNECTION_FAILED: 'Falha na conexão',\r\n  LBL_CONNECTION_FAILED_MESSAGE: 'A conexão com OS.js não pode ser estabelecida. Alguns recursos podem não funcionar corretamente.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'Desenvolvimento',\r\n  LBL_APP_CAT_SCIENCE: 'Ciência',\r\n  LBL_APP_CAT_GAMES: 'Jogos',\r\n  LBL_APP_CAT_GRAPHICS: 'Grâfico',\r\n  LBL_APP_CAT_NETWORK: 'Rede',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\r\n  LBL_APP_CAT_OFFICE: 'Escritório',\r\n  LBL_APP_CAT_SYSTEM: 'Sistema',\r\n  LBL_APP_CAT_UTILITIES: 'Utilidades',\r\n  LBL_APP_CAT_OTHER: 'Outros',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Selecionar aplicativo',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'Selecionar aplicativo para \\'{0}\\'',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Selecionar papel de parede',\r\n  LBL_DESKTOP_SELECT_THEME: 'Selecionar tema',\r\n  LBL_SEARCH_TOOLTOP: 'Pesquisar no sistema de arquivos ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: 'Pesquisar...',\r\n  LBL_SEARCH_WAIT: 'Buscando...',\r\n  LBL_SEARCH_RESULT: 'Mostrando {0} resultados',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KiB',\r\n  LBL_FS_MIB: 'MiB',\r\n  LBL_FS_GIB: 'GiB',\r\n\r\n  // Generic\r\n  LBL_TOP: 'Topo',\r\n  LBL_LEFT: 'Esquerda',\r\n  LBL_RIGHT: 'Direita',\r\n  LBL_BOTTOM: 'Inferior',\r\n  LBL_MENU: 'Menu',\r\n  LBL_ERROR: 'Erro',\r\n  LBL_INFO: 'Informação',\r\n  LBL_MESSAGE: 'Mensagem',\r\n  LBL_WARNINIG: 'Atenção',\r\n  LBL_SUCCESS: 'Sucesso',\r\n  LBL_FAILURE: 'Falha',\r\n  LBL_WINDOW: 'Janela',\r\n  LBL_WINDOWS: 'Janelas',\r\n  LBL_NOTIFICATION: 'Notificação',\r\n  LBL_NOTIFICATIONS: 'Notificações',\r\n  LBL_TRAY: 'Entrada',\r\n  LBL_NAME: 'Nome',\r\n  LBL_TYPE: 'Tipo',\r\n  LBL_SIZE: 'Tamanho',\r\n  LBL_FILE: 'Arquivo',\r\n  LBL_NEW: 'Novo',\r\n  LBL_OPEN: 'Abrir',\r\n  LBL_OPEN_WITH: 'Abrir com...',\r\n  LBL_SAVE: 'Salvar',\r\n  LBL_SAVEAS: 'Salvar como',\r\n  LBL_OK: 'OK',\r\n  LBL_ABORT: 'Abortar',\r\n  LBL_CANCEL: 'Cancelar',\r\n  LBL_CLOSE: 'Fechar',\r\n  LBL_QUIT: 'Sair',\r\n  LBL_YES: 'Sim',\r\n  LBL_NO: 'Não',\r\n  LBL_GO: 'Ir',\r\n  LBL_MKDIR: 'Criar novo diretório',\r\n  LBL_MKFILE: 'Criar novo arquivo',\r\n  LBL_COPY: 'Copiar',\r\n  LBL_PASTE: 'Colar',\r\n  LBL_CUT: 'Recortar',\r\n  LBL_MOVE: 'Mover',\r\n  LBL_RENAME: 'Renomear',\r\n  LBL_DELETE: 'Deletar',\r\n  LBL_DOWNLOAD: 'Download',\r\n  LBL_REFRESH: 'Atualizar',\r\n  LBL_RELOAD: 'Recarregar',\r\n  LBL_HOME: 'Home',\r\n  LBL_VIEW: 'Visualização',\r\n  LBL_HELP: 'Ajuda',\r\n  LBL_ABOUT: 'Sobre',\r\n  LBL_APPLICATION: 'Aplicativo',\r\n  LBL_APPLICATIONS: 'Aplicativos',\r\n  LBL_KILL: 'Finalizar',\r\n  LBL_KILL_ALL: 'Finalizar tudo',\r\n  LBL_MINIMIZE: 'Minimizar',\r\n  LBL_MAXIMIZE: 'Maximizar',\r\n  LBL_RESTORE: 'Restaurar',\r\n  LBL_RAISE: 'Levantar',\r\n  LBL_SHADE: 'Sombra',\r\n  LBL_UNSHADE: 'Tirar sombra',\r\n  LBL_ONTOP: 'No topo',\r\n  LBL_RESIZE: 'Redimensionar',\r\n  LBL_BACK: 'Voltar',\r\n  LBL_FORWARD: 'Avançar',\r\n  LBL_UPLOAD: 'Enviar',\r\n  LBL_IMAGE: 'Imagem',\r\n  LBL_CREATE_SHORTCUT: 'Criar atalho',\r\n  LBL_REMOVE_SHORTCUT: 'Remover atalho',\r\n  LBL_EDIT: 'Editar'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const ru_RU = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Невозможно делать запросы в автономном режиме.',\r\n  ERR_REQUEST_NOT_OK: 'Произошла ошибка при запросе: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'Файловая система \\'{0}\\' не найдена',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Файловая система не найдена для \\'{0}\\'',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Файловая система \\'{0}\\' не вмонтирована',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Файловая система \\'{0}\\' уже вмонтирована',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'Заданный путь \\'{0}\\' не соответсвует формату \\'имя:/путь\\'',\r\n  ERR_PACKAGE_NOT_FOUND: 'Метаданные пакета \\'{0}\\' не найдены',\r\n  ERR_PACKAGE_LOAD: 'Ошибка загрузки пакета \\'{0}\\': {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'Рантайм пакета \\'{0}\\' не найден',\r\n  ERR_PACKAGE_NO_METADATA: 'Метаданные не найдены для \\'{0}\\'. Is it in the manifest?',\r\n  ERR_PACKAGE_EXCEPTION: 'Произошло исключение в \\'{0}\\'',\r\n  ERR_WINDOW_ID_EXISTS: 'Окно с ID \\'{0}\\' уже существует',\r\n  ERR_INVALID_LOCALE: 'Неправильная локаль \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Соединение Потеряно',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'Соединение с OS.js было потеряно. Переподключаемся....',\r\n  LBL_CONNECTION_RESTORED: 'Соединение Восстановлено',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Соединение с сервером OS.js было восстановлено.',\r\n  LBL_CONNECTION_FAILED: 'Ошибка Соединения',\r\n  LBL_CONNECTION_FAILED_MESSAGE: 'Соединение с OS.js не может быть установлено. Некоторые возможности могут не работать корректно.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'Разработка',\r\n  LBL_APP_CAT_SCIENCE: 'Вычисления',\r\n  LBL_APP_CAT_GAMES: 'Игры',\r\n  LBL_APP_CAT_GRAPHICS: 'Графика',\r\n  LBL_APP_CAT_NETWORK: 'Сеть',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Мультимедиа',\r\n  LBL_APP_CAT_OFFICE: 'Офис',\r\n  LBL_APP_CAT_SYSTEM: 'Система',\r\n  LBL_APP_CAT_UTILITIES: 'Утилиты',\r\n  LBL_APP_CAT_OTHER: 'Другие',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Выберите приложение',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'Выберите приложение \\'{0}\\'',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Выберите обои',\r\n  LBL_DESKTOP_SELECT_THEME: 'Выберите тему',\r\n  LBL_SEARCH_TOOLTOP: 'Поиск файловой системы ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: 'Поиск файловой системы...',\r\n  LBL_SEARCH_WAIT: 'Поиск...',\r\n  LBL_SEARCH_RESULT: 'Показано {0} результатов',\r\n\r\n  // FS\r\n  LBL_FS_B: 'Б',\r\n  LBL_FS_M: 'М',\r\n  LBL_FS_G: 'Г',\r\n  LBL_FS_KIB: 'ГиБ',\r\n  LBL_FS_MIB: 'МиБ',\r\n  LBL_FS_GIB: 'ГиБ',\r\n\r\n  // Generic\r\n  LBL_TOP: 'Вверх',\r\n  LBL_LEFT: 'Лево',\r\n  LBL_RIGHT: 'Право',\r\n  LBL_BOTTOM: 'Вниз',\r\n  LBL_MENU: 'Меню',\r\n  LBL_ERROR: 'Ошибка',\r\n  LBL_INFO: 'Информация',\r\n  LBL_MESSAGE: 'Сообщение',\r\n  LBL_WARNINIG: 'Предупреждение',\r\n  LBL_SUCCESS: 'Успешно',\r\n  LBL_FAILURE: 'Ошибка',\r\n  LBL_WINDOW: 'Окно',\r\n  LBL_WINDOWS: 'Окна',\r\n  LBL_NOTIFICATION: 'Оповещение',\r\n  LBL_NOTIFICATIONS: 'Оповещения',\r\n  LBL_TRAY: 'Трэй',\r\n  LBL_NAME: 'Имя',\r\n  LBL_TYPE: 'Тип',\r\n  LBL_SIZE: 'Размер',\r\n  LBL_FILE: 'Файл',\r\n  LBL_NEW: 'Новый',\r\n  LBL_OPEN: 'Открыть',\r\n  LBL_OPEN_WITH: 'Открыть с...',\r\n  LBL_SAVE: 'Сохранить',\r\n  LBL_SAVEAS: 'Сохранить как',\r\n  LBL_OK: 'ОК',\r\n  LBL_ABORT: 'Прервать',\r\n  LBL_CANCEL: 'Отмена',\r\n  LBL_CLOSE: 'Закрыть',\r\n  LBL_QUIT: 'Выйти',\r\n  LBL_YES: 'Да',\r\n  LBL_NO: 'Нет',\r\n  LBL_GO: 'Вперед',\r\n  LBL_MKDIR: 'Новая папка',\r\n  LBL_MKFILE: 'Новый файл',\r\n  LBL_COPY: 'Скопировать',\r\n  LBL_PASTE: 'Вставить',\r\n  LBL_CUT: 'Вырезать',\r\n  LBL_MOVE: 'Переместить',\r\n  LBL_RENAME: 'Переименовать',\r\n  LBL_DELETE: 'Удалить',\r\n  LBL_DOWNLOAD: 'Скачать',\r\n  LBL_REFRESH: 'Обновить',\r\n  LBL_RELOAD: 'Перезагрузить',\r\n  LBL_HOME: 'Домой',\r\n  LBL_VIEW: 'Вид',\r\n  LBL_HELP: 'Помощь',\r\n  LBL_ABOUT: 'О программе',\r\n  LBL_APPLICATION: 'Приложение',\r\n  LBL_APPLICATIONS: 'Приложения',\r\n  LBL_KILL: 'Убить',\r\n  LBL_KILL_ALL: 'Убить все',\r\n  LBL_MINIMIZE: 'Свернуть',\r\n  LBL_MAXIMIZE: 'Развернуть',\r\n  LBL_RESTORE: 'Восстановить',\r\n  LBL_RAISE: 'Raise',\r\n  LBL_SHADE: 'Shade',\r\n  LBL_UNSHADE: 'Unshade',\r\n  LBL_ONTOP: 'Поверх окон',\r\n  LBL_RESIZE: 'Размер',\r\n  LBL_BACK: 'Назад',\r\n  LBL_FORWARD: 'Вперед',\r\n  LBL_UPLOAD: 'Загрузить',\r\n  LBL_IMAGE: 'Картинка',\r\n  LBL_CREATE_SHORTCUT: 'Создать ярлык',\r\n  LBL_REMOVE_SHORTCUT: 'Удалить ярлык'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Filip Š <projects@filips.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const sl_SI = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Zahteve v samostojnem načinu niso mogoče.',\r\n  ERR_REQUEST_NOT_OK: 'Pri zahtevi je prišlo do napake: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'Datotečni sistem \\'{0}\\' ni najden',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Datotečni sistem ni najden \\'{0}\\'',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Datotečni sistem \\'{0}\\' ni nameščen',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Datotečni sistem \\'{0}\\' že nameščen',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'Podana pot \\'{0}\\' se ne ujema z \\'name:/path\\'',\r\n  ERR_PACKAGE_NOT_FOUND: 'Metapodatki paketa \\'{0}\\' niso najdeni',\r\n  ERR_PACKAGE_LOAD: 'Pri nalaganju pageta \\'{0}\\' je prišlo do napake: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'Koda paketa \\'{0}\\' ni najdena',\r\n  ERR_PACKAGE_NO_METADATA: 'Metapodatki \\'{0}\\' niso najdeni. Ali so v datoteki manifest?',\r\n  ERR_PACKAGE_EXCEPTION: 'Sprožena je bila izjema v \\'{0}\\'',\r\n  ERR_WINDOW_ID_EXISTS: 'Okno z ID-jem \\'{0}\\' že obstaja',\r\n  ERR_INVALID_LOCALE: 'Neveljaven prevod \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Izguba povezave',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'Povezava do strežnika je bila izgubljena. Ponovno povezovanje ...',\r\n  LBL_CONNECTION_RESTORED: 'Vzpostavitev povezave',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Povezava do strežnika je bila ponovno vzpostavljena.',\r\n  LBL_CONNECTION_FAILED: 'Povezava ni uspela',\r\n  LBL_CONNECTION_FAILED_MESSAGE: 'Povezave z OS.js ni bilo mogoče vzpostaviti. Nekatere funkcije morda ne bodo delovale pravilno.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'Razvoj',\r\n  LBL_APP_CAT_SCIENCE: 'Znanost',\r\n  LBL_APP_CAT_GAMES: 'Igre',\r\n  LBL_APP_CAT_GRAPHICS: 'Grafika',\r\n  LBL_APP_CAT_NETWORK: 'Omrežje',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedija',\r\n  LBL_APP_CAT_OFFICE: 'Pisarna',\r\n  LBL_APP_CAT_SYSTEM: 'Sistem',\r\n  LBL_APP_CAT_UTILITIES: 'Orodja',\r\n  LBL_APP_CAT_OTHER: 'Drugo',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Izberite aplikacijo',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'Izberite aplikacijo za \\'{0}\\'',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Izberite ozadje',\r\n  LBL_DESKTOP_SELECT_THEME: 'Izberite temo',\r\n  LBL_SEARCH_TOOLTOP: 'Išči datotečni sistem ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: 'Iskanje po datotečnih sistemih ...',\r\n  LBL_SEARCH_WAIT: 'Iskanje ...',\r\n  LBL_SEARCH_RESULT: 'Prikaz {0} rezultatov',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KiB',\r\n  LBL_FS_MIB: 'MiB',\r\n  LBL_FS_GIB: 'GiB',\r\n\r\n  // Generic\r\n  LBL_TOP: 'Zgoraj',\r\n  LBL_LEFT: 'Levo',\r\n  LBL_RIGHT: 'Desno',\r\n  LBL_BOTTOM: 'Spodaj',\r\n  LBL_MENU: 'Meni',\r\n  LBL_ERROR: 'Napaka',\r\n  LBL_INFO: 'Informacije',\r\n  LBL_MESSAGE: 'Sporočilo',\r\n  LBL_WARNINIG: 'Opozorilo',\r\n  LBL_SUCCESS: 'Uspeh',\r\n  LBL_FAILURE: 'Neuspeh',\r\n  LBL_WINDOW: 'Okno',\r\n  LBL_WINDOWS: 'Okna',\r\n  LBL_NOTIFICATION: 'Obvestilo',\r\n  LBL_NOTIFICATIONS: 'Obvestila',\r\n  LBL_TRAY: 'Element vrstice',\r\n  LBL_NAME: 'Ime',\r\n  LBL_TYPE: 'Vrsta',\r\n  LBL_SIZE: 'Velikost',\r\n  LBL_FILE: 'Datoteka',\r\n  LBL_NEW: 'Novo',\r\n  LBL_OPEN: 'Odpri',\r\n  LBL_SAVE: 'Shrani',\r\n  LBL_SAVEAS: 'Shrani kot',\r\n  LBL_OK: 'V redu',\r\n  LBL_ABORT: 'Prekini',\r\n  LBL_CANCEL: 'Prekliči',\r\n  LBL_CLOSE: 'Zapri',\r\n  LBL_QUIT: 'Izklopi',\r\n  LBL_YES: 'Da',\r\n  LBL_NO: 'Ne',\r\n  LBL_GO: 'Pojdi',\r\n  LBL_MKDIR: 'Ustvari novo mapo',\r\n  LBL_MKFILE: 'Ustvari novo datoteko',\r\n  LBL_COPY: 'Kopiraj',\r\n  LBL_PASTE: 'Prilepi',\r\n  LBL_CUT: 'Izreži',\r\n  LBL_MOVE: 'Premakni',\r\n  LBL_RENAME: 'Preimenuj',\r\n  LBL_DELETE: 'Izbriši',\r\n  LBL_DOWNLOAD: 'Prenesi',\r\n  LBL_REFRESH: 'Osveži',\r\n  LBL_RELOAD: 'Osveži',\r\n  LBL_HOME: 'Domov',\r\n  LBL_VIEW: 'Pogled',\r\n  LBL_HELP: 'Pomoč',\r\n  LBL_ABOUT: 'O programu',\r\n  LBL_APPLICATION: 'Aplikacija',\r\n  LBL_APPLICATIONS: 'Aplikacije',\r\n  LBL_KILL: 'Končaj',\r\n  LBL_KILL_ALL: 'Končaj vse',\r\n  LBL_MINIMIZE: 'Pomanjšaj',\r\n  LBL_MAXIMIZE: 'Povečaj',\r\n  LBL_RESTORE: 'Obnovi',\r\n  LBL_RAISE: 'Dvigni',\r\n  LBL_SHADE: 'Zasenči',\r\n  LBL_UNSHADE: 'Odsenči',\r\n  LBL_ONTOP: 'Na vrhu',\r\n  LBL_RESIZE: 'Spremeni velikost',\r\n  LBL_BACK: 'Nazaj',\r\n  LBL_FORWARD: 'Naprej',\r\n  LBL_UPLOAD: 'Naloži',\r\n  LBL_IMAGE: 'Slika'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const sv_SE = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Det går inte att göra förfrågningar i fristående läge.',\r\n  ERR_REQUEST_NOT_OK: 'Ett fel uppstod när en begäran utfördes: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filsystemet \\'{0}\\' hittades inte',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filsystemet hittades inte för \\'{0}\\'',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filsystemet \\'{0}\\' inte monterat',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filsystemet \\'{0}\\' redan monterat',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'Angiven väg \\'{0}\\' matchar inte \\'name:/path\\'',\r\n  ERR_PACKAGE_PERMISSION_DENIED: 'Du har inte tillåtelse att starta \\'{0}\\'',\r\n  ERR_PACKAGE_NOT_FOUND: 'Paketmetadata \\'{0}\\' hittades inte',\r\n  ERR_PACKAGE_LOAD: 'Paketladdning \\'{0}\\' misslyckades: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'Paketets körtid \\'{0}\\' hittades inte',\r\n  ERR_PACKAGE_NO_METADATA: 'Metadata hittades inte för \\'{0}\\'. Är det i manifestet?',\r\n  ERR_PACKAGE_EXCEPTION: 'Ett undantag inträffade i \\'{0}\\'',\r\n  ERR_WINDOW_ID_EXISTS: 'Fönster med ID \\'{0}\\' existerar redan',\r\n  ERR_INVALID_LOCALE: 'Ogiltigt språk \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Anslutning förlorad',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'Anslutningen till OS.js förlorades. Återansluter ....',\r\n  LBL_CONNECTION_RESTORED: 'Anslutning återställd',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Anslutningen till OS.js-servern återställdes.',\r\n  LBL_CONNECTION_FAILED: 'Anslutningen misslyckades',\r\n  LBL_CONNECTION_FAILED_MESSAGE: 'Anslutningen till OS.js kunde inte upprättas. Vissa funktioner kanske inte fungerar ordentligt.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'Utveckling',\r\n  LBL_APP_CAT_SCIENCE: 'Vetenskap',\r\n  LBL_APP_CAT_GAMES: 'Spel',\r\n  LBL_APP_CAT_GRAPHICS: 'Grafik',\r\n  LBL_APP_CAT_NETWORK: 'Nätverk',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\r\n  LBL_APP_CAT_OFFICE: 'Kontor',\r\n  LBL_APP_CAT_SYSTEM: 'Systemet',\r\n  LBL_APP_CAT_UTILITIES: 'Verktyg',\r\n  LBL_APP_CAT_OTHER: 'Övrigt',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Välj applikation',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'Välj applikation för \\'{0}\\'',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Välj bakgrund',\r\n  LBL_DESKTOP_SELECT_THEME: 'Välj tema',\r\n  LBL_SEARCH_TOOLTOP: 'Sök filsystem ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: 'Sök filsystemen...',\r\n  LBL_SEARCH_WAIT: 'Söker...',\r\n  LBL_SEARCH_RESULT: 'Visar {0} resultat',\r\n  LBL_DESKTOP_SET_AS_WALLPAPER: 'Använd som bakgrund',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KiB',\r\n  LBL_FS_MIB: 'MiB',\r\n  LBL_FS_GIB: 'GiB',\r\n\r\n  // Generic\r\n  LBL_TOP: 'Topp',\r\n  LBL_LEFT: 'Vänster',\r\n  LBL_RIGHT: 'Höger',\r\n  LBL_BOTTOM: 'Botten',\r\n  LBL_MENU: 'Meny',\r\n  LBL_ERROR: 'Fel',\r\n  LBL_INFO: 'Info',\r\n  LBL_MESSAGE: 'Meddelande',\r\n  LBL_WARNINIG: 'Varning',\r\n  LBL_SUCCESS: 'Framgång',\r\n  LBL_FAILURE: 'Fel',\r\n  LBL_WINDOW: 'Fönster',\r\n  LBL_WINDOWS: 'Fönster',\r\n  LBL_NOTIFICATION: 'Meddelande',\r\n  LBL_NOTIFICATIONS: 'Meddelanden',\r\n  LBL_TRAY: 'Fackinmatning',\r\n  LBL_NAME: 'Namn',\r\n  LBL_TYPE: 'Typ',\r\n  LBL_SIZE: 'Storlek',\r\n  LBL_FILE: 'Fil',\r\n  LBL_NEW: 'Ny',\r\n  LBL_OPEN: 'Öppna',\r\n  LBL_OPEN_WITH: 'Öppna med...',\r\n  LBL_SAVE: 'Spara',\r\n  LBL_SAVEAS: 'Spara som',\r\n  LBL_OK: 'OK',\r\n  LBL_ABORT: 'Avbryta',\r\n  LBL_CANCEL: 'Avbryt',\r\n  LBL_CLOSE: 'Stäng',\r\n  LBL_QUIT: 'Sluta',\r\n  LBL_YES: 'Ja',\r\n  LBL_NO: 'Nej',\r\n  LBL_GO: 'Gå',\r\n  LBL_MKDIR: 'Skapa ny katalog',\r\n  LBL_MKFILE: 'Skapa ny fil',\r\n  LBL_COPY: 'Kopiera',\r\n  LBL_PASTE: 'Klistra in',\r\n  LBL_CUT: 'Klipp ut',\r\n  LBL_MOVE: 'Flytta',\r\n  LBL_RENAME: 'Döp om',\r\n  LBL_DELETE: 'Radera',\r\n  LBL_DOWNLOAD: 'Ladda ner',\r\n  LBL_REFRESH: 'Uppdatera',\r\n  LBL_RELOAD: 'Ladda om',\r\n  LBL_HOME: 'Hem',\r\n  LBL_VIEW: 'Se',\r\n  LBL_HELP: 'Hjälp',\r\n  LBL_ABOUT: 'Om',\r\n  LBL_APPLICATION: 'Ansökan',\r\n  LBL_APPLICATIONS: 'Applikationer',\r\n  LBL_KILL: 'Döda',\r\n  LBL_KILL_ALL: 'Döda alla',\r\n  LBL_MINIMIZE: 'Minimera',\r\n  LBL_MAXIMIZE: 'Maximera',\r\n  LBL_RESTORE: 'Återställ',\r\n  LBL_RAISE: 'Höj',\r\n  LBL_SHADE: 'Skugga',\r\n  LBL_UNSHADE: 'Avskugga',\r\n  LBL_ONTOP: 'Överst',\r\n  LBL_RESIZE: 'Ändra storlek',\r\n  LBL_BACK: 'Back',\r\n  LBL_FORWARD: 'Forward',\r\n  LBL_UPLOAD: 'Ladda upp',\r\n  LBL_IMAGE: 'Bild',\r\n  LBL_CREATE_SHORTCUT: 'Skapa genväg',\r\n  LBL_REMOVE_SHORTCUT: 'ta bort genväg',\r\n  LBL_EDIT: 'Redigera'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const tr_TR = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Bağımsız modda talepde bulunulamaz.',\r\n  ERR_REQUEST_NOT_OK: 'Talep gerçekleştirilirken bir hata oluştu: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: '\\'{0}\\' isimli dosya sistemi bulunamadı',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: '\\'{0}\\' için dosya sistemi bulunamadı',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: '\\'{0}\\' isimli dosya sistemi çıkarılmadı',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: '\\'{0}\\' isimli dosya sistemi zaten çıkarıldı',\r\n  ERR_VFS_PATH_FORMAT_INVALID: '\\'{0}\\' olarak verilen yol, \\'name:/path\\' ile eşleşmiyor',\r\n  ERR_PACKAGE_PERMISSION_DENIED: '\\'{0}\\' dosyasını çalıştırmaya iznin yok',\r\n  ERR_PACKAGE_NOT_FOUND: '\\'{0}\\' isimli paket meta verisi bulunamadı',\r\n  ERR_PACKAGE_LOAD: '\\'{0}\\' paketinin yüklenmesi başarısız: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: '\\'{0}\\' paketinin runtime verisi bulunamadı',\r\n  ERR_PACKAGE_NO_METADATA: '\\'{0}\\' için meta verisi bulunamadı. Manifest\\'de olabilir mi?',\r\n  ERR_PACKAGE_EXCEPTION: '\\'{0}\\' konumunda beklenmeyen bir durum gerçekleşti',\r\n  ERR_WINDOW_ID_EXISTS: '\\'{0}\\' ID\\'sine sahip olan bir pencere zaten var',\r\n  ERR_INVALID_LOCALE: 'Geçersiz yer \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Bağlantı Koptu',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'OS.js\\'ye olan bağlantı koptu. Yeniden bağlanılıyor....',\r\n  LBL_CONNECTION_RESTORED: 'Bağlantı Yenilendi',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'OS.js\\'ye olan bağlantı yenilendi.',\r\n  LBL_CONNECTION_FAILED: 'Bağlantı Başarısız',\r\n  LBL_CONNECTION_FAILED_MESSAGE: 'OS.js\\'ye bağlanılamıyor. Çeşitli özellikler doğru çalışmayabilir.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'Geliştirme',\r\n  LBL_APP_CAT_SCIENCE: 'Bilim',\r\n  LBL_APP_CAT_GAMES: 'Oyun',\r\n  LBL_APP_CAT_GRAPHICS: 'Grafik',\r\n  LBL_APP_CAT_NETWORK: 'Ağ',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedya',\r\n  LBL_APP_CAT_OFFICE: 'Ofis',\r\n  LBL_APP_CAT_SYSTEM: 'Sistem',\r\n  LBL_APP_CAT_UTILITIES: 'Araçlar',\r\n  LBL_APP_CAT_OTHER: 'Diğer',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Uygulama seç',\r\n  LBL_LAUNCH_SELECT_MESSAGE: '\\'{0}\\' için uygulama seç',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Arkaplan seç',\r\n  LBL_DESKTOP_SELECT_THEME: 'Tema seç',\r\n  LBL_SEARCH_TOOLTOP: 'Dosya sistemi ({0}) ara',\r\n  LBL_SEARCH_PLACEHOLDER: 'Dosya sistemlerini ara...',\r\n  LBL_SEARCH_WAIT: 'Aranıyor...',\r\n  LBL_SEARCH_RESULT: '{0} kadar sonuç gösteriliyor',\r\n  LBL_DESKTOP_SET_AS_WALLPAPER: 'Arkaplan olarak ayarla',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KiB',\r\n  LBL_FS_MIB: 'MiB',\r\n  LBL_FS_GIB: 'GiB',\r\n\r\n  // Generic\r\n  LBL_TOP: 'Üst',\r\n  LBL_LEFT: 'Sol',\r\n  LBL_RIGHT: 'Sağ',\r\n  LBL_BOTTOM: 'Alt',\r\n  LBL_MENU: 'Menü',\r\n  LBL_ERROR: 'Hata',\r\n  LBL_INFO: 'Bilgi',\r\n  LBL_MESSAGE: 'Mesaj',\r\n  LBL_WARNINIG: 'Uyarı',\r\n  LBL_SUCCESS: 'Başarı',\r\n  LBL_FAILURE: 'Kusur',\r\n  LBL_WINDOW: 'Pencere',\r\n  LBL_WINDOWS: 'Pencereler',\r\n  LBL_NOTIFICATION: 'Bildiri',\r\n  LBL_NOTIFICATIONS: 'Bildiriler',\r\n  LBL_TRAY: 'Tray Girişi',\r\n  LBL_NAME: 'İsim',\r\n  LBL_TYPE: 'Tür',\r\n  LBL_SIZE: 'Boyut',\r\n  LBL_FILE: 'Dosya',\r\n  LBL_NEW: 'Yeni',\r\n  LBL_OPEN: 'Aç',\r\n  LBL_OPEN_WITH: 'Şununla aç:',\r\n  LBL_SAVE: 'Kaydet',\r\n  LBL_SAVEAS: 'Farklı Kaydet',\r\n  LBL_OK: 'Tamam',\r\n  LBL_ABORT: 'Durdur',\r\n  LBL_CANCEL: 'İptal',\r\n  LBL_CLOSE: 'Kapat',\r\n  LBL_QUIT: 'Çık',\r\n  LBL_YES: 'Evet',\r\n  LBL_NO: 'Hayır',\r\n  LBL_GO: 'Git',\r\n  LBL_MKDIR: 'Yeni dizin oluştur',\r\n  LBL_MKFILE: 'Yeni dosya oluştur',\r\n  LBL_COPY: 'Kopyala',\r\n  LBL_PASTE: 'Yapıştır',\r\n  LBL_CUT: 'Kes',\r\n  LBL_MOVE: 'Taşı',\r\n  LBL_RENAME: 'Yeniden Adlandır',\r\n  LBL_DELETE: 'Sil',\r\n  LBL_DOWNLOAD: 'İndir',\r\n  LBL_REFRESH: 'Yenile',\r\n  LBL_RELOAD: 'Yeniden Yükle',\r\n  LBL_HOME: 'Ev',\r\n  LBL_VIEW: 'Göster',\r\n  LBL_HELP: 'Yardım',\r\n  LBL_ABOUT: 'Hakkında',\r\n  LBL_APPLICATION: 'Uygulama',\r\n  LBL_APPLICATIONS: 'Uygulamalar',\r\n  LBL_KILL: 'Öldür',\r\n  LBL_KILL_ALL: 'Hepsini öldür',\r\n  LBL_MINIMIZE: 'Küçült',\r\n  LBL_MAXIMIZE: 'Büyüt',\r\n  LBL_RESTORE: 'Onar',\r\n  LBL_RAISE: 'Yükselt',\r\n  LBL_SHADE: 'Ört',\r\n  LBL_UNSHADE: 'Örtme',\r\n  LBL_ONTOP: 'Tepe',\r\n  LBL_RESIZE: 'Yeniden boyutlandır',\r\n  LBL_BACK: 'Geri',\r\n  LBL_FORWARD: 'İleri',\r\n  LBL_UPLOAD: 'Yükle',\r\n  LBL_IMAGE: 'İmge',\r\n  LBL_CREATE_SHORTCUT: 'Kısayol oluştur',\r\n  LBL_REMOVE_SHORTCUT: 'Kısayolu sil',\r\n  LBL_EDIT: 'Düzenle'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Nguyễn Anh Khoa <khoaakt@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const vi_VN = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: 'Không thể gửi yêu cầu ở chế độ độc lập.',\r\n  ERR_REQUEST_NOT_OK: 'Đã xảy ra lỗi khi thực hiện yêu cầu: {0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: 'Không tìm thấy hệ thống tập tin \\'{0}\\'',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Không tìm thấy hệ thống tập tin cho \\'{0}\\'',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Hệ thống tập tin \\'{0}\\' không được gắn kết',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Hệ thống tập tin \\'{0}\\' đã được gắn kết',\r\n  ERR_VFS_PATH_FORMAT_INVALID: 'Định dạng đường dẫn \\'{0}\\' không khớp với \\'name:/path\\'',\r\n  ERR_PACKAGE_NOT_FOUND: 'Không tìm thấy siêu dữ liệu của gói \\'{0}\\'',\r\n  ERR_PACKAGE_LOAD: 'Tải gói \\'{0}\\' thất bại: {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: 'Không tìm thấy Runtime của gói \\'{0}\\'',\r\n  ERR_PACKAGE_NO_METADATA: 'Không tìm thấy siêu dữ liệu cho \\'{0}\\'. Bạn có chắc nó đã được báo cáo trong manifest không?',\r\n  ERR_PACKAGE_EXCEPTION: 'Đã xảy ra lỗi trong \\'{0}\\'',\r\n  ERR_WINDOW_ID_EXISTS: 'Cửa sổ với ID \\'{0}\\' đã tồn tại',\r\n  ERR_INVALID_LOCALE: 'Ngôn ngữ không hợp lệ \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: 'Mất kết nối',\r\n  LBL_CONNECTION_LOST_MESSAGE: 'Kết nối với OS.js đã bị mất. Đang kết nối lại....',\r\n  LBL_CONNECTION_RESTORED: 'Đã khôi phục kết nối',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Kết nối với máy chủ OS.js đã được khôi phục.',\r\n  LBL_CONNECTION_FAILED: 'Kết nối thất bại',\r\n  LBL_CONNECTION_FAILED_MESSAGE: 'Không thể kết nối đến máy chủ OS.js. Một số tính năng có thể không hoạt động ổn định.',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: 'Phát triển',\r\n  LBL_APP_CAT_SCIENCE: 'Khoa học',\r\n  LBL_APP_CAT_GAMES: 'Trò chơi',\r\n  LBL_APP_CAT_GRAPHICS: 'Đồ họa',\r\n  LBL_APP_CAT_NETWORK: 'Mạng',\r\n  LBL_APP_CAT_MULTIMEDIA: 'Đa phương tiện',\r\n  LBL_APP_CAT_OFFICE: 'Văn phòng',\r\n  LBL_APP_CAT_SYSTEM: 'Hệ thống',\r\n  LBL_APP_CAT_UTILITIES: 'Tiện ích',\r\n  LBL_APP_CAT_OTHER: 'Ứng dụng khác',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: 'Chọn ứng dụng',\r\n  LBL_LAUNCH_SELECT_MESSAGE: 'Chọn ứng dụng để mở tập tin \\'{0}\\'',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Thay đổi hình nền',\r\n  LBL_DESKTOP_SELECT_THEME: 'Thay đổi chủ đề',\r\n  LBL_SEARCH_TOOLTOP: 'Tìm kiếm dữ liệu ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: 'Tìm kiếm...',\r\n  LBL_SEARCH_WAIT: 'Đang tìm kiếm...',\r\n  LBL_SEARCH_RESULT: 'Đang hiển thị {0} kết quả',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KiB',\r\n  LBL_FS_MIB: 'MiB',\r\n  LBL_FS_GIB: 'GiB',\r\n\r\n  // Generic\r\n  LBL_TOP: 'Phía trên',\r\n  LBL_LEFT: 'Trái',\r\n  LBL_RIGHT: 'Phải',\r\n  LBL_BOTTOM: 'Phía dưới',\r\n  LBL_MENU: 'Menu',\r\n  LBL_ERROR: 'Lỗi',\r\n  LBL_INFO: 'Thông tin',\r\n  LBL_MESSAGE: 'Thông báo',\r\n  LBL_WARNINIG: 'Cảnh báo',\r\n  LBL_SUCCESS: 'Thành công',\r\n  LBL_FAILURE: 'Thất bại',\r\n  LBL_WINDOW: 'Cửa sổ',\r\n  LBL_WINDOWS: 'Các cửa sổ',\r\n  LBL_NOTIFICATION: 'Thông báo',\r\n  LBL_NOTIFICATIONS: 'Các thông báo',\r\n  LBL_TRAY: 'Mục khay hệ thống',\r\n  LBL_NAME: 'Tên',\r\n  LBL_TYPE: 'Kiểu',\r\n  LBL_SIZE: 'Kích thước',\r\n  LBL_FILE: 'Tập tin',\r\n  LBL_NEW: 'Mới',\r\n  LBL_OPEN: 'Mở',\r\n  LBL_SAVE: 'Lưu',\r\n  LBL_SAVEAS: 'Lưu như',\r\n  LBL_OK: 'OK',\r\n  LBL_ABORT: 'Hủy thao tác',\r\n  LBL_CANCEL: 'Hủy bỏ',\r\n  LBL_CLOSE: 'Đóng',\r\n  LBL_QUIT: 'Thoát',\r\n  LBL_YES: 'Có',\r\n  LBL_NO: 'Không',\r\n  LBL_GO: 'Đi',\r\n  LBL_MKDIR: 'Tạo thư mục mới',\r\n  LBL_MKFILE: 'Tạo tệp mới',\r\n  LBL_COPY: 'Sao chép',\r\n  LBL_PASTE: 'Dán',\r\n  LBL_CUT: 'Cắt',\r\n  LBL_MOVE: 'Di chuyển',\r\n  LBL_RENAME: 'Đổi tên',\r\n  LBL_DELETE: 'Xóa',\r\n  LBL_DOWNLOAD: 'Tải về',\r\n  LBL_REFRESH: 'Làm mới',\r\n  LBL_RELOAD: 'Tải lại',\r\n  LBL_HOME: 'Trang chủ',\r\n  LBL_VIEW: 'Xem',\r\n  LBL_HELP: 'Hướng dẫn',\r\n  LBL_ABOUT: 'Thông tin',\r\n  LBL_APPLICATION: 'Ứng dụng',\r\n  LBL_APPLICATIONS: 'Các ứng dụng',\r\n  LBL_KILL: 'Đóng',\r\n  LBL_KILL_ALL: 'Đóng tất cả',\r\n  LBL_MINIMIZE: 'Thu nhỏ',\r\n  LBL_MAXIMIZE: 'Tối đa',\r\n  LBL_RESTORE: 'Phục hồi',\r\n  LBL_RAISE: 'Nâng lên',\r\n  LBL_SHADE: 'Làm mở',\r\n  LBL_UNSHADE: 'Bỏ làm mờ',\r\n  LBL_ONTOP: 'Ở trên cùng',\r\n  LBL_RESIZE: 'Thay đổi kích thước',\r\n  LBL_BACK: 'Lùi',\r\n  LBL_FORWARD: 'Tiến',\r\n  LBL_UPLOAD: 'Tải lên',\r\n  LBL_IMAGE: 'Ảnh'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  lijun <lijun_ay@126.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const zh_CN = {\r\n  // Core\r\n  ERR_REQUEST_STANDALONE: '无法在独立模式下发出请求。',\r\n  ERR_REQUEST_NOT_OK: '执行请求时发生错误：{0}',\r\n  ERR_VFS_MOUNT_NOT_FOUND: '找不到文件系统 \\'{0}\\' ',\r\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: '找不到\\'{0}\\'的文件系统',\r\n  ERR_VFS_MOUNT_NOT_MOUNTED: '文件系统 \\'{0}\\' 未挂载',\r\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: '文件系统 \\'{0}\\' 已挂载',\r\n  ERR_VFS_PATH_FORMAT_INVALID: '给定路径\\'{0}\\'与\\'name:/path\\'不匹配',\r\n  ERR_PACKAGE_NOT_FOUND: '未找到包的元数据\\'{0}\\'',\r\n  ERR_PACKAGE_LOAD: '加载包 \\'{0}\\' 失败： {1}',\r\n  ERR_PACKAGE_NO_RUNTIME: '未找到运行包 \\'{0}\\' ',\r\n  ERR_PACKAGE_NO_METADATA: '找不到 \\'{0}\\' 的元数据。它在清单（manifest）中吗？',\r\n  ERR_PACKAGE_EXCEPTION: '\\'{0}\\'发生异常',\r\n  ERR_WINDOW_ID_EXISTS: 'ID为\\'{0}\\'的窗口已存在',\r\n  ERR_INVALID_LOCALE: '无效的区域设置 \\'{0}\\'',\r\n  LBL_CONNECTION_LOST: '连接丢失',\r\n  LBL_CONNECTION_LOST_MESSAGE: '与OS.js的连接丢失了。重新连接....',\r\n  LBL_CONNECTION_RESTORED: '连接已恢复',\r\n  LBL_CONNECTION_RESTORED_MESSAGE: '已恢复与OS.js服务器的连接。',\r\n  LBL_CONNECTION_FAILED: '连接失败',\r\n  LBL_CONNECTION_FAILED_MESSAGE: '无法建立与OS.js的连接。 某些功能可能无法正常工作。',\r\n\r\n  // Application categories\r\n  LBL_APP_CAT_DEVELOPMENT: '开发',\r\n  LBL_APP_CAT_SCIENCE: '科学',\r\n  LBL_APP_CAT_GAMES: '游戏',\r\n  LBL_APP_CAT_GRAPHICS: '图像',\r\n  LBL_APP_CAT_NETWORK: '网络',\r\n  LBL_APP_CAT_MULTIMEDIA: '媒体',\r\n  LBL_APP_CAT_OFFICE: '办公',\r\n  LBL_APP_CAT_SYSTEM: '系统',\r\n  LBL_APP_CAT_UTILITIES: '工具',\r\n  LBL_APP_CAT_OTHER: '其他',\r\n\r\n  // UI\r\n  LBL_LAUNCH_SELECT: '选择应用程序',\r\n  LBL_LAUNCH_SELECT_MESSAGE: '选择\\'{0}\\'的应用程序',\r\n  LBL_DESKTOP_SELECT_WALLPAPER: '选择壁纸',\r\n  LBL_DESKTOP_SELECT_THEME: '选择主题',\r\n  LBL_SEARCH_TOOLTOP: '搜索文件系统 ({0})',\r\n  LBL_SEARCH_PLACEHOLDER: '搜索文件系统...',\r\n  LBL_SEARCH_WAIT: '搜索...',\r\n  LBL_SEARCH_RESULT: '显示{0}个结果',\r\n\r\n  // FS\r\n  LBL_FS_B: 'B',\r\n  LBL_FS_M: 'M',\r\n  LBL_FS_G: 'G',\r\n  LBL_FS_KIB: 'KB',\r\n  LBL_FS_MIB: 'MB',\r\n  LBL_FS_GIB: 'GB',\r\n\r\n  // Generic\r\n  LBL_TOP: '上',\r\n  LBL_LEFT: '左',\r\n  LBL_RIGHT: '右',\r\n  LBL_BOTTOM: '下',\r\n  LBL_MENU: '菜单',\r\n  LBL_ERROR: '错误',\r\n  LBL_INFO: '信息',\r\n  LBL_MESSAGE: '消息',\r\n  LBL_WARNINIG: '警告',\r\n  LBL_SUCCESS: '成功',\r\n  LBL_FAILURE: '失败',\r\n  LBL_WINDOW: '窗口',\r\n  LBL_WINDOWS: '窗口',\r\n  LBL_NOTIFICATION: '通知',\r\n  LBL_NOTIFICATIONS: '通知',\r\n  LBL_TRAY: '托盘',\r\n  LBL_NAME: '名称',\r\n  LBL_TYPE: '类型',\r\n  LBL_SIZE: '大小',\r\n  LBL_FILE: '文件',\r\n  LBL_NEW: '新建',\r\n  LBL_OPEN: '打开',\r\n  LBL_SAVE: '保存',\r\n  LBL_SAVEAS: '另存为',\r\n  LBL_OK: '确定',\r\n  LBL_ABORT: '中止',\r\n  LBL_CANCEL: '取消',\r\n  LBL_CLOSE: '关闭',\r\n  LBL_QUIT: '退出',\r\n  LBL_YES: '是',\r\n  LBL_NO: '否',\r\n  LBL_GO: '进行',\r\n  LBL_MKDIR: '创建新目录',\r\n  LBL_MKFILE: '创建新文件',\r\n  LBL_COPY: '复制',\r\n  LBL_PASTE: '粘贴',\r\n  LBL_CUT: '剪切',\r\n  LBL_MOVE: '移动',\r\n  LBL_RENAME: '重命名',\r\n  LBL_DELETE: '删除',\r\n  LBL_DOWNLOAD: '下载',\r\n  LBL_REFRESH: '刷新',\r\n  LBL_RELOAD: '刷新',\r\n  LBL_HOME: '主页',\r\n  LBL_VIEW: '视图',\r\n  LBL_HELP: '帮助',\r\n  LBL_ABOUT: '关于',\r\n  LBL_APPLICATION: '应用程序',\r\n  LBL_APPLICATIONS: '应用程序',\r\n  LBL_KILL: '杀死',\r\n  LBL_KILL_ALL: '全部杀死',\r\n  LBL_MINIMIZE: '最小化',\r\n  LBL_MAXIMIZE: '最大化',\r\n  LBL_RESTORE: '恢复',\r\n  LBL_RAISE: '上浮',\r\n  LBL_SHADE: '置后',\r\n  LBL_UNSHADE: '置前',\r\n  LBL_ONTOP: '顶端',\r\n  LBL_RESIZE: '调整',\r\n  LBL_BACK: '后退',\r\n  LBL_FORWARD: '前进',\r\n  LBL_UPLOAD: '上传',\r\n  LBL_IMAGE: '图像'\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nconst methods = ['debug', 'log', 'info', 'warn', 'error'];\r\nlet middleware = [];\r\n\r\nconst reduce = (name, input) => middleware\r\n  .reduce((current, m) => m(name, ...current), input);\r\n\r\nconst bind = (fn, thisArg) =>\r\n  typeof thisArg[fn].bind === 'function'\r\n    ? thisArg[fn].bind(thisArg)\r\n    : Function.prototype.bind.apply(thisArg[fn], thisArg);\r\n\r\nconst bindMethod = fn => {\r\n  const log = bind(fn, console);\r\n  if (middleware.length > 0) {\r\n    return (...args) => log(...reduce(fn, args));\r\n  }\r\n\r\n  return log;\r\n};\r\n\r\nconst assignMethods = (thisArg) => methods\r\n  .forEach(m => thisArg[m] = bindMethod(m));\r\n\r\nconst instance = {\r\n  addMiddleware: m => {\r\n    middleware.push(m);\r\n    assignMethods(instance);\r\n  },\r\n  clearMiddleware: () => {\r\n    middleware = [];\r\n    assignMethods(instance);\r\n  }\r\n};\r\n\r\nassignMethods(instance);\r\n\r\nexport default instance;\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\nimport createUI from './adapters/ui/login';\r\n\r\n/**\r\n * Login Options\r\n *\r\n * @typedef {Object} LoginOptions\r\n * @property {string} [title] Title\r\n * @property {object[]} [fields] Fields\r\n */\r\n\r\n/**\r\n * OS.js Login UI\r\n */\r\nexport default class Login extends EventEmitter {\r\n\r\n  /**\r\n   * Create authentication handler\r\n   *\r\n   * @param {Core} core Core reference\r\n   * @param {LoginOptions} [options] Options\r\n   */\r\n  constructor(core, options) {\r\n    super('Login');\r\n\r\n    /**\r\n     * Login root DOM element\r\n     * @type {Element}\r\n     */\r\n    this.$container = null;\r\n\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * Login options\r\n     * TODO: typedef\r\n     * @type {Object}\r\n     * @readonly\r\n     */\r\n    this.options = {\r\n      id: 'osjs-login',\r\n      title: 'Welcome to OS.js',\r\n      stamp: core.config('version'),\r\n      logo: {\r\n        position: 'top',\r\n        src: null\r\n      },\r\n      fields: [{\r\n        tagName: 'input',\r\n        attributes: {\r\n          name: 'username',\r\n          type: 'text',\r\n          placeholder: 'Username'\r\n        }\r\n      }, {\r\n        tagName: 'input',\r\n        attributes: {\r\n          name: 'password',\r\n          type: 'password',\r\n          placeholder: 'Password'\r\n        }\r\n      }, {\r\n        tagName: 'input',\r\n        attributes: {\r\n          type: 'submit',\r\n          value: 'Login'\r\n        }\r\n      }],\r\n      ...options\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Initializes the UI\r\n   */\r\n  init(startHidden) {\r\n    this.$container = document.createElement('div');\r\n    this.$container.id = this.options.id;\r\n    this.$container.className = 'osjs-login-base';\r\n    this.core.$root.classList.add('login');\r\n    this.core.$root.appendChild(this.$container);\r\n\r\n    this.render(startHidden);\r\n  }\r\n\r\n  /**\r\n   * Destroys the UI\r\n   */\r\n  destroy() {\r\n    this.core.$root.classList.remove('login');\r\n\r\n    if (this.$container) {\r\n      this.$container.remove();\r\n      this.$container = null;\r\n    }\r\n\r\n    super.destroy();\r\n  }\r\n\r\n  /**\r\n   * Renders the UI\r\n   */\r\n  render(startHidden) {\r\n    const login = this.core.config('auth.login', {});\r\n    const ui = createUI(this.options, login, startHidden, this.$container);\r\n\r\n    ui.on('register:post', values => this.emit('register:post', values));\r\n    ui.on('login:post', values => this.emit('login:post', values));\r\n    this.on('login:start', () => ui.emit('login:start'));\r\n    this.on('login:stop', () => ui.emit('login:stop'));\r\n    this.on('login:error', (msg, err) => ui.emit('login:error', msg, err));\r\n  }\r\n\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * Middleware Data\r\n *\r\n * @typedef {Object} MiddlewareData\r\n * @property {string} [group] Middleware group\r\n */\r\n\r\n/**\r\n * Middleware Manager\r\n */\r\nexport default class Middleware {\r\n\r\n  /**\r\n   * Create new middleware\r\n   */\r\n  constructor() {\r\n    /**\r\n     * @type {MiddlewareData}\r\n     */\r\n    this.middleware = {};\r\n  }\r\n\r\n  /**\r\n   * Destroy middleware\r\n   */\r\n  destroy() {\r\n    this.clear();\r\n  }\r\n\r\n  /**\r\n   * Clear middleware\r\n   */\r\n  clear() {\r\n    this.middleware = {};\r\n  }\r\n\r\n  /**\r\n   * Add middleware function to a group\r\n   * @param {string} group Middleware group\r\n   * @param {Function} callback Middleware function to add\r\n   */\r\n  add(group, callback) {\r\n    if (!this.middleware[group]) {\r\n      this.middleware[group] = [];\r\n    }\r\n\r\n    this.middleware[group].push(callback);\r\n  }\r\n\r\n  /**\r\n   * Remove middleware function from a group\r\n   * @param {string} group Middleware group\r\n   * @param {Function} callback Middleware function to remove\r\n   */\r\n  remove(group, callback) {\r\n    if (this.middleware[group]) {\r\n      this.middleware[group] =\r\n        this.middleware[group].filter(cb => cb !== callback);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets middleware functions for a group\r\n   * @param {string} group Middleware group\r\n   * @return {Function[]}\r\n   */\r\n  get(group) {\r\n    return this.middleware[group] || [];\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {h, app} from 'hyperapp';\r\nimport {createNativeNotification} from './utils/dom';\r\nimport logger from './logger';\r\n\r\n/**\r\n * Notification Options\r\n *\r\n * @typedef {Object} NotificationOptions\r\n * @property {string} title Title\r\n * @property {string} message Message\r\n * @property {string} [sound=message] Sound to play\r\n * @property {string} [icon] Icon source\r\n * @property {number} [timeout=5000] Timeout value (0=infinite)\r\n * @property {string} [className] Adds a DOM class name to notification\r\n */\r\n\r\n/**\r\n * Notification Implementation\r\n */\r\nexport default class Notification {\r\n\r\n  /**\r\n   * Create notification\r\n   *\r\n   * @param {Core} core Core reference\r\n   * @param {Element} root Root DOM element\r\n   * @param {NotificationOptions} options Options\r\n   */\r\n  constructor(core, root, options = {}) {\r\n    const defaultLabel = core.make('osjs/locale')\r\n      .translate('LBL_NOTIFICATION');\r\n\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * Root node reference\r\n     * @type {Element}\r\n     * @readonly\r\n     */\r\n    this.$root = root;\r\n\r\n    /**\r\n     * Notification DOM node\r\n     * @type {Element}\r\n     * @readonly\r\n     */\r\n    this.$element = document.createElement('div');\r\n\r\n    /**\r\n     * The notification destruction state\r\n     * @type {Boolean}\r\n     * @readonly\r\n     */\r\n    this.destroyed = false;\r\n\r\n    /**\r\n     * Options\r\n     * @type {NotificationOptions}\r\n     * @readonly\r\n     */\r\n    this.options = {\r\n      icon: null,\r\n      title: defaultLabel,\r\n      message: defaultLabel,\r\n      timeout: 5000,\r\n      native: core.config('notifications.native', false),\r\n      sound: 'message',\r\n      className: '',\r\n      ...options\r\n    };\r\n\r\n    this.core.emit('osjs/notification:create', this);\r\n  }\r\n\r\n  /**\r\n   * Destroy notification\r\n   */\r\n  destroy() {\r\n    if (this.destroyed) {\r\n      return;\r\n    }\r\n\r\n    this.destroyed = true;\r\n    this.core.emit('osjs/notification:destroy', this);\r\n\r\n    this.$element.remove();\r\n    this.$element = null;\r\n    this.$root = null;\r\n  }\r\n\r\n  /**\r\n   * Render notification\r\n   * @return {Promise<boolean>}\r\n   */\r\n  render() {\r\n    const onclick = () => this.destroy();\r\n\r\n    const renderCustom = () => {\r\n      const view = state => h('div', {\r\n        class: 'osjs-notification-wrapper',\r\n        'data-has-icon': !!state.icon,\r\n        style: {\r\n          backgroundImage: state.icon ? `url(${state.icon})` : undefined\r\n        }\r\n      }, [\r\n        h('div', {class: 'osjs-notification-title'}, state.title),\r\n        h('div', {class: 'osjs-notification-message'}, state.message),\r\n      ]);\r\n\r\n      this.$element.classList.add('osjs-notification');\r\n      if (this.options.className) {\r\n        this.$element.classList.add(this.options.className);\r\n      }\r\n\r\n      if (this.options.timeout) {\r\n        setTimeout(() => this.destroy(), this.options.timeout);\r\n      }\r\n\r\n      this.$element.addEventListener('click', onclick);\r\n\r\n      this.$root.appendChild(this.$element);\r\n\r\n      app(this.options, {}, view, this.$element);\r\n\r\n      return Promise.resolve(true);\r\n    };\r\n\r\n    if (this.options.native) {\r\n      return createNativeNotification(this.options, onclick)\r\n        .catch(err => {\r\n          logger.warn('Error on native notification', err);\r\n          return renderCustom();\r\n        });\r\n    }\r\n\r\n    if (this.options.sound) {\r\n      this.core.make('osjs/sounds')\r\n        .play(this.options.sound);\r\n    }\r\n\r\n    return renderCustom();\r\n  }\r\n\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport Notification from './notification';\r\nimport {createCssText} from './utils/dom';\r\n\r\n/**\r\n * Notification Factory\r\n */\r\nexport default class Notifications {\r\n\r\n  /**\r\n   * @param {Core} core OS.js Core instance reference\r\n   */\r\n  constructor(core) {\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * @type {Element}\r\n     */\r\n    this.$element = null;\r\n  }\r\n\r\n  /**\r\n   * Destroy notification handler\r\n   */\r\n  destroy() {\r\n    this.$element.remove();\r\n    this.$element = null;\r\n  }\r\n\r\n  /**\r\n   * Initialize notification handler\r\n   */\r\n  init() {\r\n    this.$element = document.createElement('div');\r\n    this.$element.classList.add('osjs-notifications');\r\n    this.core.$root.appendChild(this.$element);\r\n\r\n    this.core.on('osjs/desktop:applySettings', () => {\r\n      this.setElementStyles();\r\n    });\r\n\r\n    this.setElementStyles();\r\n  }\r\n\r\n  /**\r\n   * Create a new notification\r\n   * @param {NotificationOptions} options See notification class for options\r\n   * @return {Notification}\r\n   */\r\n  create(options) {\r\n    if (!options) {\r\n      throw new Error('Notification options not given');\r\n    }\r\n\r\n    const notification = new Notification(this.core, this.$element, options);\r\n    notification.render();\r\n    return notification;\r\n  }\r\n\r\n  /**\r\n   * Sets the element styles\r\n   */\r\n  setElementStyles() {\r\n    const styles = createCssText(this.createElementStyles());\r\n    this.$element.style.cssText = styles;\r\n  }\r\n\r\n  /**\r\n   * Creates a new CSS style object\r\n   * @return {{property: string}}\r\n   */\r\n  createElementStyles() {\r\n    const defaultPosition = this.core\r\n      .config('desktop.settings.notifications.position', 'top-right');\r\n\r\n    const position = this.core.make('osjs/settings')\r\n      .get('osjs/desktop', 'notifications.position', defaultPosition);\r\n\r\n    if (position.split('-').length !== 2) {\r\n      return {};\r\n    }\r\n\r\n    return ['left', 'right', 'top', 'bottom']\r\n      .reduce((carry, key) => ({\r\n        [key]: position.indexOf(key) === -1 ? 'auto' : '0',\r\n        ...carry\r\n      }), {});\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport Application from './application';\r\nimport Preloader from './utils/preloader';\r\nimport logger from './logger';\r\nimport {\r\n  createPackageAvailabilityCheck,\r\n  createManifestFromArray,\r\n  filterMetadataFilesByType,\r\n  metadataFilesToFilenames\r\n} from './utils/packages';\r\n\r\n/**\r\n * A registered package reference\r\n *\r\n * @typedef {Object} PackageReference\r\n * @property {PackageMetadata} metadata Package metadata\r\n * @property {Function} callback Callback to instanciate\r\n */\r\n\r\n/**\r\n * A package metadata\r\n *\r\n * @typedef {Object} PackageMetadata\r\n * @property {string} name The package name\r\n * @property {string} [category] Package category\r\n * @property {string} [icon] Package icon\r\n * @property {boolean} [singleton] If only one instance allowed\r\n * @property {boolean} [autostart] Autostart on boot\r\n * @property {boolean} [hidden] Hide from launch menus etc.\r\n * @property {string} [server] Server script filename\r\n * @property {string[]} [groups] Only available for users in this group\r\n * @property {Object[]|string[]} [files] Files to preload\r\n * @property {{key: string}} title A map of locales and titles\r\n * @property {{key: string}} description A map of locales and titles\r\n */\r\n\r\n/**\r\n * Package Launch Options\r\n *\r\n * @typedef {Object} PackageLaunchOptions\r\n * @property {boolean} [forcePreload=false] Force preload reloading\r\n */\r\n\r\n/**\r\n * Package Manager\r\n *\r\n * Handles indexing, loading and launching of OS.js packages\r\n */\r\nexport default class Packages {\r\n\r\n  /**\r\n   * Create package manage\r\n   *\r\n   * @param {Core} core Core reference\r\n   */\r\n  constructor(core) {\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * A list of registered packages\r\n     * @type {PackageReference[]}\r\n     */\r\n    this.packages = [];\r\n\r\n    /**\r\n     * The lost of loaded package metadata\r\n     * @type {PackageMetadata[]}\r\n     */\r\n    this.metadata = [];\r\n\r\n    /**\r\n     * A list of running application names\r\n     *\r\n     * Mainly used for singleton awareness\r\n     *\r\n     * @private\r\n     * @type {string[]}\r\n     */\r\n    this._running = [];\r\n\r\n    /**\r\n     * Preloader\r\n     * @type {Preloader}\r\n     * @readonly\r\n     */\r\n    this.preloader = new Preloader(core.$resourceRoot);\r\n\r\n    /**\r\n     * If inited\r\n     * @type {boolean}\r\n     */\r\n    this.inited = false;\r\n  }\r\n\r\n  /**\r\n   * Destroy package manager\r\n   */\r\n  destroy() {\r\n    this.packages = [];\r\n    this.metadata = [];\r\n\r\n    this.preloader.destroy();\r\n  }\r\n\r\n  /**\r\n   * Initializes package manager\r\n   * @return {Promise<boolean>}\r\n   */\r\n  init() {\r\n    logger.debug('Packages::init()');\r\n\r\n    if (!this.inited) {\r\n      this.core.on('osjs/core:started', () => this._autostart());\r\n    }\r\n\r\n    this.metadata = this.core.config('packages.metadata', [])\r\n      .map(iter => ({type: 'application', ...iter}));\r\n\r\n    this.inited = true;\r\n\r\n    const manifest = this.core.config('packages.manifest');\r\n\r\n    return manifest\r\n      ? this.core.request(manifest, {}, 'json', true)\r\n        .then(metadata => this.addPackages(metadata))\r\n        .then(metadata => this._preloadBackgroundFiles(metadata))\r\n        .then(() => true)\r\n        .catch(error => logger.error(error))\r\n      : Promise.resolve(true);\r\n  }\r\n\r\n  /**\r\n   * Launches a (application) package\r\n   *\r\n   * @param {string} name Package name\r\n   * @param {{foo: *}} [args={}] Launch arguments\r\n   * @param {PackageLaunchOptions} [options={}] Launch options\r\n   * @see PackageServiceProvider\r\n   * @throws {Error}\r\n   * @return {Promise<Application>}\r\n   */\r\n  launch(name, args = {}, options = {}) {\r\n    logger.debug('Packages::launch()', name, args, options);\r\n\r\n    const _ = this.core.make('osjs/locale').translate;\r\n    const metadata = this.metadata.find(pkg => pkg.name === name);\r\n    if (!metadata) {\r\n      throw new Error(_('ERR_PACKAGE_NOT_FOUND', name));\r\n    }\r\n\r\n    if (['theme', 'icons', 'sounds'].indexOf(metadata.type) !== -1) {\r\n      return this._launchTheme(name, metadata);\r\n    }\r\n\r\n    return this._launchApplication(name, metadata, args, options);\r\n  }\r\n\r\n  /**\r\n   * Launches an application package\r\n   *\r\n   * @private\r\n   * @param {string} name Application package name\r\n   * @param {Metadata} metadata Application metadata\r\n   * @param {{foo: *}} args Launch arguments\r\n   * @param {PackageLaunchOptions} options Launch options\r\n   * @return {Promise<Application>}\r\n   */\r\n  _launchApplication(name, metadata, args, options) {\r\n    let signaled = false;\r\n\r\n    if (metadata.singleton) {\r\n      const foundApp = Application.getApplications()\r\n        .find(app => app.metadata.name === metadata.name);\r\n\r\n      if (foundApp) {\r\n        foundApp.emit('attention', args, options);\r\n        signaled = true;\r\n\r\n        return Promise.resolve(foundApp);\r\n      }\r\n\r\n      const found = this._running.filter(n => n === name);\r\n\r\n      if (found.length > 0) {\r\n        return new Promise((resolve, reject) => {\r\n          this.core.once(`osjs/application:${name}:launched`, a => {\r\n            if (signaled) {\r\n              resolve(a);\r\n            } else {\r\n              a.emit('attention', args, options);\r\n              resolve(a);\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }\r\n\r\n    this.core.emit('osjs/application:launch', name, args, options);\r\n\r\n    this._running.push(name);\r\n\r\n    return this._launch(name, metadata, args, options);\r\n  }\r\n\r\n  /**\r\n   * Launches a (theme) package\r\n   *\r\n   * @private\r\n   * @param {string} name Package name\r\n   * @param {Metadata} metadata Application metadata\r\n   * @throws {Error}\r\n   * @return {Promise<object>}\r\n   */\r\n  _launchTheme(name, metadata) {\r\n    const preloads = this._getPreloads(metadata, 'preload', 'theme');\r\n\r\n    return this.preloader.load(preloads)\r\n      .then(result => {\r\n        return {\r\n          elements: {},\r\n          ...result,\r\n          ...this.packages.find(pkg => pkg.metadata.name === name) || {}\r\n        };\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Returns preloads\r\n   *\r\n   * @private\r\n   * @param {Metadata} metadata Application metadata\r\n   * @param {string} fileType Files type\r\n   * @param {string} packageType Package type\r\n   * @return {string[]}\r\n   */\r\n  _getPreloads(metadata, fileType, packageType) {\r\n    return metadataFilesToFilenames(\r\n      filterMetadataFilesByType(metadata.files, fileType)\r\n    ).map(f => this.core.url(f, {}, {type: packageType, ...metadata}));\r\n  }\r\n\r\n  /**\r\n   * Wrapper for launching a (application) package\r\n   *\r\n   * @private\r\n   * @param {string} name Package name\r\n   * @param {{foo: *}} args Launch arguments\r\n   * @param {PackageLaunchOptions} options Launch options\r\n   * @return {Promise<Application>}\r\n   */\r\n  _launch(name, metadata, args, options) {\r\n    const _ = this.core.make('osjs/locale').translate;\r\n    const canLaunch = createPackageAvailabilityCheck(this.core);\r\n\r\n    const dialog = e => {\r\n      if (this.core.has('osjs/dialog')) {\r\n        this.core.make('osjs/dialog', 'alert', {\r\n          type: 'error',\r\n          title: _('ERR_PACKAGE_EXCEPTION', name),\r\n          message: _('ERR_PACKAGE_EXCEPTION', name),\r\n          error: e\r\n        }, () => { /* noop */});\r\n      } else {\r\n        alert(`${_('ERR_PACKAGE_EXCEPTION', name)}: ${e.stack || e}`);\r\n      }\r\n    };\r\n\r\n    const fail = err => {\r\n      this.core.emit('osjs/application:launched', name, false);\r\n      this.core.emit(`osjs/application:${name}:launched`, false);\r\n\r\n      dialog(err);\r\n\r\n      throw new Error(err);\r\n    };\r\n\r\n    const preloads = this._getPreloads(metadata, 'preload', 'apps');\r\n\r\n    const create = found => {\r\n      let app;\r\n\r\n      try {\r\n        console.group('Packages::_launch()');\r\n        app = found.callback(this.core, args, options, found.metadata);\r\n\r\n        if (app instanceof Application) {\r\n          app.on('destroy', () => {\r\n            const foundIndex = this._running.findIndex(n => n === name);\r\n            if (foundIndex !== -1) {\r\n              this._running.splice(foundIndex, 1);\r\n            }\r\n          });\r\n        } else {\r\n          logger.warn('The application', name, 'did not return an Application instance from registration');\r\n        }\r\n      } catch (e) {\r\n        dialog(e);\r\n\r\n        logger.warn('Exception when launching', name, e);\r\n      } finally {\r\n        this.core.emit('osjs/application:launched', name, app);\r\n        this.core.emit(`osjs/application:${name}:launched`, app);\r\n        console.groupEnd();\r\n      }\r\n\r\n      return app;\r\n    };\r\n\r\n    if (!canLaunch(metadata)) {\r\n      fail(_('ERR_PACKAGE_PERMISSION_DENIED', name));\r\n    }\r\n\r\n    return this.preloader.load(preloads, options.forcePreload === true)\r\n      .then(({errors}) => {\r\n        if (errors.length) {\r\n          fail(_('ERR_PACKAGE_LOAD', name, errors.join(', ')));\r\n        }\r\n\r\n        const found = this.packages.find(pkg => pkg.metadata.name === name);\r\n        if (!found) {\r\n          fail(_('ERR_PACKAGE_NO_RUNTIME', name));\r\n        }\r\n\r\n        return create(found);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Autostarts tagged packages\r\n   * @private\r\n   */\r\n  _autostart() {\r\n    const meta = this.metadata\r\n      .filter(pkg => pkg.autostart === true);\r\n\r\n    const configured = this.core\r\n      .config('application.autostart', [])\r\n      .map(value => typeof value === 'string' ? {name: value} : value);\r\n\r\n    [...meta, ...configured].forEach(({name, args}) => this.launch(name, args || {}));\r\n  }\r\n\r\n  /**\r\n   * Registers a package\r\n   *\r\n   * @param {string} name Package name\r\n   * @param {Function} callback Callback function to construct application instance\r\n   * @throws {Error}\r\n   */\r\n  register(name, callback) {\r\n    logger.debug('Packages::register()', name);\r\n\r\n    const _ = this.core.make('osjs/locale').translate;\r\n    const metadata = this.metadata.find(pkg => pkg.name === name);\r\n    if (!metadata) {\r\n      throw new Error(_('ERR_PACKAGE_NO_METADATA', name));\r\n    }\r\n\r\n    const foundIndex = this.packages.findIndex(pkg => pkg.metadata.name === name);\r\n    if (foundIndex !== -1) {\r\n      this.packages.splice(foundIndex, 1);\r\n    }\r\n\r\n    this.packages.push({\r\n      metadata,\r\n      callback\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Adds a set of packages\r\n   * @param {PackageMetadata[]} list Package list\r\n   * @return {PackageMetadata[]} Current list of packages\r\n   */\r\n  addPackages(list) {\r\n    if (list instanceof Array) {\r\n      const override = this.core.config('packages.overrideMetadata', {});\r\n      const append = createManifestFromArray(list)\r\n        .map(meta => override[meta.name] ? {...meta, ...override[meta.name]} : meta);\r\n\r\n      this.metadata = [...this.metadata, ...append];\r\n    }\r\n\r\n    return this.getPackages();\r\n  }\r\n\r\n  /**\r\n   * Gets a list of packages (metadata)\r\n   * @param {Function} [filter] A filter function\r\n   * @return {PackageMetadata[]}\r\n   */\r\n  getPackages(filter) {\r\n    filter = filter || (() => true);\r\n\r\n    const metadata = this.metadata.map(m => ({...m}));\r\n    const hidden = this.core.config('packages.hidden', []);\r\n    const filterAvailable = createPackageAvailabilityCheck(this.core);\r\n\r\n    const filterConfigHidden = iter => hidden instanceof Array\r\n      ? hidden.indexOf(iter.name) === -1\r\n      : true;\r\n\r\n    return metadata\r\n      .filter(filterAvailable)\r\n      .filter(filterConfigHidden)\r\n      .filter(filter);\r\n  }\r\n\r\n  /**\r\n   * Gets a list of packages compatible with the given mime type\r\n   * @param {string} mimeType MIME Type\r\n   * @see PackageManager#getPackages\r\n   * @return {PackageMetadata[]}\r\n   */\r\n  getCompatiblePackages(mimeType) {\r\n    return this.getPackages(meta => {\r\n      if (meta.mimes && !meta.hidden) {\r\n        return !!meta.mimes.find(mime => {\r\n          try {\r\n            const re = new RegExp(mime);\r\n            return re.test(mimeType);\r\n          } catch (e) {\r\n            logger.warn('Compability check failed', e);\r\n          }\r\n\r\n          return mime === mimeType;\r\n        });\r\n      }\r\n\r\n      return false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Preloads background files of a set of packages\r\n   * @param {PackageMetadata[]} list Package list\r\n   */\r\n  _preloadBackgroundFiles(list) {\r\n    const backgroundFiles = list.reduce((filenames, iter) => [\r\n      ...filenames,\r\n      ...this._getPreloads(iter, 'background', 'apps')\r\n    ], []);\r\n\r\n    return this.preloader.load(backgroundFiles)\r\n      .then(({errors = []}) => {\r\n        errors.forEach(error => logger.error(error));\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Gets a list of running packages\r\n   * @return {string[]}\r\n   */\r\n  running() {\r\n    return this._running;\r\n  }\r\n\r\n  /**\r\n   * Gets the package metadata for a given package name\r\n   * @param {string} name\r\n   * @returns {PackageMetadata}\r\n   */\r\n  getMetadataFromName(name) {\r\n    const found = this.metadata.find(pkg => pkg.name === name);\r\n    return found ? {...found} : null;\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {ServiceProvider} from '@osjs/common';\r\nimport Auth from '../auth';\r\n\r\n/**\r\n * Auth Service Contract\r\n * TODO: typedef\r\n * @typedef {Object} AuthProviderContract\r\n * @property {Function} show\r\n * @property {Function} login\r\n * @property {Function} logout\r\n * @property {Function} user\r\n */\r\n\r\n/**\r\n * Auth Service Options\r\n * @typedef {Object} AuthServiceOptions\r\n */\r\n\r\n/**\r\n * OS.js Auth Service Provider\r\n *\r\n * Creates the login prompt and handles authentication flow\r\n */\r\nexport default class AuthServiceProvider extends ServiceProvider {\r\n\r\n  /**\r\n   * @param {Core} core OS.js Core\r\n   * @param {AuthServiceOptions} [options={}]\r\n   */\r\n  constructor(core, options = {}) {\r\n    super(core);\r\n\r\n    /**\r\n     * @type {Auth}\r\n     * @readonly\r\n     */\r\n    this.auth = new Auth(core, options);\r\n  }\r\n\r\n  /**\r\n   * Initializes authentication\r\n   * @return {Promise<undefined>}\r\n   */\r\n  init() {\r\n    this.core.singleton('osjs/auth', () => this.createAuthContract());\r\n\r\n    return this.auth.init();\r\n  }\r\n\r\n  /**\r\n   * Destroys authentication\r\n   */\r\n  destroy() {\r\n    this.auth.destroy();\r\n\r\n    return super.destroy();\r\n  }\r\n\r\n  /**\r\n   * Get a list of services this provider registers\r\n   * @return {string[]}\r\n   */\r\n  provides() {\r\n    return [\r\n      'osjs/auth'\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * @return {AuthProviderContract}\r\n   */\r\n  createAuthContract() {\r\n    return {\r\n      show: (cb) => this.auth.show(cb),\r\n      login: (values) => this.auth.login(values),\r\n      logout: (reload) => this.auth.logout(reload),\r\n      user: () => this.core.getUser()\r\n    };\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport Application from '../application';\r\nimport Window from '../window';\r\nimport WindowBehavior from '../window-behavior';\r\nimport Session from '../session';\r\nimport Packages from '../packages';\r\nimport Tray from '../tray';\r\nimport Websocket from '../websocket';\r\nimport Clipboard from '../clipboard';\r\nimport Middleware from '../middleware';\r\nimport * as translations from '../locale';\r\nimport {format, translatable, translatableFlat, getLocale} from '../utils/locale';\r\nimport {style, script, playSound} from '../utils/dom';\r\nimport {resourceResolver} from '../utils/desktop';\r\nimport * as dnd from '../utils/dnd';\r\nimport {BasicApplication} from '../basic-application.js';\r\nimport {ServiceProvider} from '@osjs/common';\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\nimport logger from '../logger';\r\nimport merge from 'deepmerge';\r\n\r\n/**\r\n * Core Provider Locale Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderLocaleContract\r\n * @property {Function} format\r\n * @property {Function} translate\r\n * @property {Function} translatable\r\n * @property {Function} translatableFlat\r\n * @property {Function} getLocale\r\n * @property {Function} setLocale\r\n */\r\n\r\n/**\r\n * Core Provider Window Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderWindowContract\r\n * @property {Function} create\r\n * @property {Function} list\r\n * @property {Function} last\r\n */\r\n\r\n/**\r\n * Core Provider DnD Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderDnDContract\r\n * @property {Function} draggable\r\n * @property {Function} droppable\r\n */\r\n\r\n/**\r\n * Core Provider Theme Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderDOMContract\r\n * @property {Function} script\r\n * @property {Function} style\r\n */\r\n\r\n/**\r\n * Core Provider Theme Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderThemeContract\r\n * @property {Function} resource\r\n * @property {Function} icon\r\n */\r\n\r\n/**\r\n * Core Provider Sound Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderSoundContract\r\n * @property {Function} resource\r\n * @property {Function} play\r\n */\r\n\r\n/**\r\n * Core Provider Session Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderSessionContract\r\n * @property {Function} save\r\n * @property {Function} load\r\n */\r\n\r\n/**\r\n * Core Provider Packages Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderPackagesContract\r\n * @property {Function} [launch]\r\n * @property {Function} [register]\r\n * @property {Function} [addPackages]\r\n * @property {Function} [getPackages]\r\n * @property {Function} [getCompatiblePackages]\r\n * @property {Function} [running]\r\n */\r\n\r\n/**\r\n * Core Provider Clipboard Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderClipboardContract\r\n * @property {Function} [clear]\r\n * @property {Function} [set]\r\n * @property {Function} [has]\r\n * @property {Function} [get]\r\n */\r\n\r\n/**\r\n * Core Provider Middleware Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderMiddlewareContract\r\n * @property {Function} [add]\r\n * @property {Function} [get]\r\n */\r\n\r\n/**\r\n * Core Provider Tray Contract\r\n * TODO: typedef\r\n * @typedef {Object} CoreProviderTrayContract\r\n * @property {Function} [create]\r\n * @property {Function} [remove]\r\n * @property {Function} [list]\r\n * @property {Function} [has]\r\n */\r\n\r\n/**\r\n * Core Provider Options\r\n * @typedef {Object} CoreProviderOptions\r\n * @property {Function} [windowBehavior] Custom Window Behavior\r\n * @property {Object} [locales] Override locales\r\n */\r\n\r\n/**\r\n * OS.js Core Service Provider\r\n */\r\nexport default class CoreServiceProvider extends ServiceProvider {\r\n\r\n  /**\r\n   * @param {Core} core OS.js Core\r\n   * @param {CoreProviderOptions} [options={}] Arguments\r\n   */\r\n  constructor(core, options = {}) {\r\n    super(core, options);\r\n\r\n    /**\r\n     * @type {Session}\r\n     * @readonly\r\n     */\r\n    this.session = new Session(core);\r\n\r\n    /**\r\n     * @type {Tray}\r\n     * @readonly\r\n     */\r\n    this.tray = new Tray(core);\r\n\r\n    /**\r\n     * @type {Packages}\r\n     * @readonly\r\n     */\r\n    this.pm = new Packages(core);\r\n\r\n    /**\r\n     * @type {Clipboard}\r\n     * @readonly\r\n     */\r\n    this.clipboard = new Clipboard();\r\n\r\n    /**\r\n     * @type {Middleware}\r\n     * @readonly\r\n     */\r\n    this.middleware = new Middleware();\r\n\r\n    window.OSjs = this.createGlobalApi();\r\n  }\r\n\r\n  /**\r\n   * Get a list of services this provider registers\r\n   * @return {string}\r\n   */\r\n  provides() {\r\n    return [\r\n      'osjs/application',\r\n      'osjs/basic-application',\r\n      'osjs/window',\r\n      'osjs/windows',\r\n      'osjs/event-handler',\r\n      'osjs/window-behaviour',\r\n      'osjs/dnd',\r\n      'osjs/dom',\r\n      'osjs/clipboard',\r\n      'osjs/middleware',\r\n      'osjs/tray',\r\n      'osjs/locale',\r\n      'osjs/packages',\r\n      'osjs/websocket',\r\n      'osjs/session',\r\n      'osjs/theme',\r\n      'osjs/sounds'\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Destroys provider\r\n   */\r\n  destroy() {\r\n    this.tray.destroy();\r\n    this.pm.destroy();\r\n    this.clipboard.destroy();\r\n    this.middleware.destroy();\r\n    this.session.destroy();\r\n\r\n    super.destroy();\r\n  }\r\n\r\n  /**\r\n   * Initializes provider\r\n   * @return {Promise<undefined>}\r\n   */\r\n  init() {\r\n    this.registerContracts();\r\n\r\n    this.core.on('osjs/core:started', () => {\r\n      this.session.load();\r\n    });\r\n\r\n    return this.pm.init();\r\n  }\r\n\r\n  /**\r\n   * Starts provider\r\n   * @return {Promise<undefined>}\r\n   */\r\n  start() {\r\n    if (this.core.config('development')) {\r\n      this.core.on('osjs/dist:changed', filename => {\r\n        this._onDistChanged(filename);\r\n      });\r\n\r\n      this.core.on('osjs/packages:package:changed', name => {\r\n        this._onPackageChanged(name);\r\n      });\r\n    }\r\n\r\n    this.core.on('osjs/packages:metadata:changed', () => {\r\n      this.pm.init();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Registers contracts\r\n   */\r\n  registerContracts() {\r\n    this.core.instance('osjs/window', (options = {}) => new Window(this.core, options));\r\n    this.core.instance('osjs/application', (data = {}) => new Application(this.core, data));\r\n    this.core.instance('osjs/basic-application', (proc, win, options = {}) => new BasicApplication(this.core, proc, win, options));\r\n    this.core.instance('osjs/websocket', (name, uri, options = {}) => new Websocket(name, uri, options));\r\n    this.core.instance('osjs/event-emitter', name => new EventEmitter(name));\r\n\r\n    this.core.singleton('osjs/windows', () => this.createWindowContract());\r\n    this.core.singleton('osjs/locale', () => this.createLocaleContract());\r\n    this.core.singleton('osjs/dnd', () => this.createDnDContract());\r\n    this.core.singleton('osjs/dom', () => this.createDOMContract());\r\n    this.core.singleton('osjs/theme', () => this.createThemeContract());\r\n    this.core.singleton('osjs/sounds', () => this.createSoundsContract());\r\n    this.core.singleton('osjs/session', () => this.createSessionContract());\r\n    this.core.singleton('osjs/packages', () => this.createPackagesContract());\r\n    this.core.singleton('osjs/clipboard', () => this.createClipboardContract());\r\n    this.core.singleton('osjs/middleware', () => this.createMiddlewareContract());\r\n\r\n    this.core.instance('osjs/tray', (options, handler) => {\r\n      if (typeof options !== 'undefined') {\r\n        // FIXME: Use contract instead\r\n        logger.warn('osjs/tray usage without .create() is deprecated');\r\n        return this.tray.create(options, handler);\r\n      }\r\n\r\n      return this.createTrayContract();\r\n    });\r\n\r\n    // FIXME: Remove this from public usage\r\n    this.core.singleton('osjs/window-behavior', () => typeof this.options.windowBehavior === 'function'\r\n      ? this.options.windowBehavior(this.core)\r\n      : new WindowBehavior(this.core));\r\n\r\n    // FIXME: deprecated\r\n    this.core.instance('osjs/event-handler', (...args) => {\r\n      logger.warn('osjs/event-handler is deprecated, use osjs/event-emitter');\r\n      return new EventEmitter(...args);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Expose some internals to global\r\n   */\r\n  createGlobalApi() {\r\n    const globalBlacklist = this.core.config('providers.globalBlacklist', []);\r\n    const globalWhitelist = this.core.config('providers.globalWhitelist', []);\r\n\r\n    const make = (name, ...args) => {\r\n      if (this.core.has(name)) {\r\n        const blacklisted = globalBlacklist.length > 0 && globalBlacklist.indexOf(name) !== -1;\r\n        const notWhitelisted = globalWhitelist.length > 0 && globalWhitelist.indexOf(name) === -1;\r\n\r\n        if (blacklisted || notWhitelisted) {\r\n          throw new Error(`The provider '${name}' cannot be used via global scope`);\r\n        }\r\n      }\r\n\r\n      return this.core.make(name, ...args);\r\n    };\r\n\r\n    return Object.freeze({\r\n      make,\r\n      register: (name, callback) => this.pm.register(name, callback),\r\n      url: (endpoint, options, metadata) => this.core.url(endpoint, options, metadata),\r\n      run: (name, args = {}, options = {}) => this.core.run(name, args, options),\r\n      open: (file, options = {}) => this.core.open(file, options),\r\n      request: (url, options, type) => this.core.request(url, options, type),\r\n      middleware: (group, callback) => this.middleware.add(group, callback)\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Event when dist changes from a build or deployment\r\n   * @private\r\n   * @param {string} filename The resource filename\r\n   */\r\n  _onDistChanged(filename) {\r\n    const url = this.core.url(filename).replace(/^\\//, '');\r\n    const found = this.core.$resourceRoot.querySelectorAll('link[rel=stylesheet]');\r\n    const map = Array.from(found).reduce((result, item) => {\r\n      const src = item.getAttribute('href').split('?')[0].replace(/^\\//, '');\r\n      return {\r\n        [src]: item,\r\n        ...result\r\n      };\r\n    }, {});\r\n\r\n    if (map[url]) {\r\n      logger.debug('Hot-reloading', url);\r\n\r\n      setTimeout(() => {\r\n        map[url].setAttribute('href', url);\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event when package dist changes from a build or deployment\r\n   * @private\r\n   * @param {string} name The package name\r\n   */\r\n  _onPackageChanged(name) {\r\n    // TODO: Reload themes as well\r\n    Application.getApplications()\r\n      .filter(proc => proc.metadata.name === name)\r\n      .forEach(proc => proc.relaunch());\r\n  }\r\n\r\n  /**\r\n   * Provides localization contract\r\n   * @return {CoreProviderLocaleContract}\r\n   */\r\n  createLocaleContract() {\r\n    const strs = merge(translations, this.options.locales || {});\r\n    const translate = translatable(this.core)(strs);\r\n\r\n    return {\r\n      format: format(this.core),\r\n      translate,\r\n      translatable: translatable(this.core),\r\n      translatableFlat: translatableFlat(this.core),\r\n      getLocale: (key = 'language') => {\r\n        const ref = getLocale(this.core, key);\r\n        return ref.userLocale || ref.defaultLocale;\r\n      },\r\n      setLocale: name => name in strs\r\n        ? this.core.make('osjs/settings')\r\n          .set('osjs/locale', 'language', name)\r\n          .save()\r\n          .then(() => this.core.emit('osjs/locale:change', name))\r\n        : Promise.reject(translate('ERR_INVALID_LOCALE', name))\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Provides window contract\r\n   * @return {CoreProviderWindowContract}\r\n   */\r\n  createWindowContract() {\r\n    return {\r\n      create: (options = {}) => new Window(this.core, options),\r\n      list: () => Window.getWindows(),\r\n      last: () => Window.lastWindow()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Provides DnD contract\r\n   * @return {CoreProviderDnDContract}\r\n   */\r\n  createDnDContract() {\r\n    return dnd;\r\n  }\r\n\r\n  /**\r\n   * Provides DOM contract\r\n   * @return {CoreProviderDOMContract}\r\n   */\r\n  createDOMContract() {\r\n    return {\r\n      script,\r\n      style\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Provides Theme contract\r\n   * @return {CoreProviderThemeContract}\r\n   */\r\n  createThemeContract() {\r\n    const {themeResource, icon} = resourceResolver(this.core);\r\n\r\n    return {\r\n      resource: themeResource,\r\n      icon\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Provides Sounds contract\r\n   * @return {CoreProviderSoundContract}\r\n   */\r\n  createSoundsContract() {\r\n    const {soundResource, soundsEnabled} = resourceResolver(this.core);\r\n\r\n    return {\r\n      resource: soundResource,\r\n      play: (src, options = {}) => {\r\n        if (soundsEnabled()) {\r\n          const absoluteSrc = src.match(/^(\\/|https?:)/)\r\n            ? src\r\n            : soundResource(src);\r\n\r\n          if (absoluteSrc) {\r\n            return playSound(absoluteSrc, options);\r\n          }\r\n        }\r\n\r\n        return false;\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Provides Session contract\r\n   * @return {CoreProviderSessionContract}\r\n   */\r\n  createSessionContract() {\r\n    return {\r\n      save: () => this.session.save(),\r\n      load: (fresh = false) => this.session.load(fresh)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Provides Packages contract\r\n   * @return {CoreProviderPackagesContract}\r\n   */\r\n  createPackagesContract() {\r\n    return {\r\n      launch: (name, args = {}, options = {}) => this.pm.launch(name, args, options),\r\n      register: (name, callback) => this.pm.register(name, callback),\r\n      addPackages: list => this.pm.addPackages(list),\r\n      getPackages: filter => this.pm.getPackages(filter),\r\n      getCompatiblePackages: mimeType => this.pm.getCompatiblePackages(mimeType),\r\n      running: () => this.pm.running(),\r\n      getMetadataFromName: name => this.pm.getMetadataFromName(name)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Provides Clipboard contract\r\n   * @return {CoreProviderClipboardContract}\r\n   */\r\n  createClipboardContract() {\r\n    return {\r\n      clear: () => this.clipboard.clear(),\r\n      set: (data, type) => this.clipboard.set(data, type),\r\n      has: type => this.clipboard.has(type),\r\n      get: (clear = false) => this.clipboard.get(clear)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Provides Middleware contract\r\n   * @return {CoreProviderMiddlewareContract}\r\n   */\r\n  createMiddlewareContract() {\r\n    return {\r\n      add: (group, callback) => this.middleware.add(group, callback),\r\n      get: group => this.middleware.get(group)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Provides Tray contract\r\n   * @return {CoreProviderTrayContract}\r\n   */\r\n  createTrayContract() {\r\n    return {\r\n      create: (options, handler) => this.tray.create(options, handler),\r\n      remove: entry => this.tray.remove(entry),\r\n      list: () => this.tray.list(),\r\n      has: key => this.tray.has(key)\r\n    };\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {ServiceProvider} from '@osjs/common';\r\nimport Desktop from '../desktop';\r\n\r\n/**\r\n * Desktop Service Contract\r\n * TODO: typedef\r\n * @typedef {Object} DeskopProviderContract\r\n * @property {Function} setKeyboardContext\r\n * @property {Function} openContextMenu\r\n * @property {Function} addContextMenuEntries\r\n * @property {Function} applySettings\r\n * @property {Function} createDropContextMenu\r\n * @property {Function} getRect\r\n */\r\n\r\n/**\r\n * OS.js Desktop Service Provider\r\n */\r\nexport default class DesktopServiceProvider extends ServiceProvider {\r\n\r\n  /**\r\n   * @param {Core} core OS.js Core\r\n   */\r\n  constructor(core, options = {}) {\r\n    super(core, options || {});\r\n\r\n    /**\r\n     * @type {Desktop}\r\n     * @readonly\r\n     */\r\n    this.desktop = new Desktop(this.core, this.options);\r\n  }\r\n\r\n  /**\r\n   * Destroys instance\r\n   */\r\n  destroy() {\r\n    this.desktop = this.desktop.destroy();\r\n  }\r\n\r\n  /**\r\n   * Get a list of services this provider registers\r\n   * @return {string[]}\r\n   */\r\n  provides() {\r\n    return [\r\n      'osjs/desktop'\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Initializes desktop\r\n   * @return {Promise<undefined>}\r\n   */\r\n  init() {\r\n    this.desktop.init();\r\n\r\n    this.core.singleton('osjs/desktop', () => this.createDesktopContract());\r\n\r\n    this.core.on('osjs/core:started', () => {\r\n      this.desktop.applySettings();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Starts desktop\r\n   * @return {Promise<undefined>}\r\n   */\r\n  start() {\r\n    this.desktop.start();\r\n  }\r\n\r\n  /**\r\n   * @return {DeskopProviderContract}\r\n   */\r\n  createDesktopContract() {\r\n    return {\r\n      setKeyboardContext: ctx => this.desktop.setKeyboardContext(ctx),\r\n      openContextMenu: ev => this.desktop.onContextMenu(ev),\r\n      addContextMenuEntries: entries => this.desktop.addContextMenu(entries),\r\n      applySettings: settings => this.desktop.applySettings(settings),\r\n      createDropContextMenu: data => this.desktop.createDropContextMenu(data),\r\n      getRect: () => this.desktop.getRect()\r\n    };\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport Notifications from '../notifications';\r\nimport {ServiceProvider} from '@osjs/common';\r\n\r\n/**\r\n * OS.js Notification Service Provider\r\n */\r\nexport default class NotificationServiceProvider extends ServiceProvider {\r\n\r\n  /**\r\n   * @param {Core} core OS.js Core\r\n   */\r\n  constructor(core) {\r\n    super(core);\r\n\r\n    /**\r\n     * @type {Notifications}\r\n     * @readonly\r\n     */\r\n    this.notifications = new Notifications(core);\r\n  }\r\n\r\n  /**\r\n   * Destroys notifications\r\n   */\r\n  destroy() {\r\n    this.notifications.destroy();\r\n  }\r\n\r\n  /**\r\n   * Get a list of services this provider registers\r\n   * @return {string[]}\r\n   */\r\n  provides() {\r\n    return [\r\n      'osjs/notification'\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Initializes authentication\r\n   * @return {Promise<undefined>}\r\n   */\r\n  init() {\r\n    this.core.instance('osjs/notification', (options) => {\r\n      return this.notifications.create(options);\r\n    });\r\n\r\n    return this.notifications.init();\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {ServiceProvider} from '@osjs/common';\r\nimport Settings from '../settings';\r\n\r\n/**\r\n * Settings Service Contract\r\n * TODO: typedef\r\n * @typedef {Object} SettingsProviderContract\r\n * @property {Function} save\r\n * @property {Function} load\r\n * @property {Function} clear\r\n * @property {Function} set\r\n * @property {Function} get\r\n */\r\n\r\n/**\r\n * TODO: typedef\r\n * @typedef {Object} SettingsServiceOptions\r\n * @property {Object} [config]\r\n */\r\n\r\n/**\r\n * OS.js Settings Service Provider\r\n */\r\nexport default class SettingsServiceProvider extends ServiceProvider {\r\n\r\n  /**\r\n   * @param {Core} core OS.js Core\r\n   * @param {SettingsServiceOptions} [options={}]\r\n   */\r\n  constructor(core, options = {}) {\r\n    super(core);\r\n\r\n    /**\r\n     * @type {Settings}\r\n     * @readonly\r\n     */\r\n    this.settings = new Settings(core, {\r\n      config: {},\r\n      ...options\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a list of services this provider registers\r\n   * @return {string[]}\r\n   */\r\n  provides() {\r\n    return [\r\n      'osjs/settings'\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Initializes settings\r\n   * @return {Promise<undefined>}\r\n   */\r\n  init() {\r\n    this.core.singleton('osjs/settings', () => this.createSettingsContract());\r\n\r\n    return this.settings.init();\r\n  }\r\n\r\n  /**\r\n   * @return {SettingsProviderContract}\r\n   */\r\n  createSettingsContract() {\r\n    return {\r\n      save: () => this.settings.save(),\r\n      load: () => this.settings.load(),\r\n      clear: (ns) => this.settings.clear(ns),\r\n      get: (ns, key, defaultValue) => this.settings.get(ns, key, defaultValue),\r\n      set: (ns, key, value) => this.settings.set(ns, key, value)\r\n    };\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {ServiceProvider} from '@osjs/common';\r\nimport Filesystem from '../filesystem';\r\nimport * as utils from '../utils/vfs';\r\n\r\n/**\r\n * Filesytem Service Contract\r\n * TODO: typedef\r\n * @typedef {Object} VFSServiceFilesystemContract\r\n * @property {Function} basename\r\n * @property {Function} pathname\r\n * @property {Function} pathJoin\r\n * @property {Function} icon\r\n * @property {Function} mountpoints\r\n * @property {Function} mount\r\n * @property {Function} unmount\r\n * @property {Function} addMountpoint\r\n */\r\n\r\n/**\r\n * VFS Service Contract\r\n * TODO: typedef\r\n * @typedef {Object} VFSServiceContract\r\n * @property {Function} readdir\r\n * @property {Function} readfile\r\n * @property {Function} writefile\r\n * @property {Function} copy\r\n * @property {Function} move\r\n * @property {Function} rename\r\n * @property {Function} mkdir\r\n * @property {Function} unlink\r\n * @property {Function} exists\r\n * @property {Function} stat\r\n * @property {Function} url\r\n * @property {Function} download\r\n * @property {Function} search\r\n * @property {Function} touch\r\n */\r\n\r\n/**\r\n * VFS Service Options\r\n * @typedef {Object} VFSServiceOptions\r\n * @property {{name: FilesystemAdapter}} [adapters={}]\r\n * @property {FilesystemMountpoint[]} [mountpoints=[]]\r\n */\r\n\r\n/**\r\n * OS.js Virtual Filesystem Service Provider\r\n */\r\nexport default class VFSServiceProvider extends ServiceProvider {\r\n\r\n  /**\r\n   * @param {Core} core OS.js Core\r\n   * @param {VFSServiceOptions} [options={}]\r\n   */\r\n  constructor(core, options = {}) {\r\n    super(core);\r\n\r\n    /**\r\n     * @type {Filesystem}\r\n     * @readonly\r\n     */\r\n    this.fs = new Filesystem(core, {\r\n      adapters: options.adapters || {},\r\n      mounts: options.mounts || []\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a list of services this provider registers\r\n   * @return {string[]}\r\n   */\r\n  provides() {\r\n    return [\r\n      'osjs/vfs',\r\n      'osjs/fs'\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Initializes VFS providers\r\n   * @return {Promise<undefined>}\r\n   */\r\n  init() {\r\n    this.core.singleton('osjs/vfs', () => this.createVFSContract());\r\n    this.core.singleton('osjs/fs', () => this.createFilesystemContract());\r\n\r\n    return this.fs.mountAll(false);\r\n  }\r\n\r\n  /**\r\n   * @return {VFSServiceContract}\r\n   */\r\n  createVFSContract() {\r\n    return this.fs.request();\r\n  }\r\n\r\n  /**\r\n   * @return {VFSServiceFilesystemContract}\r\n   */\r\n  createFilesystemContract() {\r\n    const iconMap = this.core.config('vfs.icons', {});\r\n    const icon = utils.getFileIcon(iconMap);\r\n\r\n    return {\r\n      basename: p => utils.basename(p),\r\n      pathname: p => utils.pathname(p),\r\n      pathJoin: (...args) => utils.pathJoin(...args),\r\n      icon: icon,\r\n      mountpoints: (all = false) => this.fs.getMounts(all),\r\n      addMountpoint: (props, automount = true) => this.fs.addMountpoint(props, automount),\r\n      mount: m => this.fs.mount(m),\r\n      unmount: name => this.fs.unmount(name)\r\n    };\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\nimport Window from './window';\r\nimport createUI from './adapters/ui/search';\r\nimport VFSSearchAdapter from './adapters/search/vfs';\r\n\r\n/**\r\n * Search Service\r\n */\r\nexport default class Search {\r\n  /**\r\n   * Create Search instance\r\n   * @param {Core} core Core reference\r\n   */\r\n  constructor(core, options) {\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * Wired actions\r\n     * @type {Object}\r\n     */\r\n    this.ui = null;\r\n\r\n    /**\r\n     * Last focused window\r\n     * @type {Window}\r\n     */\r\n    this.focusLastWindow = null;\r\n\r\n    /**\r\n     * Search root DOM element\r\n     * @type {Element}\r\n     * @readonly\r\n     */\r\n    this.$element = document.createElement('div');\r\n    const providedAdapters = options.adapters || [];\r\n    const useAdapters = [VFSSearchAdapter, ...providedAdapters];\r\n    this.adapters = useAdapters.map(A => new A(core));\r\n  }\r\n\r\n  /**\r\n   * Destroy Search instance\r\n   */\r\n  destroy() {\r\n    if (this.ui) {\r\n      this.ui.destroy();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initializes Search Service\r\n   */\r\n  async init() {\r\n    const {icon} = this.core.make('osjs/theme');\r\n    const _ = this.core.make('osjs/locale').translate;\r\n\r\n    this.$element.className = 'osjs-search';\r\n    this.core.$root.appendChild(this.$element);\r\n\r\n    this.core.make('osjs/tray').create({\r\n      title: _('LBL_SEARCH_TOOLTOP', 'F3'),\r\n      icon: icon('system-search')\r\n    }, () => this.show());\r\n\r\n    this.ui = createUI(this.core, this.$element);\r\n    this.ui.on('hide', () => this.hide());\r\n    this.ui.on('open', iter => this.core.open(iter));\r\n    this.ui.on('search', query => {\r\n      this.search(query)\r\n        .then(results => this.ui.emit('success', results))\r\n        .catch(error => this.ui.emit('error', error));\r\n    });\r\n    await Promise.all(this.adapters.map(a => a.init()));\r\n  }\r\n\r\n  /**\r\n   * Performs a search across all mounts\r\n   * @param {string} pattern Search query\r\n   * @return {Promise<FileMetadata[]>}\r\n   */\r\n  async search(pattern) {\r\n    const results = await Promise.all(this.adapters.map(a => a.search(pattern)));\r\n    return results.flat(1);\r\n  }\r\n\r\n  /**\r\n   * Focuses UI\r\n   */\r\n  focus() {\r\n    if (this.ui) {\r\n      this.ui.emit('focus');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hides UI\r\n   */\r\n  hide() {\r\n    if (this.ui) {\r\n      this.ui.emit('toggle', false);\r\n\r\n      const win = Window.lastWindow();\r\n      if (this.focusLastWindow && win) {\r\n        win.focus();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Shows UI\r\n   */\r\n  show() {\r\n    if (this.ui) {\r\n      const win = Window.lastWindow();\r\n\r\n      this.focusLastWindow = win && win.blur();\r\n\r\n      this.ui.emit('toggle', true);\r\n      setTimeout(() => this.focus(), 1);\r\n    }\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport Application from './application';\r\nimport logger from './logger';\r\n\r\n/**\r\n * Session Handler\r\n */\r\nexport default class Session {\r\n\r\n  /**\r\n   * Creates the Session Handler\r\n   *\r\n   * @param {Core} core Core reference\r\n   */\r\n  constructor(core) {\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n  }\r\n\r\n  /**\r\n   * Destroys instance\r\n   */\r\n  destroy() {\r\n  }\r\n\r\n  /**\r\n   * Saves session\r\n   * @return {Promise<boolean>}\r\n   */\r\n  save() {\r\n    const apps = Application.getApplications()\r\n      .filter(a => a.options.sessionable !== false);\r\n\r\n    const session = apps.map(app => app.getSession());\r\n\r\n    return this.core.make('osjs/settings')\r\n      .set('osjs/session', null, session)\r\n      .save();\r\n  }\r\n\r\n  /**\r\n   * Loads session\r\n   * @param {boolean} [fresh=false] Kill all current applications first\r\n   * @return {Promise<boolean>}\r\n   */\r\n  load(fresh = false) {\r\n    if (fresh) {\r\n      Application.destroyAll();\r\n    }\r\n\r\n    let session = this.core.make('osjs/settings')\r\n      .get('osjs/session');\r\n\r\n    if (session && !(session instanceof Array)) {\r\n      session = Object.values(session);\r\n    }\r\n\r\n    if (session) {\r\n      console.group('Session::load()');\r\n\r\n      session.forEach(app => {\r\n        try {\r\n          this.core.run(app.name, app.args, {\r\n            restore: {\r\n              windows: app.windows\r\n            }\r\n          });\r\n        } catch (e) {\r\n          logger.warn('Error while loading session entry', e);\r\n        }\r\n      });\r\n\r\n      console.groupEnd();\r\n    }\r\n\r\n    return Promise.resolve(true);\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport merge from 'deepmerge';\r\nimport simplejsonconf from 'simplejsonconf';\r\nimport localStorageSettings from './adapters/settings/localstorage';\r\nimport serverSettings from './adapters/settings/server';\r\nimport logger from './logger';\r\n\r\nconst defaultAdapters = {\r\n  server: serverSettings,\r\n  localStorage: localStorageSettings\r\n};\r\n\r\nconst createAdapter = (core, options) => {\r\n  const adapter = core.config('standalone')\r\n    ? localStorageSettings\r\n    : typeof options.adapter === 'function'\r\n      ? options.adapter\r\n      : defaultAdapters[options.adapter || 'localStorage'];\r\n\r\n  return {\r\n    load: () => Promise.reject(new Error('Not implemented')),\r\n    save: () => Promise.reject(new Error('Not implemented')),\r\n    init: () => Promise.resolve(true),\r\n    clear: () => Promise.resolve(true),\r\n    destroy: () => {},\r\n    ...adapter(core, options.config)\r\n  };\r\n};\r\n\r\n/**\r\n * TODO: typedef\r\n * @typedef {Object} SettingsAdapterConfiguration\r\n */\r\n\r\n/**\r\n * TODO: typedef\r\n * @typedef {Object} SettingsAdapter\r\n */\r\n\r\n/**\r\n * @callback SettingsAdapterCallback\r\n * @param {Core} core\r\n * @return {SettingsAdapterCallback}\r\n */\r\n\r\n/**\r\n * Settings Options\r\n *\r\n * @typedef {Object} SettingsOptions\r\n * @property {SettingsAdapterCallback|SettingsAdapter} [adapter] Adapter to use\r\n * @property {SettingsAdapterConfiguration} [config] Adapter configuration\r\n */\r\n\r\n/**\r\n * OS.js Settings Manager\r\n */\r\nexport default class Settings {\r\n\r\n  // TODO: Destroy method\r\n\r\n  /**\r\n   * Create application\r\n   *\r\n   * @param {Core} core Core reference\r\n   * @param {SettingsOptions} options Options\r\n   */\r\n  constructor(core, options) {\r\n\r\n    /**\r\n     * The settings adapter\r\n     * @type {SettingsAdapter}\r\n     * @readonly\r\n     */\r\n    this.adapter = createAdapter(core, options);\r\n\r\n    /**\r\n     * Internal timeout reference used for debouncing\r\n     * @type {object}\r\n     */\r\n    this.debounce = null;\r\n\r\n    /**\r\n     * The settings tree\r\n     * @type {{name: *}}\r\n     */\r\n    this.settings = {};\r\n\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n  }\r\n\r\n  /**\r\n   * Initializes settings adapter\r\n   */\r\n  init() {\r\n    return this.adapter.init();\r\n  }\r\n\r\n  /**\r\n   * Saves settings\r\n   * @return {Promise<boolean>}\r\n   */\r\n  save() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.debounce) {\r\n        const [promise, timer] = this.debounce;\r\n        promise.resolve(false);\r\n        this.debounce = clearTimeout(timer);\r\n      }\r\n\r\n      this.debounce = [\r\n        {resolve, reject},\r\n        setTimeout(() => {\r\n          this.adapter.save(this.settings)\r\n            .then((...args) => {\r\n              this.core.emit('osjs/settings:save');\r\n\r\n              resolve(...args);\r\n            }).catch(reject);\r\n        }, 100)\r\n      ];\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Loads settings\r\n   * @return {Promise<boolean>}\r\n   */\r\n  load() {\r\n    const defaults = this.core.config('settings.defaults', {});\r\n\r\n    return this.adapter.load()\r\n      .then(settings => {\r\n        this.settings = merge(defaults, settings, {\r\n          arrayMerge: (dest, source) => source\r\n        });\r\n\r\n        this.core.emit('osjs/settings:load');\r\n\r\n        return true;\r\n      }).catch(e => {\r\n        logger.warn('Failed to set settings', e);\r\n        this.settings = defaults;\r\n\r\n        return false;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Gets a settings entry by key (cached)\r\n   *\r\n   * @param {string} [ns] The namespace\r\n   * @param {string} [key] The key to get the value from\r\n   * @param {*} [defaultValue] If result is undefined, return this instead\r\n   * @return {*}\r\n   */\r\n  get(ns, key, defaultValue) {\r\n    if (typeof ns === 'undefined') {\r\n      return {...this.settings};\r\n    } else if (typeof this.settings[ns] === 'undefined') {\r\n      return key ? defaultValue : defaultValue || {};\r\n    }\r\n\r\n    const tree = simplejsonconf(this.settings[ns]);\r\n\r\n    return key\r\n      ? tree.get(key, defaultValue)\r\n      : tree.get() || defaultValue;\r\n  }\r\n\r\n  /**\r\n   * Sets a settings entry by root key (but does not save).\r\n   *\r\n   * @param {string} ns The namespace\r\n   * @param {string} [key] The key to set\r\n   * @param {*} [value] The value to set\r\n   * @return {Settings} This\r\n   */\r\n  set(ns, key, value) {\r\n    const lock = this.core.config('settings.lock', []);\r\n    if (lock.indexOf(ns) !== -1) {\r\n      return this;\r\n    }\r\n\r\n    if (typeof this.settings[ns] === 'undefined') {\r\n      this.settings[ns] = {};\r\n    }\r\n\r\n    if (key) {\r\n      try {\r\n        const sjc = simplejsonconf(this.settings[ns]);\r\n        sjc.set(key, value);\r\n        this.settings[ns] = sjc.get();\r\n      } catch (e) {\r\n        logger.warn('Error while setting settings for', key, e);\r\n      }\r\n    } else {\r\n      this.settings[ns] = {...value};\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Clears a namespace by root key\r\n   * @param {string} ns The namespace\r\n   * @return {Promise<boolean>}\r\n   */\r\n  clear(ns) {\r\n    return this.adapter.clear(ns)\r\n      .then(result => {\r\n        if (result && this.settings[ns]) {\r\n          delete this.settings[ns];\r\n        }\r\n\r\n        return result;\r\n      });\r\n  }\r\n\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * Splash Screen UI\r\n */\r\nexport default class Splash {\r\n  /**\r\n   * Create Splash\r\n   * @param {Core} core Core reference\r\n   */\r\n  constructor(core) {\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * Splash root element\r\n     * @type {Element}\r\n     * @readonly\r\n     */\r\n    this.$loading = document.createElement('div');\r\n    this.$loading.className = 'osjs-boot-splash';\r\n\r\n    core.on('osjs/core:boot', () => this.show());\r\n    core.on('osjs/core:booted', () => this.destroy());\r\n    core.on('osjs/core:logged-in', () => this.show());\r\n    core.on('osjs/core:started', () => this.destroy());\r\n  }\r\n\r\n  /**\r\n   * Initializes splash\r\n   */\r\n  init() {\r\n    this.$loading.appendChild(document.createTextNode('Loading...'));\r\n  }\r\n\r\n  /**\r\n   * Shows splash\r\n   */\r\n  show() {\r\n    if (!this.$loading.parentNode) {\r\n      this.core.$root.appendChild(this.$loading);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroys splash\r\n   */\r\n  destroy() {\r\n    if (this.$loading.parentNode) {\r\n      this.$loading.remove();\r\n    }\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"881c86876af63b732063d7bdd51bb226.png\";","export default __webpack_public_path__ + \"f4cfc6708cf6bfc17d4b1e775f594ae2.png\";","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport logger from './logger';\r\nimport defaultIcon from './styles/logo-blue-32x32.png';\r\n\r\n/**\r\n * Tray Icon Data\r\n * @typedef {Object} TrayEntryData\r\n * @property {string} [key] Used as internal index for tray entry\r\n * @property {string} [icon] Icon source\r\n * @property {string} [title] The title and tooltip\r\n * @property {Function} [onclick] The callback function for clicks\r\n * @property {Function} [oncontextmenu] The callback function for contextmenu\r\n */\r\n\r\n/**\r\n * Tray Icon Entry\r\n * @typedef {Object} TrayEntry\r\n * @property {TrayEntryData} entry The given entry data\r\n * @property {Function} update Updates entry with given data\r\n * @property {Function} destroy Destroy the entry\r\n */\r\n\r\n/**\r\n * Tray Handler\r\n */\r\nexport default class Tray {\r\n\r\n  /**\r\n   * Creates the Tray Handler\r\n   *\r\n   * @param {Core} core Core reference\r\n   */\r\n  constructor(core) {\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * All Tray entries\r\n     * @type {TrayEntry[]}\r\n     */\r\n    this.entries = [];\r\n  }\r\n\r\n  /**\r\n   * Destroys instance\r\n   */\r\n  destroy() {\r\n    this.entries = [];\r\n  }\r\n\r\n  /**\r\n   * Creates a new Tray entry\r\n   * @param {TrayEntryData} options Options\r\n   * @param {Function} [handler] The callback function for all events\r\n   * @return {TrayEntry}\r\n   */\r\n  create(options, handler) {\r\n    const defaultTitle = this.core.make('osjs/locale')\r\n      .translate('LBL_TRAY');\r\n\r\n    handler = handler || (() => {});\r\n\r\n    const entry = {\r\n      key: null,\r\n      icon: defaultIcon,\r\n      title: defaultTitle,\r\n      onclick: handler,\r\n      oncontextmenu: handler,\r\n      handler,\r\n      ...options\r\n    };\r\n\r\n    logger.debug('Created new tray entry', entry);\r\n\r\n    this.entries.push(entry);\r\n\r\n    this.core.emit('osjs/tray:create', entry);\r\n    this.core.emit('osjs/tray:update', this.entries);\r\n\r\n    const obj = {\r\n      entry,\r\n      update: u => {\r\n        Object.keys(u).forEach(k => (entry[k] = u[k]));\r\n\r\n        this.core.emit('osjs/tray:update', this.entries);\r\n      },\r\n      destroy: () => this.remove(entry)\r\n    };\r\n\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * Removes a Tray entry\r\n   * @param {TrayEntry} entry The tray entry\r\n   */\r\n  remove(entry) {\r\n    const foundIndex = this.entries.findIndex(e => e === entry);\r\n    if (foundIndex !== -1) {\r\n      this.entries.splice(foundIndex, 1);\r\n\r\n      this.core.emit('osjs/tray:remove', entry);\r\n      this.core.emit('osjs/tray:update', this.entries);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @return {TrayEntry[]}\r\n   */\r\n  list() {\r\n    return this.entries;\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean}\r\n   */\r\n  has(key) {\r\n    return this.entries.findIndex(entry => entry.key === key) !== -1;\r\n  }\r\n\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * Inverts a HEX color\r\n * @link https://stackoverflow.com/a/51568508\r\n * @param {string} hex Color hex code\r\n * @return {string} Inverted hex code\r\n */\r\nexport const invertHex = hex => '#' + hex\r\n  .match(/[a-f0-9]{2}/ig)\r\n  .map(e => (255 - parseInt(e, 16) | 0)\r\n    .toString(16)\r\n    .replace(/^([a-f0-9])$/, '0$1')\r\n  )\r\n  .join('');\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport logger from '../logger';\r\nimport {supportedMedia} from './dom';\r\n\r\nconst imageDropMimes = [\r\n  'image/png',\r\n  'image/jpe?g',\r\n  'image/webp',\r\n  'image/gif',\r\n  'image/svg(\\\\+xml)?'\r\n];\r\n\r\n/**\r\n * Check if droppable data is a VFS type\r\n * @return {boolean}\r\n */\r\nexport const validVfsDrop = data => data && data.path;\r\n\r\n/**\r\n * Check if droppable data contains image\r\n * @return {boolean}\r\n */\r\nexport const isDroppingImage = data => validVfsDrop(data) &&\r\n  imageDropMimes.some(re => !!data.mime.match(re));\r\n\r\n/**\r\n * Creates a set of styles based on background settings\r\n */\r\nexport const applyBackgroundStyles = (core, background) => {\r\n  const {$root} = core;\r\n\r\n  const styles = {\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundPosition: '50% 50%',\r\n    backgroundSize: 'auto',\r\n    backgroundColor: background.color,\r\n    backgroundImage: 'none'\r\n  };\r\n\r\n  if (background.style === 'cover' || background.style === 'contain') {\r\n    styles.backgroundSize = background.style;\r\n  } else if (background.style === 'repeat') {\r\n    styles.backgroundRepeat = 'repeat';\r\n  }\r\n\r\n  if (background.style !== 'color') {\r\n    if (background.src === undefined) {\r\n      styles.backgroundImage = undefined;\r\n    } else if (typeof background.src === 'string') {\r\n      styles.backgroundImage = `url(${background.src})`;\r\n    } else if (background.src) {\r\n      core.make('osjs/vfs')\r\n        .url(background.src)\r\n        .then(src => {\r\n          setTimeout(() => ($root.style.backgroundImage = `url(${src})`), 1);\r\n        })\r\n        .catch(error => logger.warn('Error while setting wallpaper from VFS', error));\r\n    }\r\n  }\r\n\r\n  Object.keys(styles).forEach(k => ($root.style[k] = styles[k]));\r\n};\r\n\r\n/**\r\n * Creates a rectangle with the realestate panels takes up\r\n */\r\nexport const createPanelSubtraction = (panel, panels) => {\r\n  const subtraction = {top: 0, left: 0, right: 0, bottom: 0};\r\n  const set = p => (subtraction[p.options.position] = p.$element.offsetHeight);\r\n\r\n  if (panels.length > 0) {\r\n    panels.forEach(set);\r\n  } else {\r\n    // Backward compability\r\n    set(panel);\r\n  }\r\n\r\n  return subtraction;\r\n};\r\n\r\nexport const isVisible = w => w &&\r\n  !w.getState('minimized') &&\r\n  w.getState('focused');\r\n\r\n/*\r\n * Resolves various resources\r\n * TODO: Move all of this (and related) stuff to a Theme class\r\n */\r\nexport const resourceResolver = (core) => {\r\n  const media = supportedMedia();\r\n\r\n  const getThemeName = (type) => {\r\n    const defaultTheme = core.config('desktop.settings.' + type);\r\n    return core.make('osjs/settings').get('osjs/desktop', type, defaultTheme);\r\n  };\r\n\r\n  const themeResource = path => {\r\n    const theme = getThemeName('theme');\r\n\r\n    return core.url(`themes/${theme}/${path}`); // FIXME: Use metadata ?\r\n  };\r\n\r\n  const getSoundThemeName = () => getThemeName('sounds');\r\n\r\n  const soundResource = path => {\r\n    if (!path.match(/\\.([a-z]+)$/)) {\r\n      const defaultExtension = 'mp3';\r\n      const checkExtensions = ['oga', 'mp3'];\r\n      const found = checkExtensions.find(str => media.audio[str] === true);\r\n      const use = found || defaultExtension;\r\n\r\n      path += '.' + use;\r\n    }\r\n\r\n    const theme = getSoundThemeName();\r\n\r\n    return theme ? core.url(`sounds/${theme}/${path}`) : null; // FIXME: Use metadata ?\r\n  };\r\n\r\n  const soundsEnabled = () => !!getSoundThemeName();\r\n\r\n  const icon = (name) => {\r\n    name = name.replace(/\\.(png|svg|gif)$/, '');\r\n    const {getMetadataFromName} = core.make('osjs/packages');\r\n    const theme = getThemeName('icons');\r\n    const metadata = getMetadataFromName(theme) || {};\r\n    const iconDefinitions = metadata.icons || {};\r\n    const extension = iconDefinitions[name] || 'png';\r\n\r\n    return core.url(`icons/${theme}/icons/${name}.${extension}`);\r\n  };\r\n\r\n  return {themeResource, soundResource, soundsEnabled, icon};\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport logger from '../logger';\r\n\r\n/**\r\n * @callback DraggableEvent\r\n * @param {MouseEvent} ev\r\n */\r\n\r\n/**\r\n * @callback DroppableEvent\r\n * @param {MouseEvent} ev\r\n */\r\n\r\n/**\r\n * @callback DroppedEvent\r\n * @param {MouseEvent} ev\r\n * @param {Object} data\r\n * @param {File[]} [files=[]]\r\n */\r\n\r\n/**\r\n * @typedef {Object} DroppableOptions\r\n * @property {string} [type=application/json] Content Type\r\n * @property {string} [effect=move] DnD effect (cursor)\r\n * @property {DroppableEvent} [ondragenter] Callback to event (ev) => {}\r\n * @property {DroppableEvent} [ondragover] Callback to event (ev) => {}\r\n * @property {DroppableEvent} [ondragleave] Callback to event (ev) => {}\r\n * @property {DroppedEvent} [ondrop] Callback to event (ev, data, files) => {}\r\n * @property {boolean} [strict=false] Drop element must match exactly\r\n */\r\n\r\n/**\r\n * @typedef {Object} DroppableInstance\r\n * @property {Function} destroy\r\n */\r\n\r\n/**\r\n * @typedef {Object} DraggableOptions\r\n * @property {string} [type=application/json] Content Type\r\n * @property {string} [effect=move] DnD effect (cursor)\r\n * @property {DraggableEvent} [ondragstart] Callback to event (ev) => {}\r\n * @property {DraggableEvent} [ondragend] Callback to event (ev) => {}\r\n * @property {DraggableEvent} [setDragImage] Set custom drag image (browser dependent)\r\n */\r\n\r\n/**\r\n * @typedef {Object} DraggableInstance\r\n * @property {Function} destroy\r\n */\r\n\r\nconst retval = (fn, ...args) => {\r\n  try {\r\n    const result = fn(...args);\r\n    if (typeof result === 'boolean') {\r\n      return result;\r\n    }\r\n  } catch (e) {\r\n    logger.warn('droppable value parsing error', e);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst getDataTransfer = (ev, type, dataTransferProperty) => {\r\n  let files = [];\r\n  let data;\r\n\r\n  if (ev.dataTransfer) {\r\n    files = ev.dataTransfer[dataTransferProperty]\r\n      ? Array.from(ev.dataTransfer[dataTransferProperty])\r\n      : [];\r\n\r\n    try {\r\n      const transfer = ev.dataTransfer.getData(type);\r\n\r\n      try {\r\n        if (type === 'application/json') {\r\n          data = typeof transfer === 'undefined' ? transfer : JSON.parse(transfer);\r\n        } else {\r\n          data = transfer;\r\n        }\r\n      } catch (e) {\r\n        data = transfer;\r\n        logger.warn('droppable dataTransfer parsing error', e);\r\n      }\r\n    } catch (e) {\r\n      logger.warn('droppable dataTransfer parsing error', e);\r\n    }\r\n  }\r\n\r\n  return {files, data};\r\n};\r\n\r\nconst setDataTransfer = (type, effect, data, setDragImage) => {\r\n  const hasDragImage = typeof setDragImage === 'function';\r\n  const transferData = type === 'application/json'\r\n    ? JSON.stringify(data)\r\n    : data;\r\n\r\n  return (ev, el, options) => {\r\n    if (ev.dataTransfer) {\r\n      if (ev.dataTransfer.setDragImage && hasDragImage) {\r\n        try {\r\n          setDragImage(ev, el, options);\r\n        } catch (e) {\r\n          logger.warn('draggable dragstart setDragImage error', e);\r\n        }\r\n      }\r\n\r\n      try {\r\n        ev.dataTransfer.effectAllowed = effect;\r\n        ev.dataTransfer.setData(type, transferData);\r\n      } catch (e) {\r\n        logger.warn('draggable dragstart dataTransfer error', e);\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Creates a \"draggable\" element\r\n * @param {Element} el The DOM element to apply to\r\n * @param {DraggableOptions} [options={}] Options\r\n * @return {DraggableInstance}\r\n */\r\nexport const draggable = (el, options = {}) => {\r\n  const {type, effect, data, ondragstart, ondragend, setDragImage} = {\r\n    type: 'application/json',\r\n    effect: 'move',\r\n    ondragstart: () => true,\r\n    ondragend: () => true,\r\n    setDragImage: null,\r\n    ...options\r\n  };\r\n\r\n  const setter = setDataTransfer(type, effect, data, setDragImage);\r\n\r\n  const dragstart = ev => {\r\n    el.setAttribute('aria-grabbed', 'true');\r\n    setter(ev, el, options);\r\n    return ondragstart(ev);\r\n  };\r\n\r\n  const dragend = ev => {\r\n    el.setAttribute('aria-grabbed', 'false');\r\n\r\n    return ondragend(ev);\r\n  };\r\n\r\n  const destroy = () => {\r\n    el.removeAttribute('draggable');\r\n    el.removeAttribute('aria-grabbed');\r\n    el.removeEventListener('dragstart', dragstart);\r\n    el.removeEventListener('dragend', dragend);\r\n    el.classList.remove('osjs__draggable');\r\n  };\r\n\r\n  el.setAttribute('draggable', 'true');\r\n  el.setAttribute('aria-grabbed', 'false');\r\n  el.addEventListener('dragstart', dragstart);\r\n  el.addEventListener('dragend', dragend);\r\n  el.classList.add('osjs__draggable');\r\n\r\n  return {destroy};\r\n};\r\n\r\n/**\r\n * Creates a \"droppable\" element\r\n * @param {Element} el The DOM element to apply to\r\n * @param {DroppableOptions} [options={}] Options\r\n * @return {DroppableInstance}\r\n */\r\nexport const droppable = (el, options = {}) => {\r\n  const {strict, type, effect, dataTransferProperty, ondragenter, ondragover, ondragleave, ondrop} = {\r\n    type: 'application/json',\r\n    effect: 'move',\r\n    dataTransferProperty: 'files',\r\n    ondragenter: () => true,\r\n    ondragover: () => true,\r\n    ondragleave: () => true,\r\n    ondrop: () => true,\r\n    strict: false,\r\n    ...options\r\n  };\r\n\r\n  const dragenter = ev => ondragenter(ev);\r\n\r\n  const dragleave = ev => {\r\n    el.classList.remove('osjs__drop');\r\n\r\n    return retval(ondragleave, ev);\r\n  };\r\n\r\n  const dragover = ev => {\r\n    ev.preventDefault();\r\n\r\n    const inside = el.contains(ev.target);\r\n\r\n    if (!inside) {\r\n      el.classList.remove('osjs__drop');\r\n      return false;\r\n    }\r\n\r\n    ev.stopPropagation();\r\n    ev.dataTransfer.dropEffect = effect;\r\n    el.classList.add('osjs__drop');\r\n\r\n    return retval(ondragover, ev);\r\n  };\r\n\r\n  const drop = ev => {\r\n    if (strict && ev.target !== el) {\r\n      return false;\r\n    }\r\n\r\n    const {files, data} = getDataTransfer(ev, type, dataTransferProperty);\r\n\r\n    ev.stopPropagation();\r\n    ev.preventDefault();\r\n    el.classList.remove('osjs__drop');\r\n\r\n    return retval(ondrop, ev, data, files);\r\n  };\r\n\r\n  const destroy = () => {\r\n    el.removeAttribute('aria-dropeffect', effect);\r\n    el.removeEventListener('dragenter', dragenter);\r\n    el.removeEventListener('dragover', dragover);\r\n    el.removeEventListener('dragleave', dragleave);\r\n    el.removeEventListener('drop', drop);\r\n    el.classList.remove('osjs__droppable');\r\n  };\r\n\r\n  el.setAttribute('aria-dropeffect', effect);\r\n  el.addEventListener('dragenter', dragenter);\r\n  el.addEventListener('dragover', dragover);\r\n  el.addEventListener('dragleave', dragleave);\r\n  el.addEventListener('drop', drop);\r\n  el.classList.add('osjs__droppable');\r\n\r\n  return {destroy};\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport logger from '../logger';\r\n\r\nconst supportsNativeNotification = 'Notification' in window;\r\n\r\n/**\r\n * Creates a new CSS DOM element\r\n * @param {Element} root Root node\r\n * @param {string} src Source\r\n * @return {Promise<ScriptElement>}\r\n */\r\nexport const style = (root, src) => new Promise((resolve, reject) => {\r\n  const el = document.createElement('link');\r\n  el.setAttribute('rel', 'stylesheet');\r\n  el.setAttribute('type', 'text/css');\r\n  el.onload = () => resolve(el);\r\n  el.onerror = (err) => reject(err);\r\n  el.setAttribute('href', src);\r\n\r\n  root.appendChild(el);\r\n\r\n  return el;\r\n});\r\n\r\n/**\r\n * Creates a new Script DOM element\r\n * @param {Element} root Root node\r\n * @param {string} src Source\r\n * @param {Object} [options={}] Options\r\n * @return {Promise<StyleElement>}\r\n */\r\nexport const script = (root, src, options = {}) => new Promise((resolve, reject) => {\r\n  const opts = {\r\n    async: false,\r\n    defer: false,\r\n    ...options,\r\n    src,\r\n    onerror: (err) => reject(err),\r\n    onload: () => resolve(el),\r\n  };\r\n\r\n  const el = document.createElement('script');\r\n  el.onreadystatechange = function() {\r\n    if ((this.readyState === 'complete' || this.readyState === 'loaded')) {\r\n      resolve(el);\r\n    }\r\n  };\r\n  Object.assign(el, opts);\r\n  root.appendChild(el);\r\n\r\n  return el;\r\n});\r\n\r\n\r\n/**\r\n * Escape text so it is \"safe\" for HTML usage\r\n * @param {string} text Input text\r\n * @return {string}\r\n */\r\nexport const escapeHtml = (text) => {\r\n  const div = document.createElement('div');\r\n  div.innerHTML = text;\r\n  return div.textContent;\r\n};\r\n\r\n/**\r\n * Serialize an object to CSS\r\n * @param {object} obj Object\r\n * @return {string} CSS text\r\n */\r\nexport const createCssText = (obj) => Object.keys(obj)\r\n  .map(k => [k, k.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()])\r\n  .map(k => `${k[1]}: ${obj[k[0]]}`)\r\n  .join(';');\r\n\r\n/**\r\n * Inserts a tab in the given event target\r\n * @param {Event} ev DOM Event\r\n */\r\nexport const handleTabOnTextarea = ev => {\r\n  const input = ev.target;\r\n  let {selectionStart, selectionEnd, value} = input;\r\n\r\n  input.value = value.substring(0, selectionStart)\r\n    + '\\t'\r\n    + value.substring(selectionEnd, value.length);\r\n\r\n  selectionStart++;\r\n\r\n  input.selectionStart = selectionStart;\r\n  input.selectionEnd = selectionStart;\r\n};\r\n\r\n/*\r\n * Get active element if belonging to root\r\n * @param {Element} root DOM Element\r\n * @return {Element|null}\r\n */\r\nexport const getActiveElement = (root) => {\r\n  if (root) {\r\n    const ae = document.activeElement;\r\n\r\n    return root.contains(ae) ? ae : null;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n/**\r\n * Checks if passive events is supported\r\n * @link https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\r\n * @return {boolean}\r\n */\r\nexport const supportsPassive = (function() {\r\n  let supportsPassive = false;\r\n  try {\r\n    const opts = Object.defineProperty({}, 'passive', {\r\n      get: () => (supportsPassive = true)\r\n    });\r\n\r\n    window.addEventListener('testPassive', null, opts);\r\n    window.removeEventListener('testPassive', null, opts);\r\n  } catch (e) {/* noop */}\r\n\r\n  return () => supportsPassive;\r\n})();\r\n\r\n/**\r\n * Plays a sound\r\n * @param {string} src Sound source\r\n * @param {object} [options] Options\r\n * @return {Promise<HTMLAudioElement>}\r\n */\r\nexport const playSound = (src, options = {}) => {\r\n  const opts = {\r\n    volume: 1.0,\r\n    ...options\r\n  };\r\n\r\n  const audio = new Audio();\r\n  audio.volume = opts.volume;\r\n  audio.src = src;\r\n\r\n  try {\r\n    const p = audio.play();\r\n    if (p instanceof Promise) {\r\n      return p.then(() => audio)\r\n        .catch(err => logger.warn('Failed to play sound', src, err));\r\n    }\r\n  } catch (e) {\r\n    logger.warn('Failed to play sound', src, e);\r\n  }\r\n\r\n  return Promise.resolve(audio);\r\n};\r\n\r\n/**\r\n * Gets supported media types\r\n * @return {object}\r\n */\r\nexport const supportedMedia = () => {\r\n  const videoFormats = {\r\n    mp4: 'video/mp4',\r\n    ogv: 'video/ogg'\r\n  };\r\n\r\n  const audioFormats = {\r\n    mp3: 'audio/mpeg',\r\n    mp4: 'audio/mp4',\r\n    oga: 'audio/ogg'\r\n  };\r\n\r\n  const reduce = (list, elem) => Object.keys(list)\r\n    .reduce((result, format) => {\r\n      return {\r\n        [format]: elem.canPlayType(list[format]) === 'probably',\r\n        ...result\r\n      };\r\n    }, {});\r\n\r\n  return {\r\n    audio: reduce(audioFormats, document.createElement('audio')),\r\n    video: reduce(videoFormats, document.createElement('video'))\r\n  };\r\n};\r\n\r\n/**\r\n * Gets if CSS transitions is supported\r\n * @return {boolean}\r\n */\r\nexport const supportsTransition = (function() {\r\n  const el = document.createElement('div');\r\n  const tests = ['WebkitTransition', 'MozTransition', 'OTransition', 'transition'];\r\n  const supported = tests.some(name => typeof el.style[name] !== 'undefined');\r\n\r\n  return () => supported;\r\n})();\r\n\r\n/**\r\n * Creates a native notification\r\n * @param {object} options Notification options\r\n * @param {Function} [onclick] Callback on click\r\n * @return {Promise<window.Notification>}\r\n */\r\nexport const createNativeNotification = (options, onclick) => {\r\n  const Notif = window.Notification;\r\n\r\n  const create = () => {\r\n    const notification = new Notif(\r\n      options.title,\r\n      {\r\n        body: options.message,\r\n        icon: options.icon\r\n      }\r\n    );\r\n\r\n    notification.onclick = onclick;\r\n\r\n    return notification;\r\n  };\r\n\r\n  if (supportsNativeNotification) {\r\n    if (Notif.permission === 'granted') {\r\n      return Promise.resolve(create());\r\n    } else if (Notif.permission !== 'denied') {\r\n      return new Promise((resolve, reject) => {\r\n        Notif.requestPermission(permission => {\r\n          return permission === 'granted' ? resolve(true) : reject(permission);\r\n        });\r\n      }).then(create);\r\n    }\r\n  }\r\n\r\n  return Promise.reject('Unsupported');\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n\r\n/*\r\n * Creates URL request path\r\n */\r\nexport const encodeQueryData = (data) => {\r\n  const pairs = Object.entries(data)\r\n    .filter(([, val]) => val !== null && val !== undefined)\r\n    .map(([key, val]) => {\r\n      const value = typeof val === 'object' ? JSON.stringify(val) : val;\r\n      return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\r\n    });\r\n\r\n  return pairs.join('&');\r\n};\r\n\r\nconst bodyTypes = [\r\n  window.ArrayBuffer,\r\n  window.ArrayBufferView,\r\n  window.Blob,\r\n  window.File,\r\n  window.URLSearchParams,\r\n  window.FormData\r\n].filter(t => !!t);\r\n\r\n/*\r\n * Creates fetch() options\r\n */\r\nconst createFetchOptions = (url, options, type) => {\r\n  const fetchOptions = {\r\n    credentials: 'same-origin',\r\n    method: 'get',\r\n    headers: {},\r\n    ...options\r\n  };\r\n\r\n  if (type === 'json') {\r\n    fetchOptions.headers = {\r\n      ...fetchOptions.headers,\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json'\r\n    };\r\n  }\r\n\r\n  if (fetchOptions.body && fetchOptions.method.toLowerCase() === 'get') {\r\n    if(encodeQueryData(fetchOptions.body) !== '') {\r\n      url += '?' + encodeQueryData(fetchOptions.body);\r\n    }\r\n    delete fetchOptions.body;\r\n  }\r\n\r\n  const hasBody = typeof fetchOptions.body !== 'undefined';\r\n  const stringBody = typeof fetchOptions.body === 'string';\r\n\r\n  if (type === 'json' && (hasBody && !stringBody)) {\r\n    if (!(fetchOptions.body instanceof FormData)) {\r\n      const found = bodyTypes.find(t => (fetchOptions.body instanceof t));\r\n      if (!found) {\r\n        fetchOptions.body = JSON.stringify(fetchOptions.body);\r\n      }\r\n    }\r\n  }\r\n\r\n  return [url, fetchOptions];\r\n};\r\n\r\n/**\r\n * This is a fetch polyfill for XMLHttpRequest.\r\n * Mainly used to get upload progress indicator.\r\n */\r\nconst fetchXhr = (target, fetchOptions) => new Promise((resolve, reject) => {\r\n  const req = new XMLHttpRequest();\r\n\r\n  const onError = (msg) => (ev) => {\r\n    console.warn(msg, ev);\r\n    reject(new Error(msg));\r\n  };\r\n\r\n  const onLoad = () => {\r\n    resolve({\r\n      status: req.status,\r\n      statusText: req.statusText,\r\n      ok: req.status >= 200 && req.status <= 299,\r\n      headers: {\r\n        get: k => req.getResponseHeader(k)\r\n      },\r\n      text: () => Promise.resolve(JSON.responseText),\r\n      json: () => Promise.resolve(JSON.parse(req.responseText)),\r\n      arrayBuffer: () => Promise.resolve(req.response)\r\n    });\r\n  };\r\n\r\n  if (typeof fetchOptions.onProgress === 'function') {\r\n    const rel = fetchOptions.method.toUpperCase() === 'GET' ? req : req.upload;\r\n    rel.addEventListener('progress', (ev) => {\r\n      if (ev.lengthComputable) {\r\n        const percentComplete = Math.round(ev.loaded / ev.total * 100);\r\n        fetchOptions.onProgress(ev, percentComplete);\r\n      }\r\n    });\r\n  }\r\n\r\n  req.addEventListener('load', onLoad);\r\n  req.addEventListener('error', onError('An error occured while performing XHR request'));\r\n  req.addEventListener('abort', onError('XHR request was aborted'));\r\n  req.open(fetchOptions.method, target);\r\n  Object.entries(fetchOptions.headers).forEach(([k, v]) => req.setRequestHeader(k, v));\r\n  req.responseType = fetchOptions.responseType || '';\r\n  req.send(fetchOptions.body);\r\n});\r\n\r\n/**\r\n * Make a HTTP request\r\n *\r\n * @param {string} url The endpoint\r\n * @param {Options} [options] fetch options\r\n * @param {string} [type] Request / Response type\r\n * @return {Promise<*>}\r\n */\r\nexport const fetch = (url, options = {}, type = null) => {\r\n  const [target, fetchOptions] = createFetchOptions(url, options, type);\r\n\r\n  const createErrorRejection = (response, error) =>\r\n    Promise.reject(new Error(error\r\n      ? error\r\n      : `${response.status} (${response.statusText})`));\r\n\r\n  const op = options.xhr\r\n    ? fetchXhr(target, fetchOptions)\r\n    : window.fetch(target, fetchOptions);\r\n\r\n  return op\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        const contentType = response.headers.get('content-type');\r\n        const method = contentType && contentType.indexOf('application/json') !== -1\r\n          ? 'json'\r\n          : 'text';\r\n\r\n        return response[method]()\r\n          .then(data => createErrorRejection(response, data.error));\r\n      }\r\n\r\n      return type === 'json'\r\n        ? response.json()\r\n        : response;\r\n    });\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nconst modifierNames =  ['ctrl', 'shift', 'alt', 'meta'];\r\n\r\n/**\r\n * @typedef {Object} NormalizedEventPosition\r\n * @property {number} clientX\r\n * @property {number} clientY\r\n * @property {boolean} touch\r\n * @property {Element} target\r\n */\r\n\r\n/**\r\n * Checks if keycombo matches\r\n * @param {string} combo Key combo\r\n * @param {Event} ev Event\r\n * @return {boolean}\r\n */\r\nexport const matchKeyCombo = (combo, ev) => {\r\n  const checkKeys = String(combo).toLowerCase().split('+');\r\n  const keyName = String(ev.key).toLowerCase();\r\n  const validKeypress = checkKeys.every(k => modifierNames.indexOf(k) !== -1\r\n    ? ev[k + 'Key']\r\n    : keyName === k);\r\n\r\n  return validKeypress;\r\n};\r\n\r\n/**\r\n * Normalizes event input (position)\r\n * @param {Event} ev Event\r\n * @return {NormalizedEventPosition}\r\n */\r\nexport const getEvent = (ev) => {\r\n  let {clientX, clientY, target} = ev;\r\n  const touch = ev.touches || ev.changedTouches || [];\r\n\r\n  if (touch.length) {\r\n    clientX = touch[0].clientX;\r\n    clientY = touch[0].clientY;\r\n  }\r\n\r\n  return {clientX, clientY, touch: touch.length > 0, target};\r\n};\r\n\r\n/**\r\n * Creates a double-tap event handler\r\n * @param {number} [timeout=250] Timeout\r\n * @return {Function} Handler with => (ev, cb)\r\n */\r\nexport const doubleTap = (timeout = 250) => {\r\n  let tapped = false;\r\n  let timer;\r\n\r\n  return (ev, cb) => {\r\n    timer = clearTimeout(timer);\r\n    timer = setTimeout(() => (tapped = false), timeout);\r\n\r\n    if (tapped) {\r\n      ev.preventDefault();\r\n      return cb(ev);\r\n    }\r\n\r\n    tapped = true;\r\n\r\n    return false;\r\n  };\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport dateformat from 'dateformat';\r\n\r\nconst FALLBACK_LOCALE = 'en_EN';\r\n\r\n// TODO\r\nconst prefixMap = {\r\n  nb: 'nb_NO'\r\n};\r\n\r\nconst sprintfRegex = /\\{(\\d+)\\}/g;\r\n\r\nconst sprintfMatcher = args => (m, n) =>\r\n  n in args ? args[n] : m;\r\n\r\nconst getDefaultLocale = (core, key) => core.config('locale.' + key);\r\n\r\nconst getUserLocale = (core, key, defaultLocale) => core.make('osjs/settings')\r\n  .get('osjs/locale', key, defaultLocale);\r\n\r\n/**\r\n * Gest the set localization\r\n * @param {Core} core OS.js Core IoC\r\n * @param {string} key Settings key (locales.*)\r\n * @return {object} An object with defaultLocale and userLocale\r\n */\r\nexport const getLocale = (core, key) => {\r\n  const defaultLocale = getDefaultLocale(core, key);\r\n  const userLocale = getUserLocale(core, key, defaultLocale);\r\n  return {defaultLocale, userLocale};\r\n};\r\n\r\n/**\r\n * Gets a raw string from a tree of translations based on key\r\n *\r\n * Note that this function will fall back to a pre-configured locale\r\n * if the given locale names were not found.\r\n *\r\n * @private\r\n * @param {object}  list      The tree of translations\r\n * @param {string}  ul        User locale name\r\n * @param {string}  dl        Default locale name\r\n * @param {string}  k         The key to translate from tree\r\n * @return {string}           The raw string\r\n */\r\nconst getFromList = (list, ul, dl, k) => {\r\n  const fallbackList = list[FALLBACK_LOCALE] || {};\r\n  const localizedList = list[ul] || list[dl] || {};\r\n\r\n  if (typeof localizedList[k] === 'undefined') {\r\n    return fallbackList[k] || k;\r\n  }\r\n\r\n  return localizedList[k];\r\n};\r\n\r\n/**\r\n * Translates a key + arguments from a tree of translations\r\n *\r\n * @example\r\n *  translate({en_EN: {foo: 'Hello {0}'}}, 'nb_NO', 'en_EN', 'foo', 'World') => 'Hello World'\r\n *\r\n * @private\r\n * @param {object}  list      The tree of translations\r\n * @param {string}  ul        User locale name\r\n * @param {string}  dl        Default locale name\r\n * @param {string}  k         The key to translate from tree\r\n * @param {...*}    args      A list of arguments that are defined in the translation string\r\n * @return {string}           The translated string\r\n */\r\nexport const translate = (list, ul, dl, k, ...args) => {\r\n  const fmt = getFromList(list, ul, dl, k);\r\n  return fmt.replace(sprintfRegex, sprintfMatcher(args));\r\n};\r\n\r\n/**\r\n * Translates a given flat tree of locales\r\n *\r\n * Will automatically detect the current locale from the user.\r\n *\r\n * Returns a function that takes a key and returns the correct string.\r\n *\r\n * @example\r\n *  translatableFlat({en_EN: 'Hello World'}); // => 'Hello World'\r\n *\r\n * @param {object} list The tree of translations\r\n * @param {string} defaultValue Default value if none found\r\n * @return {string} The translated string\r\n */\r\nexport const translatableFlat = core => (list, defaultValue) => {\r\n  const {defaultLocale, userLocale} = getLocale(core, 'language');\r\n\r\n  return list[userLocale] || list[defaultLocale] || list[FALLBACK_LOCALE] || defaultValue;\r\n};\r\n\r\n/**\r\n * Translates a given tree of locales.\r\n *\r\n * Will automatically detect the current locale from the user.\r\n *\r\n * Returns a `translate` function that takes a key and list of arguments.\r\n *\r\n * @see translate\r\n * @example\r\n *  translatable({en_EN: {foo: 'Hello {0}'}})\r\n *    ('foo', 'World'); // => 'Hello World'\r\n * @param {string} k List key\r\n * @param {...args} Format arguments\r\n * @return {Function} A translation function\r\n */\r\nexport const translatable = core => list => {\r\n  const {defaultLocale, userLocale} = getLocale(core, 'language');\r\n\r\n  return (k, ...args) => translate(\r\n    list,\r\n    userLocale,\r\n    defaultLocale,\r\n    k,\r\n    ...args\r\n  );\r\n};\r\n\r\n/**\r\n * Formats a given Date to a specified format\r\n *\r\n * Will automatically detect the current locale from the user.\r\n *\r\n * Formats are 'shortDate', 'mediumDate', 'longDate', 'fullDate',\r\n *       'shortTime' and 'longTime'\r\n *\r\n * @param {Date} date Date object\r\n * @param {string} fmt Format\r\n * @return {string}\r\n */\r\nexport const format = core => (date, fmt) => {\r\n  const {defaultLocale, userLocale} = getLocale(core, 'format.' + fmt);\r\n  const useFormat = userLocale || defaultLocale || fmt;\r\n\r\n  return dateformat(date, useFormat);\r\n};\r\n\r\n/**\r\n * Returns the navigator language\r\n * @param {object} [nav]\r\n * @return {string}\r\n */\r\nexport const browserLocale = (nav = {}) => {\r\n  const browserLanguage = nav.userLanguage || nav.language || '';\r\n  const get = l => prefixMap[l] ? prefixMap[l] : (l.match(/_/)\r\n    ? l\r\n    : (l ? `${l}_${l.toUpperCase()}` : ''));\r\n\r\n  const langs = (nav.languages || [browserLanguage])\r\n    .map(l => get(l.replace('-', '_')))\r\n    .filter(str => !!str);\r\n\r\n  return langs[langs.length - 1];\r\n};\r\n\r\n/**\r\n * Figures out what locale the browser is running as\r\n *\r\n * @param {string} [defaultLocale=en_EN] Default locale if none found\r\n * @return {string} The browser locale\r\n */\r\nexport const clientLocale = (() => {\r\n  const lang = browserLocale(navigator);\r\n\r\n  return (defaultLocale = FALLBACK_LOCALE, acceptedLocales = []) => {\r\n    const found = lang || defaultLocale;\r\n\r\n    if (acceptedLocales.lenght > 0 && acceptedLocales.indexOf(lang) === -1) {\r\n      return defaultLocale;\r\n    }\r\n\r\n    return found;\r\n  };\r\n})();\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nexport const createPackageAvailabilityCheck = (core) => {\r\n  const user = core.getUser();\r\n  const permissions = core.config('packages.permissions', {});\r\n\r\n  const checkMetadataGroups = iter => {\r\n    const m = iter.strictGroups === false ? 'some' : 'every';\r\n\r\n    return iter.groups instanceof Array\r\n      ? iter.groups[m](g => user.groups.indexOf(g) !== -1)\r\n      : true;\r\n  };\r\n\r\n  const checkConfigGroups = iter => {\r\n    const perm = permissions[iter.name];\r\n    if (perm && perm.groups instanceof Array) {\r\n      const m = perm.strictGroups === false ? 'some' : 'every';\r\n      return perm.groups[m](g => user.groups.indexOf(g) !== -1);\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const checkBlacklist = iter => user.blacklist instanceof Array\r\n    ? user.blacklist.indexOf(iter.name) === -1\r\n    : true;\r\n\r\n  const checks =  [\r\n    checkMetadataGroups,\r\n    checkConfigGroups,\r\n    checkBlacklist\r\n  ];\r\n\r\n  return metadata => checks.every(fn => fn(metadata));\r\n};\r\n\r\nexport const createManifestFromArray = list => list\r\n  .map(iter => ({\r\n    type: 'application',\r\n    ...iter,\r\n    files: (iter.files || [])\r\n      .map(file =>\r\n        typeof file === 'string'\r\n          ? {filename: file, type: 'preload'}\r\n          : {type: 'preload', ...file}\r\n      )\r\n  }));\r\n\r\nexport const filterMetadataFilesByType = (files, type) =>\r\n  (files || []).filter(file => file.type === type);\r\n\r\nexport const metadataFilesToFilenames = files =>\r\n  (files || []).map(file => file.filename);\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {style, script} from './dom';\r\nimport logger from '../logger';\r\n\r\n/**\r\n * @typedef {HTMLScriptElement|HTMLLinkElement} PreloaderEntryElement\r\n */\r\n\r\n/**\r\n * @typedef {Object} PreloaderEntry\r\n * @property {boolean} success\r\n * @property {PreloaderEntryElement} [el]\r\n * @property {string} [entry]\r\n * @property {string} [error]\r\n */\r\n\r\n/**\r\n * @typedef {Object} PreloaderResult\r\n * @property {string[]} errors\r\n * @property {{string: PreloaderEntryElement}} elements\r\n */\r\n\r\n/**\r\n * The Preloader loads styles and scripts\r\n */\r\nexport default class Preloader {\r\n\r\n  constructor(root) {\r\n    /**\r\n     * A list of cached preloads\r\n     * @type {String[]}\r\n     */\r\n    this.loaded = [];\r\n\r\n    /**\r\n     * @type {Element}\r\n     */\r\n    this.$root = root;\r\n  }\r\n\r\n  destroy() {\r\n    this.loaded = [];\r\n  }\r\n\r\n  /**\r\n   * Loads all resources required for a package\r\n   * @param {string[]} list A list of resources\r\n   * @param {boolean} [force=false] Force loading even though previously cached\r\n   * @return {Promise<PreloaderResult>} A list of failed resources\r\n   */\r\n  load(list, force = false) {\r\n    const cached = entry => force\r\n      ? false\r\n      : this.loaded.find(src => src === entry);\r\n\r\n    const promises = list\r\n      .filter(entry => !cached(entry))\r\n      .map(entry => {\r\n        logger.debug('Packages::preload()', entry);\r\n\r\n        const p = entry.match(/\\.js$/)\r\n          ? script(this.$root, entry)\r\n          : style(this.$root, entry);\r\n\r\n        return p\r\n          .then(el => ({success: true, entry, el}))\r\n          .catch(error => ({success: false, entry, error}));\r\n      });\r\n\r\n    return Promise.all(promises)\r\n      .then(results => this._load(results, cached));\r\n  }\r\n\r\n  /**\r\n   * Checks the loaded list\r\n   * @private\r\n   * @param {Object[]} results Preload results\r\n   * @param {string[]} cached Already cached preloads\r\n   * @return {PreloaderResult}\r\n   */\r\n  _load(results, cached) {\r\n    const successes = results.filter(res => res.success);\r\n    successes.forEach(entry => {\r\n      if (!cached(entry)) {\r\n        this.loaded.push(entry);\r\n      }\r\n    });\r\n\r\n    const failed = results.filter(res => !res.success);\r\n    failed.forEach(failed => logger.warn('Failed loading', failed.entry, failed.error));\r\n\r\n    return {\r\n      errors: failed.map(failed => failed.entry),\r\n      elements: successes.reduce((result, iter) => {\r\n        return {...result, [iter.entry]: iter.el};\r\n      }, {})\r\n    };\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * @typedef {Object} URLResolverOptions\r\n * @property {string} [type] URL type (ws/http)\r\n * @property {string} [boolean] Add prefix to URL\r\n */\r\n\r\n/**\r\n * Resolves an URL\r\n * @param {CoreConfig} configuration\r\n */\r\nexport const urlResolver = configuration => {\r\n  const {http, ws} = configuration;\r\n\r\n  /**\r\n   * @param {string} [endpoint='/']\r\n   * @param {URLResolverOptions} [options={}]\r\n   * @param {PackageMetadata} [metadata={}] Metadata for package resolving\r\n   */\r\n  return (endpoint = '/', options = {}, metadata = {}) => {\r\n    if (typeof endpoint !== 'string') {\r\n      return http.public;\r\n    } else if (endpoint.match(/^(http|ws|ftp)s?:/i)) {\r\n      return endpoint;\r\n    }\r\n\r\n    const {type, prefix} = {\r\n      type: null,\r\n      prefix: options.type === 'websocket',\r\n      ...options\r\n    };\r\n\r\n    const str = type === 'websocket' ? ws.uri : http.uri;\r\n\r\n    let url = endpoint.replace(/^\\/+/, '');\r\n    if (metadata.type) {\r\n      const path = endpoint.replace(/^\\/?/, '/');\r\n      const type = metadata.type === 'theme' ? 'themes' : (\r\n        metadata.type === 'icons' ? 'icons' : 'apps'\r\n      );\r\n\r\n      url = `${type}/${metadata.name}${path}`;\r\n    }\r\n\r\n    return prefix\r\n      ? str.replace(/\\/$/, '') + url.replace(/^\\/?/, '/')\r\n      : http.public.replace(/^\\/?/, '/') + url;\r\n  };\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\n/**\r\n * Get parent directory\r\n * @param {string} path Directory\r\n * @return {string} Parent directory\r\n */\r\nexport const parentDirectory = path => path\r\n  .replace(/\\/$/, '')\r\n  .split('/')\r\n  .filter((item, index, arr) => index < (arr.length - 1))\r\n  .join('/')\r\n  .replace(/(\\/+)?$/, '/');\r\n\r\n/**\r\n * Joins paths\r\n * @param {string[]} args paths\r\n * @return {string}\r\n */\r\nexport const pathJoin = (...args) => args\r\n  .map((str, index) => {\r\n    if (index > 0) {\r\n      str = str.replace(/^\\/?/, '');\r\n    }\r\n    return str.replace(/\\/?$/, '');\r\n  })\r\n  .join('/');\r\n\r\n/*\r\n * Sort by locale string\r\n */\r\nconst sortString = (k, d) => (a, b) => d === 'asc'\r\n  ? String(a[k]).localeCompare(b[k])\r\n  : String(b[k]).localeCompare(a[k]);\r\n\r\n/*\r\n * Sort by date\r\n */\r\nconst sortDate = (k, d) => (a, b) => d === 'asc'\r\n  ? (new Date(a[k])) > (new Date(b[k]))\r\n  : (new Date(b[k])) > (new Date(a[k]));\r\n\r\n/*\r\n * Sort by educated guess\r\n */\r\nconst sortDefault = (k, d) => (a, b) =>\r\n  (a[k] < b[k])\r\n    ? -1\r\n    : ((a[k] > b[k])\r\n      ? (d === 'asc' ? 1 : 0)\r\n      : (d === 'asc' ? 0 : 1));\r\n\r\n/*\r\n * Sorts an array of files\r\n */\r\nconst sortFn = t => {\r\n  if (t === 'string') {\r\n    return sortString;\r\n  } else if (t === 'date') {\r\n    return sortDate;\r\n  }\r\n\r\n  return sortDefault;\r\n};\r\n\r\n/*\r\n * Map of sorters from readdir attributes\r\n */\r\nconst sortMap = {\r\n  size: sortFn('number'),\r\n  mtime: sortFn('date'),\r\n  ctime: sortFn('date'),\r\n  atime: sortFn('date')\r\n};\r\n\r\n/**\r\n * Creates \"special\" directory entries\r\n * @param {string} path The path to the readdir root\r\n * @return {Object[]}\r\n */\r\nconst createSpecials = path => {\r\n  const specials = [];\r\n\r\n  const stripped = path.replace(/\\/+/g, '/')\r\n    .replace(/^(\\w+):/, '') || '/';\r\n\r\n  if (stripped !== '/') {\r\n    specials.push({\r\n      isDirectory: true,\r\n      isFile: false,\r\n      mime: null,\r\n      size: 0,\r\n      stat: {},\r\n      filename: '..',\r\n      path: parentDirectory(path) || '/'\r\n    });\r\n  }\r\n\r\n  return specials;\r\n};\r\n\r\n/**\r\n * Creates a FileReader (promisified)\r\n * @param {string} method The method to call\r\n * @param {ArrayBuffer} ab The ArrayBuffer\r\n * @param {string} mime The MIME type\r\n * @return {Promise}\r\n */\r\nconst createFileReader = (method, ab, mime) => new Promise((resolve, reject) => {\r\n  const b = new Blob([ab], {type: mime});\r\n  const r = new FileReader();\r\n  r.onerror = e => reject(e);\r\n  r.onloadend = () => resolve(r.result);\r\n  r[method](b);\r\n});\r\n\r\n/**\r\n * Converts a number (bytez) into human-readable string\r\n * @param {Number} bytes Input\r\n * @param {Boolean} [si=false] Use SI units\r\n * @return {string}\r\n */\r\nexport const humanFileSize = (bytes, si = false) => {\r\n  if (isNaN(bytes) || typeof bytes !== 'number') {\r\n    bytes = 0;\r\n  }\r\n\r\n  const thresh = si ? 1000 : 1024;\r\n  const units = si\r\n    ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\r\n    : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n\r\n  if (bytes < thresh) {\r\n    return bytes + ' B';\r\n  }\r\n\r\n  let u = -1;\r\n  do {\r\n    bytes /= thresh;\r\n    ++u;\r\n  } while (bytes >= thresh);\r\n\r\n  return `${bytes.toFixed(1)} ${units[u]}`;\r\n};\r\n\r\n/**\r\n * Transforms a readdir result\r\n * @param {object} root The path to the readdir root\r\n * @param Object[] files An array of readdir results\r\n * @param {object} options Options\r\n * @param {Boolean} [options.showHiddenFiles=false] Show hidden files\r\n * @param {Function} [options.filter] A filter\r\n * @param {string} [options.sortBy='filename'] Sort by this attribute\r\n * @param {string} [options.sortDir='asc'] Sort in this direction\r\n * @return {Object[]}\r\n */\r\nexport const transformReaddir = ({path}, files, options = {}) => {\r\n  options = {\r\n    showHiddenFiles: false,\r\n    sortBy: 'filename',\r\n    sortDir: 'asc',\r\n    ...options\r\n  };\r\n\r\n  let {sortDir, sortBy, filter} = options;\r\n  if (typeof filter !== 'function') {\r\n    filter = () => true;\r\n  }\r\n\r\n  if (['asc', 'desc'].indexOf(sortDir) === -1) {\r\n    sortDir = 'asc';\r\n  }\r\n\r\n  const filterHidden = options.showHiddenFiles\r\n    ? () => true\r\n    : file => file.filename.substr(0, 1) !== '.';\r\n\r\n  const sorter = sortMap[sortBy]\r\n    ? sortMap[sortBy]\r\n    : sortFn('string');\r\n\r\n  const modify = (file) => ({\r\n    ...file,\r\n    humanSize: humanFileSize(file.size)\r\n  });\r\n\r\n  // FIXME: Optimize this to one chain!\r\n\r\n  const sortedSpecial = createSpecials(path)\r\n    .sort(sorter(sortBy, sortDir))\r\n    .map(modify);\r\n\r\n  const sortedDirectories = files.filter(file => file.isDirectory)\r\n    .sort(sorter(sortBy, sortDir))\r\n    .filter(filterHidden)\r\n    .filter(filter)\r\n    .map(modify);\r\n\r\n  const sortedFiles = files.filter(file => !file.isDirectory)\r\n    .sort(sorter(sortBy, sortDir))\r\n    .filter(filterHidden)\r\n    .filter(filter)\r\n    .map(modify);\r\n\r\n  return [\r\n    ...sortedSpecial,\r\n    ...sortedDirectories,\r\n    ...sortedFiles\r\n  ];\r\n};\r\n\r\n/**\r\n * Transform an ArrayBuffer\r\n * @param {ArrayBuffer} ab The ArrayBuffer\r\n * @param {string} mime The MIME type\r\n * @param {string} type Transform to this type\r\n * @return {DOMString|string|Blob|ArrayBuffer}\r\n */\r\nexport const transformArrayBuffer = (ab, mime, type) => {\r\n  if (type === 'string') {\r\n    return createFileReader('readAsText', ab, mime);\r\n  } else if (type === 'uri') {\r\n    return createFileReader('readAsDataURL', ab, mime);\r\n  } else if (type === 'blob') {\r\n    return Promise.resolve(new Blob([ab], {type: mime}));\r\n  }\r\n\r\n  return Promise.resolve(ab);\r\n};\r\n\r\n/**\r\n * Gets an icon from file stat\r\n * @param {object} file The file stat object\r\n * @return {string|object}\r\n */\r\nexport const getFileIcon = map => {\r\n  const find = file => {\r\n    const found = Object.keys(map).find(re => {\r\n      const regexp = new RegExp(re);\r\n      return regexp.test(file.mime);\r\n    });\r\n\r\n    return found\r\n      ? map[found]\r\n      : {name: 'application-x-executable'};\r\n  };\r\n\r\n  return file => file.isDirectory\r\n    ? {name: 'folder'}\r\n    : find(file);\r\n};\r\n\r\n/**\r\n * Creates a file iter for scandir\r\n * @param {object} stat file stat\r\n * @return {object}\r\n */\r\nexport const createFileIter = stat => ({\r\n  isDirectory: false,\r\n  isFile: true,\r\n  mime: 'application/octet-stream',\r\n  icon: null,\r\n  size: -1,\r\n  path: null,\r\n  filename: null,\r\n  label: null,\r\n  stat: {},\r\n  id: null,\r\n  parent_id: null,\r\n  ...stat\r\n});\r\n\r\n/**\r\n * Get basename of a file\r\n * @param {string} path The path\r\n * @return {string}\r\n */\r\nexport const basename = path => path.split('/').reverse()[0];\r\n\r\n/*\r\n * Get path of a file\r\n * @param {string} path The path\r\n * @return {string}\r\n */\r\nexport const pathname = path => {\r\n  const split = path.split('/');\r\n  if (split.length === 2) {\r\n    split[1] = '';\r\n  } else {\r\n    split.splice(split.length - 1, 1);\r\n  }\r\n\r\n  return split.join('/');\r\n};\r\n\r\n/**\r\n * Gets prefix from vfs path\r\n * @param {string} str Input\r\n * @return {string}\r\n */\r\nexport const parseMountpointPrefix = str => {\r\n  const re = /^([\\w-_]+):+(.*)/;\r\n\r\n  const match = String(str)\r\n    .replace(/\\+/g, '/')\r\n    .match(re);\r\n\r\n  const [prefix] = Array.from(match || [])\r\n    .slice(1);\r\n\r\n  return prefix;\r\n};\r\n\r\n/**\r\n * Filters a mountpoint by user groups\r\n * @return {boolean}\r\n */\r\nexport const filterMountByGroups = userGroups => (mountGroups, strict = true) =>\r\n  mountGroups instanceof Array\r\n    ? mountGroups[strict ? 'every' : 'some'](g => userGroups.indexOf(g) !== -1)\r\n    : true;\r\n\r\n\r\n/**\r\n * Creates a list of VFS events to simulate server-side\r\n * file watching\r\n * @return {object[]}\r\n */\r\nexport const createWatchEvents = (method, args) => {\r\n  const events = [];\r\n  const options = args[args.length - 1] || {};\r\n\r\n  const movement = ['move', 'rename', 'copy'].indexOf(method) !== -1;\r\n  const invalid = ['readdir', 'download', 'url', 'exists', 'readfile', 'search', 'stat'].indexOf(method) !== -1;\r\n  const path = i => typeof i === 'string' ? i : i.path;\r\n\r\n  if (!invalid) {\r\n    const obj = {\r\n      method,\r\n      source: path(args[0]),\r\n      pid: options.pid\r\n    };\r\n\r\n    events.push(['osjs/vfs:directoryChanged', {\r\n      ...obj,\r\n      path: pathname(path(args[0])),\r\n    }]);\r\n\r\n    if (movement) {\r\n      events.push(['osjs/vfs:directoryChanged', {\r\n        ...obj,\r\n        path: pathname(path(args[1]))\r\n      }]);\r\n    }\r\n  }\r\n\r\n  return events;\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport * as mediaQuery from 'css-mediaquery';\r\nimport defaultIcon from '../styles/logo-blue-32x32.png';\r\nimport logger from '../logger';\r\n\r\nconst CASCADE_DISTANCE = 10;\r\nconst MINIMUM_WIDTH = 100;\r\nconst MINIMUM_HEIGHT = 100;\r\nconst ONTOP_ZINDEX = 8388635;\r\nconst BOTTOM_ZINDEX = 10;\r\n\r\n/*\r\n * Creates window attributes from an object\r\n */\r\nexport const createAttributes = attrs => ({\r\n  classNames: [],\r\n  modal: false,\r\n  ontop: false,\r\n  gravity: false,\r\n  moveable: true,\r\n  resizable: true,\r\n  focusable: true,\r\n  maximizable: true,\r\n  minimizable: true,\r\n  sessionable: true,\r\n  closeable: true,\r\n  header: true,\r\n  controls: true,\r\n  visibility: 'global',\r\n  shadowDOM: false,\r\n  clamp: true,\r\n  droppable: true,\r\n  mediaQueries: {\r\n    small: 'screen and (max-width: 640px)',\r\n    medium: 'screen and (min-width: 640px) and (max-width: 1024px)',\r\n    big: 'screen and (min-width: 1024px)'\r\n  },\r\n  minDimension: {\r\n    width: MINIMUM_WIDTH,\r\n    height: MINIMUM_HEIGHT\r\n  },\r\n  maxDimension: {\r\n    width: -1,\r\n    height: -1\r\n  },\r\n  ...attrs\r\n});\r\n\r\n/*\r\n * Creates window state from an object\r\n */\r\nexport const createState = (state, options, attrs) => ({\r\n  title: options.title || options.id,\r\n  icon: options.icon || defaultIcon,\r\n  media: null,\r\n  moving: false,\r\n  resizing: false,\r\n  loading: false,\r\n  focused: false,\r\n  maximized: false,\r\n  minimized: false,\r\n  zIndex: 1,\r\n  styles: {},\r\n  position: {\r\n    left: null,\r\n    top: null,\r\n    ...options.position\r\n  },\r\n  dimension: {\r\n    width: Math.max(attrs.minDimension.width, MINIMUM_WIDTH),\r\n    height: Math.max(attrs.minDimension.height, MINIMUM_HEIGHT),\r\n    ...options.dimension\r\n  },\r\n  ...state\r\n});\r\n\r\n/**\r\n * Creates data attributes for window DOM\r\n * @param {string} id\r\n * @param {WindowState} state\r\n * @param {WindowAttributes} attributes\r\n * @return {object}\r\n */\r\nexport const createDOMAttributes = (id, state, attributes) => ({\r\n  id: id,\r\n  media: state.media,\r\n  moving: state.moving,\r\n  resizing: state.resizing,\r\n  loading: state.loading,\r\n  focused: state.focused,\r\n  maximized: state.maximized,\r\n  minimized: state.minimized,\r\n  modal: attributes.modal,\r\n  ontop: attributes.ontop,\r\n  resizable: attributes.resizable,\r\n  moveable: attributes.moveable,\r\n  maximizable: attributes.maximizable,\r\n  minimizable: attributes.minimizable\r\n});\r\n\r\n/**\r\n * Creates styles for window DOM\r\n * @param {WindowState} state\r\n * @param {WindowAttributes} attributes\r\n * @return {object}\r\n */\r\nexport const createDOMStyles = (\r\n  {\r\n    zIndex,\r\n    styles,\r\n    position: {\r\n      top,\r\n      left\r\n    },\r\n    dimension: {\r\n      width,\r\n      height\r\n    }\r\n  },\r\n  {\r\n    ontop\r\n  }\r\n) => ({\r\n  top: String(top) + 'px',\r\n  left: String(left) + 'px',\r\n  height: String(height) + 'px',\r\n  width: String(width) + 'px',\r\n  zIndex: BOTTOM_ZINDEX + (ontop ? ONTOP_ZINDEX : 0) + zIndex,\r\n  ...styles\r\n});\r\n\r\n/*\r\n * Clamps position to viewport\r\n */\r\nexport const clampPosition = (rect, {dimension, position}) => {\r\n  const maxLeft = rect.width - dimension.width;\r\n  const maxTop = rect.height - dimension.height + rect.top;\r\n\r\n  // TODO: Make these an argument ?!\r\n  const minLeft = 0;\r\n  const minTop = 0;\r\n\r\n  return {\r\n    left: Math.max(minLeft, Math.min(maxLeft, position.left)),\r\n    top: Math.max(minTop, Math.max(rect.top, Math.min(maxTop, position.top)))\r\n  };\r\n};\r\n\r\n/*\r\n * Window rendering callback function\r\n */\r\nexport const renderCallback = (win, callback) => {\r\n  if (typeof callback === 'function') {\r\n    if (win.attributes.shadowDOM) {\r\n      try {\r\n        const mode = typeof win.attributes.shadowDOM === 'string'\r\n          ? win.attributes.shadowDOM\r\n          : 'open';\r\n\r\n        const shadow = win.$content.attachShadow({mode});\r\n\r\n        callback(shadow, win);\r\n\r\n        return;\r\n      } catch (e) {\r\n        logger.warn('Shadow DOM not supported?', e);\r\n      }\r\n    }\r\n\r\n    callback(win.$content, win);\r\n  }\r\n};\r\n\r\n/*\r\n * Gets new position based on \"gravity\"\r\n */\r\nexport const positionFromGravity = (win, rect, gravity) => {\r\n  let {left, top} = win.state.position;\r\n\r\n  if (gravity === 'center') {\r\n    left = (rect.width / 2) - (win.state.dimension.width / 2);\r\n    top = (rect.height / 2) - (win.state.dimension.height / 2);\r\n  } else if (gravity) {\r\n    let hasVertical =  gravity.match(/top|bottom/);\r\n    let hasHorizontal = gravity.match(/left|rigth/);\r\n\r\n    if (gravity.match(/top/)) {\r\n      top = rect.top;\r\n    } else if (gravity.match(/bottom/)) {\r\n      top = rect.height - (win.state.dimension.height) + rect.top;\r\n    }\r\n\r\n    if (gravity.match(/left/)) {\r\n      left = rect.left;\r\n    } else if (gravity.match(/right/)) {\r\n      left = rect.width - (win.state.dimension.width);\r\n    }\r\n\r\n    if (!hasVertical && gravity.match(/center/)) {\r\n      top = (rect.height / 2) - (win.state.dimension.height / 2);\r\n    } else if (!hasHorizontal && gravity.match(/center/)) {\r\n      left = (rect.width / 2) - (win.state.dimension.width / 2);\r\n    }\r\n  }\r\n\r\n  return {left, top};\r\n};\r\n\r\n/*\r\n * Gets new dimension based on container\r\n */\r\nexport const dimensionFromElement = (win, rect, container) => {\r\n  const innerBox = (container.parentNode.classList.contains('osjs-gui')\r\n    ? container.parentNode\r\n    : container).getBoundingClientRect();\r\n\r\n  const outerBox = win.$content.getBoundingClientRect();\r\n  const diffY = Math.ceil(outerBox.height - innerBox.height);\r\n  const diffX = Math.ceil(outerBox.width - innerBox.width);\r\n  const topHeight = win.$header.offsetHeight;\r\n\r\n  const {left, top} = win.state.position;\r\n  const min = win.attributes.minDimension;\r\n  const max = win.attributes.maxDimension;\r\n\r\n  let width = Math.max(container.offsetWidth + diffX, min.width);\r\n  let height = Math.max(container.offsetHeight + diffY + topHeight, min.height);\r\n\r\n  if (max.width > 0) {\r\n    width = Math.min(width, max.width);\r\n  }\r\n\r\n  if (max.height > 0) {\r\n    height = Math.min(height, max.height);\r\n  }\r\n\r\n  width = Math.max(width, container.offsetWidth);\r\n  height = Math.max(height, container.offsetHeight);\r\n\r\n  if (rect) {\r\n    width = Math.min(width, rect.width - left);\r\n    height = Math.min(height, rect.height - top);\r\n  }\r\n\r\n  return {width, height};\r\n};\r\n\r\n/*\r\n * Transforms vector values (ex float to integer)\r\n */\r\nexport const transformVectors = (rect, {width, height}, {top, left}) => {\r\n  const transform = (val, attr) => {\r\n    if (!isNaN(val)) {\r\n      return val > 1 && Number.isInteger(val)\r\n        ? val\r\n        : Math.round(rect[attr] * parseFloat(val));\r\n    }\r\n\r\n    return val;\r\n  };\r\n\r\n  return {\r\n    dimension: {\r\n      width: transform(width, 'width'),\r\n      height: transform(height, 'height')\r\n    },\r\n    position: {\r\n      top: transform(top, 'height'),\r\n      left: transform(left, 'width')\r\n    }\r\n  };\r\n};\r\n\r\n/*\r\n * Creates a clamper for resize/move\r\n */\r\nconst clamper = win => {\r\n  const {maxDimension, minDimension} = win.attributes;\r\n  const {position, dimension} = win.state;\r\n\r\n  const maxPosition = {\r\n    left: position.left + dimension.width - minDimension.width,\r\n    top: position.top + dimension.height - minDimension.height\r\n  };\r\n\r\n  const clamp = (min, max, current) => {\r\n    const value = min === -1 ? current : Math.max(min, current);\r\n    return max === -1 ? value : Math.min(max, value);\r\n  };\r\n\r\n  return (width, height, top, left) => ({\r\n    width: clamp(minDimension.width, maxDimension.width, width),\r\n    height: clamp(minDimension.height, maxDimension.height, height),\r\n    top: clamp(-1, maxPosition.top, top),\r\n    left: clamp(-1, maxPosition.left, left)\r\n  });\r\n};\r\n\r\n/*\r\n * Creates a resize handler\r\n */\r\nexport const resizer = (win, handle) => {\r\n  const clamp = clamper(win);\r\n  const {position, dimension} = win.state;\r\n  const directions = handle.getAttribute('data-direction').split('');\r\n  const going = dir => directions.indexOf(dir) !== -1;\r\n  const xDir = going('e') ? 1 : (going('w') ? -1 : 0);\r\n  const yDir = going('s') ? 1 : (going('n') ? -1 : 0);\r\n\r\n  return (diffX, diffY) => {\r\n    const width = dimension.width + (diffX * xDir);\r\n    const height = dimension.height + (diffY * yDir);\r\n    const top = yDir === -1 ? position.top + diffY : position.top;\r\n    const left = xDir === -1 ? position.left + diffX : position.left;\r\n\r\n    return clamp(width, height, top, left);\r\n  };\r\n};\r\n\r\n/*\r\n * Creates a movement handler\r\n */\r\nexport const mover = (win, rect) => {\r\n  const {position} = win.state;\r\n\r\n  return (diffX, diffY) => {\r\n    const top = Math.max(position.top + diffY, rect.top);\r\n    const left = position.left + diffX;\r\n\r\n    return {top, left};\r\n  };\r\n};\r\n\r\n/*\r\n * Calculates a new initial position for window\r\n */\r\nexport const getCascadePosition = (win, rect, pos) => {\r\n  const startX = CASCADE_DISTANCE + rect.left;\r\n  const startY = CASCADE_DISTANCE + rect.top;\r\n  const distance = CASCADE_DISTANCE;\r\n  const wrap = CASCADE_DISTANCE * 2;\r\n\r\n  const newX = startX + ((win.wid % wrap) * distance);\r\n  const newY = startY + ((win.wid % wrap) * distance);\r\n  const position = (key, value) => typeof pos[key] === 'number' && Number.isInteger(pos[key])\r\n    ? Math.max(rect[key], pos[key])\r\n    : value;\r\n\r\n  return {top: position('top', newY), left: position('left', newX)};\r\n};\r\n\r\nconst getScreenOrientation = screen => screen && screen.orientation\r\n  ? screen.orientation.type\r\n  : window.matchMedia('(orientation: portrait)') ? 'portrait' : 'landscape';\r\n\r\n/*\r\n * Gets a media query name from a map\r\n */\r\nexport const getMediaQueryName = (win) => Object.keys(win.attributes.mediaQueries)\r\n  .filter(name => mediaQuery.match(win.attributes.mediaQueries[name], {\r\n    type: 'screen',\r\n    orientation: getScreenOrientation(window.screen),\r\n    width: win.$element.offsetWidth || win.state.dimension.width,\r\n    height: win.$element.offsetHeight || win.state.dimension.height\r\n  }))\r\n  .pop();\r\n\r\n/**\r\n * Loads [certain] window options from configuration\r\n */\r\nexport const loadOptionsFromConfig = (config, appName, windowId) => {\r\n  const matchStringOrRegex = (str, matcher) => matcher instanceof RegExp\r\n    ? !!str.match(matcher)\r\n    : str === matcher;\r\n\r\n  const found = config.find(({application, window}) => {\r\n    if (!application && !window) {\r\n      return false;\r\n    } else if (application && !matchStringOrRegex(appName, application)) {\r\n      return false;\r\n    } else if (window && !matchStringOrRegex(windowId || '', window)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const foundOptions = found && found.options ? found.options : {};\r\n  const allowedProperties = ['position', 'dimension', 'attributes'];\r\n\r\n  return allowedProperties.reduce((obj, key) => (foundOptions[key]\r\n    ? {...obj, [key]: foundOptions[key]}\r\n    : obj),\r\n  {});\r\n};\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {\r\n  transformReaddir,\r\n  transformArrayBuffer,\r\n  createFileIter\r\n} from './utils/vfs';\r\n\r\n/**\r\n * VFS Method Options\r\n *\r\n * TODO: typedef\r\n * @typedef {Object} VFSMethodOptions\r\n */\r\n\r\n/**\r\n * VFS Download Options\r\n *\r\n * @typedef {Object} VFSDownloadOptions\r\n * @property {boolean} [readfile] Set to false to force backend fetch\r\n */\r\n\r\n/**\r\n * VFS File Object\r\n *\r\n * @typedef {Object} VFSFile\r\n * @property {string} path\r\n * @property {string} [filename]\r\n * @property {boolean} [isDirectory]\r\n * @property {boolean} [isFile]\r\n * @property {string} [mime]\r\n * @property {object} [stat]\r\n */\r\n\r\n// Cache the capability of each mount point\r\nlet capabilityCache = {};\r\n\r\n// Makes sure our input paths are object(s)\r\nconst pathToObject = path => ({\r\n  id: null,\r\n  ...typeof path === 'string' ? {path} : path\r\n});\r\n\r\n// Handles directory listing result(s)\r\nconst handleDirectoryList = (path, options) => result =>\r\n  Promise.resolve(result.map(stat => createFileIter(stat)))\r\n    .then(result => transformReaddir(pathToObject(path), result, {\r\n      showHiddenFiles: options.showHiddenFiles !== false,\r\n      filter: options.filter\r\n    }));\r\n\r\n/**\r\n * Get vfs capabilities\r\n *\r\n * @param {string|VFSFile} path The path of a file\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<object[]>} An object of capabilities\r\n */\r\nexport const capabilities = (adapter, mount) => (path, options = {}) => {\r\n  const cached = capabilityCache[mount.name];\r\n  if (cached) {\r\n    return Promise.resolve(cached);\r\n  }\r\n  return adapter.capabilities(pathToObject(path), options, mount)\r\n    .then(res => {\r\n      capabilityCache[mount.name] = res;\r\n      return res;\r\n    });\r\n};\r\n\r\n\r\n/**\r\n * Read a directory\r\n *\r\n * @param {string|VFSFile} path The path to read\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<object[]>} A list of files\r\n */\r\nexport const readdir = (adapter, mount) => (path, options = {}) =>\r\n  adapter.readdir(pathToObject(path), options, mount)\r\n    .then(handleDirectoryList(path, options));\r\n\r\n/**\r\n * Reads a file\r\n *\r\n * Available types are 'arraybuffer', 'blob', 'uri' and 'string'\r\n *\r\n * @param {string|VFSFile} path The path to read\r\n * @param {string} [type=string] Return this content type\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<ArrayBuffer>}\r\n */\r\nexport const readfile = (adapter, mount) => (path, type = 'string', options = {}) =>\r\n  adapter.readfile(pathToObject(path), type, options, mount)\r\n    .then(response => transformArrayBuffer(response.body, response.mime, type));\r\n\r\n/**\r\n * Writes a file\r\n * @param {string|VFSFile} path The path to write\r\n * @param {ArrayBuffer|Blob|string} data The data\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<number>} File size\r\n */\r\nexport const writefile = (adapter, mount) => (path, data, options = {}) => {\r\n  const binary = (data instanceof ArrayBuffer || data instanceof Blob)\r\n    ? data\r\n    : new Blob([data], {type: 'application/octet-stream'});\r\n\r\n  return adapter.writefile(pathToObject(path), binary, options, mount);\r\n};\r\n\r\n/**\r\n * Copies a file or directory (move)\r\n * @param {string|VFSFile} from The source (from)\r\n * @param {string|VFSFile} to The destination (to)\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<boolean>}\r\n */\r\nexport const copy = (adapter, mount) => (from, to, options = {}) =>\r\n  adapter.copy(pathToObject(from), pathToObject(to), options, mount);\r\n\r\n/**\r\n * Renames a file or directory (move)\r\n * @param {string|VFSFile} from The source (from)\r\n * @param {string|VFSFile} to The destination (to)\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<boolean>}\r\n */\r\nexport const rename = (adapter, mount) => (from, to, options = {}) =>\r\n  adapter.rename(pathToObject(from), pathToObject(to), options, mount);\r\n\r\n/**\r\n * Alias of 'rename'\r\n * @param {string|VFSFile} from The source (from)\r\n * @param {string|VFSFile} to The destination (to)\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<boolean>}\r\n */\r\nexport const move = rename;\r\n\r\n/**\r\n * Creates a directory\r\n * @param {string|VFSFile} path The path to new directory\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<boolean>}\r\n */\r\nexport const mkdir = (adapter, mount) => (path, options = {}) =>\r\n  adapter.mkdir(pathToObject(path), options, mount);\r\n\r\n/**\r\n * Removes a file or directory\r\n * @param {string|VFSFile} path The path to remove\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<boolean>}\r\n */\r\nexport const unlink = (adapter, mount) => (path, options = {}) =>\r\n  adapter.unlink(pathToObject(path), options, mount);\r\n\r\n/**\r\n * Checks if path exists\r\n * @param {string|VFSFile} path The path to check\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<boolean>}\r\n */\r\nexport const exists = (adapter, mount) => (path, options = {}) =>\r\n  adapter.exists(pathToObject(path), options, mount);\r\n\r\n/**\r\n * Gets the stats of the file or directory\r\n * @param {string|VFSFile} path The path to check\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<object>}\r\n */\r\nexport const stat = (adapter, mount) => (path, options = {}) =>\r\n  adapter.stat(pathToObject(path), options, mount)\r\n    .then(stat => createFileIter(stat));\r\n\r\n/**\r\n * Gets an URL to a resource defined by file\r\n * @param {string|VFSFile} path The file\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<string>}\r\n */\r\nexport const url = (adapter, mount) => (path, options = {}) =>\r\n  adapter.url(pathToObject(path), options, mount);\r\n\r\n/**\r\n * Initiates a native browser download of the file\r\n * @param {string|VFSFile} path The file\r\n * @param {VFSDownloadOptions} [options] Options\r\n * @return {Promise<any>}\r\n */\r\nexport const download = (adapter, mount) => (path, options = {}) =>\r\n  typeof adapter.download === 'function' && options.readfile !== true\r\n    ? adapter.download(pathToObject(path), options, mount)\r\n    : readfile(adapter)(path, 'blob')\r\n      .then(body => {\r\n        const filename = pathToObject(path).path.split('/').splice(-1)[0];\r\n        const url = window.URL.createObjectURL(body);\r\n\r\n        const a = document.createElement('a');\r\n        a.style.display = 'none';\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n\r\n        a.click();\r\n\r\n        setTimeout(() => {\r\n          window.URL.revokeObjectURL(url);\r\n          a.remove();\r\n        }, 1);\r\n      });\r\n\r\n/**\r\n * Searches for files and folders\r\n * @param {string|VFSFile} root The root\r\n * @param {string} pattern Search pattern\r\n * @param {VFSMethodOptions} [options] Options\r\n * @return {Promise<object[]>} A list of files\r\n */\r\nexport const search = (adapter, mount) => (root, pattern, options = {}) => {\r\n  if (mount.attributes && mount.attributes.searchable === false) {\r\n    return Promise.resolve([]);\r\n  }\r\n\r\n  return adapter.search(pathToObject(root), pattern, options, mount)\r\n    .then(handleDirectoryList(root, options));\r\n};\r\n\r\n/**\r\n * Touches a file\r\n * @param {string|VFSFile} path File path\r\n * @return {Promise<boolean>}\r\n */\r\nexport const touch = (adapter, mount) => (path, options = {}) =>\r\n  adapter.touch(pathToObject(path), options, mount);\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\nimport logger from './logger';\r\n\r\nconst eventNames = ['open', 'close', 'message', 'error'];\r\n\r\n/**\r\n * Websocket options\r\n * @typedef {Object} WebsocketOptions\r\n * @property {boolean} [reconnect=true] Enable reconnection\r\n * @property {number} [interval=1000] Reconnect interval\r\n * @property {boolean} [open=true] Immediately open socket after creation\r\n */\r\n\r\n/**\r\n * Application Socket\r\n *\r\n * This is just an abstraction above the standard browser provided `WebSocket` class.\r\n * Since this class implements the EventHandler, use the `.on('event')` pattern instead of `.onevent`.\r\n */\r\nexport default class Websocket extends EventEmitter {\r\n\r\n  /**\r\n   * Create a new Websocket\r\n   * @param {string} name Instance name\r\n   * @param {string} uri Connection URI\r\n   * @param {WebsocketOptions} [options={}] Websocket options\r\n   */\r\n  constructor(name, uri, options = {}) {\r\n    logger.debug('Websocket::constructor()', name, uri);\r\n\r\n    super('Websocket@' + name);\r\n\r\n    /**\r\n     * Socket URI\r\n     * @type {string}\r\n     * @readonly\r\n     */\r\n    this.uri = uri;\r\n\r\n    /**\r\n     * If socket is closed\r\n     * @type {boolean}\r\n     */\r\n    this.closed = false;\r\n\r\n    /**\r\n     * If socket is connected\r\n     * @type {boolean}\r\n     */\r\n    this.connected = false;\r\n\r\n    /**\r\n     * If socket is connecting\r\n     * @type {boolean}\r\n     */\r\n    this.connecting = false;\r\n\r\n    /**\r\n     * If socket is reconnecting\r\n     * @type {boolean}\r\n     */\r\n    this.reconnecting = false;\r\n\r\n    /**\r\n     * If socket failed to connect\r\n     * @type {boolean}\r\n     */\r\n    this.connectfailed = false;\r\n\r\n    /**\r\n     * Options\r\n     * @type {WebsocketOptions}\r\n     * @readonly\r\n     */\r\n    this.options = {\r\n      reconnect: true,\r\n      interval: 1000,\r\n      open: true,\r\n      ...options\r\n    };\r\n\r\n    /**\r\n     * The Websocket\r\n     * @type {WebSocket}\r\n     */\r\n    this.connection = null;\r\n\r\n    this._attachEvents();\r\n\r\n    if (this.options.open) {\r\n      this.open();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroys the current connection\r\n   * @return {void}\r\n   * @private\r\n   */\r\n  _destroyConnection() {\r\n    if (!this.connection) {\r\n      return;\r\n    }\r\n\r\n    eventNames.forEach(name => {\r\n      this.connection[`on${name}`] = () => {};\r\n    });\r\n\r\n    this.reconnecting = clearInterval(this.reconnecting);\r\n    this.connection = null;\r\n  }\r\n\r\n  /**\r\n   * Attaches internal events\r\n   * @private\r\n   */\r\n  _attachEvents() {\r\n    this.on('open', ev => {\r\n      const reconnected = !!this.reconnecting;\r\n\r\n      this.connected = true;\r\n      this.reconnecting = false;\r\n      this.connectfailed = false;\r\n      this.reconnecting = clearInterval(this.reconnecting);\r\n\r\n      this.emit('connected', ev, reconnected);\r\n    });\r\n\r\n    this.on('close', ev => {\r\n      if (!this.connected && !this.connectfailed) {\r\n        this.emit('failed', ev);\r\n\r\n        this.connectfailed = true;\r\n      }\r\n\r\n      clearInterval(this.reconnecting);\r\n\r\n      this._destroyConnection();\r\n\r\n      this.connected = false;\r\n\r\n      if (this.options.reconnect) {\r\n        this.reconnecting = setInterval(() => {\r\n          if (!this.closed) {\r\n            this.open();\r\n          }\r\n        }, this.options.interval);\r\n      }\r\n\r\n      this.emit('disconnected', ev, this.closed);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Opens the connection\r\n   * @param {boolean} [reconnect=false] Force reconnection\r\n   */\r\n  open(reconnect = false) {\r\n    if (this.connection && !reconnect) {\r\n      return;\r\n    }\r\n\r\n    this._destroyConnection();\r\n\r\n    this.reconnecting = clearInterval(this.reconnecting);\r\n    this.connection = new WebSocket(this.uri);\r\n    this.closed = false;\r\n\r\n    eventNames.forEach(name => {\r\n      this.connection[`on${name}`] = (...args) => this.emit(name, ...args);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Wrapper for sending data\r\n   */\r\n  send(...args) {\r\n    return this.connection.send(...args);\r\n  }\r\n\r\n  /**\r\n   * Wrapper for closing\r\n   */\r\n  close(...args) {\r\n    this.closed = true;\r\n\r\n    return this.connection.close(...args);\r\n  }\r\n\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\n\r\nimport {supportsPassive} from './utils/dom';\r\nimport {getEvent, matchKeyCombo} from './utils/input';\r\nimport {resizer, mover, getMediaQueryName, getCascadePosition} from './utils/windows';\r\n\r\nconst isPassive = supportsPassive();\r\nconst touchArg = isPassive ? {passive: true} : false;\r\n\r\n/*\r\n * Map of available \"actions\"\r\n */\r\nconst actionMap = {\r\n  maximize: (win) => win.maximize() ? null : win.restore(),\r\n  minimize: (win) => win.minimize(),\r\n  close: (win) => win.close()\r\n};\r\n\r\n/**\r\n * Default Window Behavior\r\n *\r\n * Controls certain events and their interaction with a window\r\n */\r\nexport default class WindowBehavior {\r\n  /**\r\n   * Create window behavior\r\n   *\r\n   * @param {Core} core Core reference\r\n   */\r\n  constructor(core) {\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * Last action\r\n     * @type {string}\r\n     */\r\n    this.lastAction = null;\r\n\r\n    /**\r\n     * LoFi DOM Element\r\n     * @type {Element}\r\n     * @readonly\r\n     */\r\n    this.$lofi = document.createElement('div');\r\n    this.$lofi.className = 'osjs-window-behavior-lofi';\r\n  }\r\n\r\n  /**\r\n   * Initializes window behavior\r\n   * @param {Window} win Window reference\r\n   */\r\n  init(win) {\r\n    const ontouchstart = ev => this.mousedown(ev, win);\r\n    const onmousedown = ev => this.mousedown(ev, win);\r\n    const onclick = ev => this.click(ev, win);\r\n    const ondblclick = ev => this.dblclick(ev, win);\r\n\r\n    const onicondblclick = ev => {\r\n      ev.stopPropagation();\r\n      ev.preventDefault();\r\n      this.iconDblclick(ev, win);\r\n    };\r\n\r\n    const oniconclick = ev => {\r\n      ev.stopPropagation();\r\n      ev.preventDefault();\r\n\r\n      this.iconClick(ev, win);\r\n    };\r\n\r\n    const ontrasitionend = ev => {\r\n      if (win) {\r\n        win.emit('transitionend');\r\n      }\r\n\r\n      this.core.emit('osjs/window:transitionend', ev, win);\r\n    };\r\n\r\n    win.$element.addEventListener('touchstart', ontouchstart, touchArg);\r\n    win.$element.addEventListener('mousedown', onmousedown);\r\n    win.$element.addEventListener('click', onclick);\r\n    win.$element.addEventListener('dblclick', ondblclick);\r\n    win.$element.addEventListener('transitionend', ontrasitionend);\r\n\r\n    if (win.$icon) {\r\n      win.$icon.addEventListener('dblclick', onicondblclick);\r\n      win.$icon.addEventListener('click', oniconclick);\r\n    }\r\n\r\n    win.on('resized,rendered', () => {\r\n      win.setState('media', getMediaQueryName(win));\r\n    });\r\n\r\n    win.on('destroy', () => {\r\n      if (win.$element) {\r\n        win.$element.removeEventListener('touchstart', ontouchstart, touchArg);\r\n        win.$element.removeEventListener('mousedown', onmousedown);\r\n        win.$element.removeEventListener('click', onclick);\r\n        win.$element.removeEventListener('dblclick', ondblclick);\r\n        win.$element.removeEventListener('transitionend', ontrasitionend);\r\n      }\r\n\r\n      if (win.$icon) {\r\n        win.$icon.removeEventListener('dblclick', onicondblclick);\r\n        win.$icon.removeEventListener('click', oniconclick);\r\n      }\r\n    });\r\n\r\n    const rect = {top: 0, left: 0};\r\n    const {top, left} = getCascadePosition(win, rect, win.state.position);\r\n    win.state.position.top = top;\r\n    win.state.position.left = left;\r\n    win.state.media = getMediaQueryName(win);\r\n  }\r\n\r\n  /**\r\n   * Handles Mouse Click Event\r\n   * @param {Event} ev Browser Event\r\n   * @param {Window} win Window reference\r\n   */\r\n  click(ev, win) {\r\n    if (this.lastAction) {\r\n      return;\r\n    }\r\n\r\n    const target = ev.target;\r\n    const hitButton = target.classList.contains('osjs-window-button');\r\n\r\n    if (hitButton) {\r\n      const action =  ev.target.getAttribute('data-action');\r\n      actionMap[action](win);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles Mouse Double Click Event\r\n   * @param {Event} ev Browser Event\r\n   * @param {Window} win Window reference\r\n   */\r\n  dblclick(ev, win) {\r\n    if (this.lastAction) {\r\n      return;\r\n    }\r\n\r\n    const target = ev.target;\r\n    const hitTitle = target.classList.contains('osjs-window-header');\r\n\r\n    if (hitTitle) {\r\n      if (win.state.maximized) {\r\n        win.restore();\r\n      } else if (win.state.minimized) {\r\n        win.raise();\r\n      } else {\r\n        win.maximize();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles Mouse Down Event\r\n   * @param {Event} ev Browser Event\r\n   * @param {Window} win Window reference\r\n   */\r\n  mousedown(ev, win) {\r\n    let attributeSet = false;\r\n\r\n    const {moveable, resizable} = win.attributes;\r\n    const {maximized} = win.state;\r\n    const {lofi, moveKeybinding} = this.core.config('windows');\r\n    const {clientX, clientY, touch, target} = getEvent(ev);\r\n\r\n    const checkMove = matchKeyCombo(moveKeybinding, ev)\r\n      ? win.$element.contains(target)\r\n      : target.classList.contains('osjs-window-header');\r\n\r\n    const rect = this.core.has('osjs/desktop')\r\n      ? this.core.make('osjs/desktop').getRect()\r\n      : {top: 0, left: 0};\r\n\r\n    const resize = target.classList.contains('osjs-window-resize')\r\n      ? resizer(win, target)\r\n      : null;\r\n\r\n    const move = checkMove\r\n      ? mover(win, {top: 0, left: 0})\r\n      : null;\r\n\r\n    let actionCallback;\r\n\r\n    const mousemove = (ev) => {\r\n      if (!isPassive) {\r\n        ev.preventDefault();\r\n      }\r\n\r\n      if (maximized || (!moveable && move) || (!resizable && resize)) {\r\n        return;\r\n      }\r\n\r\n      const transformedEvent = getEvent(ev);\r\n      const posX = resize ? Math.max(rect.left, transformedEvent.clientX) : transformedEvent.clientX;\r\n      const posY = resize ? Math.max(rect.top, transformedEvent.clientY) : transformedEvent.clientY;\r\n      const diffX = posX - clientX;\r\n      const diffY = posY - clientY;\r\n\r\n      if (resize) {\r\n        const {width, height, top, left} = resize(diffX, diffY);\r\n\r\n        actionCallback = () => {\r\n          win._setState('dimension', {width, height}, false);\r\n          win._setState('position', {top, left}, false);\r\n        };\r\n\r\n        if (lofi) {\r\n          this.$lofi.style.top = `${top}px`;\r\n          this.$lofi.style.left = `${left}px`;\r\n          this.$lofi.style.width = `${width}px`;\r\n          this.$lofi.style.height = `${height}px`;\r\n        } else {\r\n          actionCallback();\r\n        }\r\n\r\n        this.lastAction = 'resize';\r\n      } else if (move) {\r\n        const position = move(diffX, diffY);\r\n\r\n        actionCallback = () => {\r\n          win._setState('position', position, false);\r\n        };\r\n\r\n        if (lofi) {\r\n          this.$lofi.style.top = `${position.top}px`;\r\n          this.$lofi.style.left = `${position.left}px`;\r\n        } else {\r\n          actionCallback();\r\n        }\r\n\r\n        this.lastAction = 'move';\r\n      }\r\n\r\n      if (this.lastAction) {\r\n        win._setState(this.lastAction === 'move' ? 'moving' : 'resizing', true);\r\n\r\n        if (!attributeSet) {\r\n          this.core.$root.setAttribute('data-window-action', String(true));\r\n          attributeSet = true;\r\n        }\r\n      }\r\n    };\r\n\r\n    const mouseup = () => {\r\n      if (touch) {\r\n        document.removeEventListener('touchmove', mousemove, touchArg);\r\n        document.removeEventListener('touchend', mouseup, touchArg);\r\n      } else {\r\n        document.removeEventListener('mousemove', mousemove);\r\n        document.removeEventListener('mouseup', mouseup);\r\n      }\r\n\r\n      if (lofi) {\r\n        this.$lofi.remove();\r\n\r\n        if (actionCallback) {\r\n          actionCallback();\r\n        }\r\n\r\n        actionCallback = undefined;\r\n      }\r\n\r\n      if (this.lastAction === 'move') {\r\n        win.emit('moved', {...win.state.position}, win);\r\n        win._setState('moving', false);\r\n      } else if (this.lastAction === 'resize') {\r\n        win.emit('resized', {...win.state.dimension}, win);\r\n        win._setState('resizing', false);\r\n      }\r\n\r\n      this.core.$root.setAttribute('data-window-action', String(false));\r\n    };\r\n\r\n\r\n    if (!win.focus()) {\r\n      win.setNextZindex();\r\n    }\r\n\r\n    if (move || resize) {\r\n      if (touch) {\r\n        document.addEventListener('touchmove', mousemove, touchArg);\r\n        document.addEventListener('touchend', mouseup, touchArg);\r\n      } else {\r\n        document.addEventListener('mousemove', mousemove);\r\n        document.addEventListener('mouseup', mouseup);\r\n      }\r\n    }\r\n\r\n    this.lastAction = null;\r\n\r\n    if (this.core.has('osjs/contextmenu')) {\r\n      this.core.make('osjs/contextmenu').hide();\r\n    }\r\n\r\n    if (lofi) {\r\n      this.$lofi.style.zIndex = win.state.zIndex + 1;\r\n      this.$lofi.style.top = `${win.state.position.top}px`;\r\n      this.$lofi.style.left = `${win.state.position.left}px`;\r\n      this.$lofi.style.width = `${win.state.dimension.width}px`;\r\n      this.$lofi.style.height = `${win.state.dimension.height}px`;\r\n\r\n      if (!this.$lofi.parentNode) {\r\n        document.body.appendChild(this.$lofi);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles Icon Double Click Event\r\n   * @param {Event} ev Browser Event\r\n   * @param {Window} win Window reference\r\n   */\r\n  iconDblclick(ev, win) {\r\n    win.close();\r\n  }\r\n\r\n  /**\r\n   * Handles Icon Click Event\r\n   * @param {Event} ev Browser Event\r\n   * @param {Window} win Window reference\r\n   */\r\n  iconClick(ev, win) {\r\n    const {minimized, maximized} = win.state;\r\n    const {minimizable, maximizable, closeable} = win.attributes;\r\n    const _ = this.core.make('osjs/locale').translate;\r\n\r\n    this.core.make('osjs/contextmenu', {\r\n      position: ev,\r\n      menu: [{\r\n        label: minimized ? _('LBL_RAISE') : _('LBL_MINIMIZE'),\r\n        disabled: !minimizable,\r\n        onclick: () => minimized ? win.raise() : win.minimize()\r\n      }, {\r\n        label: maximized ? _('LBL_RESTORE') : _('LBL_MAXIMIZE'),\r\n        disabled: !maximizable,\r\n        onclick: () => maximized ? win.restore() : win.maximize()\r\n      }, {\r\n        label: _('LBL_CLOSE'),\r\n        disabled: !closeable,\r\n        onclick: () => win.close()\r\n      }]\r\n    });\r\n  }\r\n}\r\n","/*\r\n * OS.js - JavaScript Cloud/Web Desktop Platform\r\n *\r\n * Copyright (c) Anders Evenrud <andersevenrud@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * @author  Anders Evenrud <andersevenrud@gmail.com>\r\n * @license Simplified BSD License\r\n */\r\nimport {EventEmitter} from '@osjs/event-emitter';\r\nimport {droppable} from './utils/dnd';\r\nimport {escapeHtml, createCssText, supportsTransition, getActiveElement} from './utils/dom';\r\nimport {\r\n  createAttributes,\r\n  createState,\r\n  createDOMAttributes,\r\n  createDOMStyles,\r\n  clampPosition,\r\n  renderCallback,\r\n  transformVectors,\r\n  positionFromGravity,\r\n  dimensionFromElement\r\n} from './utils/windows';\r\nimport logger from './logger';\r\n\r\n/**\r\n * Window dimension definition\r\n * @typedef {Object} WindowDimension\r\n * @property {number} width Width in pixels (or float for percentage in setters)\r\n * @property {number} height Height in pixels (or float for percentage in setters)\r\n */\r\n\r\n/**\r\n * Window position definition\r\n * @typedef {Object} WindowPosition\r\n * @property {number} left Left in pixels (or float for percentage in setters)\r\n * @property {number} top Top in pixels (or float for percentage in setters)\r\n */\r\n\r\n/**\r\n * Window session\r\n * @typedef {Object} WindowSession\r\n * @property {number} id\r\n * @property {boolean} maximized\r\n * @property {boolean} minimized\r\n * @property {WindowPosition} position\r\n * @property {WindowDimension} dimension\r\n */\r\n\r\n/**\r\n * Window attributes definition\r\n *\r\n * @typedef {Object} WindowAttributes\r\n * @property {string[]} [classNames=[]] A list of class names\r\n * @property {boolean} [ontop=false] If always on top\r\n * @property {string} [gravity] Gravity (center/top/left/right/bottom or any combination)\r\n * @property {boolean} [resizable=true] If resizable\r\n * @property {boolean} [focusable=true] If focusable\r\n * @property {boolean} [maximizable=true] If window if maximizable\r\n * @property {boolean} [minimizable=true] If minimizable\r\n * @property {boolean} [moveable=true] If moveable\r\n * @property {boolean} [closeable=true] If closeable\r\n * @property {boolean} [header=true] Show header\r\n * @property {boolean} [controls=true] Show controls\r\n * @property {string} [visibility=global] Global visibility, 'restricted' to hide from window lists etc.\r\n * @property {boolean} [clamp=true] Clamp the window position upon creation\r\n * @property {boolean | {dataTransferProperty?: 'files' | 'items'}} [droppable=true] If window should have the default drop action\r\n * @property {WindowDimension} [minDimension] Minimum dimension\r\n * @property {WindowDimension} [maxDimension] Maximum dimension\r\n * @property {{name: string}} [mediaQueries] A map of matchMedia to name\r\n */\r\n\r\n/**\r\n * Window state definition\r\n *\r\n * @typedef {Object} WindowState\r\n * @property {string} title Title\r\n * @property {string} icon Icon\r\n * @property {boolean} [moving=false] If moving\r\n * @property {boolean} [resizing=false] If resizing\r\n * @property {boolean} [loading=false] If loading\r\n * @property {boolean} [focused=false] If focused\r\n * @property {boolean} [maximized=false] If maximized\r\n * @property {boolean} [mimimized=false] If mimimized\r\n * @property {boolean} [modal=false] If modal to the parent\r\n * @property {number} [zIndex=10] The z-index (auto calculated)\r\n * @property {WindowPosition} [position] Position\r\n * @property {WindowDimension} [dimension] Dimension\r\n */\r\n\r\n/**\r\n * Window options definition\r\n *\r\n * @typedef {Object} WindowOptions\r\n * @property {string} id Window Id (not globaly unique)\r\n * @property {string} [title] Window Title\r\n * @property {string} [icon] Window Icon\r\n * @property {Window} [parent] The parent Window reference\r\n * @property {string|Function} [template] The Window HTML template (or function with signature (el, win) for programatic construction)\r\n * @property {Function} [ondestroy] A callback function when window destructs to interrupt the procedure\r\n * @property {WindowPosition|string} [position] Window position\r\n * @property {WindowDimension} [dimension] Window dimension\r\n * @property {WindowAttributes} [attributes] Apply Window attributes\r\n * @property {WindowState} [state] Apply Window state\r\n */\r\n\r\nlet windows = [];\r\nlet windowCount = 0;\r\nlet nextZindex = 1;\r\nlet lastWindow = null;\r\n\r\n/*\r\n * Default window template\r\n */\r\nconst TEMPLATE = `<div class=\"osjs-window-inner\">\r\n  <div class=\"osjs-window-header\">\r\n    <div class=\"osjs-window-icon\">\r\n      <div></div>\r\n    </div>\r\n    <div class=\"osjs-window-title\"></div>\r\n    <div class=\"osjs-window-button\" data-action=\"minimize\">\r\n      <div></div>\r\n    </div>\r\n    <div class=\"osjs-window-button\" data-action=\"maximize\">\r\n      <div></div>\r\n    </div>\r\n    <div class=\"osjs-window-button\" data-action=\"close\">\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"osjs-window-content\">\r\n  </div>\r\n  <div class=\"osjs-window-resize\" data-direction=\"n\"></div>\r\n  <div class=\"osjs-window-resize\" data-direction=\"nw\"></div>\r\n  <div class=\"osjs-window-resize\" data-direction=\"w\"></div>\r\n  <div class=\"osjs-window-resize\" data-direction=\"sw\"></div>\r\n  <div class=\"osjs-window-resize\" data-direction=\"s\"></div>\r\n  <div class=\"osjs-window-resize\" data-direction=\"se\"></div>\r\n  <div class=\"osjs-window-resize\" data-direction=\"e\"></div>\r\n  <div class=\"osjs-window-resize\" data-direction=\"ne\"></div>\r\n</div>`.replace(/\\n\\s+/g, '').trim();\r\n\r\n/**\r\n * Window Implementation\r\n */\r\nexport default class Window extends EventEmitter {\r\n\r\n  /**\r\n   * Create window\r\n   *\r\n   * @param {Core} core Core reference\r\n   * @param {WindowOptions} [options={}] Options\r\n   */\r\n  constructor(core, options = {}) {\r\n    options = {\r\n      id: null,\r\n      title: null,\r\n      parent: null,\r\n      template: null,\r\n      ondestroy: null,\r\n      attributes: {},\r\n      position: {},\r\n      dimension: {},\r\n      state: {},\r\n      ...options\r\n    };\r\n\r\n    logger.debug('Window::constructor()', options);\r\n\r\n    super('Window@' + options.id);\r\n\r\n    if (typeof options.position === 'string') {\r\n      options.attributes.gravity = options.position;\r\n      options.position = {};\r\n    }\r\n\r\n    /**\r\n     * The Window ID\r\n     * @type {string}\r\n     * @readonly\r\n     */\r\n    this.id = options.id;\r\n\r\n    /**\r\n     * The Window ID\r\n     * @type {Number}\r\n     * @readonly\r\n     */\r\n    this.wid = ++windowCount;\r\n\r\n    /**\r\n     * Parent Window reference\r\n     * @type {Window}\r\n     * @readonly\r\n     */\r\n    this.parent = options.parent;\r\n\r\n    /**\r\n     * Child windows (via 'parent')\r\n     * @type {Window[]}\r\n     */\r\n    this.children = [];\r\n\r\n    /**\r\n     * Core instance reference\r\n     * @type {Core}\r\n     * @readonly\r\n     */\r\n    this.core = core;\r\n\r\n    /**\r\n     * The window destruction state\r\n     * @type {boolean}\r\n     */\r\n    this.destroyed = false;\r\n\r\n    /**\r\n     * The window rendered state\r\n     * @type {boolean}\r\n     */\r\n    this.rendered = false;\r\n\r\n    /**\r\n     * The window was inited\r\n     * @type {boolean}\r\n     */\r\n    this.inited = false;\r\n\r\n    /**\r\n     * The window attributes\r\n     * @type {WindowAttributes}\r\n     */\r\n    this.attributes = createAttributes(options.attributes);\r\n\r\n    /**\r\n     * The window state\r\n     * @type {WindowState}\r\n     */\r\n    this.state = createState(options.state, options, this.attributes);\r\n\r\n    /**\r\n     * The window container\r\n     * @type {Element}\r\n     * @readonly\r\n     */\r\n    this.$element = document.createElement('div');\r\n\r\n    /**\r\n     * The content container\r\n     * @type {Element}\r\n     */\r\n    this.$content = null;\r\n\r\n    /**\r\n     * The header container\r\n     * @type {Element}\r\n     */\r\n    this.$header = null;\r\n\r\n    /**\r\n     * The icon container\r\n     * @type {Element}\r\n     */\r\n    this.$icon = null;\r\n\r\n    /**\r\n     * The title container\r\n     * @type {Element}\r\n     */\r\n    this.$title = null;\r\n\r\n    /**\r\n     * Internal variable to signal not to use default position\r\n     * given by user (used for restore)\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    this._preventDefaultPosition = false;\r\n\r\n    /**\r\n     * Internal timeout reference used for triggering the loading\r\n     * overlay.\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    this._loadingDebounce = null;\r\n\r\n    /**\r\n     * The window template\r\n     * @private\r\n     * @type {string|Function}\r\n     */\r\n    this._template = options.template;\r\n\r\n    /**\r\n     * Custom destructor callback\r\n     * @private\r\n     * @type {Function}\r\n     * @readonly\r\n     */\r\n    this._ondestroy = options.ondestroy || (() => true);\r\n\r\n    /**\r\n     * Last DOM update CSS text\r\n     * @private\r\n     * @type {string}\r\n     */\r\n    this._lastCssText = '';\r\n\r\n    /**\r\n     * Last DOM update data attributes\r\n     * @private\r\n     * @type {WindowAttributes}\r\n     */\r\n    this._lastAttributes = {};\r\n\r\n    windows.push(this);\r\n  }\r\n\r\n  /**\r\n   * Destroy window\r\n   */\r\n  destroy() {\r\n    if (this.destroyed) {\r\n      return;\r\n    }\r\n\r\n    if (typeof this._ondestroy === 'function' && this._ondestroy() === false) {\r\n      return;\r\n    }\r\n\r\n    this.destroyed = true;\r\n\r\n    logger.debug('Window::destroy()');\r\n\r\n    this.emit('destroy', this);\r\n    this.core.emit('osjs/window:destroy', this);\r\n\r\n    this.children.forEach(w => w.destroy());\r\n\r\n    if (this.$element) {\r\n      this.$element.remove();\r\n    }\r\n\r\n    if (lastWindow === this) {\r\n      lastWindow = null;\r\n    }\r\n\r\n    const foundIndex = windows.findIndex(w => w === this);\r\n    if (foundIndex !== -1) {\r\n      windows.splice(foundIndex, 1);\r\n    }\r\n\r\n    this.children = [];\r\n    this.parent = null;\r\n    this.$element = null;\r\n    this.$content = null;\r\n    this.$header = null;\r\n    this.$icon = null;\r\n    this.$title = null;\r\n\r\n    super.destroy();\r\n  }\r\n\r\n  /**\r\n   * Initialize window\r\n   */\r\n  init() {\r\n    if (this.inited) {\r\n      return this;\r\n    }\r\n\r\n    if (this.parent) {\r\n      // Assign the window if it is a child\r\n      this.on('destroy', () => {\r\n        const foundIndex = this.parent.children.findIndex(w => w === this);\r\n        if (foundIndex !== -1) {\r\n          this.parent.children.splice(foundIndex, 1);\r\n        }\r\n      });\r\n\r\n      this.parent.children.push(this);\r\n    }\r\n\r\n    this._initTemplate();\r\n    this._initBehavior();\r\n\r\n\r\n    this.inited = true;\r\n    this.emit('init', this);\r\n    this.core.emit('osjs/window:create', this);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Initializes window template\r\n   * @private\r\n   */\r\n  _initTemplate() {\r\n    const tpl = this.core.config('windows.template') || TEMPLATE;\r\n    if (this._template) {\r\n      this.$element.innerHTML = typeof this._template === 'function'\r\n        ? this._template(this, tpl)\r\n        : this._template;\r\n    } else {\r\n      this.$element.innerHTML = tpl;\r\n    }\r\n\r\n    this.$content = this.$element.querySelector('.osjs-window-content');\r\n    this.$header = this.$element.querySelector('.osjs-window-header');\r\n    this.$icon = this.$element.querySelector('.osjs-window-icon > div');\r\n    this.$title = this.$element.querySelector('.osjs-window-title');\r\n  }\r\n\r\n  /**\r\n   * Initializes window behavior\r\n   * @private\r\n   */\r\n  _initBehavior() {\r\n    // Transform percentages in dimension to pixels etc\r\n    if (this.core.has('osjs/desktop')) {\r\n      const rect = this.core.make('osjs/desktop').getRect();\r\n      const {dimension, position} = transformVectors(rect, this.state.dimension, this.state.position);\r\n      this.state.dimension = dimension;\r\n      this.state.position = position;\r\n    }\r\n\r\n    // Behavior\r\n    const behavior = this.core.make('osjs/window-behavior');\r\n    if (behavior) {\r\n      behavior.init(this);\r\n    }\r\n\r\n    // DnD functionality\r\n    if (this.attributes.droppable) {\r\n      const {dataTransferProperty = 'files'} = this.attributes.droppable === true\r\n        ? {}\r\n        : this.attributes.droppable;\r\n\r\n      const d = droppable(this.$element, {\r\n        ondragenter: (...args) => this.emit('dragenter', ...args, this),\r\n        ondragover: (...args) => this.emit('dragover', ...args, this),\r\n        ondragleave: (...args) => this.emit('dragleave', ...args, this),\r\n        ondrop: (...args) => this.emit('drop', ...args, this),\r\n        dataTransferProperty,\r\n      });\r\n\r\n      this.on('destroy', () => d.destroy());\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks the modal state of the window upon render\r\n   * @private\r\n   */\r\n  _checkModal() {\r\n    // TODO: Global modal\r\n    if (this.parent) {\r\n      if (this.attributes.modal) {\r\n        this.on('render', () => this.parent.setState('loading', true));\r\n        this.on('destroy', () => this.parent.setState('loading', false));\r\n      }\r\n\r\n      this.on('destroy', () => this.parent.focus());\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the initial class names\r\n   * @private\r\n   */\r\n  _setClassNames() {\r\n    const classNames = ['osjs-window', ...this.attributes.classNames];\r\n    if (this.id) {\r\n      classNames.push(`Window_${this.id}`);\r\n    }\r\n\r\n    classNames.filter(val => !!val)\r\n      .forEach((val) => this.$element.classList.add(val));\r\n  }\r\n\r\n  /**\r\n   * Render window\r\n   * @param {Function} [callback] Callback when window DOM has been constructed\r\n   * @return {Window} this instance\r\n   */\r\n  render(callback = function() {}) {\r\n    if (this.rendered) {\r\n      return this;\r\n    } else if (!this.inited) {\r\n      this.init();\r\n    }\r\n\r\n    this._setClassNames();\r\n    this._updateButtons();\r\n    this._updateAttributes();\r\n    this._updateStyles();\r\n    this._updateTitle();\r\n    this._updateIconStyles();\r\n    this._updateHeaderStyles();\r\n    this._checkModal();\r\n\r\n    if (!this._preventDefaultPosition) {\r\n      this.gravitate(this.attributes.gravity);\r\n    }\r\n\r\n    // Clamp the initial window position to viewport\r\n    if (this.attributes.clamp) {\r\n      this.clampToViewport(false);\r\n    }\r\n\r\n    this.setNextZindex(true);\r\n\r\n    this.core.$contents.appendChild(this.$element);\r\n\r\n    renderCallback(this, callback);\r\n\r\n    this.rendered = true;\r\n\r\n    setTimeout(() => {\r\n      this.emit('render', this);\r\n      this.core.emit('osjs/window:render', this);\r\n    }, 1);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Close the window\r\n   * @return {boolean}\r\n   */\r\n  close() {\r\n    if (this.destroyed) {\r\n      return false;\r\n    }\r\n\r\n    this.emit('close', this);\r\n\r\n    this.destroy();\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Focus the window\r\n   * @return {boolean}\r\n   */\r\n  focus() {\r\n    if (!this.state.minimized && this._toggleState('focused', true, 'focus')) {\r\n      this._focus();\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Internal for focus\r\n   * @private\r\n   */\r\n  _focus() {\r\n    if (lastWindow && lastWindow !== this) {\r\n      lastWindow.blur();\r\n    }\r\n\r\n    lastWindow = this;\r\n\r\n    this.setNextZindex();\r\n  }\r\n\r\n  /**\r\n   * Blur (un-focus) the window\r\n   * @return {boolean}\r\n   */\r\n  blur() {\r\n    // Forces blur-ing of browser input element belonging to this window\r\n    const activeElement = getActiveElement(this.$element);\r\n    if (activeElement) {\r\n      activeElement.blur();\r\n    }\r\n\r\n    return this._toggleState('focused', false, 'blur');\r\n  }\r\n\r\n  /**\r\n   * Minimize (hide) the window\r\n   * @return {boolean}\r\n   */\r\n  minimize() {\r\n    if (this.attributes.minimizable) {\r\n      if (this._toggleState('minimized', true, 'minimize')) {\r\n        this.blur();\r\n\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Raise (un-minimize) the window\r\n   * @return {boolean}\r\n   */\r\n  raise() {\r\n    return this._toggleState('minimized', false, 'raise');\r\n  }\r\n\r\n  /**\r\n   * Maximize the window\r\n   * @return {boolean}\r\n   */\r\n  maximize() {\r\n    if (this.attributes.maximizable) {\r\n      return this._maximize(true);\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Restore (un-maximize) the window\r\n   * @return {boolean}\r\n   */\r\n  restore() {\r\n    return this._maximize(false);\r\n  }\r\n\r\n  /**\r\n   * Internal for Maximize or restore\r\n   * @private\r\n   * @param {boolean} toggle Maximize or restore\r\n   * @return {boolean}\r\n   */\r\n  _maximize(toggle) {\r\n    if (this._toggleState('maximized', toggle, toggle ? 'maximize' : 'restore')) {\r\n      const emit = () => this.emit('resized', {\r\n        width: this.$element ? this.$element.offsetWidth : -1,\r\n        height: this.$element ? this.$element.offsetHeight : -1\r\n      }, this);\r\n\r\n      if (supportsTransition()) {\r\n        this.once('transitionend', emit);\r\n      } else {\r\n        emit();\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Resize to fit to current container\r\n   * @param {Element} [container] The DOM element to use\r\n   */\r\n  resizeFit(container) {\r\n    container = container || this.$content.firstChild;\r\n\r\n    if (container) {\r\n      const rect = this.core.has('osjs/desktop')\r\n        ? this.core.make('osjs/desktop').getRect()\r\n        : null;\r\n\r\n      const {width, height} = dimensionFromElement(this, rect, container);\r\n      if (!isNaN(width) && !isNaN(height)) {\r\n        this.setDimension({width, height});\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clamps the position to viewport\r\n   * @param {boolean} [update=true] Update DOM\r\n   */\r\n  clampToViewport(update = true) {\r\n    if (!this.core.has('osjs/desktop')) {\r\n      return;\r\n    }\r\n\r\n    const rect = this.core.make('osjs/desktop').getRect();\r\n\r\n    this.state.position = {\r\n      ...this.state.position,\r\n      ...clampPosition(rect, this.state)\r\n    };\r\n\r\n    if (update) {\r\n      this._updateStyles();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the Window icon\r\n   * @param {string} uri Icon URI\r\n   */\r\n  setIcon(uri) {\r\n    this.state.icon = uri;\r\n\r\n    this._updateIconStyles();\r\n  }\r\n\r\n  /**\r\n   * Set the Window title\r\n   * @param {string} title Title\r\n   */\r\n  setTitle(title) {\r\n    this.state.title = title || '';\r\n\r\n    this._updateTitle();\r\n\r\n    this.core.emit('osjs/window:change', this, 'title', title);\r\n  }\r\n\r\n  /**\r\n   * Set the Window dimension\r\n   * @param {WindowDimension} dimension The dimension\r\n   */\r\n  setDimension(dimension) {\r\n    const {width, height} = {...this.state.dimension, ...dimension || {}};\r\n\r\n    this.state.dimension.width = width;\r\n    this.state.dimension.height = height;\r\n\r\n    this._updateStyles();\r\n  }\r\n\r\n  /**\r\n   * Set the Window position\r\n   * @param {WindowPosition} position The position\r\n   * @param {boolean} [preventDefault=false] Prevents any future position setting in init procedure\r\n   */\r\n  setPosition(position, preventDefault = false) {\r\n    const {left, top} = {...this.state.position, ...position || {}};\r\n\r\n    this.state.position.top = top;\r\n    this.state.position.left = left;\r\n\r\n    if (preventDefault) {\r\n      this._preventDefaultPosition = true;\r\n    }\r\n\r\n    this._updateStyles();\r\n  }\r\n\r\n  /**\r\n   * Set the Window z index\r\n   * @param {Number} zIndex the index\r\n   */\r\n  setZindex(zIndex) {\r\n    this.state.zIndex = zIndex;\r\n    logger.debug('Window::setZindex()', zIndex);\r\n\r\n    this._updateStyles();\r\n  }\r\n\r\n  /**\r\n   * Sets the Window to next z index\r\n   * @param {boolean} [force] Force next index\r\n   */\r\n  setNextZindex(force) {\r\n    const setNext = force || this._checkNextZindex();\r\n\r\n    if (setNext) {\r\n      this.setZindex(nextZindex);\r\n      nextZindex++;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a state by value\r\n   * @param {string} name State name\r\n   * @param {*} value State value\r\n   * @param {boolean} [update=true] Update the DOM\r\n   * @see {WindowState}\r\n   */\r\n  setState(name, value, update = true) {\r\n    const set = () => this._setState(name, value, update);\r\n\r\n    // Allows for some \"grace time\" so the overlay does not\r\n    // \"blink\"\r\n    if (name === 'loading' && update) {\r\n      clearTimeout(this._loadingDebounce);\r\n\r\n      if (value === true) {\r\n        this._loadingDebounce = setTimeout(() => set(), 250);\r\n        return;\r\n      }\r\n    }\r\n\r\n    set();\r\n  }\r\n\r\n  /**\r\n   * Gravitates window towards a certain area\r\n   * @param {string} gravity Gravity\r\n   */\r\n  gravitate(gravity) {\r\n    if (!this.core.has('osjs/desktop')) {\r\n      return;\r\n    }\r\n\r\n    const rect = this.core.make('osjs/desktop').getRect();\r\n    const position = positionFromGravity(this, rect, gravity);\r\n\r\n    this.setPosition(position);\r\n  }\r\n\r\n  /**\r\n   * Gets a astate\r\n   * @return {*}\r\n   */\r\n  getState(n) {\r\n    const value = this.state[n];\r\n\r\n    return ['position', 'dimension', 'styles'].indexOf(n) !== -1\r\n      ? {...value}\r\n      : value;\r\n  }\r\n\r\n  /**\r\n   * Get a snapshot of the Window session\r\n   * @return {WindowSession}\r\n   */\r\n  getSession() {\r\n    return this.attributes.sessionable === false ? null : {\r\n      id: this.id,\r\n      maximized: this.state.maximized,\r\n      minimized: this.state.minimized,\r\n      position: {...this.state.position},\r\n      dimension: {...this.state.dimension}\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get a list of all windows\r\n   *\r\n   * @return {Window[]}\r\n   */\r\n  static getWindows() {\r\n    return windows;\r\n  }\r\n\r\n  /**\r\n   * Gets the lastly focused Window\r\n   * @return {Window}\r\n   */\r\n  static lastWindow() {\r\n    return lastWindow;\r\n  }\r\n\r\n  /**\r\n   * Internal method for setting state\r\n   * @private\r\n   * @param {string} name State name\r\n   * @param {*} value State value\r\n   * @param {boolean} [update=true] Update the DOM\r\n   * @param {boolean} [updateAll=true] Update the entire DOM\r\n   */\r\n  _setState(name, value, update = true) {\r\n    const oldValue = this.state[name];\r\n    this.state[name] = value;\r\n\r\n    if (update) {\r\n      if (oldValue !== value) {\r\n        logger.debug('Window::_setState()', name, value);\r\n      }\r\n\r\n      this._updateAttributes();\r\n      this._updateStyles();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Internal method for toggling state\r\n   * @private\r\n   * @param {string} name State name\r\n   * @param {any} value State value\r\n   * @param {string} eventName Name of event to emit\r\n   * @param {boolean} [update=true] Update the DOM\r\n   */\r\n  _toggleState(name, value, eventName, update = true) {\r\n    if (this.state[name] === value) {\r\n      return false;\r\n    }\r\n\r\n    logger.debug('Window::_toggleState()', name, value, eventName, update);\r\n\r\n    this.state[name] = value;\r\n    this.emit(eventName, this);\r\n    this.core.emit('osjs/window:change', this, name, value);\r\n\r\n    if (update) {\r\n      this._updateAttributes();\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if we have to set next zindex\r\n   * @private\r\n   * @return {boolean}\r\n   */\r\n  _checkNextZindex() {\r\n    const {ontop} = this.attributes;\r\n    const {zIndex} = this.state;\r\n\r\n    const windexes = windows\r\n      .filter(w => w.attributes.ontop === ontop)\r\n      .filter(w => w.wid !== this.wid)\r\n      .map(w => w.state.zIndex);\r\n\r\n    const max = windexes.length > 0\r\n      ? Math.max.apply(null, windexes)\r\n      : 0;\r\n\r\n    return zIndex < max;\r\n  }\r\n\r\n  /*\r\n   * Updates window styles and attributes\r\n   * FIXME: Backward compability with themes\r\n   * @deprecated\r\n   */\r\n  _updateDOM() {\r\n    this._updateAttributes();\r\n    this._updateStyles();\r\n  }\r\n\r\n  /**\r\n   * Updates the window buttons in DOM\r\n   * @private\r\n   */\r\n  _updateButtons() {\r\n    const hideButton = action =>\r\n      this.$header.querySelector(`.osjs-window-button[data-action=${action}]`)\r\n        .style.display = 'none';\r\n\r\n    const buttonmap = {\r\n      maximizable: 'maximize',\r\n      minimizable: 'minimize',\r\n      closeable: 'close'\r\n    };\r\n\r\n    if (this.attributes.controls) {\r\n      Object.keys(buttonmap)\r\n        .forEach(key => {\r\n          if (!this.attributes[key]) {\r\n            hideButton(buttonmap[key]);\r\n          }\r\n        });\r\n    } else {\r\n      Array.from(this.$header.querySelectorAll('.osjs-window-button'))\r\n        .forEach(el => el.style.display = 'none');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates window title in DOM\r\n   * @private\r\n   */\r\n  _updateTitle() {\r\n    if (this.$title) {\r\n      const escapedTitle = escapeHtml(this.state.title);\r\n      if (this.$title.innerHTML !== escapedTitle) {\r\n        this.$title.innerHTML = escapedTitle;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates window icon decoration in DOM\r\n   * @private\r\n   */\r\n  _updateIconStyles() {\r\n    if (this.$icon) {\r\n      const iconSource = `url(${this.state.icon})`;\r\n      if (this.$icon.style.backgroundImage !== iconSource) {\r\n        this.$icon.style.backgroundImage = iconSource;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates window header decoration in DOM\r\n   * @private\r\n   */\r\n  _updateHeaderStyles() {\r\n    if (this.$header) {\r\n      const headerDisplay = this.attributes.header ? undefined : 'none';\r\n      if (this.$header.style.display !== headerDisplay) {\r\n        this.$header.style.display = headerDisplay;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates window data in DOM\r\n   * @private\r\n   */\r\n  _updateAttributes() {\r\n    if (this.$element) {\r\n      const attrs = createDOMAttributes(this.id, this.state, this.attributes);\r\n      const applyAttrs = Object.keys(attrs).filter(k => attrs[k] !== this._lastAttributes[k]);\r\n\r\n      if (applyAttrs.length > 0) {\r\n        applyAttrs.forEach(a => this.$element.setAttribute(`data-${a}`, String(attrs[a])));\r\n        this._lastAttributes = attrs;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates window style in DOM\r\n   * @private\r\n   */\r\n  _updateStyles() {\r\n    if (this.$element) {\r\n      const cssText = createCssText(createDOMStyles(this.state, this.attributes));\r\n      if (cssText !== this._lastCssText) {\r\n        this.$element.style.cssText = cssText;\r\n        this._lastCssText = cssText;\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}